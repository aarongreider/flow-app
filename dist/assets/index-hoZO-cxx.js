function Yb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function T1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var x1={exports:{}},Ud={},I1={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),Qb=Symbol.for("react.portal"),Jb=Symbol.for("react.fragment"),Zb=Symbol.for("react.strict_mode"),eN=Symbol.for("react.profiler"),tN=Symbol.for("react.provider"),nN=Symbol.for("react.context"),rN=Symbol.for("react.forward_ref"),iN=Symbol.for("react.suspense"),sN=Symbol.for("react.memo"),oN=Symbol.for("react.lazy"),M_=Symbol.iterator;function aN(t){return t===null||typeof t!="object"?null:(t=M_&&t[M_]||t["@@iterator"],typeof t=="function"?t:null)}var C1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A1=Object.assign,P1={};function xa(t,e,n){this.props=t,this.context=e,this.refs=P1,this.updater=n||C1}xa.prototype.isReactComponent={};xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function R1(){}R1.prototype=xa.prototype;function uy(t,e,n){this.props=t,this.context=e,this.refs=P1,this.updater=n||C1}var cy=uy.prototype=new R1;cy.constructor=uy;A1(cy,xa.prototype);cy.isPureReactComponent=!0;var V_=Array.isArray,k1=Object.prototype.hasOwnProperty,hy={current:null},b1={key:!0,ref:!0,__self:!0,__source:!0};function N1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)k1.call(e,r)&&!b1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Du,type:t,key:s,ref:o,props:i,_owner:hy.current}}function lN(t,e){return{$$typeof:Du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Du}function uN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var L_=/\/+/g;function qf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uN(""+t.key):e.toString(36)}function nh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Du:case Qb:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+qf(o,0):r,V_(i)?(n="",t!=null&&(n=t.replace(L_,"$&/")+"/"),nh(i,e,n,"",function(u){return u})):i!=null&&(dy(i)&&(i=lN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(L_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",V_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+qf(s,a);o+=nh(s,e,n,l,i)}else if(l=aN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+qf(s,a++),o+=nh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sc(t,e,n){if(t==null)return t;var r=[],i=0;return nh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function cN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},rh={transition:null},hN={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:rh,ReactCurrentOwner:hy};ve.Children={map:Sc,forEach:function(t,e,n){Sc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sc(t,function(){e++}),e},toArray:function(t){return Sc(t,function(e){return e})||[]},only:function(t){if(!dy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=xa;ve.Fragment=Jb;ve.Profiler=eN;ve.PureComponent=uy;ve.StrictMode=Zb;ve.Suspense=iN;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hN;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=A1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)k1.call(e,l)&&!b1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Du,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:nN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tN,_context:t},t.Consumer=t};ve.createElement=N1;ve.createFactory=function(t){var e=N1.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:rN,render:t}};ve.isValidElement=dy;ve.lazy=function(t){return{$$typeof:oN,_payload:{_status:-1,_result:t},_init:cN}};ve.memo=function(t,e){return{$$typeof:sN,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=rh.transition;rh.transition={};try{t()}finally{rh.transition=e}};ve.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ve.useCallback=function(t,e){return ln.current.useCallback(t,e)};ve.useContext=function(t){return ln.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};ve.useEffect=function(t,e){return ln.current.useEffect(t,e)};ve.useId=function(){return ln.current.useId()};ve.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return ln.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};ve.useRef=function(t){return ln.current.useRef(t)};ve.useState=function(t){return ln.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return ln.current.useTransition()};ve.version="18.2.0";I1.exports=ve;var T=I1.exports;const G=T1(T),dN=Yb({__proto__:null,default:G},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fN=T,pN=Symbol.for("react.element"),mN=Symbol.for("react.fragment"),gN=Object.prototype.hasOwnProperty,yN=fN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vN={key:!0,ref:!0,__self:!0,__source:!0};function D1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gN.call(e,r)&&!vN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:pN,type:t,key:s,ref:o,props:i,_owner:yN.current}}Ud.Fragment=mN;Ud.jsx=D1;Ud.jsxs=D1;x1.exports=Ud;var L=x1.exports,om={},M1={exports:{}},Dn={},V1={exports:{}},L1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,O){var B=F.length;F.push(O);e:for(;0<B;){var W=B-1>>>1,K=F[W];if(0<i(K,O))F[W]=O,F[B]=K,B=W;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var O=F[0],B=F.pop();if(B!==O){F[0]=B;e:for(var W=0,K=F.length,Q=K>>>1;W<Q;){var ee=2*(W+1)-1,oe=F[ee],se=ee+1,pe=F[se];if(0>i(oe,B))se<K&&0>i(pe,oe)?(F[W]=pe,F[se]=B,W=se):(F[W]=oe,F[ee]=B,W=ee);else if(se<K&&0>i(pe,B))F[W]=pe,F[se]=B,W=se;else break e}}return O}function i(F,O){var B=F.sortIndex-O.sortIndex;return B!==0?B:F.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,m=!1,E=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=F)r(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(u)}}function I(F){if(w=!1,S(F),!E)if(n(l)!==null)E=!0,j(R);else{var O=n(u);O!==null&&z(I,O.startTime-F)}}function R(F,O){E=!1,w&&(w=!1,g(_),_=-1),m=!0;var B=f;try{for(S(O),d=n(l);d!==null&&(!(d.expirationTime>O)||F&&!N());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var K=W(d.expirationTime<=O);O=t.unstable_now(),typeof K=="function"?d.callback=K:d===n(l)&&r(l),S(O)}else r(l);d=n(l)}if(d!==null)var Q=!0;else{var ee=n(u);ee!==null&&z(I,ee.startTime-O),Q=!1}return Q}finally{d=null,f=B,m=!1}}var M=!1,C=null,_=-1,A=5,k=-1;function N(){return!(t.unstable_now()-k<A)}function D(){if(C!==null){var F=t.unstable_now();k=F;var O=!0;try{O=C(!0,F)}finally{O?P():(M=!1,C=null)}}else M=!1}var P;if(typeof y=="function")P=function(){y(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,U=V.port2;V.port1.onmessage=D,P=function(){U.postMessage(null)}}else P=function(){x(D,0)};function j(F){C=F,M||(M=!0,P())}function z(F,O){_=x(function(){F(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,j(R))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var B=f;f=O;try{return F()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,O){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var B=f;f=F;try{return O()}finally{f=B}},t.unstable_scheduleCallback=function(F,O,B){var W=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?W+B:W):B=W,F){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=B+K,F={id:h++,callback:O,priorityLevel:F,startTime:B,expirationTime:K,sortIndex:-1},B>W?(F.sortIndex=B,e(u,F),n(l)===null&&F===n(u)&&(w?(g(_),_=-1):w=!0,z(I,B-W))):(F.sortIndex=K,e(l,F),E||m||(E=!0,j(R))),F},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(F){var O=f;return function(){var B=f;f=O;try{return F.apply(this,arguments)}finally{f=B}}}})(L1);V1.exports=L1;var _N=V1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=T,kn=_N;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F1=new Set,Wl={};function Zs(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(Wl[t]=e,t=0;t<e.length;t++)F1.add(e[t])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=Object.prototype.hasOwnProperty,wN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O_={},F_={};function EN(t){return am.call(F_,t)?!0:am.call(O_,t)?!1:wN.test(t)?F_[t]=!0:(O_[t]=!0,!1)}function SN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TN(t,e,n,r){if(e===null||typeof e>"u"||SN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var fy=/[\-:]([a-z])/g;function py(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fy,py);Mt[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fy,py);Mt[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fy,py);Mt[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function my(t,e,n,r){var i=Mt.hasOwnProperty(e)?Mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TN(e,n,i,r)&&(n=null),r||i===null?EN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fi=O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),gy=Symbol.for("react.strict_mode"),lm=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),j1=Symbol.for("react.context"),yy=Symbol.for("react.forward_ref"),um=Symbol.for("react.suspense"),cm=Symbol.for("react.suspense_list"),vy=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),$1=Symbol.for("react.offscreen"),U_=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=U_&&t[U_]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Xf;function hl(t){if(Xf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xf=e&&e[1]||""}return`
`+Xf+t}var Yf=!1;function Qf(t,e){if(!t||Yf)return"";Yf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hl(t):""}function xN(t){switch(t.tag){case 5:return hl(t.type);case 16:return hl("Lazy");case 13:return hl("Suspense");case 19:return hl("SuspenseList");case 0:case 2:case 15:return t=Qf(t.type,!1),t;case 11:return t=Qf(t.type.render,!1),t;case 1:return t=Qf(t.type,!0),t;default:return""}}function hm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case Eo:return"Portal";case lm:return"Profiler";case gy:return"StrictMode";case um:return"Suspense";case cm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case j1:return(t.displayName||"Context")+".Consumer";case U1:return(t._context.displayName||"Context")+".Provider";case yy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vy:return e=t.displayName||null,e!==null?e:hm(t.type)||"Memo";case Si:e=t._payload,t=t._init;try{return hm(t(e))}catch{}}return null}function IN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hm(e);case 8:return e===gy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CN(t){var e=B1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xc(t){t._valueTracker||(t._valueTracker=CN(t))}function z1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=B1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dm(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function j_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function H1(t,e){e=e.checked,e!=null&&my(t,"checked",e,!1)}function fm(t,e){H1(t,e);var n=Zi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pm(t,e.type,n):e.hasOwnProperty("defaultValue")&&pm(t,e.type,Zi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pm(t,e,n){(e!=="number"||bh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dl=Array.isArray;function Uo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function mm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(dl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zi(n)}}function W1(t,e){var n=Zi(e.value),r=Zi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function z_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function K1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?K1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ic,G1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ic.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AN=["Webkit","ms","Moz","O"];Object.keys(Tl).forEach(function(t){AN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tl[e]=Tl[t]})});function q1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Tl.hasOwnProperty(t)&&Tl[t]?(""+e).trim():e+"px"}function X1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=q1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var PN=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(t,e){if(e){if(PN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function vm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=null;function _y(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wm=null,jo=null,$o=null;function H_(t){if(t=Lu(t)){if(typeof wm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Hd(e),wm(t.stateNode,t.type,e))}}function Y1(t){jo?$o?$o.push(t):$o=[t]:jo=t}function Q1(){if(jo){var t=jo,e=$o;if($o=jo=null,H_(t),e)for(t=0;t<e.length;t++)H_(e[t])}}function J1(t,e){return t(e)}function Z1(){}var Jf=!1;function ex(t,e,n){if(Jf)return t(e,n);Jf=!0;try{return J1(t,e,n)}finally{Jf=!1,(jo!==null||$o!==null)&&(Z1(),Q1())}}function Gl(t,e){var n=t.stateNode;if(n===null)return null;var r=Hd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Em=!1;if(ti)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){Em=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{Em=!1}function RN(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var xl=!1,Nh=null,Dh=!1,Sm=null,kN={onError:function(t){xl=!0,Nh=t}};function bN(t,e,n,r,i,s,o,a,l){xl=!1,Nh=null,RN.apply(kN,arguments)}function NN(t,e,n,r,i,s,o,a,l){if(bN.apply(this,arguments),xl){if(xl){var u=Nh;xl=!1,Nh=null}else throw Error(Y(198));Dh||(Dh=!0,Sm=u)}}function eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function W_(t){if(eo(t)!==t)throw Error(Y(188))}function DN(t){var e=t.alternate;if(!e){if(e=eo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return W_(i),t;if(s===r)return W_(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function nx(t){return t=DN(t),t!==null?rx(t):null}function rx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rx(t);if(e!==null)return e;t=t.sibling}return null}var ix=kn.unstable_scheduleCallback,K_=kn.unstable_cancelCallback,MN=kn.unstable_shouldYield,VN=kn.unstable_requestPaint,it=kn.unstable_now,LN=kn.unstable_getCurrentPriorityLevel,wy=kn.unstable_ImmediatePriority,sx=kn.unstable_UserBlockingPriority,Mh=kn.unstable_NormalPriority,ON=kn.unstable_LowPriority,ox=kn.unstable_IdlePriority,jd=null,_r=null;function FN(t){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(jd,t,void 0,(t.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:$N,UN=Math.log,jN=Math.LN2;function $N(t){return t>>>=0,t===0?32:31-(UN(t)/jN|0)|0}var Cc=64,Ac=4194304;function fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=fl(a):(s&=o,s!==0&&(r=fl(s)))}else o=n&~i,o!==0?r=fl(o):s!==0&&(r=fl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ir(e),i=1<<n,r|=t[n],e&=~i;return r}function BN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ir(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=BN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ax(){var t=Cc;return Cc<<=1,!(Cc&4194240)&&(Cc=64),t}function Zf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ir(e),t[e]=n}function HN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ir(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ey(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ir(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function lx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ux,Sy,cx,hx,dx,xm=!1,Pc=[],Fi=null,Ui=null,ji=null,ql=new Map,Xl=new Map,Ai=[],WN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G_(t,e){switch(t){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":ql.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(e.pointerId)}}function Ja(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Lu(e),e!==null&&Sy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function KN(t,e,n,r,i){switch(e){case"focusin":return Fi=Ja(Fi,t,e,n,r,i),!0;case"dragenter":return Ui=Ja(Ui,t,e,n,r,i),!0;case"mouseover":return ji=Ja(ji,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ql.set(s,Ja(ql.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xl.set(s,Ja(Xl.get(s)||null,t,e,n,r,i)),!0}return!1}function fx(t){var e=Cs(t.target);if(e!==null){var n=eo(e);if(n!==null){if(e=n.tag,e===13){if(e=tx(n),e!==null){t.blockedOn=e,dx(t.priority,function(){cx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ih(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Im(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_m=r,n.target.dispatchEvent(r),_m=null}else return e=Lu(n),e!==null&&Sy(e),t.blockedOn=n,!1;e.shift()}return!0}function q_(t,e,n){ih(t)&&n.delete(e)}function GN(){xm=!1,Fi!==null&&ih(Fi)&&(Fi=null),Ui!==null&&ih(Ui)&&(Ui=null),ji!==null&&ih(ji)&&(ji=null),ql.forEach(q_),Xl.forEach(q_)}function Za(t,e){t.blockedOn===e&&(t.blockedOn=null,xm||(xm=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,GN)))}function Yl(t){function e(i){return Za(i,t)}if(0<Pc.length){Za(Pc[0],t);for(var n=1;n<Pc.length;n++){var r=Pc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fi!==null&&Za(Fi,t),Ui!==null&&Za(Ui,t),ji!==null&&Za(ji,t),ql.forEach(e),Xl.forEach(e),n=0;n<Ai.length;n++)r=Ai[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ai.length&&(n=Ai[0],n.blockedOn===null);)fx(n),n.blockedOn===null&&Ai.shift()}var Bo=fi.ReactCurrentBatchConfig,Lh=!0;function qN(t,e,n,r){var i=Re,s=Bo.transition;Bo.transition=null;try{Re=1,Ty(t,e,n,r)}finally{Re=i,Bo.transition=s}}function XN(t,e,n,r){var i=Re,s=Bo.transition;Bo.transition=null;try{Re=4,Ty(t,e,n,r)}finally{Re=i,Bo.transition=s}}function Ty(t,e,n,r){if(Lh){var i=Im(t,e,n,r);if(i===null)up(t,e,r,Oh,n),G_(t,r);else if(KN(i,t,e,n,r))r.stopPropagation();else if(G_(t,r),e&4&&-1<WN.indexOf(t)){for(;i!==null;){var s=Lu(i);if(s!==null&&ux(s),s=Im(t,e,n,r),s===null&&up(t,e,r,Oh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else up(t,e,r,null,n)}}var Oh=null;function Im(t,e,n,r){if(Oh=null,t=_y(r),t=Cs(t),t!==null)if(e=eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Oh=t,null}function px(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LN()){case wy:return 1;case sx:return 4;case Mh:case ON:return 16;case ox:return 536870912;default:return 16}default:return 16}}var Mi=null,xy=null,sh=null;function mx(){if(sh)return sh;var t,e=xy,n=e.length,r,i="value"in Mi?Mi.value:Mi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return sh=i.slice(t,1<r?1-r:void 0)}function oh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rc(){return!0}function X_(){return!1}function Mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rc:X_,this.isPropagationStopped=X_,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rc)},persist:function(){},isPersistent:Rc}),e}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iy=Mn(Ia),Vu=Ye({},Ia,{view:0,detail:0}),YN=Mn(Vu),ep,tp,el,$d=Ye({},Vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==el&&(el&&t.type==="mousemove"?(ep=t.screenX-el.screenX,tp=t.screenY-el.screenY):tp=ep=0,el=t),ep)},movementY:function(t){return"movementY"in t?t.movementY:tp}}),Y_=Mn($d),QN=Ye({},$d,{dataTransfer:0}),JN=Mn(QN),ZN=Ye({},Vu,{relatedTarget:0}),np=Mn(ZN),eD=Ye({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),tD=Mn(eD),nD=Ye({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rD=Mn(nD),iD=Ye({},Ia,{data:0}),Q_=Mn(iD),sD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aD[t])?!!e[t]:!1}function Cy(){return lD}var uD=Ye({},Vu,{key:function(t){if(t.key){var e=sD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=oh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cy,charCode:function(t){return t.type==="keypress"?oh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cD=Mn(uD),hD=Ye({},$d,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J_=Mn(hD),dD=Ye({},Vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cy}),fD=Mn(dD),pD=Ye({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),mD=Mn(pD),gD=Ye({},$d,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yD=Mn(gD),vD=[9,13,27,32],Ay=ti&&"CompositionEvent"in window,Il=null;ti&&"documentMode"in document&&(Il=document.documentMode);var _D=ti&&"TextEvent"in window&&!Il,gx=ti&&(!Ay||Il&&8<Il&&11>=Il),Z_=" ",ew=!1;function yx(t,e){switch(t){case"keyup":return vD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var To=!1;function wD(t,e){switch(t){case"compositionend":return vx(e);case"keypress":return e.which!==32?null:(ew=!0,Z_);case"textInput":return t=e.data,t===Z_&&ew?null:t;default:return null}}function ED(t,e){if(To)return t==="compositionend"||!Ay&&yx(t,e)?(t=mx(),sh=xy=Mi=null,To=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gx&&e.locale!=="ko"?null:e.data;default:return null}}var SD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SD[t.type]:e==="textarea"}function _x(t,e,n,r){Y1(r),e=Fh(e,"onChange"),0<e.length&&(n=new Iy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cl=null,Ql=null;function TD(t){kx(t,0)}function Bd(t){var e=Co(t);if(z1(e))return t}function xD(t,e){if(t==="change")return e}var wx=!1;if(ti){var rp;if(ti){var ip="oninput"in document;if(!ip){var nw=document.createElement("div");nw.setAttribute("oninput","return;"),ip=typeof nw.oninput=="function"}rp=ip}else rp=!1;wx=rp&&(!document.documentMode||9<document.documentMode)}function rw(){Cl&&(Cl.detachEvent("onpropertychange",Ex),Ql=Cl=null)}function Ex(t){if(t.propertyName==="value"&&Bd(Ql)){var e=[];_x(e,Ql,t,_y(t)),ex(TD,e)}}function ID(t,e,n){t==="focusin"?(rw(),Cl=e,Ql=n,Cl.attachEvent("onpropertychange",Ex)):t==="focusout"&&rw()}function CD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bd(Ql)}function AD(t,e){if(t==="click")return Bd(e)}function PD(t,e){if(t==="input"||t==="change")return Bd(e)}function RD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lr=typeof Object.is=="function"?Object.is:RD;function Jl(t,e){if(lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!am.call(e,i)||!lr(t[i],e[i]))return!1}return!0}function iw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sw(t,e){var n=iw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iw(n)}}function Sx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Tx(){for(var t=window,e=bh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bh(t.document)}return e}function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kD(t){var e=Tx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Sx(n.ownerDocument.documentElement,n)){if(r!==null&&Py(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=sw(n,s);var o=sw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bD=ti&&"documentMode"in document&&11>=document.documentMode,xo=null,Cm=null,Al=null,Am=!1;function ow(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Am||xo==null||xo!==bh(r)||(r=xo,"selectionStart"in r&&Py(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Al&&Jl(Al,r)||(Al=r,r=Fh(Cm,"onSelect"),0<r.length&&(e=new Iy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xo)))}function kc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Io={animationend:kc("Animation","AnimationEnd"),animationiteration:kc("Animation","AnimationIteration"),animationstart:kc("Animation","AnimationStart"),transitionend:kc("Transition","TransitionEnd")},sp={},xx={};ti&&(xx=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function zd(t){if(sp[t])return sp[t];if(!Io[t])return t;var e=Io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xx)return sp[t]=e[n];return t}var Ix=zd("animationend"),Cx=zd("animationiteration"),Ax=zd("animationstart"),Px=zd("transitionend"),Rx=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function as(t,e){Rx.set(t,e),Zs(e,[t])}for(var op=0;op<aw.length;op++){var ap=aw[op],ND=ap.toLowerCase(),DD=ap[0].toUpperCase()+ap.slice(1);as(ND,"on"+DD)}as(Ix,"onAnimationEnd");as(Cx,"onAnimationIteration");as(Ax,"onAnimationStart");as("dblclick","onDoubleClick");as("focusin","onFocus");as("focusout","onBlur");as(Px,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MD=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function lw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,NN(r,e,void 0,t),t.currentTarget=null}function kx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;lw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;lw(i,a,u),s=l}}}if(Dh)throw t=Sm,Dh=!1,Sm=null,t}function Ue(t,e){var n=e[Nm];n===void 0&&(n=e[Nm]=new Set);var r=t+"__bubble";n.has(r)||(bx(e,t,2,!1),n.add(r))}function lp(t,e,n){var r=0;e&&(r|=4),bx(n,t,r,e)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Zl(t){if(!t[bc]){t[bc]=!0,F1.forEach(function(n){n!=="selectionchange"&&(MD.has(n)||lp(n,!1,t),lp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bc]||(e[bc]=!0,lp("selectionchange",!1,e))}}function bx(t,e,n,r){switch(px(e)){case 1:var i=qN;break;case 4:i=XN;break;default:i=Ty}n=i.bind(null,e,n,t),i=void 0,!Em||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function up(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Cs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ex(function(){var u=s,h=_y(n),d=[];e:{var f=Rx.get(t);if(f!==void 0){var m=Iy,E=t;switch(t){case"keypress":if(oh(n)===0)break e;case"keydown":case"keyup":m=cD;break;case"focusin":E="focus",m=np;break;case"focusout":E="blur",m=np;break;case"beforeblur":case"afterblur":m=np;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Y_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=JN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=fD;break;case Ix:case Cx:case Ax:m=tD;break;case Px:m=mD;break;case"scroll":m=YN;break;case"wheel":m=yD;break;case"copy":case"cut":case"paste":m=rD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=J_}var w=(e&4)!==0,x=!w&&t==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var y=u,S;y!==null;){S=y;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,g!==null&&(I=Gl(y,g),I!=null&&w.push(eu(y,I,S)))),x)break;y=y.return}0<w.length&&(f=new m(f,E,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==_m&&(E=n.relatedTarget||n.fromElement)&&(Cs(E)||E[ni]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(E=n.relatedTarget||n.toElement,m=u,E=E?Cs(E):null,E!==null&&(x=eo(E),E!==x||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=u),m!==E)){if(w=Y_,I="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=J_,I="onPointerLeave",g="onPointerEnter",y="pointer"),x=m==null?f:Co(m),S=E==null?f:Co(E),f=new w(I,y+"leave",m,n,h),f.target=x,f.relatedTarget=S,I=null,Cs(h)===u&&(w=new w(g,y+"enter",E,n,h),w.target=S,w.relatedTarget=x,I=w),x=I,m&&E)t:{for(w=m,g=E,y=0,S=w;S;S=fo(S))y++;for(S=0,I=g;I;I=fo(I))S++;for(;0<y-S;)w=fo(w),y--;for(;0<S-y;)g=fo(g),S--;for(;y--;){if(w===g||g!==null&&w===g.alternate)break t;w=fo(w),g=fo(g)}w=null}else w=null;m!==null&&uw(d,f,m,w,!1),E!==null&&x!==null&&uw(d,x,E,w,!0)}}e:{if(f=u?Co(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var R=xD;else if(tw(f))if(wx)R=PD;else{R=CD;var M=ID}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=AD);if(R&&(R=R(t,u))){_x(d,R,n,h);break e}M&&M(t,f,u),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&pm(f,"number",f.value)}switch(M=u?Co(u):window,t){case"focusin":(tw(M)||M.contentEditable==="true")&&(xo=M,Cm=u,Al=null);break;case"focusout":Al=Cm=xo=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,ow(d,n,h);break;case"selectionchange":if(bD)break;case"keydown":case"keyup":ow(d,n,h)}var C;if(Ay)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else To?yx(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(gx&&n.locale!=="ko"&&(To||_!=="onCompositionStart"?_==="onCompositionEnd"&&To&&(C=mx()):(Mi=h,xy="value"in Mi?Mi.value:Mi.textContent,To=!0)),M=Fh(u,_),0<M.length&&(_=new Q_(_,t,null,n,h),d.push({event:_,listeners:M}),C?_.data=C:(C=vx(n),C!==null&&(_.data=C)))),(C=_D?wD(t,n):ED(t,n))&&(u=Fh(u,"onBeforeInput"),0<u.length&&(h=new Q_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}kx(d,e)})}function eu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gl(t,n),s!=null&&r.unshift(eu(t,s,i)),s=Gl(t,e),s!=null&&r.push(eu(t,s,i))),t=t.return}return r}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Gl(n,s),l!=null&&o.unshift(eu(n,l,a))):i||(l=Gl(n,s),l!=null&&o.push(eu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VD=/\r\n?/g,LD=/\u0000|\uFFFD/g;function cw(t){return(typeof t=="string"?t:""+t).replace(VD,`
`).replace(LD,"")}function Nc(t,e,n){if(e=cw(e),cw(t)!==e&&n)throw Error(Y(425))}function Uh(){}var Pm=null,Rm=null;function km(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bm=typeof setTimeout=="function"?setTimeout:void 0,OD=typeof clearTimeout=="function"?clearTimeout:void 0,hw=typeof Promise=="function"?Promise:void 0,FD=typeof queueMicrotask=="function"?queueMicrotask:typeof hw<"u"?function(t){return hw.resolve(null).then(t).catch(UD)}:bm;function UD(t){setTimeout(function(){throw t})}function cp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Yl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Yl(e)}function $i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),vr="__reactFiber$"+Ca,tu="__reactProps$"+Ca,ni="__reactContainer$"+Ca,Nm="__reactEvents$"+Ca,jD="__reactListeners$"+Ca,$D="__reactHandles$"+Ca;function Cs(t){var e=t[vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ni]||n[vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dw(t);t!==null;){if(n=t[vr])return n;t=dw(t)}return e}t=n,n=t.parentNode}return null}function Lu(t){return t=t[vr]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Hd(t){return t[tu]||null}var Dm=[],Ao=-1;function ls(t){return{current:t}}function je(t){0>Ao||(t.current=Dm[Ao],Dm[Ao]=null,Ao--)}function Le(t,e){Ao++,Dm[Ao]=t.current,t.current=e}var es={},Jt=ls(es),vn=ls(!1),js=es;function ta(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _n(t){return t=t.childContextTypes,t!=null}function jh(){je(vn),je(Jt)}function fw(t,e,n){if(Jt.current!==es)throw Error(Y(168));Le(Jt,e),Le(vn,n)}function Nx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,IN(t)||"Unknown",i));return Ye({},n,r)}function $h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,js=Jt.current,Le(Jt,t),Le(vn,vn.current),!0}function pw(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=Nx(t,e,js),r.__reactInternalMemoizedMergedChildContext=t,je(vn),je(Jt),Le(Jt,t)):je(vn),Le(vn,n)}var jr=null,Wd=!1,hp=!1;function Dx(t){jr===null?jr=[t]:jr.push(t)}function BD(t){Wd=!0,Dx(t)}function us(){if(!hp&&jr!==null){hp=!0;var t=0,e=Re;try{var n=jr;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jr=null,Wd=!1}catch(i){throw jr!==null&&(jr=jr.slice(t+1)),ix(wy,us),i}finally{Re=e,hp=!1}}return null}var Po=[],Ro=0,Bh=null,zh=0,zn=[],Hn=0,$s=null,Br=1,zr="";function ws(t,e){Po[Ro++]=zh,Po[Ro++]=Bh,Bh=t,zh=e}function Mx(t,e,n){zn[Hn++]=Br,zn[Hn++]=zr,zn[Hn++]=$s,$s=t;var r=Br;t=zr;var i=32-ir(r)-1;r&=~(1<<i),n+=1;var s=32-ir(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Br=1<<32-ir(e)+i|n<<i|r,zr=s+t}else Br=1<<s|n<<i|r,zr=t}function Ry(t){t.return!==null&&(ws(t,1),Mx(t,1,0))}function ky(t){for(;t===Bh;)Bh=Po[--Ro],Po[Ro]=null,zh=Po[--Ro],Po[Ro]=null;for(;t===$s;)$s=zn[--Hn],zn[Hn]=null,zr=zn[--Hn],zn[Hn]=null,Br=zn[--Hn],zn[Hn]=null}var Pn=null,Cn=null,Be=!1,tr=null;function Vx(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,Cn=$i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$s!==null?{id:Br,overflow:zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,Cn=null,!0):!1;default:return!1}}function Mm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vm(t){if(Be){var e=Cn;if(e){var n=e;if(!mw(t,e)){if(Mm(t))throw Error(Y(418));e=$i(n.nextSibling);var r=Pn;e&&mw(t,e)?Vx(r,n):(t.flags=t.flags&-4097|2,Be=!1,Pn=t)}}else{if(Mm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Be=!1,Pn=t}}}function gw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function Dc(t){if(t!==Pn)return!1;if(!Be)return gw(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!km(t.type,t.memoizedProps)),e&&(e=Cn)){if(Mm(t))throw Lx(),Error(Y(418));for(;e;)Vx(t,e),e=$i(e.nextSibling)}if(gw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=$i(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=Pn?$i(t.stateNode.nextSibling):null;return!0}function Lx(){for(var t=Cn;t;)t=$i(t.nextSibling)}function na(){Cn=Pn=null,Be=!1}function by(t){tr===null?tr=[t]:tr.push(t)}var zD=fi.ReactCurrentBatchConfig;function Zn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Hh=ls(null),Wh=null,ko=null,Ny=null;function Dy(){Ny=ko=Wh=null}function My(t){var e=Hh.current;je(Hh),t._currentValue=e}function Lm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zo(t,e){Wh=t,Ny=ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(Ny!==t)if(t={context:t,memoizedValue:e,next:null},ko===null){if(Wh===null)throw Error(Y(308));ko=t,Wh.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return e}var As=null;function Vy(t){As===null?As=[t]:As.push(t)}function Ox(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vy(e)):(n.next=i.next,i.next=n),e.interleaved=n,ri(t,r)}function ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ti=!1;function Ly(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ri(t,n)}return i=r.interleaved,i===null?(e.next=e,Vy(r)):(e.next=i.next,i.next=e),r.interleaved=e,ri(t,n)}function ah(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ey(t,n)}}function yw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kh(t,e,n,r){var i=t.updateQueue;Ti=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,w=a;switch(f=e,m=n,w.tag){case 1:if(E=w.payload,typeof E=="function"){d=E.call(m,d,f);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=w.payload,f=typeof E=="function"?E.call(m,d,f):E,f==null)break e;d=Ye({},d,f);break e;case 2:Ti=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zs|=o,t.lanes=o,t.memoizedState=d}}function vw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var Ux=new O1.Component().refs;function Om(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kd={isMounted:function(t){return(t=t._reactInternals)?eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=on(),i=Hi(t),s=Yr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Bi(t,s,i),e!==null&&(sr(e,t,i,r),ah(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=on(),i=Hi(t),s=Yr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bi(t,s,i),e!==null&&(sr(e,t,i,r),ah(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=on(),r=Hi(t),i=Yr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bi(t,i,r),e!==null&&(sr(e,t,r,n),ah(e,t,r))}};function _w(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Jl(n,r)||!Jl(i,s):!0}function jx(t,e,n){var r=!1,i=es,s=e.contextType;return typeof s=="object"&&s!==null?s=qn(s):(i=_n(e)?js:Jt.current,r=e.contextTypes,s=(r=r!=null)?ta(t,i):es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ww(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kd.enqueueReplaceState(e,e.state,null)}function Fm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Ux,Ly(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qn(s):(s=_n(e)?js:Jt.current,i.context=ta(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Om(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kd.enqueueReplaceState(i,i.state,null),Kh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Ux&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Mc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ew(t){var e=t._init;return e(t._payload)}function $x(t){function e(g,y){if(t){var S=g.deletions;S===null?(g.deletions=[y],g.flags|=16):S.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Wi(g,y),g.index=0,g.sibling=null,g}function s(g,y,S){return g.index=S,t?(S=g.alternate,S!==null?(S=S.index,S<y?(g.flags|=2,y):S):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,S,I){return y===null||y.tag!==6?(y=vp(S,g.mode,I),y.return=g,y):(y=i(y,S),y.return=g,y)}function l(g,y,S,I){var R=S.type;return R===So?h(g,y,S.props.children,I,S.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Si&&Ew(R)===y.type)?(I=i(y,S.props),I.ref=tl(g,y,S),I.return=g,I):(I=fh(S.type,S.key,S.props,null,g.mode,I),I.ref=tl(g,y,S),I.return=g,I)}function u(g,y,S,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=_p(S,g.mode,I),y.return=g,y):(y=i(y,S.children||[]),y.return=g,y)}function h(g,y,S,I,R){return y===null||y.tag!==7?(y=Vs(S,g.mode,I,R),y.return=g,y):(y=i(y,S),y.return=g,y)}function d(g,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=vp(""+y,g.mode,S),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tc:return S=fh(y.type,y.key,y.props,null,g.mode,S),S.ref=tl(g,null,y),S.return=g,S;case Eo:return y=_p(y,g.mode,S),y.return=g,y;case Si:var I=y._init;return d(g,I(y._payload),S)}if(dl(y)||Ya(y))return y=Vs(y,g.mode,S,null),y.return=g,y;Mc(g,y)}return null}function f(g,y,S,I){var R=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(g,y,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tc:return S.key===R?l(g,y,S,I):null;case Eo:return S.key===R?u(g,y,S,I):null;case Si:return R=S._init,f(g,y,R(S._payload),I)}if(dl(S)||Ya(S))return R!==null?null:h(g,y,S,I,null);Mc(g,S)}return null}function m(g,y,S,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return g=g.get(S)||null,a(y,g,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Tc:return g=g.get(I.key===null?S:I.key)||null,l(y,g,I,R);case Eo:return g=g.get(I.key===null?S:I.key)||null,u(y,g,I,R);case Si:var M=I._init;return m(g,y,S,M(I._payload),R)}if(dl(I)||Ya(I))return g=g.get(S)||null,h(y,g,I,R,null);Mc(y,I)}return null}function E(g,y,S,I){for(var R=null,M=null,C=y,_=y=0,A=null;C!==null&&_<S.length;_++){C.index>_?(A=C,C=null):A=C.sibling;var k=f(g,C,S[_],I);if(k===null){C===null&&(C=A);break}t&&C&&k.alternate===null&&e(g,C),y=s(k,y,_),M===null?R=k:M.sibling=k,M=k,C=A}if(_===S.length)return n(g,C),Be&&ws(g,_),R;if(C===null){for(;_<S.length;_++)C=d(g,S[_],I),C!==null&&(y=s(C,y,_),M===null?R=C:M.sibling=C,M=C);return Be&&ws(g,_),R}for(C=r(g,C);_<S.length;_++)A=m(C,g,_,S[_],I),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?_:A.key),y=s(A,y,_),M===null?R=A:M.sibling=A,M=A);return t&&C.forEach(function(N){return e(g,N)}),Be&&ws(g,_),R}function w(g,y,S,I){var R=Ya(S);if(typeof R!="function")throw Error(Y(150));if(S=R.call(S),S==null)throw Error(Y(151));for(var M=R=null,C=y,_=y=0,A=null,k=S.next();C!==null&&!k.done;_++,k=S.next()){C.index>_?(A=C,C=null):A=C.sibling;var N=f(g,C,k.value,I);if(N===null){C===null&&(C=A);break}t&&C&&N.alternate===null&&e(g,C),y=s(N,y,_),M===null?R=N:M.sibling=N,M=N,C=A}if(k.done)return n(g,C),Be&&ws(g,_),R;if(C===null){for(;!k.done;_++,k=S.next())k=d(g,k.value,I),k!==null&&(y=s(k,y,_),M===null?R=k:M.sibling=k,M=k);return Be&&ws(g,_),R}for(C=r(g,C);!k.done;_++,k=S.next())k=m(C,g,_,k.value,I),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?_:k.key),y=s(k,y,_),M===null?R=k:M.sibling=k,M=k);return t&&C.forEach(function(D){return e(g,D)}),Be&&ws(g,_),R}function x(g,y,S,I){if(typeof S=="object"&&S!==null&&S.type===So&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Tc:e:{for(var R=S.key,M=y;M!==null;){if(M.key===R){if(R=S.type,R===So){if(M.tag===7){n(g,M.sibling),y=i(M,S.props.children),y.return=g,g=y;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Si&&Ew(R)===M.type){n(g,M.sibling),y=i(M,S.props),y.ref=tl(g,M,S),y.return=g,g=y;break e}n(g,M);break}else e(g,M);M=M.sibling}S.type===So?(y=Vs(S.props.children,g.mode,I,S.key),y.return=g,g=y):(I=fh(S.type,S.key,S.props,null,g.mode,I),I.ref=tl(g,y,S),I.return=g,g=I)}return o(g);case Eo:e:{for(M=S.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(g,y.sibling),y=i(y,S.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=_p(S,g.mode,I),y.return=g,g=y}return o(g);case Si:return M=S._init,x(g,y,M(S._payload),I)}if(dl(S))return E(g,y,S,I);if(Ya(S))return w(g,y,S,I);Mc(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,S),y.return=g,g=y):(n(g,y),y=vp(S,g.mode,I),y.return=g,g=y),o(g)):n(g,y)}return x}var ra=$x(!0),Bx=$x(!1),Ou={},wr=ls(Ou),nu=ls(Ou),ru=ls(Ou);function Ps(t){if(t===Ou)throw Error(Y(174));return t}function Oy(t,e){switch(Le(ru,e),Le(nu,t),Le(wr,Ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gm(e,t)}je(wr),Le(wr,e)}function ia(){je(wr),je(nu),je(ru)}function zx(t){Ps(ru.current);var e=Ps(wr.current),n=gm(e,t.type);e!==n&&(Le(nu,t),Le(wr,n))}function Fy(t){nu.current===t&&(je(wr),je(nu))}var Ge=ls(0);function Gh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dp=[];function Uy(){for(var t=0;t<dp.length;t++)dp[t]._workInProgressVersionPrimary=null;dp.length=0}var lh=fi.ReactCurrentDispatcher,fp=fi.ReactCurrentBatchConfig,Bs=0,Xe=null,ft=null,Et=null,qh=!1,Pl=!1,iu=0,HD=0;function zt(){throw Error(Y(321))}function jy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!lr(t[n],e[n]))return!1;return!0}function $y(t,e,n,r,i,s){if(Bs=s,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lh.current=t===null||t.memoizedState===null?qD:XD,t=n(r,i),Pl){s=0;do{if(Pl=!1,iu=0,25<=s)throw Error(Y(301));s+=1,Et=ft=null,e.updateQueue=null,lh.current=YD,t=n(r,i)}while(Pl)}if(lh.current=Xh,e=ft!==null&&ft.next!==null,Bs=0,Et=ft=Xe=null,qh=!1,e)throw Error(Y(300));return t}function By(){var t=iu!==0;return iu=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Xe.memoizedState=Et=t:Et=Et.next=t,Et}function Xn(){if(ft===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=Et===null?Xe.memoizedState:Et.next;if(e!==null)Et=e,ft=t;else{if(t===null)throw Error(Y(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Et===null?Xe.memoizedState=Et=t:Et=Et.next=t}return Et}function su(t,e){return typeof e=="function"?e(t):e}function pp(t){var e=Xn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Bs&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Xe.lanes|=h,zs|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,lr(r,e.memoizedState)||(gn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xe.lanes|=s,zs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mp(t){var e=Xn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);lr(s,e.memoizedState)||(gn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Hx(){}function Wx(t,e){var n=Xe,r=Xn(),i=e(),s=!lr(r.memoizedState,i);if(s&&(r.memoizedState=i,gn=!0),r=r.queue,zy(qx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,ou(9,Gx.bind(null,n,r,i,e),void 0,null),Tt===null)throw Error(Y(349));Bs&30||Kx(n,e,i)}return i}function Kx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gx(t,e,n,r){e.value=n,e.getSnapshot=r,Xx(e)&&Yx(t)}function qx(t,e,n){return n(function(){Xx(e)&&Yx(t)})}function Xx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!lr(t,n)}catch{return!0}}function Yx(t){var e=ri(t,1);e!==null&&sr(e,t,1,-1)}function Sw(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:t},e.queue=t,t=t.dispatch=GD.bind(null,Xe,t),[e.memoizedState,t]}function ou(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Qx(){return Xn().memoizedState}function uh(t,e,n,r){var i=gr();Xe.flags|=t,i.memoizedState=ou(1|e,n,void 0,r===void 0?null:r)}function Gd(t,e,n,r){var i=Xn();r=r===void 0?null:r;var s=void 0;if(ft!==null){var o=ft.memoizedState;if(s=o.destroy,r!==null&&jy(r,o.deps)){i.memoizedState=ou(e,n,s,r);return}}Xe.flags|=t,i.memoizedState=ou(1|e,n,s,r)}function Tw(t,e){return uh(8390656,8,t,e)}function zy(t,e){return Gd(2048,8,t,e)}function Jx(t,e){return Gd(4,2,t,e)}function Zx(t,e){return Gd(4,4,t,e)}function eI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tI(t,e,n){return n=n!=null?n.concat([t]):null,Gd(4,4,eI.bind(null,e,t),n)}function Hy(){}function nI(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function rI(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function iI(t,e,n){return Bs&21?(lr(n,e)||(n=ax(),Xe.lanes|=n,zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function WD(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=fp.transition;fp.transition={};try{t(!1),e()}finally{Re=n,fp.transition=r}}function sI(){return Xn().memoizedState}function KD(t,e,n){var r=Hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oI(t))aI(e,n);else if(n=Ox(t,e,n,r),n!==null){var i=on();sr(n,t,r,i),lI(n,e,r)}}function GD(t,e,n){var r=Hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oI(t))aI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,lr(a,o)){var l=e.interleaved;l===null?(i.next=i,Vy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Ox(t,e,i,r),n!==null&&(i=on(),sr(n,t,r,i),lI(n,e,r))}}function oI(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function aI(t,e){Pl=qh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ey(t,n)}}var Xh={readContext:qn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},qD={readContext:qn,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:Tw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uh(4194308,4,eI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uh(4194308,4,t,e)},useInsertionEffect:function(t,e){return uh(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=KD.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:Sw,useDebugValue:Hy,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=Sw(!1),e=t[0];return t=WD.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,i=gr();if(Be){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Tt===null)throw Error(Y(349));Bs&30||Kx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Tw(qx.bind(null,r,s,t),[t]),r.flags|=2048,ou(9,Gx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=gr(),e=Tt.identifierPrefix;if(Be){var n=zr,r=Br;n=(r&~(1<<32-ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=iu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=HD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XD={readContext:qn,useCallback:nI,useContext:qn,useEffect:zy,useImperativeHandle:tI,useInsertionEffect:Jx,useLayoutEffect:Zx,useMemo:rI,useReducer:pp,useRef:Qx,useState:function(){return pp(su)},useDebugValue:Hy,useDeferredValue:function(t){var e=Xn();return iI(e,ft.memoizedState,t)},useTransition:function(){var t=pp(su)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:Hx,useSyncExternalStore:Wx,useId:sI,unstable_isNewReconciler:!1},YD={readContext:qn,useCallback:nI,useContext:qn,useEffect:zy,useImperativeHandle:tI,useInsertionEffect:Jx,useLayoutEffect:Zx,useMemo:rI,useReducer:mp,useRef:Qx,useState:function(){return mp(su)},useDebugValue:Hy,useDeferredValue:function(t){var e=Xn();return ft===null?e.memoizedState=t:iI(e,ft.memoizedState,t)},useTransition:function(){var t=mp(su)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:Hx,useSyncExternalStore:Wx,useId:sI,unstable_isNewReconciler:!1};function sa(t,e){try{var n="",r=e;do n+=xN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function gp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Um(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QD=typeof WeakMap=="function"?WeakMap:Map;function uI(t,e,n){n=Yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qh||(Qh=!0,Xm=r),Um(t,e)},n}function cI(t,e,n){n=Yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Um(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Um(t,e),typeof r!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function xw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new QD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=hM.bind(null,t,e,n),e.then(t,t))}function Iw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yr(-1,1),e.tag=2,Bi(n,e,1))),n.lanes|=1),t)}var JD=fi.ReactCurrentOwner,gn=!1;function sn(t,e,n,r){e.child=t===null?Bx(e,null,n,r):ra(e,t.child,n,r)}function Aw(t,e,n,r,i){n=n.render;var s=e.ref;return zo(e,i),r=$y(t,e,n,r,s,i),n=By(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ii(t,e,i)):(Be&&n&&Ry(e),e.flags|=1,sn(t,e,r,i),e.child)}function Pw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Jy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,hI(t,e,s,r,i)):(t=fh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Jl,n(o,r)&&t.ref===e.ref)return ii(t,e,i)}return e.flags|=1,t=Wi(s,r),t.ref=e.ref,t.return=e,e.child=t}function hI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Jl(s,r)&&t.ref===e.ref)if(gn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,ii(t,e,i)}return jm(t,e,n,r,i)}function dI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(No,In),In|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(No,In),In|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(No,In),In|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(No,In),In|=r;return sn(t,e,i,n),e.child}function fI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jm(t,e,n,r,i){var s=_n(n)?js:Jt.current;return s=ta(e,s),zo(e,i),n=$y(t,e,n,r,s,i),r=By(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ii(t,e,i)):(Be&&r&&Ry(e),e.flags|=1,sn(t,e,n,i),e.child)}function Rw(t,e,n,r,i){if(_n(n)){var s=!0;$h(e)}else s=!1;if(zo(e,i),e.stateNode===null)ch(t,e),jx(e,n,r),Fm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qn(u):(u=_n(n)?js:Jt.current,u=ta(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ww(e,o,r,u),Ti=!1;var f=e.memoizedState;o.state=f,Kh(e,r,o,i),l=e.memoizedState,a!==r||f!==l||vn.current||Ti?(typeof h=="function"&&(Om(e,n,h,r),l=e.memoizedState),(a=Ti||_w(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fx(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Zn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qn(l):(l=_n(n)?js:Jt.current,l=ta(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&ww(e,o,r,l),Ti=!1,f=e.memoizedState,o.state=f,Kh(e,r,o,i);var E=e.memoizedState;a!==d||f!==E||vn.current||Ti?(typeof m=="function"&&(Om(e,n,m,r),E=e.memoizedState),(u=Ti||_w(e,n,u,r,f,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return $m(t,e,n,r,s,i)}function $m(t,e,n,r,i,s){fI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&pw(e,n,!1),ii(t,e,s);r=e.stateNode,JD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ra(e,t.child,null,s),e.child=ra(e,null,a,s)):sn(t,e,a,s),e.memoizedState=r.state,i&&pw(e,n,!0),e.child}function pI(t){var e=t.stateNode;e.pendingContext?fw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fw(t,e.context,!1),Oy(t,e.containerInfo)}function kw(t,e,n,r,i){return na(),by(i),e.flags|=256,sn(t,e,n,r),e.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function zm(t){return{baseLanes:t,cachePool:null,transitions:null}}function mI(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(Ge,i&1),t===null)return Vm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yd(o,r,0,null),t=Vs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zm(n),e.memoizedState=Bm,t):Wy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ZD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Wi(a,s):(s=Vs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?zm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Bm,r}return s=t.child,t=s.sibling,r=Wi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wy(t,e){return e=Yd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vc(t,e,n,r){return r!==null&&by(r),ra(e,t.child,null,n),t=Wy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=gp(Error(Y(422))),Vc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yd({mode:"visible",children:r.children},i,0,null),s=Vs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ra(e,t.child,null,o),e.child.memoizedState=zm(o),e.memoizedState=Bm,s);if(!(e.mode&1))return Vc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=gp(s,r,void 0),Vc(t,e,o,r)}if(a=(o&t.childLanes)!==0,gn||a){if(r=Tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ri(t,i),sr(r,t,i,-1))}return Qy(),r=gp(Error(Y(421))),Vc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dM.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Cn=$i(i.nextSibling),Pn=e,Be=!0,tr=null,t!==null&&(zn[Hn++]=Br,zn[Hn++]=zr,zn[Hn++]=$s,Br=t.id,zr=t.overflow,$s=e),e=Wy(e,r.children),e.flags|=4096,e)}function bw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lm(t.return,e,n)}function yp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function gI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(sn(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bw(t,n,e);else if(t.tag===19)bw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Gh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),yp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Gh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}yp(e,!0,n,null,s);break;case"together":yp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ch(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Wi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eM(t,e,n){switch(e.tag){case 3:pI(e),na();break;case 5:zx(e);break;case 1:_n(e.type)&&$h(e);break;case 4:Oy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(Hh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?mI(t,e,n):(Le(Ge,Ge.current&1),t=ii(t,e,n),t!==null?t.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,dI(t,e,n)}return ii(t,e,n)}var yI,Hm,vI,_I;yI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hm=function(){};vI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ps(wr.current);var s=null;switch(n){case"input":i=dm(t,i),r=dm(t,r),s=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),s=[];break;case"textarea":i=mm(t,i),r=mm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uh)}ym(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ue("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};_I=function(t,e,n,r){n!==r&&(e.flags|=4)};function nl(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tM(t,e,n){var r=e.pendingProps;switch(ky(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return _n(e.type)&&jh(),Ht(e),null;case 3:return r=e.stateNode,ia(),je(vn),je(Jt),Uy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(Jm(tr),tr=null))),Hm(t,e),Ht(e),null;case 5:Fy(e);var i=Ps(ru.current);if(n=e.type,t!==null&&e.stateNode!=null)vI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Ht(e),null}if(t=Ps(wr.current),Dc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[vr]=e,r[tu]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<pl.length;i++)Ue(pl[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":j_(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":B_(r,s),Ue("invalid",r)}ym(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nc(r.textContent,a,t),i=["children",""+a]):Wl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":xc(r),$_(r,s,!0);break;case"textarea":xc(r),z_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Uh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=K1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vr]=e,t[tu]=r,yI(t,e,!1,!1),e.stateNode=t;e:{switch(o=vm(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<pl.length;i++)Ue(pl[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":j_(t,r),i=dm(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":B_(t,r),i=mm(t,r),Ue("invalid",t);break;default:i=r}ym(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?X1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&G1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kl(t,l):typeof l=="number"&&Kl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ue("scroll",t):l!=null&&my(t,s,l,o))}switch(n){case"input":xc(t),$_(t,r,!1);break;case"textarea":xc(t),z_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Uo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Uo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Uh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)_I(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ps(ru.current),Ps(wr.current),Dc(e)){if(r=e.stateNode,n=e.memoizedProps,r[vr]=e,(s=r.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:Nc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vr]=e,e.stateNode=r}return Ht(e),null;case 13:if(je(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&Cn!==null&&e.mode&1&&!(e.flags&128))Lx(),na(),e.flags|=98560,s=!1;else if(s=Dc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[vr]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),s=!1}else tr!==null&&(Jm(tr),tr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?gt===0&&(gt=3):Qy())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return ia(),Hm(t,e),t===null&&Zl(e.stateNode.containerInfo),Ht(e),null;case 10:return My(e.type._context),Ht(e),null;case 17:return _n(e.type)&&jh(),Ht(e),null;case 19:if(je(Ge),s=e.memoizedState,s===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)nl(s,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gh(t),o!==null){for(e.flags|=128,nl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&it()>oa&&(e.flags|=128,r=!0,nl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Gh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return Ht(e),null}else 2*it()-s.renderingStartTime>oa&&n!==1073741824&&(e.flags|=128,r=!0,nl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=it(),e.sibling=null,n=Ge.current,Le(Ge,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return Yy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?In&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function nM(t,e){switch(ky(e),e.tag){case 1:return _n(e.type)&&jh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ia(),je(vn),je(Jt),Uy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fy(e),null;case 13:if(je(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ge),null;case 4:return ia(),null;case 10:return My(e.type._context),null;case 22:case 23:return Yy(),null;case 24:return null;default:return null}}var Lc=!1,qt=!1,rM=typeof WeakSet=="function"?WeakSet:Set,te=null;function bo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function Wm(t,e,n){try{n()}catch(r){et(t,e,r)}}var Nw=!1;function iM(t,e){if(Pm=Lh,t=Tx(),Py(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rm={focusedElem:t,selectionRange:n},Lh=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var w=E.memoizedProps,x=E.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Zn(e.type,w),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(I){et(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return E=Nw,Nw=!1,E}function Rl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Wm(e,n,s)}i=i.next}while(i!==r)}}function qd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Km(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wI(t){var e=t.alternate;e!==null&&(t.alternate=null,wI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vr],delete e[tu],delete e[Nm],delete e[jD],delete e[$D])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EI(t){return t.tag===5||t.tag===3||t.tag===4}function Dw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uh));else if(r!==4&&(t=t.child,t!==null))for(Gm(t,e,n),t=t.sibling;t!==null;)Gm(t,e,n),t=t.sibling}function qm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qm(t,e,n),t=t.sibling;t!==null;)qm(t,e,n),t=t.sibling}var Pt=null,er=!1;function vi(t,e,n){for(n=n.child;n!==null;)SI(t,e,n),n=n.sibling}function SI(t,e,n){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(jd,n)}catch{}switch(n.tag){case 5:qt||bo(n,e);case 6:var r=Pt,i=er;Pt=null,vi(t,e,n),Pt=r,er=i,Pt!==null&&(er?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(er?(t=Pt,n=n.stateNode,t.nodeType===8?cp(t.parentNode,n):t.nodeType===1&&cp(t,n),Yl(t)):cp(Pt,n.stateNode));break;case 4:r=Pt,i=er,Pt=n.stateNode.containerInfo,er=!0,vi(t,e,n),Pt=r,er=i;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Wm(n,e,o),i=i.next}while(i!==r)}vi(t,e,n);break;case 1:if(!qt&&(bo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){et(n,e,a)}vi(t,e,n);break;case 21:vi(t,e,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,vi(t,e,n),qt=r):vi(t,e,n);break;default:vi(t,e,n)}}function Mw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rM),e.forEach(function(r){var i=fM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pt=a.stateNode,er=!1;break e;case 3:Pt=a.stateNode.containerInfo,er=!0;break e;case 4:Pt=a.stateNode.containerInfo,er=!0;break e}a=a.return}if(Pt===null)throw Error(Y(160));SI(s,o,i),Pt=null,er=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){et(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TI(e,t),e=e.sibling}function TI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jn(e,t),mr(t),r&4){try{Rl(3,t,t.return),qd(3,t)}catch(w){et(t,t.return,w)}try{Rl(5,t,t.return)}catch(w){et(t,t.return,w)}}break;case 1:Jn(e,t),mr(t),r&512&&n!==null&&bo(n,n.return);break;case 5:if(Jn(e,t),mr(t),r&512&&n!==null&&bo(n,n.return),t.flags&32){var i=t.stateNode;try{Kl(i,"")}catch(w){et(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&H1(i,s),vm(a,o);var u=vm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?X1(i,d):h==="dangerouslySetInnerHTML"?G1(i,d):h==="children"?Kl(i,d):my(i,h,d,u)}switch(a){case"input":fm(i,s);break;case"textarea":W1(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Uo(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Uo(i,!!s.multiple,s.defaultValue,!0):Uo(i,!!s.multiple,s.multiple?[]:"",!1))}i[tu]=s}catch(w){et(t,t.return,w)}}break;case 6:if(Jn(e,t),mr(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){et(t,t.return,w)}}break;case 3:if(Jn(e,t),mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yl(e.containerInfo)}catch(w){et(t,t.return,w)}break;case 4:Jn(e,t),mr(t);break;case 13:Jn(e,t),mr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qy=it())),r&4&&Mw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(qt=(u=qt)||h,Jn(e,t),qt=u):Jn(e,t),mr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(te=t,h=t.child;h!==null;){for(d=te=h;te!==null;){switch(f=te,m=f.child,f.tag){case 0:case 11:case 14:case 15:Rl(4,f,f.return);break;case 1:bo(f,f.return);var E=f.stateNode;if(typeof E.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(w){et(r,n,w)}}break;case 5:bo(f,f.return);break;case 22:if(f.memoizedState!==null){Lw(d);continue}}m!==null?(m.return=f,te=m):Lw(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=q1("display",o))}catch(w){et(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){et(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Jn(e,t),mr(t),r&4&&Mw(t);break;case 21:break;default:Jn(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(EI(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Kl(i,""),r.flags&=-33);var s=Dw(t);qm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Dw(t);Gm(t,a,o);break;default:throw Error(Y(161))}}catch(l){et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sM(t,e,n){te=t,xI(t)}function xI(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Lc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||qt;a=Lc;var u=qt;if(Lc=o,(qt=l)&&!u)for(te=i;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?Ow(i):l!==null?(l.return=o,te=l):Ow(i);for(;s!==null;)te=s,xI(s),s=s.sibling;te=i,Lc=a,qt=u}Vw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):Vw(t)}}function Vw(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||qd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!qt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Yl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}qt||e.flags&512&&Km(e)}catch(f){et(e,e.return,f)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function Lw(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function Ow(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qd(4,e)}catch(l){et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){et(e,i,l)}}var s=e.return;try{Km(e)}catch(l){et(e,s,l)}break;case 5:var o=e.return;try{Km(e)}catch(l){et(e,o,l)}}}catch(l){et(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var oM=Math.ceil,Yh=fi.ReactCurrentDispatcher,Ky=fi.ReactCurrentOwner,Gn=fi.ReactCurrentBatchConfig,Te=0,Tt=null,at=null,Nt=0,In=0,No=ls(0),gt=0,au=null,zs=0,Xd=0,Gy=0,kl=null,pn=null,qy=0,oa=1/0,Ur=null,Qh=!1,Xm=null,zi=null,Oc=!1,Vi=null,Jh=0,bl=0,Ym=null,hh=-1,dh=0;function on(){return Te&6?it():hh!==-1?hh:hh=it()}function Hi(t){return t.mode&1?Te&2&&Nt!==0?Nt&-Nt:zD.transition!==null?(dh===0&&(dh=ax()),dh):(t=Re,t!==0||(t=window.event,t=t===void 0?16:px(t.type)),t):1}function sr(t,e,n,r){if(50<bl)throw bl=0,Ym=null,Error(Y(185));Mu(t,n,r),(!(Te&2)||t!==Tt)&&(t===Tt&&(!(Te&2)&&(Xd|=n),gt===4&&Pi(t,Nt)),wn(t,r),n===1&&Te===0&&!(e.mode&1)&&(oa=it()+500,Wd&&us()))}function wn(t,e){var n=t.callbackNode;zN(t,e);var r=Vh(t,t===Tt?Nt:0);if(r===0)n!==null&&K_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&K_(n),e===1)t.tag===0?BD(Fw.bind(null,t)):Dx(Fw.bind(null,t)),FD(function(){!(Te&6)&&us()}),n=null;else{switch(lx(r)){case 1:n=wy;break;case 4:n=sx;break;case 16:n=Mh;break;case 536870912:n=ox;break;default:n=Mh}n=NI(n,II.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function II(t,e){if(hh=-1,dh=0,Te&6)throw Error(Y(327));var n=t.callbackNode;if(Ho()&&t.callbackNode!==n)return null;var r=Vh(t,t===Tt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zh(t,r);else{e=r;var i=Te;Te|=2;var s=AI();(Tt!==t||Nt!==e)&&(Ur=null,oa=it()+500,Ms(t,e));do try{uM();break}catch(a){CI(t,a)}while(!0);Dy(),Yh.current=s,Te=i,at!==null?e=0:(Tt=null,Nt=0,e=gt)}if(e!==0){if(e===2&&(i=Tm(t),i!==0&&(r=i,e=Qm(t,i))),e===1)throw n=au,Ms(t,0),Pi(t,r),wn(t,it()),n;if(e===6)Pi(t,r);else{if(i=t.current.alternate,!(r&30)&&!aM(i)&&(e=Zh(t,r),e===2&&(s=Tm(t),s!==0&&(r=s,e=Qm(t,s))),e===1))throw n=au,Ms(t,0),Pi(t,r),wn(t,it()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Es(t,pn,Ur);break;case 3:if(Pi(t,r),(r&130023424)===r&&(e=qy+500-it(),10<e)){if(Vh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){on(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bm(Es.bind(null,t,pn,Ur),e);break}Es(t,pn,Ur);break;case 4:if(Pi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ir(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oM(r/1960))-r,10<r){t.timeoutHandle=bm(Es.bind(null,t,pn,Ur),r);break}Es(t,pn,Ur);break;case 5:Es(t,pn,Ur);break;default:throw Error(Y(329))}}}return wn(t,it()),t.callbackNode===n?II.bind(null,t):null}function Qm(t,e){var n=kl;return t.current.memoizedState.isDehydrated&&(Ms(t,e).flags|=256),t=Zh(t,e),t!==2&&(e=pn,pn=n,e!==null&&Jm(e)),t}function Jm(t){pn===null?pn=t:pn.push.apply(pn,t)}function aM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pi(t,e){for(e&=~Gy,e&=~Xd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ir(e),r=1<<n;t[n]=-1,e&=~r}}function Fw(t){if(Te&6)throw Error(Y(327));Ho();var e=Vh(t,0);if(!(e&1))return wn(t,it()),null;var n=Zh(t,e);if(t.tag!==0&&n===2){var r=Tm(t);r!==0&&(e=r,n=Qm(t,r))}if(n===1)throw n=au,Ms(t,0),Pi(t,e),wn(t,it()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Es(t,pn,Ur),wn(t,it()),null}function Xy(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(oa=it()+500,Wd&&us())}}function Hs(t){Vi!==null&&Vi.tag===0&&!(Te&6)&&Ho();var e=Te;Te|=1;var n=Gn.transition,r=Re;try{if(Gn.transition=null,Re=1,t)return t()}finally{Re=r,Gn.transition=n,Te=e,!(Te&6)&&us()}}function Yy(){In=No.current,je(No)}function Ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OD(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(ky(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&jh();break;case 3:ia(),je(vn),je(Jt),Uy();break;case 5:Fy(r);break;case 4:ia();break;case 13:je(Ge);break;case 19:je(Ge);break;case 10:My(r.type._context);break;case 22:case 23:Yy()}n=n.return}if(Tt=t,at=t=Wi(t.current,null),Nt=In=e,gt=0,au=null,Gy=Xd=zs=0,pn=kl=null,As!==null){for(e=0;e<As.length;e++)if(n=As[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return t}function CI(t,e){do{var n=at;try{if(Dy(),lh.current=Xh,qh){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qh=!1}if(Bs=0,Et=ft=Xe=null,Pl=!1,iu=0,Ky.current=null,n===null||n.return===null){gt=1,au=e,at=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=Iw(o);if(m!==null){m.flags&=-257,Cw(m,o,a,s,e),m.mode&1&&xw(s,u,e),e=m,l=u;var E=e.updateQueue;if(E===null){var w=new Set;w.add(l),e.updateQueue=w}else E.add(l);break e}else{if(!(e&1)){xw(s,u,e),Qy();break e}l=Error(Y(426))}}else if(Be&&a.mode&1){var x=Iw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Cw(x,o,a,s,e),by(sa(l,a));break e}}s=l=sa(l,a),gt!==4&&(gt=2),kl===null?kl=[s]:kl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=uI(s,l,e);yw(s,g);break e;case 1:a=l;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(zi===null||!zi.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=cI(s,a,e);yw(s,I);break e}}s=s.return}while(s!==null)}RI(n)}catch(R){e=R,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function AI(){var t=Yh.current;return Yh.current=Xh,t===null?Xh:t}function Qy(){(gt===0||gt===3||gt===2)&&(gt=4),Tt===null||!(zs&268435455)&&!(Xd&268435455)||Pi(Tt,Nt)}function Zh(t,e){var n=Te;Te|=2;var r=AI();(Tt!==t||Nt!==e)&&(Ur=null,Ms(t,e));do try{lM();break}catch(i){CI(t,i)}while(!0);if(Dy(),Te=n,Yh.current=r,at!==null)throw Error(Y(261));return Tt=null,Nt=0,gt}function lM(){for(;at!==null;)PI(at)}function uM(){for(;at!==null&&!MN();)PI(at)}function PI(t){var e=bI(t.alternate,t,In);t.memoizedProps=t.pendingProps,e===null?RI(t):at=e,Ky.current=null}function RI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nM(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,at=null;return}}else if(n=tM(n,e,In),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);gt===0&&(gt=5)}function Es(t,e,n){var r=Re,i=Gn.transition;try{Gn.transition=null,Re=1,cM(t,e,n,r)}finally{Gn.transition=i,Re=r}return null}function cM(t,e,n,r){do Ho();while(Vi!==null);if(Te&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(HN(t,s),t===Tt&&(at=Tt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oc||(Oc=!0,NI(Mh,function(){return Ho(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gn.transition,Gn.transition=null;var o=Re;Re=1;var a=Te;Te|=4,Ky.current=null,iM(t,n),TI(n,t),kD(Rm),Lh=!!Pm,Rm=Pm=null,t.current=n,sM(n),VN(),Te=a,Re=o,Gn.transition=s}else t.current=n;if(Oc&&(Oc=!1,Vi=t,Jh=i),s=t.pendingLanes,s===0&&(zi=null),FN(n.stateNode),wn(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qh)throw Qh=!1,t=Xm,Xm=null,t;return Jh&1&&t.tag!==0&&Ho(),s=t.pendingLanes,s&1?t===Ym?bl++:(bl=0,Ym=t):bl=0,us(),null}function Ho(){if(Vi!==null){var t=lx(Jh),e=Gn.transition,n=Re;try{if(Gn.transition=null,Re=16>t?16:t,Vi===null)var r=!1;else{if(t=Vi,Vi=null,Jh=0,Te&6)throw Error(Y(331));var i=Te;for(Te|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(te=u;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:Rl(8,h,s)}var d=h.child;if(d!==null)d.return=h,te=d;else for(;te!==null;){h=te;var f=h.sibling,m=h.return;if(wI(h),h===u){te=null;break}if(f!==null){f.return=m,te=f;break}te=m}}}var E=s.alternate;if(E!==null){var w=E.child;if(w!==null){E.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rl(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,te=g;break e}te=s.return}}var y=t.current;for(te=y;te!==null;){o=te;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,te=S;else e:for(o=y;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qd(9,a)}}catch(R){et(a,a.return,R)}if(a===o){te=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,te=I;break e}te=a.return}}if(Te=i,us(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(jd,t)}catch{}r=!0}return r}finally{Re=n,Gn.transition=e}}return!1}function Uw(t,e,n){e=sa(n,e),e=uI(t,e,1),t=Bi(t,e,1),e=on(),t!==null&&(Mu(t,1,e),wn(t,e))}function et(t,e,n){if(t.tag===3)Uw(t,t,n);else for(;e!==null;){if(e.tag===3){Uw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zi===null||!zi.has(r))){t=sa(n,t),t=cI(e,t,1),e=Bi(e,t,1),t=on(),e!==null&&(Mu(e,1,t),wn(e,t));break}}e=e.return}}function hM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=on(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(Nt&n)===n&&(gt===4||gt===3&&(Nt&130023424)===Nt&&500>it()-qy?Ms(t,0):Gy|=n),wn(t,e)}function kI(t,e){e===0&&(t.mode&1?(e=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):e=1);var n=on();t=ri(t,e),t!==null&&(Mu(t,e,n),wn(t,n))}function dM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kI(t,n)}function fM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),kI(t,n)}var bI;bI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,eM(t,e,n);gn=!!(t.flags&131072)}else gn=!1,Be&&e.flags&1048576&&Mx(e,zh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ch(t,e),t=e.pendingProps;var i=ta(e,Jt.current);zo(e,n),i=$y(null,e,r,t,i,n);var s=By();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(r)?(s=!0,$h(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ly(e),i.updater=Kd,e.stateNode=i,i._reactInternals=e,Fm(e,r,t,n),e=$m(null,e,r,!0,s,n)):(e.tag=0,Be&&s&&Ry(e),sn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ch(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mM(r),t=Zn(r,t),i){case 0:e=jm(null,e,r,t,n);break e;case 1:e=Rw(null,e,r,t,n);break e;case 11:e=Aw(null,e,r,t,n);break e;case 14:e=Pw(null,e,r,Zn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),jm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),Rw(t,e,r,i,n);case 3:e:{if(pI(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Fx(t,e),Kh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=sa(Error(Y(423)),e),e=kw(t,e,r,n,i);break e}else if(r!==i){i=sa(Error(Y(424)),e),e=kw(t,e,r,n,i);break e}else for(Cn=$i(e.stateNode.containerInfo.firstChild),Pn=e,Be=!0,tr=null,n=Bx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),r===i){e=ii(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return zx(e),t===null&&Vm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,km(r,i)?o=null:s!==null&&km(r,s)&&(e.flags|=32),fI(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&Vm(e),null;case 13:return mI(t,e,n);case 4:return Oy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ra(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),Aw(t,e,r,i,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(Hh,r._currentValue),r._currentValue=o,s!==null)if(lr(s.value,o)){if(s.children===i.children&&!vn.current){e=ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Yr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Lm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Lm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zo(e,n),i=qn(i),r=r(i),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,i=Zn(r,e.pendingProps),i=Zn(r.type,i),Pw(t,e,r,i,n);case 15:return hI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),ch(t,e),e.tag=1,_n(r)?(t=!0,$h(e)):t=!1,zo(e,n),jx(e,r,i),Fm(e,r,i,n),$m(null,e,r,!0,t,n);case 19:return gI(t,e,n);case 22:return dI(t,e,n)}throw Error(Y(156,e.tag))};function NI(t,e){return ix(t,e)}function pM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,r){return new pM(t,e,n,r)}function Jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mM(t){if(typeof t=="function")return Jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yy)return 11;if(t===vy)return 14}return 2}function Wi(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Jy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case So:return Vs(n.children,i,s,e);case gy:o=8,i|=8;break;case lm:return t=Wn(12,n,e,i|2),t.elementType=lm,t.lanes=s,t;case um:return t=Wn(13,n,e,i),t.elementType=um,t.lanes=s,t;case cm:return t=Wn(19,n,e,i),t.elementType=cm,t.lanes=s,t;case $1:return Yd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U1:o=10;break e;case j1:o=9;break e;case yy:o=11;break e;case vy:o=14;break e;case Si:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Wn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vs(t,e,n,r){return t=Wn(7,t,r,e),t.lanes=n,t}function Yd(t,e,n,r){return t=Wn(22,t,r,e),t.elementType=$1,t.lanes=n,t.stateNode={isHidden:!1},t}function vp(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function _p(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zf(0),this.expirationTimes=Zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zy(t,e,n,r,i,s,o,a,l){return t=new gM(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ly(s),t}function yM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function DI(t){if(!t)return es;t=t._reactInternals;e:{if(eo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(_n(n))return Nx(t,n,e)}return e}function MI(t,e,n,r,i,s,o,a,l){return t=Zy(n,r,!0,t,i,s,o,a,l),t.context=DI(null),n=t.current,r=on(),i=Hi(n),s=Yr(r,i),s.callback=e??null,Bi(n,s,i),t.current.lanes=i,Mu(t,i,r),wn(t,r),t}function Qd(t,e,n,r){var i=e.current,s=on(),o=Hi(i);return n=DI(n),e.context===null?e.context=n:e.pendingContext=n,e=Yr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bi(i,e,o),t!==null&&(sr(t,i,o,s),ah(t,i,o)),o}function ed(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ev(t,e){jw(t,e),(t=t.alternate)&&jw(t,e)}function vM(){return null}var VI=typeof reportError=="function"?reportError:function(t){console.error(t)};function tv(t){this._internalRoot=t}Jd.prototype.render=tv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Qd(t,e,null,null)};Jd.prototype.unmount=tv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hs(function(){Qd(null,t,null,null)}),e[ni]=null}};function Jd(t){this._internalRoot=t}Jd.prototype.unstable_scheduleHydration=function(t){if(t){var e=hx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ai.length&&e!==0&&e<Ai[n].priority;n++);Ai.splice(n,0,t),n===0&&fx(t)}};function nv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $w(){}function _M(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ed(o);s.call(u)}}var o=MI(e,r,t,0,null,!1,!1,"",$w);return t._reactRootContainer=o,t[ni]=o.current,Zl(t.nodeType===8?t.parentNode:t),Hs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ed(l);a.call(u)}}var l=Zy(t,0,!1,null,null,!1,!1,"",$w);return t._reactRootContainer=l,t[ni]=l.current,Zl(t.nodeType===8?t.parentNode:t),Hs(function(){Qd(e,l,n,r)}),l}function ef(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ed(o);a.call(l)}}Qd(e,o,t,i)}else o=_M(n,e,t,i,r);return ed(o)}ux=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fl(e.pendingLanes);n!==0&&(Ey(e,n|1),wn(e,it()),!(Te&6)&&(oa=it()+500,us()))}break;case 13:Hs(function(){var r=ri(t,1);if(r!==null){var i=on();sr(r,t,1,i)}}),ev(t,1)}};Sy=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var n=on();sr(e,t,134217728,n)}ev(t,134217728)}};cx=function(t){if(t.tag===13){var e=Hi(t),n=ri(t,e);if(n!==null){var r=on();sr(n,t,e,r)}ev(t,e)}};hx=function(){return Re};dx=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};wm=function(t,e,n){switch(e){case"input":if(fm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hd(r);if(!i)throw Error(Y(90));z1(r),fm(r,i)}}}break;case"textarea":W1(t,n);break;case"select":e=n.value,e!=null&&Uo(t,!!n.multiple,e,!1)}};J1=Xy;Z1=Hs;var wM={usingClientEntryPoint:!1,Events:[Lu,Co,Hd,Y1,Q1,Xy]},rl={findFiberByHostInstance:Cs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},EM={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nx(t),t===null?null:t.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||vM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{jd=Fc.inject(EM),_r=Fc}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wM;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nv(e))throw Error(Y(200));return yM(t,e,null,n)};Dn.createRoot=function(t,e){if(!nv(t))throw Error(Y(299));var n=!1,r="",i=VI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zy(t,1,!1,null,null,n,!1,r,i),t[ni]=e.current,Zl(t.nodeType===8?t.parentNode:t),new tv(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=nx(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return Hs(t)};Dn.hydrate=function(t,e,n){if(!Zd(e))throw Error(Y(200));return ef(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!nv(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=VI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=MI(e,null,t,1,n??null,i,!1,s,o),t[ni]=e.current,Zl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Jd(e)};Dn.render=function(t,e,n){if(!Zd(e))throw Error(Y(200));return ef(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!Zd(t))throw Error(Y(40));return t._reactRootContainer?(Hs(function(){ef(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};Dn.unstable_batchedUpdates=Xy;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zd(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return ef(t,e,n,!1,r)};Dn.version="18.2.0-next-9e3b772b8-20220608";function LI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LI)}catch(t){console.error(t)}}LI(),M1.exports=Dn;var Ri=M1.exports,Bw=Ri;om.createRoot=Bw.createRoot,om.hydrateRoot=Bw.hydrateRoot;function Vn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Vn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var OI={exports:{}},FI={},UI={exports:{}},jI={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=T;function SM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TM=typeof Object.is=="function"?Object.is:SM,xM=aa.useState,IM=aa.useEffect,CM=aa.useLayoutEffect,AM=aa.useDebugValue;function PM(t,e){var n=e(),r=xM({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return CM(function(){i.value=n,i.getSnapshot=e,wp(i)&&s({inst:i})},[t,n,e]),IM(function(){return wp(i)&&s({inst:i}),t(function(){wp(i)&&s({inst:i})})},[t]),AM(n),n}function wp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!TM(t,n)}catch{return!0}}function RM(t,e){return e()}var kM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?RM:PM;jI.useSyncExternalStore=aa.useSyncExternalStore!==void 0?aa.useSyncExternalStore:kM;UI.exports=jI;var bM=UI.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf=T,NM=bM;function DM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MM=typeof Object.is=="function"?Object.is:DM,VM=NM.useSyncExternalStore,LM=tf.useRef,OM=tf.useEffect,FM=tf.useMemo,UM=tf.useDebugValue;FI.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=LM(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=FM(function(){function l(m){if(!u){if(u=!0,h=m,m=r(m),i!==void 0&&o.hasValue){var E=o.value;if(i(E,m))return d=E}return d=m}if(E=d,MM(h,m))return E;var w=r(m);return i!==void 0&&i(E,w)?E:(h=m,d=w)}var u=!1,h,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=VM(t,s[0],s[1]);return OM(function(){o.hasValue=!0,o.value=a},[a]),UM(a),a};OI.exports=FI;var jM=OI.exports;const $I=T1(jM),$M={BASE_URL:"/flow-app/dist/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},zw=t=>{let e;const n=new Set,r=(h,d)=>{const f=typeof h=="function"?h(e):h;if(!Object.is(f,e)){const m=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(E=>E(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{($M?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,l);return l},BI=t=>t?zw(t):zw,{useDebugValue:BM}=G,{useSyncExternalStoreWithSelector:zM}=$I,HM=t=>t;function zI(t,e=HM,n){const r=zM(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return BM(r),r}const Hw=(t,e)=>{const n=BI(t),r=(i,s=e)=>zI(n,i,s);return Object.assign(r,n),r},WM=(t,e)=>t?Hw(t,e):Hw;function Vt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var KM={value:()=>{}};function nf(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ph(n)}function ph(t){this._=t}function GM(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ph.prototype=nf.prototype={constructor:ph,on:function(t,e){var n=this._,r=GM(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=qM(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Ww(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ww(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ph(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function qM(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ww(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=KM,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Zm="http://www.w3.org/1999/xhtml";const Kw={svg:"http://www.w3.org/2000/svg",xhtml:Zm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Kw.hasOwnProperty(e)?{space:Kw[e],local:t}:t}function XM(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Zm&&e.documentElement.namespaceURI===Zm?e.createElement(t):e.createElementNS(n,t)}}function YM(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function HI(t){var e=rf(t);return(e.local?YM:XM)(e)}function QM(){}function rv(t){return t==null?QM:function(){return this.querySelector(t)}}function JM(t){typeof t!="function"&&(t=rv(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,u,h=0;h<o;++h)(l=s[h])&&(u=t.call(l,l.__data__,h,s))&&("__data__"in l&&(u.__data__=l.__data__),a[h]=u);return new bn(r,this._parents)}function ZM(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function eV(){return[]}function WI(t){return t==null?eV:function(){return this.querySelectorAll(t)}}function tV(t){return function(){return ZM(t.apply(this,arguments))}}function nV(t){typeof t=="function"?t=tV(t):t=WI(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new bn(r,i)}function KI(t){return function(){return this.matches(t)}}function GI(t){return function(e){return e.matches(t)}}var rV=Array.prototype.find;function iV(t){return function(){return rV.call(this.children,t)}}function sV(){return this.firstElementChild}function oV(t){return this.select(t==null?sV:iV(typeof t=="function"?t:GI(t)))}var aV=Array.prototype.filter;function lV(){return Array.from(this.children)}function uV(t){return function(){return aV.call(this.children,t)}}function cV(t){return this.selectAll(t==null?lV:uV(typeof t=="function"?t:GI(t)))}function hV(t){typeof t!="function"&&(t=KI(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new bn(r,this._parents)}function qI(t){return new Array(t.length)}function dV(){return new bn(this._enter||this._groups.map(qI),this._parents)}function td(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}td.prototype={constructor:td,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fV(t){return function(){return t}}function pV(t,e,n,r,i,s){for(var o=0,a,l=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new td(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function mV(t,e,n,r,i,s,o){var a,l,u=new Map,h=e.length,d=s.length,f=new Array(h),m;for(a=0;a<h;++a)(l=e[a])&&(f[a]=m=o.call(l,l.__data__,a,e)+"",u.has(m)?i[a]=l:u.set(m,l));for(a=0;a<d;++a)m=o.call(t,s[a],a,s)+"",(l=u.get(m))?(r[a]=l,l.__data__=s[a],u.delete(m)):n[a]=new td(t,s[a]);for(a=0;a<h;++a)(l=e[a])&&u.get(f[a])===l&&(i[a]=l)}function gV(t){return t.__data__}function yV(t,e){if(!arguments.length)return Array.from(this,gV);var n=e?mV:pV,r=this._parents,i=this._groups;typeof t!="function"&&(t=fV(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],d=i[u],f=d.length,m=vV(t.call(h,h&&h.__data__,u,r)),E=m.length,w=a[u]=new Array(E),x=o[u]=new Array(E),g=l[u]=new Array(f);n(h,d,w,x,g,m,e);for(var y=0,S=0,I,R;y<E;++y)if(I=w[y]){for(y>=S&&(S=y+1);!(R=x[S])&&++S<E;);I._next=R||null}}return o=new bn(o,r),o._enter=a,o._exit=l,o}function vV(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _V(){return new bn(this._exit||this._groups.map(qI),this._parents)}function wV(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function EV(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],h=r[l],d=u.length,f=a[l]=new Array(d),m,E=0;E<d;++E)(m=u[E]||h[E])&&(f[E]=m);for(;l<i;++l)a[l]=n[l];return new bn(a,this._parents)}function SV(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function TV(t){t||(t=xV);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,h=0;h<a;++h)(u=o[h])&&(l[h]=u);l.sort(e)}return new bn(i,this._parents).order()}function xV(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function IV(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function CV(){return Array.from(this)}function AV(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function PV(){let t=0;for(const e of this)++t;return t}function RV(){return!this.node()}function kV(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function bV(t){return function(){this.removeAttribute(t)}}function NV(t){return function(){this.removeAttributeNS(t.space,t.local)}}function DV(t,e){return function(){this.setAttribute(t,e)}}function MV(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function VV(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function LV(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function OV(t,e){var n=rf(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?NV:bV:typeof e=="function"?n.local?LV:VV:n.local?MV:DV)(n,e))}function XI(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function FV(t){return function(){this.style.removeProperty(t)}}function UV(t,e,n){return function(){this.style.setProperty(t,e,n)}}function jV(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function $V(t,e,n){return arguments.length>1?this.each((e==null?FV:typeof e=="function"?jV:UV)(t,e,n??"")):la(this.node(),t)}function la(t,e){return t.style.getPropertyValue(e)||XI(t).getComputedStyle(t,null).getPropertyValue(e)}function BV(t){return function(){delete this[t]}}function zV(t,e){return function(){this[t]=e}}function HV(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function WV(t,e){return arguments.length>1?this.each((e==null?BV:typeof e=="function"?HV:zV)(t,e)):this.node()[t]}function YI(t){return t.trim().split(/^|\s+/)}function iv(t){return t.classList||new QI(t)}function QI(t){this._node=t,this._names=YI(t.getAttribute("class")||"")}QI.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function JI(t,e){for(var n=iv(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ZI(t,e){for(var n=iv(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function KV(t){return function(){JI(this,t)}}function GV(t){return function(){ZI(this,t)}}function qV(t,e){return function(){(e.apply(this,arguments)?JI:ZI)(this,t)}}function XV(t,e){var n=YI(t+"");if(arguments.length<2){for(var r=iv(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?qV:e?KV:GV)(n,e))}function YV(){this.textContent=""}function QV(t){return function(){this.textContent=t}}function JV(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ZV(t){return arguments.length?this.each(t==null?YV:(typeof t=="function"?JV:QV)(t)):this.node().textContent}function e2(){this.innerHTML=""}function t2(t){return function(){this.innerHTML=t}}function n2(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function r2(t){return arguments.length?this.each(t==null?e2:(typeof t=="function"?n2:t2)(t)):this.node().innerHTML}function i2(){this.nextSibling&&this.parentNode.appendChild(this)}function s2(){return this.each(i2)}function o2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function a2(){return this.each(o2)}function l2(t){var e=typeof t=="function"?t:HI(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function u2(){return null}function c2(t,e){var n=typeof t=="function"?t:HI(t),r=e==null?u2:typeof e=="function"?e:rv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function h2(){var t=this.parentNode;t&&t.removeChild(this)}function d2(){return this.each(h2)}function f2(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function p2(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function m2(t){return this.select(t?p2:f2)}function g2(t){return arguments.length?this.property("__data__",t):this.node().__data__}function y2(t){return function(e){t.call(this,e,this.__data__)}}function v2(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function _2(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function w2(t,e,n){return function(){var r=this.__on,i,s=y2(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function E2(t,e,n){var r=v2(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,h;l<u;++l)for(i=0,h=a[l];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(a=e?w2:_2,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function eC(t,e,n){var r=XI(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function S2(t,e){return function(){return eC(this,t,e)}}function T2(t,e){return function(){return eC(this,t,e.apply(this,arguments))}}function x2(t,e){return this.each((typeof e=="function"?T2:S2)(t,e))}function*I2(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var tC=[null];function bn(t,e){this._groups=t,this._parents=e}function Fu(){return new bn([[document.documentElement]],tC)}function C2(){return this}bn.prototype=Fu.prototype={constructor:bn,select:JM,selectAll:nV,selectChild:oV,selectChildren:cV,filter:hV,data:yV,enter:dV,exit:_V,join:wV,merge:EV,selection:C2,order:SV,sort:TV,call:IV,nodes:CV,node:AV,size:PV,empty:RV,each:kV,attr:OV,style:$V,property:WV,classed:XV,text:ZV,html:r2,raise:s2,lower:a2,append:l2,insert:c2,remove:d2,clone:m2,datum:g2,on:E2,dispatch:x2,[Symbol.iterator]:I2};function nr(t){return typeof t=="string"?new bn([[document.querySelector(t)]],[document.documentElement]):new bn([[t]],tC)}function A2(t){let e;for(;e=t.sourceEvent;)t=e;return t}function yr(t,e){if(t=A2(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const P2={passive:!1},lu={capture:!0,passive:!1};function Ep(t){t.stopImmediatePropagation()}function Wo(t){t.preventDefault(),t.stopImmediatePropagation()}function nC(t){var e=t.document.documentElement,n=nr(t).on("dragstart.drag",Wo,lu);"onselectstart"in e?n.on("selectstart.drag",Wo,lu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function rC(t,e){var n=t.document.documentElement,r=nr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Wo,lu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Uc=t=>()=>t;function eg(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}eg.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function R2(t){return!t.ctrlKey&&!t.button}function k2(){return this.parentNode}function b2(t,e){return e??{x:t.x,y:t.y}}function N2(){return navigator.maxTouchPoints||"ontouchstart"in this}function D2(){var t=R2,e=k2,n=b2,r=N2,i={},s=nf("start","drag","end"),o=0,a,l,u,h,d=0;function f(I){I.on("mousedown.drag",m).filter(r).on("touchstart.drag",x).on("touchmove.drag",g,P2).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(I,R){if(!(h||!t.call(this,I,R))){var M=S(this,e.call(this,I,R),I,R,"mouse");M&&(nr(I.view).on("mousemove.drag",E,lu).on("mouseup.drag",w,lu),nC(I.view),Ep(I),u=!1,a=I.clientX,l=I.clientY,M("start",I))}}function E(I){if(Wo(I),!u){var R=I.clientX-a,M=I.clientY-l;u=R*R+M*M>d}i.mouse("drag",I)}function w(I){nr(I.view).on("mousemove.drag mouseup.drag",null),rC(I.view,u),Wo(I),i.mouse("end",I)}function x(I,R){if(t.call(this,I,R)){var M=I.changedTouches,C=e.call(this,I,R),_=M.length,A,k;for(A=0;A<_;++A)(k=S(this,C,I,R,M[A].identifier,M[A]))&&(Ep(I),k("start",I,M[A]))}}function g(I){var R=I.changedTouches,M=R.length,C,_;for(C=0;C<M;++C)(_=i[R[C].identifier])&&(Wo(I),_("drag",I,R[C]))}function y(I){var R=I.changedTouches,M=R.length,C,_;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),C=0;C<M;++C)(_=i[R[C].identifier])&&(Ep(I),_("end",I,R[C]))}function S(I,R,M,C,_,A){var k=s.copy(),N=yr(A||M,R),D,P,V;if((V=n.call(I,new eg("beforestart",{sourceEvent:M,target:f,identifier:_,active:o,x:N[0],y:N[1],dx:0,dy:0,dispatch:k}),C))!=null)return D=V.x-N[0]||0,P=V.y-N[1]||0,function U(j,z,F){var O=N,B;switch(j){case"start":i[_]=U,B=o++;break;case"end":delete i[_],--o;case"drag":N=yr(F||z,R),B=o;break}k.call(j,I,new eg(j,{sourceEvent:z,subject:V,target:f,identifier:_,active:B,x:N[0]+D,y:N[1]+P,dx:N[0]-O[0],dy:N[1]-O[1],dispatch:k}),C)}}return f.filter=function(I){return arguments.length?(t=typeof I=="function"?I:Uc(!!I),f):t},f.container=function(I){return arguments.length?(e=typeof I=="function"?I:Uc(I),f):e},f.subject=function(I){return arguments.length?(n=typeof I=="function"?I:Uc(I),f):n},f.touchable=function(I){return arguments.length?(r=typeof I=="function"?I:Uc(!!I),f):r},f.on=function(){var I=s.on.apply(s,arguments);return I===s?f:I},f.clickDistance=function(I){return arguments.length?(d=(I=+I)*I,f):Math.sqrt(d)},f}function sv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function iC(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Uu(){}var uu=.7,nd=1/uu,Ko="\\s*([+-]?\\d+)\\s*",cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M2=/^#([0-9a-f]{3,8})$/,V2=new RegExp(`^rgb\\(${Ko},${Ko},${Ko}\\)$`),L2=new RegExp(`^rgb\\(${Er},${Er},${Er}\\)$`),O2=new RegExp(`^rgba\\(${Ko},${Ko},${Ko},${cu}\\)$`),F2=new RegExp(`^rgba\\(${Er},${Er},${Er},${cu}\\)$`),U2=new RegExp(`^hsl\\(${cu},${Er},${Er}\\)$`),j2=new RegExp(`^hsla\\(${cu},${Er},${Er},${cu}\\)$`),Gw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sv(Uu,hu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:qw,formatHex:qw,formatHex8:$2,formatHsl:B2,formatRgb:Xw,toString:Xw});function qw(){return this.rgb().formatHex()}function $2(){return this.rgb().formatHex8()}function B2(){return sC(this).formatHsl()}function Xw(){return this.rgb().formatRgb()}function hu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=M2.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Yw(e):n===3?new yn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?jc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?jc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=V2.exec(t))?new yn(e[1],e[2],e[3],1):(e=L2.exec(t))?new yn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=O2.exec(t))?jc(e[1],e[2],e[3],e[4]):(e=F2.exec(t))?jc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=U2.exec(t))?Zw(e[1],e[2]/100,e[3]/100,1):(e=j2.exec(t))?Zw(e[1],e[2]/100,e[3]/100,e[4]):Gw.hasOwnProperty(t)?Yw(Gw[t]):t==="transparent"?new yn(NaN,NaN,NaN,0):null}function Yw(t){return new yn(t>>16&255,t>>8&255,t&255,1)}function jc(t,e,n,r){return r<=0&&(t=e=n=NaN),new yn(t,e,n,r)}function z2(t){return t instanceof Uu||(t=hu(t)),t?(t=t.rgb(),new yn(t.r,t.g,t.b,t.opacity)):new yn}function tg(t,e,n,r){return arguments.length===1?z2(t):new yn(t,e,n,r??1)}function yn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}sv(yn,tg,iC(Uu,{brighter(t){return t=t==null?nd:Math.pow(nd,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?uu:Math.pow(uu,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yn(Ls(this.r),Ls(this.g),Ls(this.b),rd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qw,formatHex:Qw,formatHex8:H2,formatRgb:Jw,toString:Jw}));function Qw(){return`#${Rs(this.r)}${Rs(this.g)}${Rs(this.b)}`}function H2(){return`#${Rs(this.r)}${Rs(this.g)}${Rs(this.b)}${Rs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jw(){const t=rd(this.opacity);return`${t===1?"rgb(":"rgba("}${Ls(this.r)}, ${Ls(this.g)}, ${Ls(this.b)}${t===1?")":`, ${t})`}`}function rd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ls(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Rs(t){return t=Ls(t),(t<16?"0":"")+t.toString(16)}function Zw(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rr(t,e,n,r)}function sC(t){if(t instanceof rr)return new rr(t.h,t.s,t.l,t.opacity);if(t instanceof Uu||(t=hu(t)),!t)return new rr;if(t instanceof rr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new rr(o,a,l,t.opacity)}function W2(t,e,n,r){return arguments.length===1?sC(t):new rr(t,e,n,r??1)}function rr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}sv(rr,W2,iC(Uu,{brighter(t){return t=t==null?nd:Math.pow(nd,t),new rr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?uu:Math.pow(uu,t),new rr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new yn(Sp(t>=240?t-240:t+120,i,r),Sp(t,i,r),Sp(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new rr(eE(this.h),$c(this.s),$c(this.l),rd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=rd(this.opacity);return`${t===1?"hsl(":"hsla("}${eE(this.h)}, ${$c(this.s)*100}%, ${$c(this.l)*100}%${t===1?")":`, ${t})`}`}}));function eE(t){return t=(t||0)%360,t<0?t+360:t}function $c(t){return Math.max(0,Math.min(1,t||0))}function Sp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const oC=t=>()=>t;function K2(t,e){return function(n){return t+n*e}}function G2(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function q2(t){return(t=+t)==1?aC:function(e,n){return n-e?G2(e,n,t):oC(isNaN(e)?n:e)}}function aC(t,e){var n=e-t;return n?K2(t,n):oC(isNaN(t)?e:t)}const tE=function t(e){var n=q2(e);function r(i,s){var o=n((i=tg(i)).r,(s=tg(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=aC(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=a(h),i.b=l(h),i.opacity=u(h),i+""}}return r.gamma=t,r}(1);function xi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ng=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tp=new RegExp(ng.source,"g");function X2(t){return function(){return t}}function Y2(t){return function(e){return t(e)+""}}function Q2(t,e){var n=ng.lastIndex=Tp.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=ng.exec(t))&&(i=Tp.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:xi(r,i)})),n=Tp.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Y2(l[0].x):X2(e):(e=l.length,function(u){for(var h=0,d;h<e;++h)a[(d=l[h]).i]=d.x(u);return a.join("")})}var nE=180/Math.PI,rg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lC(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*nE,skewX:Math.atan(l)*nE,scaleX:o,scaleY:a}}var Bc;function J2(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?rg:lC(e.a,e.b,e.c,e.d,e.e,e.f)}function Z2(t){return t==null||(Bc||(Bc=document.createElementNS("http://www.w3.org/2000/svg","g")),Bc.setAttribute("transform",t),!(t=Bc.transform.baseVal.consolidate()))?rg:(t=t.matrix,lC(t.a,t.b,t.c,t.d,t.e,t.f))}function uC(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,h,d,f,m,E){if(u!==d||h!==f){var w=m.push("translate(",null,e,null,n);E.push({i:w-4,x:xi(u,d)},{i:w-2,x:xi(h,f)})}else(d||f)&&m.push("translate("+d+e+f+n)}function o(u,h,d,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:xi(u,h)})):h&&d.push(i(d)+"rotate("+h+r)}function a(u,h,d,f){u!==h?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:xi(u,h)}):h&&d.push(i(d)+"skewX("+h+r)}function l(u,h,d,f,m,E){if(u!==d||h!==f){var w=m.push(i(m)+"scale(",null,",",null,")");E.push({i:w-4,x:xi(u,d)},{i:w-2,x:xi(h,f)})}else(d!==1||f!==1)&&m.push(i(m)+"scale("+d+","+f+")")}return function(u,h){var d=[],f=[];return u=t(u),h=t(h),s(u.translateX,u.translateY,h.translateX,h.translateY,d,f),o(u.rotate,h.rotate,d,f),a(u.skewX,h.skewX,d,f),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,d,f),u=h=null,function(m){for(var E=-1,w=f.length,x;++E<w;)d[(x=f[E]).i]=x.x(m);return d.join("")}}}var eL=uC(J2,"px, ","px)","deg)"),tL=uC(Z2,", ",")",")"),nL=1e-12;function rE(t){return((t=Math.exp(t))+1/t)/2}function rL(t){return((t=Math.exp(t))-1/t)/2}function iL(t){return((t=Math.exp(2*t))-1)/(t+1)}const sL=function t(e,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],h=o[0],d=o[1],f=o[2],m=h-a,E=d-l,w=m*m+E*E,x,g;if(w<nL)g=Math.log(f/u)/e,x=function(C){return[a+C*m,l+C*E,u*Math.exp(e*C*g)]};else{var y=Math.sqrt(w),S=(f*f-u*u+r*w)/(2*u*n*y),I=(f*f-u*u-r*w)/(2*f*n*y),R=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(I*I+1)-I);g=(M-R)/e,x=function(C){var _=C*g,A=rE(R),k=u/(n*y)*(A*iL(e*_+R)-rL(R));return[a+k*m,l+k*E,u*A/rE(e*_+R)]}}return x.duration=g*1e3*e/Math.SQRT2,x}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i}(Math.SQRT2,2,4);var ua=0,ml=0,il=0,cC=1e3,id,gl,sd=0,Ws=0,sf=0,du=typeof performance=="object"&&performance.now?performance:Date,hC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ov(){return Ws||(hC(oL),Ws=du.now()+sf)}function oL(){Ws=0}function od(){this._call=this._time=this._next=null}od.prototype=dC.prototype={constructor:od,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ov():+n)+(e==null?0:+e),!this._next&&gl!==this&&(gl?gl._next=this:id=this,gl=this),this._call=t,this._time=n,ig()},stop:function(){this._call&&(this._call=null,this._time=1/0,ig())}};function dC(t,e,n){var r=new od;return r.restart(t,e,n),r}function aL(){ov(),++ua;for(var t=id,e;t;)(e=Ws-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ua}function iE(){Ws=(sd=du.now())+sf,ua=ml=0;try{aL()}finally{ua=0,uL(),Ws=0}}function lL(){var t=du.now(),e=t-sd;e>cC&&(sf-=e,sd=t)}function uL(){for(var t,e=id,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:id=n);gl=t,ig(r)}function ig(t){if(!ua){ml&&(ml=clearTimeout(ml));var e=t-Ws;e>24?(t<1/0&&(ml=setTimeout(iE,t-du.now()-sf)),il&&(il=clearInterval(il))):(il||(sd=du.now(),il=setInterval(lL,cC)),ua=1,hC(iE))}}function sE(t,e,n){var r=new od;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var cL=nf("start","end","cancel","interrupt"),hL=[],fC=0,oE=1,sg=2,mh=3,aE=4,og=5,gh=6;function of(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;dL(t,n,{name:e,index:r,group:i,on:cL,tween:hL,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fC})}function av(t,e){var n=cr(t,e);if(n.state>fC)throw new Error("too late; already scheduled");return n}function Nr(t,e){var n=cr(t,e);if(n.state>mh)throw new Error("too late; already running");return n}function cr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function dL(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=dC(s,0,n.time);function s(u){n.state=oE,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var h,d,f,m;if(n.state!==oE)return l();for(h in r)if(m=r[h],m.name===n.name){if(m.state===mh)return sE(o);m.state===aE?(m.state=gh,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[h]):+h<e&&(m.state=gh,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[h])}if(sE(function(){n.state===mh&&(n.state=aE,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=sg,n.on.call("start",t,t.__data__,n.index,n.group),n.state===sg){for(n.state=mh,i=new Array(f=n.tween.length),h=0,d=-1;h<f;++h)(m=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=m);i.length=d+1}}function a(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=og,1),d=-1,f=i.length;++d<f;)i[d].call(t,h);n.state===og&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=gh,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function yh(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>sg&&r.state<og,r.state=gh,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function fL(t){return this.each(function(){yh(this,t)})}function pL(t,e){var n,r;return function(){var i=Nr(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function mL(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Nr(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function gL(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=cr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?pL:mL)(n,t,e))}function lv(t,e,n){var r=t._id;return t.each(function(){var i=Nr(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return cr(i,r).value[e]}}function pC(t,e){var n;return(typeof e=="number"?xi:e instanceof hu?tE:(n=hu(e))?(e=n,tE):Q2)(t,e)}function yL(t){return function(){this.removeAttribute(t)}}function vL(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _L(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function wL(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function EL(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function SL(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function TL(t,e){var n=rf(t),r=n==="transform"?tL:pC;return this.attrTween(t,typeof e=="function"?(n.local?SL:EL)(n,r,lv(this,"attr."+t,e)):e==null?(n.local?vL:yL)(n):(n.local?wL:_L)(n,r,e))}function xL(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function IL(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function CL(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&IL(t,s)),n}return i._value=e,i}function AL(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&xL(t,s)),n}return i._value=e,i}function PL(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=rf(t);return this.tween(n,(r.local?CL:AL)(r,e))}function RL(t,e){return function(){av(this,t).delay=+e.apply(this,arguments)}}function kL(t,e){return e=+e,function(){av(this,t).delay=e}}function bL(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?RL:kL)(e,t)):cr(this.node(),e).delay}function NL(t,e){return function(){Nr(this,t).duration=+e.apply(this,arguments)}}function DL(t,e){return e=+e,function(){Nr(this,t).duration=e}}function ML(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?NL:DL)(e,t)):cr(this.node(),e).duration}function VL(t,e){if(typeof e!="function")throw new Error;return function(){Nr(this,t).ease=e}}function LL(t){var e=this._id;return arguments.length?this.each(VL(e,t)):cr(this.node(),e).ease}function OL(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Nr(this,t).ease=n}}function FL(t){if(typeof t!="function")throw new Error;return this.each(OL(this._id,t))}function UL(t){typeof t!="function"&&(t=KI(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new si(r,this._parents,this._name,this._id)}function jL(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],u=n[a],h=l.length,d=o[a]=new Array(h),f,m=0;m<h;++m)(f=l[m]||u[m])&&(d[m]=f);for(;a<r;++a)o[a]=e[a];return new si(o,this._parents,this._name,this._id)}function $L(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function BL(t,e,n){var r,i,s=$L(e)?av:Nr;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function zL(t,e){var n=this._id;return arguments.length<2?cr(this.node(),n).on.on(t):this.each(BL(n,t,e))}function HL(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function WL(){return this.on("end.remove",HL(this._id))}function KL(t){var e=this._name,n=this._id;typeof t!="function"&&(t=rv(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),h,d,f=0;f<l;++f)(h=a[f])&&(d=t.call(h,h.__data__,f,a))&&("__data__"in h&&(d.__data__=h.__data__),u[f]=d,of(u[f],e,n,f,u,cr(h,n)));return new si(s,this._parents,e,n)}function GL(t){var e=this._name,n=this._id;typeof t!="function"&&(t=WI(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,h,d=0;d<u;++d)if(h=l[d]){for(var f=t.call(h,h.__data__,d,l),m,E=cr(h,n),w=0,x=f.length;w<x;++w)(m=f[w])&&of(m,e,n,w,f,E);s.push(f),o.push(h)}return new si(s,o,e,n)}var qL=Fu.prototype.constructor;function XL(){return new qL(this._groups,this._parents)}function YL(t,e){var n,r,i;return function(){var s=la(this,t),o=(this.style.removeProperty(t),la(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function mC(t){return function(){this.style.removeProperty(t)}}function QL(t,e,n){var r,i=n+"",s;return function(){var o=la(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function JL(t,e,n){var r,i,s;return function(){var o=la(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),la(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function ZL(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=Nr(this,t),u=l.on,h=l.value[s]==null?a||(a=mC(e)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(o,i=h),l.on=r}}function eO(t,e,n){var r=(t+="")=="transform"?eL:pC;return e==null?this.styleTween(t,YL(t,r)).on("end.style."+t,mC(t)):typeof e=="function"?this.styleTween(t,JL(t,r,lv(this,"style."+t,e))).each(ZL(this._id,t)):this.styleTween(t,QL(t,r,e),n).on("end.style."+t,null)}function tO(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function nO(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&tO(t,o,n)),r}return s._value=e,s}function rO(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,nO(t,e,n??""))}function iO(t){return function(){this.textContent=t}}function sO(t){return function(){var e=t(this);this.textContent=e??""}}function oO(t){return this.tween("text",typeof t=="function"?sO(lv(this,"text",t)):iO(t==null?"":t+""))}function aO(t){return function(e){this.textContent=t.call(this,e)}}function lO(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&aO(i)),e}return r._value=t,r}function uO(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,lO(t))}function cO(){for(var t=this._name,e=this._id,n=gC(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var h=cr(l,e);of(l,t,n,u,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new si(r,this._parents,t,n)}function hO(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=Nr(this,r),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&s()})}var dO=0;function si(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function gC(){return++dO}var Fr=Fu.prototype;si.prototype={constructor:si,select:KL,selectAll:GL,selectChild:Fr.selectChild,selectChildren:Fr.selectChildren,filter:UL,merge:jL,selection:XL,transition:cO,call:Fr.call,nodes:Fr.nodes,node:Fr.node,size:Fr.size,empty:Fr.empty,each:Fr.each,on:zL,attr:TL,attrTween:PL,style:eO,styleTween:rO,text:oO,textTween:uO,remove:WL,tween:gL,delay:bL,duration:ML,ease:LL,easeVarying:FL,end:hO,[Symbol.iterator]:Fr[Symbol.iterator]};function fO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var pO={time:null,delay:0,duration:250,ease:fO};function mO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function gO(t){var e,n;t instanceof si?(e=t._id,t=t._name):(e=gC(),(n=pO).time=ov(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&of(l,t,e,u,o,n||mO(l,e));return new si(r,this._parents,t,e)}Fu.prototype.interrupt=fL;Fu.prototype.transition=gO;const zc=t=>()=>t;function yO(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Hr(t,e,n){this.k=t,this.x=e,this.y=n}Hr.prototype={constructor:Hr,scale:function(t){return t===1?this:new Hr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Hr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ki=new Hr(1,0,0);Hr.prototype;function xp(t){t.stopImmediatePropagation()}function sl(t){t.preventDefault(),t.stopImmediatePropagation()}function vO(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function _O(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function lE(){return this.__zoom||Ki}function wO(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function EO(){return navigator.maxTouchPoints||"ontouchstart"in this}function SO(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function TO(){var t=vO,e=_O,n=SO,r=wO,i=EO,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=sL,u=nf("start","zoom","end"),h,d,f,m=500,E=150,w=0,x=10;function g(V){V.property("__zoom",lE).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",N).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(V,U,j,z){var F=V.selection?V.selection():V;F.property("__zoom",lE),V!==F?R(V,U,j,z):F.interrupt().each(function(){M(this,arguments).event(z).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},g.scaleBy=function(V,U,j,z){g.scaleTo(V,function(){var F=this.__zoom.k,O=typeof U=="function"?U.apply(this,arguments):U;return F*O},j,z)},g.scaleTo=function(V,U,j,z){g.transform(V,function(){var F=e.apply(this,arguments),O=this.__zoom,B=j==null?I(F):typeof j=="function"?j.apply(this,arguments):j,W=O.invert(B),K=typeof U=="function"?U.apply(this,arguments):U;return n(S(y(O,K),B,W),F,o)},j,z)},g.translateBy=function(V,U,j,z){g.transform(V,function(){return n(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof j=="function"?j.apply(this,arguments):j),e.apply(this,arguments),o)},null,z)},g.translateTo=function(V,U,j,z,F){g.transform(V,function(){var O=e.apply(this,arguments),B=this.__zoom,W=z==null?I(O):typeof z=="function"?z.apply(this,arguments):z;return n(Ki.translate(W[0],W[1]).scale(B.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof j=="function"?-j.apply(this,arguments):-j),O,o)},z,F)};function y(V,U){return U=Math.max(s[0],Math.min(s[1],U)),U===V.k?V:new Hr(U,V.x,V.y)}function S(V,U,j){var z=U[0]-j[0]*V.k,F=U[1]-j[1]*V.k;return z===V.x&&F===V.y?V:new Hr(V.k,z,F)}function I(V){return[(+V[0][0]+ +V[1][0])/2,(+V[0][1]+ +V[1][1])/2]}function R(V,U,j,z){V.on("start.zoom",function(){M(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(z).end()}).tween("zoom",function(){var F=this,O=arguments,B=M(F,O).event(z),W=e.apply(F,O),K=j==null?I(W):typeof j=="function"?j.apply(F,O):j,Q=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),ee=F.__zoom,oe=typeof U=="function"?U.apply(F,O):U,se=l(ee.invert(K).concat(Q/ee.k),oe.invert(K).concat(Q/oe.k));return function(pe){if(pe===1)pe=oe;else{var we=se(pe),ke=Q/we[2];pe=new Hr(ke,K[0]-we[0]*ke,K[1]-we[1]*ke)}B.zoom(null,pe)}})}function M(V,U,j){return!j&&V.__zooming||new C(V,U)}function C(V,U){this.that=V,this.args=U,this.active=0,this.sourceEvent=null,this.extent=e.apply(V,U),this.taps=0}C.prototype={event:function(V){return V&&(this.sourceEvent=V),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(V,U){return this.mouse&&V!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&V!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&V!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(V){var U=nr(this.that).datum();u.call(V,this.that,new yO(V,{sourceEvent:this.sourceEvent,target:g,type:V,transform:this.that.__zoom,dispatch:u}),U)}};function _(V,...U){if(!t.apply(this,arguments))return;var j=M(this,U).event(V),z=this.__zoom,F=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,r.apply(this,arguments)))),O=yr(V);if(j.wheel)(j.mouse[0][0]!==O[0]||j.mouse[0][1]!==O[1])&&(j.mouse[1]=z.invert(j.mouse[0]=O)),clearTimeout(j.wheel);else{if(z.k===F)return;j.mouse=[O,z.invert(O)],yh(this),j.start()}sl(V),j.wheel=setTimeout(B,E),j.zoom("mouse",n(S(y(z,F),j.mouse[0],j.mouse[1]),j.extent,o));function B(){j.wheel=null,j.end()}}function A(V,...U){if(f||!t.apply(this,arguments))return;var j=V.currentTarget,z=M(this,U,!0).event(V),F=nr(V.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",Q,!0),O=yr(V,j),B=V.clientX,W=V.clientY;nC(V.view),xp(V),z.mouse=[O,this.__zoom.invert(O)],yh(this),z.start();function K(ee){if(sl(ee),!z.moved){var oe=ee.clientX-B,se=ee.clientY-W;z.moved=oe*oe+se*se>w}z.event(ee).zoom("mouse",n(S(z.that.__zoom,z.mouse[0]=yr(ee,j),z.mouse[1]),z.extent,o))}function Q(ee){F.on("mousemove.zoom mouseup.zoom",null),rC(ee.view,z.moved),sl(ee),z.event(ee).end()}}function k(V,...U){if(t.apply(this,arguments)){var j=this.__zoom,z=yr(V.changedTouches?V.changedTouches[0]:V,this),F=j.invert(z),O=j.k*(V.shiftKey?.5:2),B=n(S(y(j,O),z,F),e.apply(this,U),o);sl(V),a>0?nr(this).transition().duration(a).call(R,B,z,V):nr(this).call(g.transform,B,z,V)}}function N(V,...U){if(t.apply(this,arguments)){var j=V.touches,z=j.length,F=M(this,U,V.changedTouches.length===z).event(V),O,B,W,K;for(xp(V),B=0;B<z;++B)W=j[B],K=yr(W,this),K=[K,this.__zoom.invert(K),W.identifier],F.touch0?!F.touch1&&F.touch0[2]!==K[2]&&(F.touch1=K,F.taps=0):(F.touch0=K,O=!0,F.taps=1+!!h);h&&(h=clearTimeout(h)),O&&(F.taps<2&&(d=K[0],h=setTimeout(function(){h=null},m)),yh(this),F.start())}}function D(V,...U){if(this.__zooming){var j=M(this,U).event(V),z=V.changedTouches,F=z.length,O,B,W,K;for(sl(V),O=0;O<F;++O)B=z[O],W=yr(B,this),j.touch0&&j.touch0[2]===B.identifier?j.touch0[0]=W:j.touch1&&j.touch1[2]===B.identifier&&(j.touch1[0]=W);if(B=j.that.__zoom,j.touch1){var Q=j.touch0[0],ee=j.touch0[1],oe=j.touch1[0],se=j.touch1[1],pe=(pe=oe[0]-Q[0])*pe+(pe=oe[1]-Q[1])*pe,we=(we=se[0]-ee[0])*we+(we=se[1]-ee[1])*we;B=y(B,Math.sqrt(pe/we)),W=[(Q[0]+oe[0])/2,(Q[1]+oe[1])/2],K=[(ee[0]+se[0])/2,(ee[1]+se[1])/2]}else if(j.touch0)W=j.touch0[0],K=j.touch0[1];else return;j.zoom("touch",n(S(B,W,K),j.extent,o))}}function P(V,...U){if(this.__zooming){var j=M(this,U).event(V),z=V.changedTouches,F=z.length,O,B;for(xp(V),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),O=0;O<F;++O)B=z[O],j.touch0&&j.touch0[2]===B.identifier?delete j.touch0:j.touch1&&j.touch1[2]===B.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(B=yr(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<x)){var W=nr(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return g.wheelDelta=function(V){return arguments.length?(r=typeof V=="function"?V:zc(+V),g):r},g.filter=function(V){return arguments.length?(t=typeof V=="function"?V:zc(!!V),g):t},g.touchable=function(V){return arguments.length?(i=typeof V=="function"?V:zc(!!V),g):i},g.extent=function(V){return arguments.length?(e=typeof V=="function"?V:zc([[+V[0][0],+V[0][1]],[+V[1][0],+V[1][1]]]),g):e},g.scaleExtent=function(V){return arguments.length?(s[0]=+V[0],s[1]=+V[1],g):[s[0],s[1]]},g.translateExtent=function(V){return arguments.length?(o[0][0]=+V[0][0],o[1][0]=+V[1][0],o[0][1]=+V[0][1],o[1][1]=+V[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(V){return arguments.length?(n=V,g):n},g.duration=function(V){return arguments.length?(a=+V,g):a},g.interpolate=function(V){return arguments.length?(l=V,g):l},g.on=function(){var V=u.on.apply(u,arguments);return V===u?g:V},g.clickDistance=function(V){return arguments.length?(w=(V=+V)*V,g):Math.sqrt(w)},g.tapDistance=function(V){return arguments.length?(x=+V,g):x},g}const af=T.createContext(null),xO=af.Provider,oi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},yC=oi.error001();function ze(t,e){const n=T.useContext(af);if(n===null)throw new Error(yC);return zI(n,t,e)}const Ot=()=>{const t=T.useContext(af);if(t===null)throw new Error(yC);return T.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},IO=t=>t.userSelectionActive?"none":"all";function uv({position:t,children:e,className:n,style:r,...i}){const s=ze(IO),o=`${t}`.split("-");return G.createElement("div",{className:Vn(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},e)}function CO({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:G.createElement(uv,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},G.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const AO=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...h})=>{const d=T.useRef(null),[f,m]=T.useState({x:0,y:0,width:0,height:0}),E=Vn(["react-flow__edge-textwrapper",u]);return T.useEffect(()=>{if(d.current){const w=d.current.getBBox();m({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),typeof n>"u"||!n?null:G.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:E,visibility:f.width?"visible":"hidden",...h},i&&G.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),G.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),l)};var PO=T.memo(AO);const cv=t=>({width:t.offsetWidth,height:t.offsetHeight}),ca=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),hv=(t={x:0,y:0},e)=>({x:ca(t.x,e[0][0],e[1][0]),y:ca(t.y,e[0][1],e[1][1])}),uE=(t,e,n)=>t<e?ca(Math.abs(t-e),1,50)/50:t>n?-ca(Math.abs(t-n),1,50)/50:0,vC=(t,e)=>{const n=uE(t.x,35,e.width-35)*20,r=uE(t.y,35,e.height-35)*20;return[n,r]},_C=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},RO=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),dv=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),kO=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),cE=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),ag=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},bO=t=>Kn(t.width)&&Kn(t.height)&&Kn(t.x)&&Kn(t.y),Kn=t=>!isNaN(t)&&isFinite(t),lt=Symbol.for("internals"),wC=["Enter"," ","Escape"],NO=(t,e)=>{},DO=t=>"nativeEvent"in t;function lg(t){var i,s;const e=DO(t)?t.nativeEvent:t,n=((s=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const EC=t=>"clientX"in t,Gi=(t,e)=>{var s,o;const n=EC(t),r=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,i=n?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},ad=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Aa=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:h,markerEnd:d,markerStart:f,interactionWidth:m=20})=>G.createElement(G.Fragment,null,G.createElement("path",{id:t,style:h,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),m&&G.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),i&&Kn(n)&&Kn(r)?G.createElement(PO,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);Aa.displayName="BaseEdge";function ol(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(s=>s.id===t);i&&n(r,{...i})}}function SC({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function TC({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=t*.125+i*.375+o*.375+n*.125,u=e*.125+s*.375+a*.375+r*.125,h=Math.abs(l-t),d=Math.abs(u-e);return[l,u,h,d]}var Ks;(function(t){t.Strict="strict",t.Loose="loose"})(Ks||(Ks={}));var ks;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ks||(ks={}));var ha;(function(t){t.Partial="partial",t.Full="full"})(ha||(ha={}));var ki;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ki||(ki={}));var ld;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(ld||(ld={}));var re;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(re||(re={}));function hE({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===re.Left||t===re.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function xC({sourceX:t,sourceY:e,sourcePosition:n=re.Bottom,targetX:r,targetY:i,targetPosition:s=re.Top}){const[o,a]=hE({pos:n,x1:t,y1:e,x2:r,y2:i}),[l,u]=hE({pos:s,x1:r,y1:i,x2:t,y2:e}),[h,d,f,m]=TC({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${t},${e} C${o},${a} ${l},${u} ${r},${i}`,h,d,f,m]}const fv=T.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=re.Bottom,targetPosition:s=re.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:E,interactionWidth:w})=>{const[x,g,y]=xC({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return G.createElement(Aa,{path:x,labelX:g,labelY:y,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:E,interactionWidth:w})});fv.displayName="SimpleBezierEdge";const dE={[re.Left]:{x:-1,y:0},[re.Right]:{x:1,y:0},[re.Top]:{x:0,y:-1},[re.Bottom]:{x:0,y:1}},MO=({source:t,sourcePosition:e=re.Bottom,target:n})=>e===re.Left||e===re.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},fE=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function VO({source:t,sourcePosition:e=re.Bottom,target:n,targetPosition:r=re.Top,center:i,offset:s}){const o=dE[e],a=dE[r],l={x:t.x+o.x*s,y:t.y+o.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},h=MO({source:l,sourcePosition:e,target:u}),d=h.x!==0?"x":"y",f=h[d];let m=[],E,w;const x={x:0,y:0},g={x:0,y:0},[y,S,I,R]=SC({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[d]*a[d]===-1){E=i.x||y,w=i.y||S;const C=[{x:E,y:l.y},{x:E,y:u.y}],_=[{x:l.x,y:w},{x:u.x,y:w}];o[d]===f?m=d==="x"?C:_:m=d==="x"?_:C}else{const C=[{x:l.x,y:u.y}],_=[{x:u.x,y:l.y}];if(d==="x"?m=o.x===f?_:C:m=o.y===f?C:_,e===r){const P=Math.abs(t[d]-n[d]);if(P<=s){const V=Math.min(s-1,s-P);o[d]===f?x[d]=(l[d]>t[d]?-1:1)*V:g[d]=(u[d]>n[d]?-1:1)*V}}if(e!==r){const P=d==="x"?"y":"x",V=o[d]===a[P],U=l[P]>u[P],j=l[P]<u[P];(o[d]===1&&(!V&&U||V&&j)||o[d]!==1&&(!V&&j||V&&U))&&(m=d==="x"?C:_)}const A={x:l.x+x.x,y:l.y+x.y},k={x:u.x+g.x,y:u.y+g.y},N=Math.max(Math.abs(A.x-m[0].x),Math.abs(k.x-m[0].x)),D=Math.max(Math.abs(A.y-m[0].y),Math.abs(k.y-m[0].y));N>=D?(E=(A.x+k.x)/2,w=m[0].y):(E=m[0].x,w=(A.y+k.y)/2)}return[[t,{x:l.x+x.x,y:l.y+x.y},...m,{x:u.x+g.x,y:u.y+g.y},n],E,w,I,R]}function LO(t,e,n,r){const i=Math.min(fE(t,e)/2,fE(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const u=t.x<n.x?-1:1,h=t.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*h}`}const a=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function ug({sourceX:t,sourceY:e,sourcePosition:n=re.Bottom,targetX:r,targetY:i,targetPosition:s=re.Top,borderRadius:o=5,centerX:a,centerY:l,offset:u=20}){const[h,d,f,m,E]=VO({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:u});return[h.reduce((x,g,y)=>{let S="";return y>0&&y<h.length-1?S=LO(h[y-1],g,h[y+1],o):S=`${y===0?"M":"L"}${g.x} ${g.y}`,x+=S,x},""),d,f,m,E]}const lf=T.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:h,sourcePosition:d=re.Bottom,targetPosition:f=re.Top,markerEnd:m,markerStart:E,pathOptions:w,interactionWidth:x})=>{const[g,y,S]=ug({sourceX:t,sourceY:e,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:w==null?void 0:w.borderRadius,offset:w==null?void 0:w.offset});return G.createElement(Aa,{path:g,labelX:y,labelY:S,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:h,markerEnd:m,markerStart:E,interactionWidth:x})});lf.displayName="SmoothStepEdge";const pv=T.memo(t=>{var e;return G.createElement(lf,{...t,pathOptions:T.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});pv.displayName="StepEdge";function OO({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,a]=SC({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,a]}const mv=T.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:h,markerEnd:d,markerStart:f,interactionWidth:m})=>{const[E,w,x]=OO({sourceX:t,sourceY:e,targetX:n,targetY:r});return G.createElement(Aa,{path:E,labelX:w,labelY:x,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:h,markerEnd:d,markerStart:f,interactionWidth:m})});mv.displayName="StraightEdge";function Hc(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function pE({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case re.Left:return[e-Hc(e-r,s),n];case re.Right:return[e+Hc(r-e,s),n];case re.Top:return[e,n-Hc(n-i,s)];case re.Bottom:return[e,n+Hc(i-n,s)]}}function gv({sourceX:t,sourceY:e,sourcePosition:n=re.Bottom,targetX:r,targetY:i,targetPosition:s=re.Top,curvature:o=.25}){const[a,l]=pE({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[u,h]=pE({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[d,f,m,E]=TC({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:h});return[`M${t},${e} C${a},${l} ${u},${h} ${r},${i}`,d,f,m,E]}const ud=T.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=re.Bottom,targetPosition:s=re.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:E,pathOptions:w,interactionWidth:x})=>{const[g,y,S]=gv({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:w==null?void 0:w.curvature});return G.createElement(Aa,{path:g,labelX:y,labelY:S,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:E,interactionWidth:x})});ud.displayName="BezierEdge";const yv=T.createContext(null),FO=yv.Provider;yv.Consumer;const UO=()=>T.useContext(yv),jO=t=>"id"in t&&"source"in t&&"target"in t,$O=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,cg=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,BO=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),IC=(t,e)=>{if(!t.source||!t.target)return e;let n;return jO(t)?n={...t}:n={...t,id:$O(t)},BO(n,e)?e:e.concat(n)},hg=({x:t,y:e},[n,r,i],s,[o,a])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?{x:o*Math.round(l.x/o),y:a*Math.round(l.y/a)}:l},CC=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),Go=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},vv=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:s,y:o}=Go(i,e).positionAbsolute;return RO(r,dv({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return kO(n)},AC=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const l={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},u=[];return t.forEach(h=>{const{width:d,height:f,selectable:m=!0,hidden:E=!1}=h;if(o&&!m||E)return!1;const{positionAbsolute:w}=Go(h,a),x={x:w.x,y:w.y,width:d||0,height:f||0},g=ag(l,x),y=typeof d>"u"||typeof f>"u"||d===null||f===null,S=s&&g>0,I=(d||0)*(f||0);(y||S||g>=I||h.dragging)&&u.push(h)}),u},PC=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},RC=(t,e,n,r,i,s=.1)=>{const o=e/(t.width*(1+s)),a=n/(t.height*(1+s)),l=Math.min(o,a),u=ca(l,r,i),h=t.x+t.width/2,d=t.y+t.height/2,f=e/2-h*u,m=n/2-d*u;return{x:f,y:m,zoom:u}},Ss=(t,e=0)=>t.transition().duration(e);function mE(t,e,n,r){return(e[n]||[]).reduce((i,s)=>{var o,a;return`${t.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:t.id,x:(((o=t.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function zO(t,e,n,r,i,s){const{x:o,y:a}=Gi(t),u=e.elementsFromPoint(o,a).find(E=>E.classList.contains("react-flow__handle"));if(u){const E=u.getAttribute("data-nodeid");if(E){const w=_v(void 0,u),x=u.getAttribute("data-handleid"),g=s({nodeId:E,id:x,type:w});if(g){const y=i.find(S=>S.nodeId===E&&S.type===w&&S.id===x);return{handle:{id:x,type:w,nodeId:E,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:g}}}}let h=[],d=1/0;if(i.forEach(E=>{const w=Math.sqrt((E.x-n.x)**2+(E.y-n.y)**2);if(w<=r){const x=s(E);w<=d&&(w<d?h=[{handle:E,validHandleResult:x}]:w===d&&h.push({handle:E,validHandleResult:x}),d=w)}}),!h.length)return{handle:null,validHandleResult:kC()};if(h.length===1)return h[0];const f=h.some(({validHandleResult:E})=>E.isValid),m=h.some(({handle:E})=>E.type==="target");return h.find(({handle:E,validHandleResult:w})=>m?E.type==="target":f?w.isValid:!0)||h[0]}const HO={source:null,target:null,sourceHandle:null,targetHandle:null},kC=()=>({handleDomNode:null,isValid:!1,connection:HO,endHandle:null});function bC(t,e,n,r,i,s,o){const a=i==="target",l=o.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...kC(),handleDomNode:l};if(l){const h=_v(void 0,l),d=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),E=l.classList.contains("connectableend"),w={source:a?d:n,sourceHandle:a?f:r,target:a?n:d,targetHandle:a?r:f};u.connection=w,m&&E&&(e===Ks.Strict?a&&h==="source"||!a&&h==="target":d!==n||f!==r)&&(u.endHandle={nodeId:d,handleId:f,type:h},u.isValid=s(w))}return u}function WO({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,s)=>{if(s[lt]){const{handleBounds:o}=s[lt];let a=[],l=[];o&&(a=mE(s,o,"source",`${e}-${n}-${r}`),l=mE(s,o,"target",`${e}-${n}-${r}`)),i.push(...a,...l)}return i},[])}function _v(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Ip(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function KO(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function NC({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:l,onEdgeUpdateEnd:u}){const h=_C(t.target),{connectionMode:d,domNode:f,autoPanOnConnect:m,connectionRadius:E,onConnectStart:w,panBy:x,getNodes:g,cancelConnection:y}=s();let S=0,I;const{x:R,y:M}=Gi(t),C=h==null?void 0:h.elementFromPoint(R,M),_=_v(l,C),A=f==null?void 0:f.getBoundingClientRect();if(!A||!_)return;let k,N=Gi(t,A),D=!1,P=null,V=!1,U=null;const j=WO({nodes:g(),nodeId:n,handleId:e,handleType:_}),z=()=>{if(!m)return;const[B,W]=vC(N,A);x({x:B,y:W}),S=requestAnimationFrame(z)};o({connectionPosition:N,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:_,connectionStartHandle:{nodeId:n,handleId:e,type:_},connectionEndHandle:null}),w==null||w(t,{nodeId:n,handleId:e,handleType:_});function F(B){const{transform:W}=s();N=Gi(B,A);const{handle:K,validHandleResult:Q}=zO(B,h,hg(N,W,!1,[1,1]),E,j,ee=>bC(ee,d,n,e,i?"target":"source",a,h));if(I=K,D||(z(),D=!0),U=Q.handleDomNode,P=Q.connection,V=Q.isValid,o({connectionPosition:I&&V?CC({x:I.x,y:I.y},W):N,connectionStatus:KO(!!I,V),connectionEndHandle:Q.endHandle}),!I&&!V&&!U)return Ip(k);P.source!==P.target&&U&&(Ip(k),k=U,U.classList.add("connecting","react-flow__handle-connecting"),U.classList.toggle("valid",V),U.classList.toggle("react-flow__handle-valid",V))}function O(B){var W,K;(I||U)&&P&&V&&(r==null||r(P)),(K=(W=s()).onConnectEnd)==null||K.call(W,B),l&&(u==null||u(B)),Ip(k),y(),cancelAnimationFrame(S),D=!1,V=!1,P=null,U=null,h.removeEventListener("mousemove",F),h.removeEventListener("mouseup",O),h.removeEventListener("touchmove",F),h.removeEventListener("touchend",O)}h.addEventListener("mousemove",F),h.addEventListener("mouseup",O),h.addEventListener("touchmove",F),h.addEventListener("touchend",O)}const gE=()=>!0,GO=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),qO=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n}},DC=T.forwardRef(({type:t="source",position:e=re.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:u,onMouseDown:h,onTouchStart:d,...f},m)=>{var A,k;const E=o||null,w=t==="target",x=Ot(),g=UO(),{connectOnClick:y,noPanClassName:S}=ze(GO,Vt),{connecting:I,clickConnecting:R}=ze(qO(g,E,t),Vt);g||(k=(A=x.getState()).onError)==null||k.call(A,"010",oi.error010());const M=N=>{const{defaultEdgeOptions:D,onConnect:P,hasDefaultEdges:V}=x.getState(),U={...D,...N};if(V){const{edges:j,setEdges:z}=x.getState();z(IC(U,j))}P==null||P(U),a==null||a(U)},C=N=>{if(!g)return;const D=EC(N);i&&(D&&N.button===0||!D)&&NC({event:N,handleId:E,nodeId:g,onConnect:M,isTarget:w,getState:x.getState,setState:x.setState,isValidConnection:n||x.getState().isValidConnection||gE}),D?h==null||h(N):d==null||d(N)},_=N=>{const{onClickConnectStart:D,onClickConnectEnd:P,connectionClickStartHandle:V,connectionMode:U,isValidConnection:j}=x.getState();if(!g||!V&&!i)return;if(!V){D==null||D(N,{nodeId:g,handleId:E,handleType:t}),x.setState({connectionClickStartHandle:{nodeId:g,type:t,handleId:E}});return}const z=_C(N.target),F=n||j||gE,{connection:O,isValid:B}=bC({nodeId:g,id:E,type:t},U,V.nodeId,V.handleId||null,V.type,F,z);B&&M(O),P==null||P(N),x.setState({connectionClickStartHandle:null})};return G.createElement("div",{"data-handleid":E,"data-nodeid":g,"data-handlepos":e,"data-id":`${g}-${E}-${t}`,className:Vn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",S,u,{source:!w,target:w,connectable:r,connectablestart:i,connectableend:s,connecting:R,connectionindicator:r&&(i&&!I||s&&I)}]),onMouseDown:C,onTouchStart:C,onClick:y?_:void 0,ref:m,...f},l)});DC.displayName="Handle";var ts=T.memo(DC);const MC=({data:t,isConnectable:e,targetPosition:n=re.Top,sourcePosition:r=re.Bottom})=>G.createElement(G.Fragment,null,G.createElement(ts,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,G.createElement(ts,{type:"source",position:r,isConnectable:e}));MC.displayName="DefaultNode";var dg=T.memo(MC);const VC=({data:t,isConnectable:e,sourcePosition:n=re.Bottom})=>G.createElement(G.Fragment,null,t==null?void 0:t.label,G.createElement(ts,{type:"source",position:n,isConnectable:e}));VC.displayName="InputNode";var LC=T.memo(VC);const OC=({data:t,isConnectable:e,targetPosition:n=re.Top})=>G.createElement(G.Fragment,null,G.createElement(ts,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);OC.displayName="OutputNode";var FC=T.memo(OC);const wv=()=>null;wv.displayName="GroupNode";const XO=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),Wc=t=>t.id;function YO(t,e){return Vt(t.selectedNodes.map(Wc),e.selectedNodes.map(Wc))&&Vt(t.selectedEdges.map(Wc),e.selectedEdges.map(Wc))}const UC=T.memo(({onSelectionChange:t})=>{const e=Ot(),{selectedNodes:n,selectedEdges:r}=ze(XO,YO);return T.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(s=>s(i))},[n,r,t]),null});UC.displayName="SelectionListener";const QO=t=>!!t.onSelectionChange;function JO({onSelectionChange:t}){const e=ze(QO);return t||e?G.createElement(UC,{onSelectionChange:t}):null}const ZO=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function po(t,e){T.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function ge(t,e,n){T.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const eF=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:h,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:E,minZoom:w,maxZoom:x,nodeExtent:g,onNodesChange:y,onEdgesChange:S,elementsSelectable:I,connectionMode:R,snapGrid:M,snapToGrid:C,translateExtent:_,connectOnClick:A,defaultEdgeOptions:k,fitView:N,fitViewOptions:D,onNodesDelete:P,onEdgesDelete:V,onNodeDrag:U,onNodeDragStart:j,onNodeDragStop:z,onSelectionDrag:F,onSelectionDragStart:O,onSelectionDragStop:B,noPanClassName:W,nodeOrigin:K,rfId:Q,autoPanOnConnect:ee,autoPanOnNodeDrag:oe,onError:se,connectionRadius:pe,isValidConnection:we,nodeDragThreshold:ke})=>{const{setNodes:me,setEdges:He,setDefaultNodesAndEdges:We,setMinZoom:xt,setMaxZoom:Ce,setTranslateExtent:ct,setNodeExtent:Ee,reset:ht}=ze(ZO,Vt),ie=Ot();return T.useEffect(()=>{const cn=r==null?void 0:r.map(st=>({...st,...k}));return We(n,cn),()=>{ht()}},[]),ge("defaultEdgeOptions",k,ie.setState),ge("connectionMode",R,ie.setState),ge("onConnect",i,ie.setState),ge("onConnectStart",s,ie.setState),ge("onConnectEnd",o,ie.setState),ge("onClickConnectStart",a,ie.setState),ge("onClickConnectEnd",l,ie.setState),ge("nodesDraggable",u,ie.setState),ge("nodesConnectable",h,ie.setState),ge("nodesFocusable",d,ie.setState),ge("edgesFocusable",f,ie.setState),ge("edgesUpdatable",m,ie.setState),ge("elementsSelectable",I,ie.setState),ge("elevateNodesOnSelect",E,ie.setState),ge("snapToGrid",C,ie.setState),ge("snapGrid",M,ie.setState),ge("onNodesChange",y,ie.setState),ge("onEdgesChange",S,ie.setState),ge("connectOnClick",A,ie.setState),ge("fitViewOnInit",N,ie.setState),ge("fitViewOnInitOptions",D,ie.setState),ge("onNodesDelete",P,ie.setState),ge("onEdgesDelete",V,ie.setState),ge("onNodeDrag",U,ie.setState),ge("onNodeDragStart",j,ie.setState),ge("onNodeDragStop",z,ie.setState),ge("onSelectionDrag",F,ie.setState),ge("onSelectionDragStart",O,ie.setState),ge("onSelectionDragStop",B,ie.setState),ge("noPanClassName",W,ie.setState),ge("nodeOrigin",K,ie.setState),ge("rfId",Q,ie.setState),ge("autoPanOnConnect",ee,ie.setState),ge("autoPanOnNodeDrag",oe,ie.setState),ge("onError",se,ie.setState),ge("connectionRadius",pe,ie.setState),ge("isValidConnection",we,ie.setState),ge("nodeDragThreshold",ke,ie.setState),po(t,me),po(e,He),po(w,xt),po(x,Ce),po(_,ct),po(g,Ee),null},yE={display:"none"},tF={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},jC="react-flow__node-desc",$C="react-flow__edge-desc",nF="react-flow__aria-live",rF=t=>t.ariaLiveMessage;function iF({rfId:t}){const e=ze(rF);return G.createElement("div",{id:`${nF}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:tF},e)}function sF({rfId:t,disableKeyboardA11y:e}){return G.createElement(G.Fragment,null,G.createElement("div",{id:`${jC}-${t}`,style:yE},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),G.createElement("div",{id:`${$C}-${t}`,style:yE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&G.createElement(iF,{rfId:t}))}var fu=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=T.useState(!1),i=T.useRef(!1),s=T.useRef(new Set([])),[o,a]=T.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(d=>typeof d=="string").map(d=>d.split("+")),h=u.reduce((d,f)=>d.concat(...f),[]);return[u,h]}return[[],[]]},[t]);return T.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const h=m=>{if(i.current=m.ctrlKey||m.metaKey||m.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&lg(m))return!1;const w=_E(m.code,a);s.current.add(m[w]),vE(o,s.current,!1)&&(m.preventDefault(),r(!0))},d=m=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&lg(m))return!1;const w=_E(m.code,a);vE(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(m[w]),m.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",h),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",h),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[t,r]),n};function vE(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function _E(t,e){return e.includes(t)?"code":"key"}function BC(t,e,n,r){var o,a;if(!t.parentNode)return n;const i=e.get(t.parentNode),s=Go(i,r);return BC(i,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((o=i[lt])==null?void 0:o.z)??0)>(n.z??0)?((a=i[lt])==null?void 0:a.z)??0:n.z??0},r)}function zC(t,e,n){t.forEach(r=>{var i;if(r.parentNode&&!t.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:s,y:o,z:a}=BC(r,t,{...r.position,z:((i=r[lt])==null?void 0:i.z)??0},e);r.positionAbsolute={x:s,y:o},r[lt].z=a,n!=null&&n[r.id]&&(r[lt].isParent=!0)}})}function Cp(t,e,n,r){const i=new Map,s={},o=r?1e3:0;return t.forEach(a=>{var f;const l=(Kn(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=e.get(a.id),h={...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(s[a.parentNode]=!0);const d=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(h,lt,{enumerable:!1,value:{handleBounds:d||(f=u==null?void 0:u[lt])==null?void 0:f.handleBounds,z:l}}),i.set(a.id,h)}),zC(i,n,s),i}function HC(t,e={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:h,nodeOrigin:d}=t(),f=e.initial&&!u&&h;if(a&&l&&(f||!e.initial)){const E=n().filter(x=>{var y;const g=e.includeHiddenNodes?x.width&&x.height:!x.hidden;return(y=e.nodes)!=null&&y.length?g&&e.nodes.some(S=>S.id===x.id):g}),w=E.every(x=>x.width&&x.height);if(E.length>0&&w){const x=vv(E,d),{x:g,y,zoom:S}=RC(x,r,i,e.minZoom??s,e.maxZoom??o,e.padding??.1),I=Ki.translate(g,y).scale(S);return typeof e.duration=="number"&&e.duration>0?a.transform(Ss(l,e.duration),I):a.transform(l,I),!0}}return!1}function oF(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[lt]:r[lt],selected:n.selected})}),new Map(e)}function aF(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Kc({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&r({nodeInternals:oF(t,i)}),o==null||o(t)),e!=null&&e.length&&(u&&r({edges:aF(e,s)}),a==null||a(e))}const mo=()=>{},lF={zoomIn:mo,zoomOut:mo,zoomTo:mo,getZoom:()=>1,setViewport:mo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:mo,fitBounds:mo,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},uF=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),cF=()=>{const t=Ot(),{d3Zoom:e,d3Selection:n}=ze(uF,Vt);return T.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(Ss(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(Ss(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>e.scaleTo(Ss(n,s==null?void 0:s.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,s)=>{const[o,a,l]=t.getState().transform,u=Ki.translate(i.x??o,i.y??a).scale(i.zoom??l);e.transform(Ss(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,o]=t.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>HC(t.getState,i),setCenter:(i,s,o)=>{const{width:a,height:l,maxZoom:u}=t.getState(),h=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,d=a/2-i*h,f=l/2-s*h,m=Ki.translate(d,f).scale(h);e.transform(Ss(n,o==null?void 0:o.duration),m)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:l,maxZoom:u}=t.getState(),{x:h,y:d,zoom:f}=RC(i,o,a,l,u,(s==null?void 0:s.padding)??.1),m=Ki.translate(h,d).scale(f);e.transform(Ss(n,s==null?void 0:s.duration),m)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),hg(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:l}=t.getState();if(!l)return i;const{x:u,y:h}=l.getBoundingClientRect(),d={x:i.x-u,y:i.y-h};return hg(d,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=t.getState();if(!o)return i;const{x:a,y:l}=o.getBoundingClientRect(),u=CC(i,s);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:lF,[e,n])};function ju(){const t=cF(),e=Ot(),n=T.useCallback(()=>e.getState().getNodes().map(w=>({...w})),[]),r=T.useCallback(w=>e.getState().nodeInternals.get(w),[]),i=T.useCallback(()=>{const{edges:w=[]}=e.getState();return w.map(x=>({...x}))},[]),s=T.useCallback(w=>{const{edges:x=[]}=e.getState();return x.find(g=>g.id===w)},[]),o=T.useCallback(w=>{const{getNodes:x,setNodes:g,hasDefaultNodes:y,onNodesChange:S}=e.getState(),I=x(),R=typeof w=="function"?w(I):w;if(y)g(R);else if(S){const M=R.length===0?I.map(C=>({type:"remove",id:C.id})):R.map(C=>({item:C,type:"reset"}));S(M)}},[]),a=T.useCallback(w=>{const{edges:x=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:S}=e.getState(),I=typeof w=="function"?w(x):w;if(y)g(I);else if(S){const R=I.length===0?x.map(M=>({type:"remove",id:M.id})):I.map(M=>({item:M,type:"reset"}));S(R)}},[]),l=T.useCallback(w=>{const x=Array.isArray(w)?w:[w],{getNodes:g,setNodes:y,hasDefaultNodes:S,onNodesChange:I}=e.getState();if(S){const M=[...g(),...x];y(M)}else if(I){const R=x.map(M=>({item:M,type:"add"}));I(R)}},[]),u=T.useCallback(w=>{const x=Array.isArray(w)?w:[w],{edges:g=[],setEdges:y,hasDefaultEdges:S,onEdgesChange:I}=e.getState();if(S)y([...g,...x]);else if(I){const R=x.map(M=>({item:M,type:"add"}));I(R)}},[]),h=T.useCallback(()=>{const{getNodes:w,edges:x=[],transform:g}=e.getState(),[y,S,I]=g;return{nodes:w().map(R=>({...R})),edges:x.map(R=>({...R})),viewport:{x:y,y:S,zoom:I}}},[]),d=T.useCallback(({nodes:w,edges:x})=>{const{nodeInternals:g,getNodes:y,edges:S,hasDefaultNodes:I,hasDefaultEdges:R,onNodesDelete:M,onEdgesDelete:C,onNodesChange:_,onEdgesChange:A}=e.getState(),k=(w||[]).map(U=>U.id),N=(x||[]).map(U=>U.id),D=y().reduce((U,j)=>{const z=!k.includes(j.id)&&j.parentNode&&U.find(O=>O.id===j.parentNode);return(typeof j.deletable=="boolean"?j.deletable:!0)&&(k.includes(j.id)||z)&&U.push(j),U},[]),P=S.filter(U=>typeof U.deletable=="boolean"?U.deletable:!0),V=P.filter(U=>N.includes(U.id));if(D||V){const U=PC(D,P),j=[...V,...U],z=j.reduce((F,O)=>(F.includes(O.id)||F.push(O.id),F),[]);if((R||I)&&(R&&e.setState({edges:S.filter(F=>!z.includes(F.id))}),I&&(D.forEach(F=>{g.delete(F.id)}),e.setState({nodeInternals:new Map(g)}))),z.length>0&&(C==null||C(j),A&&A(z.map(F=>({id:F,type:"remove"})))),D.length>0&&(M==null||M(D),_)){const F=D.map(O=>({id:O.id,type:"remove"}));_(F)}}},[]),f=T.useCallback(w=>{const x=bO(w),g=x?null:e.getState().nodeInternals.get(w.id);return!x&&!g?[null,null,x]:[x?w:cE(g),g,x]},[]),m=T.useCallback((w,x=!0,g)=>{const[y,S,I]=f(w);return y?(g||e.getState().getNodes()).filter(R=>{if(!I&&(R.id===S.id||!R.positionAbsolute))return!1;const M=cE(R),C=ag(M,y);return x&&C>0||C>=y.width*y.height}):[]},[]),E=T.useCallback((w,x,g=!0)=>{const[y]=f(w);if(!y)return!1;const S=ag(y,x);return g&&S>0||S>=y.width*y.height},[]);return T.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:l,addEdges:u,toObject:h,deleteElements:d,getIntersectingNodes:m,isNodeIntersecting:E}),[t,n,r,i,s,o,a,l,u,h,d,m,E])}const hF={actInsideInputWithModifier:!1};var dF=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=Ot(),{deleteElements:r}=ju(),i=fu(t,hF),s=fu(e);T.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),l=a().filter(h=>h.selected),u=o.filter(h=>h.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function fF(t){const e=Ot();T.useEffect(()=>{let n;const r=()=>{var s,o;if(!t.current)return;const i=cv(t.current);(i.height===0||i.width===0)&&((o=(s=e.getState()).onError)==null||o.call(s,"004",oi.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Ev={position:"absolute",width:"100%",height:"100%",top:0,left:0},pF=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Gc=t=>({x:t.x,y:t.y,zoom:t.k}),go=(t,e)=>t.target.closest(`.${e}`),wE=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),EE=t=>{const e=t.ctrlKey&&ad()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},mF=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),gF=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=ks.Free,zoomOnDoubleClick:u=!0,elementsSelectable:h,panOnDrag:d=!0,defaultViewport:f,translateExtent:m,minZoom:E,maxZoom:w,zoomActivationKeyCode:x,preventScrolling:g=!0,children:y,noWheelClassName:S,noPanClassName:I})=>{const R=T.useRef(),M=Ot(),C=T.useRef(!1),_=T.useRef(!1),A=T.useRef(null),k=T.useRef({x:0,y:0,zoom:0}),{d3Zoom:N,d3Selection:D,d3ZoomHandler:P,userSelectionActive:V}=ze(mF,Vt),U=fu(x),j=T.useRef(0),z=T.useRef(!1),F=T.useRef();return fF(A),T.useEffect(()=>{if(A.current){const O=A.current.getBoundingClientRect(),B=TO().scaleExtent([E,w]).translateExtent(m),W=nr(A.current).call(B),K=Ki.translate(f.x,f.y).scale(ca(f.zoom,E,w)),Q=[[0,0],[O.width,O.height]],ee=B.constrain()(K,Q,m);B.transform(W,ee),B.wheelDelta(EE),M.setState({d3Zoom:B,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[ee.x,ee.y,ee.k],domNode:A.current.closest(".react-flow")})}},[]),T.useEffect(()=>{D&&N&&(o&&!U&&!V?D.on("wheel.zoom",O=>{if(go(O,S))return!1;O.preventDefault(),O.stopImmediatePropagation();const B=D.property("__zoom").k||1,W=ad();if(O.ctrlKey&&s&&W){const ke=yr(O),me=EE(O),He=B*Math.pow(2,me);N.scaleTo(D,He,ke,O);return}const K=O.deltaMode===1?20:1;let Q=l===ks.Vertical?0:O.deltaX*K,ee=l===ks.Horizontal?0:O.deltaY*K;!W&&O.shiftKey&&l!==ks.Vertical&&(Q=O.deltaY*K,ee=0),N.translateBy(D,-(Q/B)*a,-(ee/B)*a,{internal:!0});const oe=Gc(D.property("__zoom")),{onViewportChangeStart:se,onViewportChange:pe,onViewportChangeEnd:we}=M.getState();clearTimeout(F.current),z.current||(z.current=!0,e==null||e(O,oe),se==null||se(oe)),z.current&&(t==null||t(O,oe),pe==null||pe(oe),F.current=setTimeout(()=>{n==null||n(O,oe),we==null||we(oe),z.current=!1},150))},{passive:!1}):typeof P<"u"&&D.on("wheel.zoom",function(O,B){if(!g||go(O,S))return null;O.preventDefault(),P.call(this,O,B)},{passive:!1}))},[V,o,l,D,N,P,U,s,g,S,e,t,n]),T.useEffect(()=>{N&&N.on("start",O=>{var K,Q;if(!O.sourceEvent||O.sourceEvent.internal)return null;j.current=(K=O.sourceEvent)==null?void 0:K.button;const{onViewportChangeStart:B}=M.getState(),W=Gc(O.transform);C.current=!0,k.current=W,((Q=O.sourceEvent)==null?void 0:Q.type)==="mousedown"&&M.setState({paneDragging:!0}),B==null||B(W),e==null||e(O.sourceEvent,W)})},[N,e]),T.useEffect(()=>{N&&(V&&!C.current?N.on("zoom",null):V||N.on("zoom",O=>{var W;const{onViewportChange:B}=M.getState();if(M.setState({transform:[O.transform.x,O.transform.y,O.transform.k]}),_.current=!!(r&&wE(d,j.current??0)),(t||B)&&!((W=O.sourceEvent)!=null&&W.internal)){const K=Gc(O.transform);B==null||B(K),t==null||t(O.sourceEvent,K)}}))},[V,N,t,d,r]),T.useEffect(()=>{N&&N.on("end",O=>{if(!O.sourceEvent||O.sourceEvent.internal)return null;const{onViewportChangeEnd:B}=M.getState();if(C.current=!1,M.setState({paneDragging:!1}),r&&wE(d,j.current??0)&&!_.current&&r(O.sourceEvent),_.current=!1,(n||B)&&pF(k.current,O.transform)){const W=Gc(O.transform);k.current=W,clearTimeout(R.current),R.current=setTimeout(()=>{B==null||B(W),n==null||n(O.sourceEvent,W)},o?150:0)}})},[N,o,d,n,r]),T.useEffect(()=>{N&&N.filter(O=>{const B=U||i,W=s&&O.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&O.button===1&&O.type==="mousedown"&&(go(O,"react-flow__node")||go(O,"react-flow__edge")))return!0;if(!d&&!B&&!o&&!u&&!s||V||!u&&O.type==="dblclick"||go(O,S)&&O.type==="wheel"||go(O,I)&&(O.type!=="wheel"||o&&O.type==="wheel"&&!U)||!s&&O.ctrlKey&&O.type==="wheel"||!B&&!o&&!W&&O.type==="wheel"||!d&&(O.type==="mousedown"||O.type==="touchstart")||Array.isArray(d)&&!d.includes(O.button)&&(O.type==="mousedown"||O.type==="touchstart"))return!1;const K=Array.isArray(d)&&d.includes(O.button)||!O.button||O.button<=1;return(!O.ctrlKey||O.type==="wheel")&&K})},[V,N,i,s,o,u,d,h,U]),G.createElement("div",{className:"react-flow__renderer",ref:A,style:Ev},y)},yF=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function vF(){const{userSelectionActive:t,userSelectionRect:e}=ze(yF,Vt);return t&&e?G.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function SE(t,e){const n=t.find(r=>r.id===e.parentNode);if(n){const r=e.position.x+e.width-n.width,i=e.position.y+e.height-n.height;if(r>0||i>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),e.position.x<0){const s=Math.abs(e.position.x);n.position.x=n.position.x-s,n.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);n.position.y=n.position.y-s,n.style.height+=s,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function WC(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const s=t.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&SE(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&SE(r,o);break}case"remove":return r}return r.push(o),r},n)}function KC(t,e){return WC(t,e)}function _F(t,e){return WC(t,e)}const Ii=(t,e)=>({id:t,type:"select",selected:e});function Do(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Ii(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Ii(r.id,!1))),n},[])}const Ap=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},wF=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),GC=T.memo(({isSelecting:t,selectionMode:e=ha.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:h,children:d})=>{const f=T.useRef(null),m=Ot(),E=T.useRef(0),w=T.useRef(0),x=T.useRef(),{userSelectionActive:g,elementsSelectable:y,dragging:S}=ze(wF,Vt),I=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),E.current=0,w.current=0},R=P=>{s==null||s(P),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},M=P=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){P.preventDefault();return}o==null||o(P)},C=a?P=>a(P):void 0,_=P=>{const{resetSelectedElements:V,domNode:U}=m.getState();if(x.current=U==null?void 0:U.getBoundingClientRect(),!y||!t||P.button!==0||P.target!==f.current||!x.current)return;const{x:j,y:z}=Gi(P,x.current);V(),m.setState({userSelectionRect:{width:0,height:0,startX:j,startY:z,x:j,y:z}}),r==null||r(P)},A=P=>{const{userSelectionRect:V,nodeInternals:U,edges:j,transform:z,onNodesChange:F,onEdgesChange:O,nodeOrigin:B,getNodes:W}=m.getState();if(!t||!x.current||!V)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const K=Gi(P,x.current),Q=V.startX??0,ee=V.startY??0,oe={...V,x:K.x<Q?K.x:Q,y:K.y<ee?K.y:ee,width:Math.abs(K.x-Q),height:Math.abs(K.y-ee)},se=W(),pe=AC(U,oe,z,e===ha.Partial,!0,B),we=PC(pe,j).map(me=>me.id),ke=pe.map(me=>me.id);if(E.current!==ke.length){E.current=ke.length;const me=Do(se,ke);me.length&&(F==null||F(me))}if(w.current!==we.length){w.current=we.length;const me=Do(j,we);me.length&&(O==null||O(me))}m.setState({userSelectionRect:oe})},k=P=>{if(P.button!==0)return;const{userSelectionRect:V}=m.getState();!g&&V&&P.target===f.current&&(R==null||R(P)),m.setState({nodesSelectionActive:E.current>0}),I(),i==null||i(P)},N=P=>{g&&(m.setState({nodesSelectionActive:E.current>0}),i==null||i(P)),I()},D=y&&(t||g);return G.createElement("div",{className:Vn(["react-flow__pane",{dragging:S,selection:t}]),onClick:D?void 0:Ap(R,f),onContextMenu:Ap(M,f),onWheel:Ap(C,f),onMouseEnter:D?void 0:l,onMouseDown:D?_:void 0,onMouseMove:D?A:u,onMouseUp:D?k:void 0,onMouseLeave:D?N:h,ref:f,style:Ev},d,G.createElement(vF,null))});GC.displayName="Pane";function qC(t,e){if(!t.parentNode)return!1;const n=e.get(t.parentNode);return n?n.selected?!0:qC(n,e):!1}function TE(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function EF(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!qC(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height,expandParent:i.expandParent}})}function SF(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function XC(t,e,n,r,i=[0,0],s){const o=SF(t,t.extent||r);let a=o;if(t.extent==="parent"&&!t.expandParent)if(t.parentNode&&t.width&&t.height){const h=n.get(t.parentNode),{x:d,y:f}=Go(h,i).positionAbsolute;a=h&&Kn(d)&&Kn(f)&&Kn(h.width)&&Kn(h.height)?[[d+t.width*i[0],f+t.height*i[1]],[d+h.width-t.width+t.width*i[0],f+h.height-t.height+t.height*i[1]]]:a}else s==null||s("005",oi.error005()),a=o;else if(t.extent&&t.parentNode&&t.extent!=="parent"){const h=n.get(t.parentNode),{x:d,y:f}=Go(h,i).positionAbsolute;a=[[t.extent[0][0]+d,t.extent[0][1]+f],[t.extent[1][0]+d,t.extent[1][1]+f]]}let l={x:0,y:0};if(t.parentNode){const h=n.get(t.parentNode);l=Go(h,i).positionAbsolute}const u=a&&a!=="parent"?hv(e,a):e;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function Pp({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const xE=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const s=Array.from(i),o=e.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...cv(l)}})};function al(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function fg({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:l}=e.getState(),u=a.get(t);if(!u){l==null||l("012",oi.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var h;return(h=r==null?void 0:r.current)==null?void 0:h.blur()})):i([t])}function TF(){const t=Ot();return T.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=t.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:s?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function Rp(t){return(e,n,r)=>t==null?void 0:t(e,r)}function YC({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=Ot(),[l,u]=T.useState(!1),h=T.useRef([]),d=T.useRef({x:null,y:null}),f=T.useRef(0),m=T.useRef(null),E=T.useRef({x:0,y:0}),w=T.useRef(null),x=T.useRef(!1),g=T.useRef(!1),y=TF();return T.useEffect(()=>{if(t!=null&&t.current){const S=nr(t.current),I=({x:C,y:_})=>{const{nodeInternals:A,onNodeDrag:k,onSelectionDrag:N,updateNodePositions:D,nodeExtent:P,snapGrid:V,snapToGrid:U,nodeOrigin:j,onError:z}=a.getState();d.current={x:C,y:_};let F=!1,O={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&P){const W=vv(h.current,j);O=dv(W)}if(h.current=h.current.map(W=>{const K={x:C-W.distance.x,y:_-W.distance.y};U&&(K.x=V[0]*Math.round(K.x/V[0]),K.y=V[1]*Math.round(K.y/V[1]));const Q=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];h.current.length>1&&P&&!W.extent&&(Q[0][0]=W.positionAbsolute.x-O.x+P[0][0],Q[1][0]=W.positionAbsolute.x+(W.width??0)-O.x2+P[1][0],Q[0][1]=W.positionAbsolute.y-O.y+P[0][1],Q[1][1]=W.positionAbsolute.y+(W.height??0)-O.y2+P[1][1]);const ee=XC(W,K,A,Q,j,z);return F=F||W.position.x!==ee.position.x||W.position.y!==ee.position.y,W.position=ee.position,W.positionAbsolute=ee.positionAbsolute,W}),!F)return;D(h.current,!0,!0),u(!0);const B=i?k:Rp(N);if(B&&w.current){const[W,K]=Pp({nodeId:i,dragItems:h.current,nodeInternals:A});B(w.current,W,K)}},R=()=>{if(!m.current)return;const[C,_]=vC(E.current,m.current);if(C!==0||_!==0){const{transform:A,panBy:k}=a.getState();d.current.x=(d.current.x??0)-C/A[2],d.current.y=(d.current.y??0)-_/A[2],k({x:C,y:_})&&I(d.current)}f.current=requestAnimationFrame(R)},M=C=>{var j;const{nodeInternals:_,multiSelectionActive:A,nodesDraggable:k,unselectNodesAndEdges:N,onNodeDragStart:D,onSelectionDragStart:P}=a.getState();g.current=!0;const V=i?D:Rp(P);(!o||!s)&&!A&&i&&((j=_.get(i))!=null&&j.selected||N()),i&&s&&o&&fg({id:i,store:a,nodeRef:t});const U=y(C);if(d.current=U,h.current=EF(_,k,U,i),V&&h.current){const[z,F]=Pp({nodeId:i,dragItems:h.current,nodeInternals:_});V(C.sourceEvent,z,F)}};if(e)S.on(".drag",null);else{const C=D2().on("start",_=>{const{domNode:A,nodeDragThreshold:k}=a.getState();k===0&&M(_);const N=y(_);d.current=N,m.current=(A==null?void 0:A.getBoundingClientRect())||null,E.current=Gi(_.sourceEvent,m.current)}).on("drag",_=>{var D,P;const A=y(_),{autoPanOnNodeDrag:k,nodeDragThreshold:N}=a.getState();if(!x.current&&g.current&&k&&(x.current=!0,R()),!g.current){const V=A.xSnapped-(((D=d==null?void 0:d.current)==null?void 0:D.x)??0),U=A.ySnapped-(((P=d==null?void 0:d.current)==null?void 0:P.y)??0);Math.sqrt(V*V+U*U)>N&&M(_)}(d.current.x!==A.xSnapped||d.current.y!==A.ySnapped)&&h.current&&g.current&&(w.current=_.sourceEvent,E.current=Gi(_.sourceEvent,m.current),I(A))}).on("end",_=>{if(g.current&&(u(!1),x.current=!1,g.current=!1,cancelAnimationFrame(f.current),h.current)){const{updateNodePositions:A,nodeInternals:k,onNodeDragStop:N,onSelectionDragStop:D}=a.getState(),P=i?N:Rp(D);if(A(h.current,!1,!1),P){const[V,U]=Pp({nodeId:i,dragItems:h.current,nodeInternals:k});P(_.sourceEvent,V,U)}}}).filter(_=>{const A=_.target;return!_.button&&(!n||!TE(A,`.${n}`,t))&&(!r||TE(A,r,t))});return S.call(C),()=>{S.on(".drag",null)}}}},[t,e,n,r,s,a,i,o,y]),l}function QC(){const t=Ot();return T.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:h}=t.getState(),d=o().filter(y=>y.selected&&(y.draggable||h&&typeof y.draggable>"u")),f=a?l[0]:5,m=a?l[1]:5,E=n.isShiftPressed?4:1,w=n.x*f*E,x=n.y*m*E,g=d.map(y=>{if(y.positionAbsolute){const S={x:y.positionAbsolute.x+w,y:y.positionAbsolute.y+x};a&&(S.x=l[0]*Math.round(S.x/l[0]),S.y=l[1]*Math.round(S.y/l[1]));const{positionAbsolute:I,position:R}=XC(y,S,r,i,void 0,u);y.position=R,y.positionAbsolute=I}return y});s(g,!0,!1)},[])}const qo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ll=t=>{const e=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:h,onMouseEnter:d,onMouseMove:f,onMouseLeave:m,onContextMenu:E,onDoubleClick:w,style:x,className:g,isDraggable:y,isSelectable:S,isConnectable:I,isFocusable:R,selectNodesOnDrag:M,sourcePosition:C,targetPosition:_,hidden:A,resizeObserver:k,dragHandle:N,zIndex:D,isParent:P,noDragClassName:V,noPanClassName:U,initialized:j,disableKeyboardA11y:z,ariaLabel:F,rfId:O,hasHandleBounds:B})=>{const W=Ot(),K=T.useRef(null),Q=T.useRef(C),ee=T.useRef(_),oe=T.useRef(r),se=S||y||h||d||f||m,pe=QC(),we=al(n,W.getState,d),ke=al(n,W.getState,f),me=al(n,W.getState,m),He=al(n,W.getState,E),We=al(n,W.getState,w),xt=Ee=>{const{nodeDragThreshold:ht}=W.getState();if(S&&(!M||!y||ht>0)&&fg({id:n,store:W,nodeRef:K}),h){const ie=W.getState().nodeInternals.get(n);ie&&h(Ee,{...ie})}},Ce=Ee=>{if(!lg(Ee))if(wC.includes(Ee.key)&&S){const ht=Ee.key==="Escape";fg({id:n,store:W,unselect:ht,nodeRef:K})}else!z&&y&&u&&Object.prototype.hasOwnProperty.call(qo,Ee.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${Ee.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),pe({x:qo[Ee.key].x,y:qo[Ee.key].y,isShiftPressed:Ee.shiftKey}))};T.useEffect(()=>()=>{K.current&&(k==null||k.unobserve(K.current))},[]),T.useEffect(()=>{if(K.current&&!A){const Ee=K.current;(!j||!B)&&(k==null||k.unobserve(Ee),k==null||k.observe(Ee))}},[A,j,B]),T.useEffect(()=>{const Ee=oe.current!==r,ht=Q.current!==C,ie=ee.current!==_;K.current&&(Ee||ht||ie)&&(Ee&&(oe.current=r),ht&&(Q.current=C),ie&&(ee.current=_),W.getState().updateNodeDimensions([{id:n,nodeElement:K.current,forceUpdate:!0}]))},[n,r,C,_]);const ct=YC({nodeRef:K,disabled:A||!y,noDragClassName:V,handleSelector:N,nodeId:n,isSelectable:S,selectNodesOnDrag:M});return A?null:G.createElement("div",{className:Vn(["react-flow__node",`react-flow__node-${r}`,{[U]:y},g,{selected:u,selectable:S,parent:P,dragging:ct}]),ref:K,style:{zIndex:D,transform:`translate(${a}px,${l}px)`,pointerEvents:se?"all":"none",visibility:j?"visible":"hidden",...x},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:we,onMouseMove:ke,onMouseLeave:me,onContextMenu:He,onClick:xt,onDoubleClick:We,onKeyDown:R?Ce:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":z?void 0:`${jC}-${O}`,"aria-label":F},G.createElement(FO,{value:n},G.createElement(t,{id:n,data:i,type:r,xPos:s,yPos:o,selected:u,isConnectable:I,sourcePosition:C,targetPosition:_,dragging:ct,dragHandle:N,zIndex:D})))};return e.displayName="NodeWrapper",T.memo(e)};const xF=t=>{const e=t.getNodes().filter(n=>n.selected);return{...vv(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function IF({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Ot(),{width:i,height:s,x:o,y:a,transformString:l,userSelectionActive:u}=ze(xF,Vt),h=QC(),d=T.useRef(null);if(T.useEffect(()=>{var E;n||(E=d.current)==null||E.focus({preventScroll:!0})},[n]),YC({nodeRef:d}),u||!i||!s)return null;const f=t?E=>{const w=r.getState().getNodes().filter(x=>x.selected);t(E,w)}:void 0,m=E=>{Object.prototype.hasOwnProperty.call(qo,E.key)&&h({x:qo[E.key].x,y:qo[E.key].y,isShiftPressed:E.shiftKey})};return G.createElement("div",{className:Vn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},G.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:i,height:s,top:a,left:o}}))}var CF=T.memo(IF);const AF=t=>t.nodesSelectionActive,JC=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:h,selectionKeyCode:d,selectionOnDrag:f,selectionMode:m,onSelectionStart:E,onSelectionEnd:w,multiSelectionKeyCode:x,panActivationKeyCode:g,zoomActivationKeyCode:y,elementsSelectable:S,zoomOnScroll:I,zoomOnPinch:R,panOnScroll:M,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:A,panOnDrag:k,defaultViewport:N,translateExtent:D,minZoom:P,maxZoom:V,preventScrolling:U,onSelectionContextMenu:j,noWheelClassName:z,noPanClassName:F,disableKeyboardA11y:O})=>{const B=ze(AF),W=fu(d),K=fu(g),Q=K||k,ee=K||M,oe=W||f&&Q!==!0;return dF({deleteKeyCode:a,multiSelectionKeyCode:x}),G.createElement(gF,{onMove:l,onMoveStart:u,onMoveEnd:h,onPaneContextMenu:s,elementsSelectable:S,zoomOnScroll:I,zoomOnPinch:R,panOnScroll:ee,panOnScrollSpeed:C,panOnScrollMode:_,zoomOnDoubleClick:A,panOnDrag:!W&&Q,defaultViewport:N,translateExtent:D,minZoom:P,maxZoom:V,zoomActivationKeyCode:y,preventScrolling:U,noWheelClassName:z,noPanClassName:F},G.createElement(GC,{onSelectionStart:E,onSelectionEnd:w,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:Q,isSelecting:!!oe,selectionMode:m},t,B&&G.createElement(CF,{onSelectionContextMenu:j,noPanClassName:F,disableKeyboardA11y:O})))};JC.displayName="FlowRenderer";var PF=T.memo(JC);function RF(t){return ze(T.useCallback(n=>t?AC(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function kF(t){const e={input:ll(t.input||LC),default:ll(t.default||dg),output:ll(t.output||FC),group:ll(t.group||wv)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=ll(t[s]||dg),i),n);return{...e,...r}}const bF=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},NF=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),ZC=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=ze(NF,Vt),a=RF(t.onlyRenderVisibleElements),l=T.useRef(),u=T.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(d=>{const f=d.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(f)});return l.current=h,h},[]);return T.useEffect(()=>()=>{var h;(h=l==null?void 0:l.current)==null||h.disconnect()},[]),G.createElement("div",{className:"react-flow__nodes",style:Ev},a.map(h=>{var R,M,C;let d=h.type||"default";t.nodeTypes[d]||(o==null||o("003",oi.error003(d)),d="default");const f=t.nodeTypes[d]||t.nodeTypes.default,m=!!(h.draggable||e&&typeof h.draggable>"u"),E=!!(h.selectable||i&&typeof h.selectable>"u"),w=!!(h.connectable||n&&typeof h.connectable>"u"),x=!!(h.focusable||r&&typeof h.focusable>"u"),g=t.nodeExtent?hv(h.positionAbsolute,t.nodeExtent):h.positionAbsolute,y=(g==null?void 0:g.x)??0,S=(g==null?void 0:g.y)??0,I=bF({x:y,y:S,width:h.width??0,height:h.height??0,origin:t.nodeOrigin});return G.createElement(f,{key:h.id,id:h.id,className:h.className,style:h.style,type:d,data:h.data,sourcePosition:h.sourcePosition||re.Bottom,targetPosition:h.targetPosition||re.Top,hidden:h.hidden,xPos:y,yPos:S,xPosOrigin:I.x,yPosOrigin:I.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!h.selected,isDraggable:m,isSelectable:E,isConnectable:w,isFocusable:x,resizeObserver:u,dragHandle:h.dragHandle,zIndex:((R=h[lt])==null?void 0:R.z)??0,isParent:!!((M=h[lt])!=null&&M.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!h.width&&!!h.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((C=h[lt])!=null&&C.handleBounds)})}))};ZC.displayName="NodeRenderer";var DF=T.memo(ZC);const MF=(t,e,n)=>n===re.Left?t-e:n===re.Right?t+e:t,VF=(t,e,n)=>n===re.Top?t-e:n===re.Bottom?t+e:t,IE="react-flow__edgeupdater",CE=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>G.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Vn([IE,`${IE}-${a}`]),cx:MF(e,r,t),cy:VF(n,r,t),r,stroke:"transparent",fill:"transparent"}),LF=()=>!0;var yo=t=>{const e=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:l,animated:u,label:h,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:E,labelBgBorderRadius:w,style:x,source:g,target:y,sourceX:S,sourceY:I,targetX:R,targetY:M,sourcePosition:C,targetPosition:_,elementsSelectable:A,hidden:k,sourceHandleId:N,targetHandleId:D,onContextMenu:P,onMouseEnter:V,onMouseMove:U,onMouseLeave:j,edgeUpdaterRadius:z,onEdgeUpdate:F,onEdgeUpdateStart:O,onEdgeUpdateEnd:B,markerEnd:W,markerStart:K,rfId:Q,ariaLabel:ee,isFocusable:oe,isUpdatable:se,pathOptions:pe,interactionWidth:we})=>{const ke=T.useRef(null),[me,He]=T.useState(!1),[We,xt]=T.useState(!1),Ce=Ot(),ct=T.useMemo(()=>`url('#${cg(K,Q)}')`,[K,Q]),Ee=T.useMemo(()=>`url('#${cg(W,Q)}')`,[W,Q]);if(k)return null;const ht=Je=>{var dn;const{edges:$e,addSelectedEdges:Ft,unselectNodesAndEdges:Ln,multiSelectionActive:On}=Ce.getState(),Ut=$e.find(hr=>hr.id===n);Ut&&(A&&(Ce.setState({nodesSelectionActive:!1}),Ut.selected&&On?(Ln({nodes:[],edges:[Ut]}),(dn=ke.current)==null||dn.blur()):Ft([n])),o&&o(Je,Ut))},ie=ol(n,Ce.getState,a),cn=ol(n,Ce.getState,P),st=ol(n,Ce.getState,V),Sn=ol(n,Ce.getState,U),Tn=ol(n,Ce.getState,j),hn=(Je,$e)=>{if(Je.button!==0)return;const{edges:Ft,isValidConnection:Ln}=Ce.getState(),On=$e?y:g,Ut=($e?D:N)||null,dn=$e?"target":"source",hr=Ln||LF,Dr=$e,dr=Ft.find(Oe=>Oe.id===n);xt(!0),O==null||O(Je,dr,dn);const mi=Oe=>{xt(!1),B==null||B(Oe,dr,dn)};NC({event:Je,handleId:Ut,nodeId:On,onConnect:Oe=>F==null?void 0:F(dr,Oe),isTarget:Dr,getState:Ce.getState,setState:Ce.setState,isValidConnection:hr,edgeUpdaterType:dn,onEdgeUpdateEnd:mi})},en=Je=>hn(Je,!0),Yn=Je=>hn(Je,!1),be=()=>He(!0),Ae=()=>He(!1),It=!A&&!o,tn=Je=>{var $e;if(wC.includes(Je.key)&&A){const{unselectNodesAndEdges:Ft,addSelectedEdges:Ln,edges:On}=Ce.getState();Je.key==="Escape"?(($e=ke.current)==null||$e.blur(),Ft({edges:[On.find(dn=>dn.id===n)]})):Ln([n])}};return G.createElement("g",{className:Vn(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:It,updating:me}]),onClick:ht,onDoubleClick:ie,onContextMenu:cn,onMouseEnter:st,onMouseMove:Sn,onMouseLeave:Tn,onKeyDown:oe?tn:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ee===null?void 0:ee||`Edge from ${g} to ${y}`,"aria-describedby":oe?`${$C}-${Q}`:void 0,ref:ke},!We&&G.createElement(t,{id:n,source:g,target:y,selected:l,animated:u,label:h,labelStyle:d,labelShowBg:f,labelBgStyle:m,labelBgPadding:E,labelBgBorderRadius:w,data:s,style:x,sourceX:S,sourceY:I,targetX:R,targetY:M,sourcePosition:C,targetPosition:_,sourceHandleId:N,targetHandleId:D,markerStart:ct,markerEnd:Ee,pathOptions:pe,interactionWidth:we}),se&&G.createElement(G.Fragment,null,(se==="source"||se===!0)&&G.createElement(CE,{position:C,centerX:S,centerY:I,radius:z,onMouseDown:en,onMouseEnter:be,onMouseOut:Ae,type:"source"}),(se==="target"||se===!0)&&G.createElement(CE,{position:_,centerX:R,centerY:M,radius:z,onMouseDown:Yn,onMouseEnter:be,onMouseOut:Ae,type:"target"})))};return e.displayName="EdgeWrapper",T.memo(e)};function OF(t){const e={default:yo(t.default||ud),straight:yo(t.bezier||mv),step:yo(t.step||pv),smoothstep:yo(t.step||lf),simplebezier:yo(t.simplebezier||fv)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=yo(t[s]||ud),i),n);return{...e,...r}}function AE(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,o=(n==null?void 0:n.height)||e.height;switch(t){case re.Top:return{x:r+s/2,y:i};case re.Right:return{x:r+s,y:i+o/2};case re.Bottom:return{x:r+s/2,y:i+o};case re.Left:return{x:r,y:i+o/2}}}function PE(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const FF=(t,e,n,r,i,s)=>{const o=AE(n,t,e),a=AE(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function UF({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const h=dv({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:a/l[2]}),d=Math.max(0,Math.min(h.x2,u.x2)-Math.max(h.x,u.x)),f=Math.max(0,Math.min(h.y2,u.y2)-Math.max(h.y,u.y));return Math.ceil(d*f)>0}function RE(t){var r,i,s,o,a;const e=((r=t==null?void 0:t[lt])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const jF=[{level:0,isMaxLevel:!0,edges:[]}];function $F(t,e,n=!1){let r=-1;const i=t.reduce((o,a)=>{var h,d;const l=Kn(a.zIndex);let u=l?a.zIndex:0;if(n){const f=e.get(a.target),m=e.get(a.source),E=a.selected||(f==null?void 0:f.selected)||(m==null?void 0:m.selected),w=Math.max(((h=m==null?void 0:m[lt])==null?void 0:h.z)||0,((d=f==null?void 0:f[lt])==null?void 0:d.z)||0,1e3);u=(l?a.zIndex:0)+(E?w:0)}return o[u]?o[u].push(a):o[u]=[a],r=u>r?u:r,o},{}),s=Object.entries(i).map(([o,a])=>{const l=+o;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?jF:s}function BF(t,e,n){const r=ze(T.useCallback(i=>t?i.edges.filter(s=>{const o=e.get(s.source),a=e.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&UF({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return $F(r,e,n)}const zF=({color:t="none",strokeWidth:e=1})=>G.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),HF=({color:t="none",strokeWidth:e=1})=>G.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),kE={[ld.Arrow]:zF,[ld.ArrowClosed]:HF};function WF(t){const e=Ot();return T.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(kE,t)?kE[t]:((s=(i=e.getState()).onError)==null||s.call(i,"009",oi.error009(t)),null)},[t])}const KF=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=WF(e);return l?G.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},G.createElement(l,{color:n,strokeWidth:o})):null},GF=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=cg(o,e);r.includes(a)||(i.push({id:a,color:o.color||t,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},eA=({defaultColor:t,rfId:e})=>{const n=ze(T.useCallback(GF({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return G.createElement("defs",null,n.map(r=>G.createElement(KF,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};eA.displayName="MarkerDefinitions";var qF=T.memo(eA);const XF=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),tA=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeUpdate:o,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:h,onEdgeClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:m,onEdgeUpdateStart:E,onEdgeUpdateEnd:w,children:x})=>{const{edgesFocusable:g,edgesUpdatable:y,elementsSelectable:S,width:I,height:R,connectionMode:M,nodeInternals:C,onError:_}=ze(XF,Vt),A=BF(e,C,n);return I?G.createElement(G.Fragment,null,A.map(({level:k,edges:N,isMaxLevel:D})=>G.createElement("svg",{key:k,style:{zIndex:k},width:I,height:R,className:"react-flow__edges react-flow__container"},D&&G.createElement(qF,{defaultColor:t,rfId:r}),G.createElement("g",null,N.map(P=>{const[V,U,j]=RE(C.get(P.source)),[z,F,O]=RE(C.get(P.target));if(!j||!O)return null;let B=P.type||"default";i[B]||(_==null||_("011",oi.error011(B)),B="default");const W=i[B]||i.default,K=M===Ks.Strict?F.target:(F.target??[]).concat(F.source??[]),Q=PE(U.source,P.sourceHandle),ee=PE(K,P.targetHandle),oe=(Q==null?void 0:Q.position)||re.Bottom,se=(ee==null?void 0:ee.position)||re.Top,pe=!!(P.focusable||g&&typeof P.focusable>"u"),we=typeof o<"u"&&(P.updatable||y&&typeof P.updatable>"u");if(!Q||!ee)return _==null||_("008",oi.error008(Q,P)),null;const{sourceX:ke,sourceY:me,targetX:He,targetY:We}=FF(V,Q,oe,z,ee,se);return G.createElement(W,{key:P.id,id:P.id,className:Vn([P.className,s]),type:B,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:ke,sourceY:me,targetX:He,targetY:We,sourcePosition:oe,targetPosition:se,elementsSelectable:S,onEdgeUpdate:o,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:h,onClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:m,onEdgeUpdateStart:E,onEdgeUpdateEnd:w,rfId:r,ariaLabel:P.ariaLabel,isFocusable:pe,isUpdatable:we,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth})})))),x):null};tA.displayName="EdgeRenderer";var YF=T.memo(tA);const QF=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function JF({children:t}){const e=ze(QF);return G.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function ZF(t){const e=ju(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const eU={[re.Left]:re.Right,[re.Right]:re.Left,[re.Top]:re.Bottom,[re.Bottom]:re.Top},nA=({nodeId:t,handleType:e,style:n,type:r=ki.Bezier,CustomComponent:i,connectionStatus:s})=>{var M,C,_;const{fromNode:o,handleId:a,toX:l,toY:u,connectionMode:h}=ze(T.useCallback(A=>({fromNode:A.nodeInternals.get(t),handleId:A.connectionHandleId,toX:(A.connectionPosition.x-A.transform[0])/A.transform[2],toY:(A.connectionPosition.y-A.transform[1])/A.transform[2],connectionMode:A.connectionMode}),[t]),Vt),d=(M=o==null?void 0:o[lt])==null?void 0:M.handleBounds;let f=d==null?void 0:d[e];if(h===Ks.Loose&&(f=f||(d==null?void 0:d[e==="source"?"target":"source"])),!o||!f)return null;const m=a?f.find(A=>A.id===a):f[0],E=m?m.x+m.width/2:(o.width??0)/2,w=m?m.y+m.height/2:o.height??0,x=(((C=o.positionAbsolute)==null?void 0:C.x)??0)+E,g=(((_=o.positionAbsolute)==null?void 0:_.y)??0)+w,y=m==null?void 0:m.position,S=y?eU[y]:null;if(!y||!S)return null;if(i)return G.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:m,fromX:x,fromY:g,toX:l,toY:u,fromPosition:y,toPosition:S,connectionStatus:s});let I="";const R={sourceX:x,sourceY:g,sourcePosition:y,targetX:l,targetY:u,targetPosition:S};return r===ki.Bezier?[I]=gv(R):r===ki.Step?[I]=ug({...R,borderRadius:0}):r===ki.SmoothStep?[I]=ug(R):r===ki.SimpleBezier?[I]=xC(R):I=`M${x},${g} ${l},${u}`,G.createElement("path",{d:I,fill:"none",className:"react-flow__connection-path",style:n})};nA.displayName="ConnectionLine";const tU=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function nU({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:l,connectionStatus:u}=ze(tU,Vt);return!(i&&s&&a&&o)?null:G.createElement("svg",{style:t,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},G.createElement("g",{className:Vn(["react-flow__connection",u])},G.createElement(nA,{nodeId:i,handleType:s,style:e,type:n,CustomComponent:r,connectionStatus:u})))}function bE(t,e){return T.useRef(null),Ot(),T.useMemo(()=>e(t),[t])}const rA=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:E,onSelectionStart:w,onSelectionEnd:x,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:S,connectionLineContainerStyle:I,selectionKeyCode:R,selectionOnDrag:M,selectionMode:C,multiSelectionKeyCode:_,panActivationKeyCode:A,zoomActivationKeyCode:k,deleteKeyCode:N,onlyRenderVisibleElements:D,elementsSelectable:P,selectNodesOnDrag:V,defaultViewport:U,translateExtent:j,minZoom:z,maxZoom:F,preventScrolling:O,defaultMarkerColor:B,zoomOnScroll:W,zoomOnPinch:K,panOnScroll:Q,panOnScrollSpeed:ee,panOnScrollMode:oe,zoomOnDoubleClick:se,panOnDrag:pe,onPaneClick:we,onPaneMouseEnter:ke,onPaneMouseMove:me,onPaneMouseLeave:He,onPaneScroll:We,onPaneContextMenu:xt,onEdgeUpdate:Ce,onEdgeContextMenu:ct,onEdgeMouseEnter:Ee,onEdgeMouseMove:ht,onEdgeMouseLeave:ie,edgeUpdaterRadius:cn,onEdgeUpdateStart:st,onEdgeUpdateEnd:Sn,noDragClassName:Tn,noWheelClassName:hn,noPanClassName:en,elevateEdgesOnSelect:Yn,disableKeyboardA11y:be,nodeOrigin:Ae,nodeExtent:It,rfId:tn})=>{const Je=bE(t,kF),$e=bE(e,OF);return ZF(s),G.createElement(PF,{onPaneClick:we,onPaneMouseEnter:ke,onPaneMouseMove:me,onPaneMouseLeave:He,onPaneContextMenu:xt,onPaneScroll:We,deleteKeyCode:N,selectionKeyCode:R,selectionOnDrag:M,selectionMode:C,onSelectionStart:w,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:A,zoomActivationKeyCode:k,elementsSelectable:P,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:W,zoomOnPinch:K,zoomOnDoubleClick:se,panOnScroll:Q,panOnScrollSpeed:ee,panOnScrollMode:oe,panOnDrag:pe,defaultViewport:U,translateExtent:j,minZoom:z,maxZoom:F,onSelectionContextMenu:E,preventScrolling:O,noDragClassName:Tn,noWheelClassName:hn,noPanClassName:en,disableKeyboardA11y:be},G.createElement(JF,null,G.createElement(YF,{edgeTypes:$e,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:Ce,onlyRenderVisibleElements:D,onEdgeContextMenu:ct,onEdgeMouseEnter:Ee,onEdgeMouseMove:ht,onEdgeMouseLeave:ie,onEdgeUpdateStart:st,onEdgeUpdateEnd:Sn,edgeUpdaterRadius:cn,defaultMarkerColor:B,noPanClassName:en,elevateEdgesOnSelect:!!Yn,disableKeyboardA11y:be,rfId:tn},G.createElement(nU,{style:y,type:g,component:S,containerStyle:I})),G.createElement("div",{className:"react-flow__edgelabel-renderer"}),G.createElement(DF,{nodeTypes:Je,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:h,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:V,onlyRenderVisibleElements:D,noPanClassName:en,noDragClassName:Tn,disableKeyboardA11y:be,nodeOrigin:Ae,nodeExtent:It,rfId:tn})))};rA.displayName="GraphView";var rU=T.memo(rA);const pg=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],_i={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:pg,nodeExtent:pg,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ks.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:NO,isValidConnection:void 0},iU=()=>WM((t,e)=>({..._i,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=e();t({nodeInternals:Cp(n,r,i,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?Cp(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=e(),h=l==null?void 0:l.querySelector(".react-flow__viewport");if(!h)return;const d=window.getComputedStyle(h),{m22:f}=new window.DOMMatrixReadOnly(d.transform),m=n.reduce((w,x)=>{const g=i.get(x.id);if(g){const y=cv(x.nodeElement);!!(y.width&&y.height&&(g.width!==y.width||g.height!==y.height||x.forceUpdate))&&(i.set(g.id,{...g,[lt]:{...g[lt],handleBounds:{source:xE(".source",x.nodeElement,f,u),target:xE(".target",x.nodeElement,f,u)}},...y}),w.push({id:g.id,type:"dimensions",dimensions:y}))}return w},[]);zC(i,u);const E=o||s&&!o&&HC(e,{initial:!0,...a});t({nodeInternals:new Map(i),fitViewOnInitDone:E}),(m==null?void 0:m.length)>0&&(r==null||r(m))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=e(),o=n.map(a=>{const l={id:a.id,type:"position",dragging:i};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const u=KC(n,a()),h=Cp(u,i,o,l);t({nodeInternals:h})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(l=>Ii(l,!0)):(o=Do(s(),n),a=Do(i,[])),Kc({changedNodes:o,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(l=>Ii(l,!0)):(o=Do(i,n),a=Do(s(),[])),Kc({changedNodes:a,changedEdges:o,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=e(),o=n||s(),a=r||i,l=o.map(h=>(h.selected=!1,Ii(h.id,!1))),u=a.map(h=>Ii(h.id,!1));Kc({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),s=r().filter(a=>a.selected).map(a=>Ii(a.id,!1)),o=n.filter(a=>a.selected).map(a=>Ii(a.id,!1));Kc({changedNodes:s,changedEdges:o,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=hv(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:l}=e();if(!o||!a||!n.x&&!n.y)return!1;const u=Ki.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),h=[[0,0],[i,s]],d=o==null?void 0:o.constrain()(u,h,l);return o.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>t({connectionNodeId:_i.connectionNodeId,connectionHandleId:_i.connectionHandleId,connectionHandleType:_i.connectionHandleType,connectionStatus:_i.connectionStatus,connectionStartHandle:_i.connectionStartHandle,connectionEndHandle:_i.connectionEndHandle}),reset:()=>t({..._i})}),Object.is),Sv=({children:t})=>{const e=T.useRef(null);return e.current||(e.current=iU()),G.createElement(xO,{value:e.current},t)};Sv.displayName="ReactFlowProvider";const iA=({children:t})=>T.useContext(af)?G.createElement(G.Fragment,null,t):G.createElement(Sv,null,t);iA.displayName="ReactFlowWrapper";const sU={input:LC,default:dg,output:FC,group:wv},oU={default:ud,straight:mv,step:pv,smoothstep:lf,simplebezier:fv},aU=[0,0],lU=[15,15],uU={x:0,y:0,zoom:1},cU={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},sA=T.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=sU,edgeTypes:o=oU,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:h,onMoveStart:d,onMoveEnd:f,onConnect:m,onConnectStart:E,onConnectEnd:w,onClickConnectStart:x,onClickConnectEnd:g,onNodeMouseEnter:y,onNodeMouseMove:S,onNodeMouseLeave:I,onNodeContextMenu:R,onNodeDoubleClick:M,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:A,onNodesDelete:k,onEdgesDelete:N,onSelectionChange:D,onSelectionDragStart:P,onSelectionDrag:V,onSelectionDragStop:U,onSelectionContextMenu:j,onSelectionStart:z,onSelectionEnd:F,connectionMode:O=Ks.Strict,connectionLineType:B=ki.Bezier,connectionLineStyle:W,connectionLineComponent:K,connectionLineContainerStyle:Q,deleteKeyCode:ee="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:se=!1,selectionMode:pe=ha.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:ke=ad()?"Meta":"Control",zoomActivationKeyCode:me=ad()?"Meta":"Control",snapToGrid:He=!1,snapGrid:We=lU,onlyRenderVisibleElements:xt=!1,selectNodesOnDrag:Ce=!0,nodesDraggable:ct,nodesConnectable:Ee,nodesFocusable:ht,nodeOrigin:ie=aU,edgesFocusable:cn,edgesUpdatable:st,elementsSelectable:Sn,defaultViewport:Tn=uU,minZoom:hn=.5,maxZoom:en=2,translateExtent:Yn=pg,preventScrolling:be=!0,nodeExtent:Ae,defaultMarkerColor:It="#b1b1b7",zoomOnScroll:tn=!0,zoomOnPinch:Je=!0,panOnScroll:$e=!1,panOnScrollSpeed:Ft=.5,panOnScrollMode:Ln=ks.Free,zoomOnDoubleClick:On=!0,panOnDrag:Ut=!0,onPaneClick:dn,onPaneMouseEnter:hr,onPaneMouseMove:Dr,onPaneMouseLeave:dr,onPaneScroll:mi,onPaneContextMenu:Me,children:Oe,onEdgeUpdate:dt,onEdgeContextMenu:vt,onEdgeDoubleClick:Ct,onEdgeMouseEnter:_t,onEdgeMouseMove:nn,onEdgeMouseLeave:fn,onEdgeUpdateStart:jt,onEdgeUpdateEnd:Ke,edgeUpdaterRadius:fr=10,onNodesChange:Fn,onEdgesChange:Un,noDragClassName:so="nodrag",noWheelClassName:Mr="nowheel",noPanClassName:rn="nopan",fitView:ps=!1,fitViewOptions:Uf,connectOnClick:oo=!0,attributionPosition:lc,proOptions:La,defaultEdgeOptions:ao,elevateNodesOnSelect:pr=!0,elevateEdgesOnSelect:uc=!1,disableKeyboardA11y:Oa=!1,autoPanOnConnect:Fa=!0,autoPanOnNodeDrag:Ua=!0,connectionRadius:cc=20,isValidConnection:hc,onError:jf,style:lo,id:ja,nodeDragThreshold:$a,...ms},Vr)=>{const gs=ja||"1";return G.createElement("div",{...ms,style:{...lo,...cU},ref:Vr,className:Vn(["react-flow",i]),"data-testid":"rf__wrapper",id:ja},G.createElement(iA,null,G.createElement(rU,{onInit:u,onMove:h,onMoveStart:d,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:S,onNodeMouseLeave:I,onNodeContextMenu:R,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:B,connectionLineStyle:W,connectionLineComponent:K,connectionLineContainerStyle:Q,selectionKeyCode:oe,selectionOnDrag:se,selectionMode:pe,deleteKeyCode:ee,multiSelectionKeyCode:ke,panActivationKeyCode:we,zoomActivationKeyCode:me,onlyRenderVisibleElements:xt,selectNodesOnDrag:Ce,defaultViewport:Tn,translateExtent:Yn,minZoom:hn,maxZoom:en,preventScrolling:be,zoomOnScroll:tn,zoomOnPinch:Je,zoomOnDoubleClick:On,panOnScroll:$e,panOnScrollSpeed:Ft,panOnScrollMode:Ln,panOnDrag:Ut,onPaneClick:dn,onPaneMouseEnter:hr,onPaneMouseMove:Dr,onPaneMouseLeave:dr,onPaneScroll:mi,onPaneContextMenu:Me,onSelectionContextMenu:j,onSelectionStart:z,onSelectionEnd:F,onEdgeUpdate:dt,onEdgeContextMenu:vt,onEdgeDoubleClick:Ct,onEdgeMouseEnter:_t,onEdgeMouseMove:nn,onEdgeMouseLeave:fn,onEdgeUpdateStart:jt,onEdgeUpdateEnd:Ke,edgeUpdaterRadius:fr,defaultMarkerColor:It,noDragClassName:so,noWheelClassName:Mr,noPanClassName:rn,elevateEdgesOnSelect:uc,rfId:gs,disableKeyboardA11y:Oa,nodeOrigin:ie,nodeExtent:Ae}),G.createElement(eF,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:E,onConnectEnd:w,onClickConnectStart:x,onClickConnectEnd:g,nodesDraggable:ct,nodesConnectable:Ee,nodesFocusable:ht,edgesFocusable:cn,edgesUpdatable:st,elementsSelectable:Sn,elevateNodesOnSelect:pr,minZoom:hn,maxZoom:en,nodeExtent:Ae,onNodesChange:Fn,onEdgesChange:Un,snapToGrid:He,snapGrid:We,connectionMode:O,translateExtent:Yn,connectOnClick:oo,defaultEdgeOptions:ao,fitView:ps,fitViewOptions:Uf,onNodesDelete:k,onEdgesDelete:N,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:A,onSelectionDrag:V,onSelectionDragStart:P,onSelectionDragStop:U,noPanClassName:rn,nodeOrigin:ie,rfId:gs,autoPanOnConnect:Fa,autoPanOnNodeDrag:Ua,onError:jf,connectionRadius:cc,isValidConnection:hc,nodeDragThreshold:$a}),G.createElement(JO,{onSelectionChange:D}),Oe,G.createElement(CO,{proOptions:La,position:lc}),G.createElement(sF,{rfId:gs,disableKeyboardA11y:Oa})))});sA.displayName="ReactFlow";const hU=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function dU({children:t}){const e=ze(hU);return e?Ri.createPortal(t,e):null}const fU=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2]});function pU(){return ze(fU,Vt)}var or;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(or||(or={}));function mU({color:t,dimensions:e,lineWidth:n}){return G.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function gU({color:t,radius:e}){return G.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const yU={[or.Dots]:"#91919a",[or.Lines]:"#eee",[or.Cross]:"#e2e2e2"},vU={[or.Dots]:1,[or.Lines]:1,[or.Cross]:6},_U=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function oA({id:t,variant:e=or.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:l}){const u=T.useRef(null),{transform:h,patternId:d}=ze(_U,Vt),f=o||yU[e],m=r||vU[e],E=e===or.Dots,w=e===or.Cross,x=Array.isArray(n)?n:[n,n],g=[x[0]*h[2]||1,x[1]*h[2]||1],y=m*h[2],S=w?[y,y]:g,I=E?[y/s,y/s]:[S[0]/s,S[1]/s];return G.createElement("svg",{className:Vn(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},G.createElement("pattern",{id:d+t,x:h[0]%g[0],y:h[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`},E?G.createElement(gU,{color:f,radius:y/s}):G.createElement(mU,{dimensions:S,color:f,lineWidth:i})),G.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+t})`}))}oA.displayName="Background";var wU=T.memo(oA);const EU="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Pr=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=EU[n[t]&63];return e};const aA={BASE_URL:"/flow-app/dist/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:SU}=G,{useSyncExternalStoreWithSelector:TU}=$I;let NE=!1;const xU=t=>t;function IU(t,e=xU,n){(aA?"production":void 0)!=="production"&&n&&!NE&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),NE=!0);const r=TU(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return SU(r),r}const DE=t=>{(aA?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?BI(t):t,n=(r,i)=>IU(e,r,i);return Object.assign(n,e),n},CU=t=>t?DE(t):DE,AU=[{id:"1",position:{x:10,y:0},data:{label:"1"},type:"dialogue"},{id:"2",position:{x:0,y:100},data:{label:"2"},type:"dialogue"}],PU=[{id:"e1-2",source:"1",target:"2",type:"customEdge"}],RU=(t,e)=>({nodes:AU,edges:PU,getNode:n=>e().nodes.filter(r=>r.id===n)[0],onNodesChange:n=>{t({nodes:KC(n,e().nodes)})},onEdgesChange:n=>{t({edges:_F(n,e().edges)})},onConnect:n=>{t({edges:IC({...n,type:"customEdge"},e().edges)})},setEdges:n=>{t({edges:n})},setNodes:n=>{t({nodes:n.map(r=>({...r,data:{...r.data}}))})},appendNodes:n=>{t({nodes:[...e().nodes,...n.map(r=>({...r,id:Pr(),data:{...r.data}}))]})},updateNodeData:(n,r)=>{t({nodes:e().nodes.map(i=>i.id===n?{...i,data:{...i.data,...r}}:i)})},deleteNodeData:(n,r)=>{t({nodes:e().nodes.map(i=>{if(i.id===n){const{data:s}=i,o={...s};return Object.keys(r).forEach(a=>{delete o[a]}),{...i,data:o}}return i})})},toggleSelectedNode:n=>{const i=[{id:n,type:"select",selected:!e().isNodeSelected(n)}];e().onNodesChange(i)},deselectAllNodes:()=>{t({nodes:e().nodes.map(n=>({...n,selected:!1}))})},getSelectedNodes:()=>e().nodes.filter(n=>n.selected),isNodeSelected:n=>e().nodes.some(r=>r.id===n?r.selected:!1)}),vh=(t,e)=>{const n=t.findIndex(r=>r.key===e);return console.log(`${e} project index found`,n),n},kU=(t,e,n)=>{const r=t[e].pages.findIndex(i=>i.key===n);return console.log(`${n} page index found`,r),r},bU=(t,e)=>({register:[],activePath:void 0,lastChange:new Date,lastSave:new Date,setActivePath:n=>{t({activePath:n})},setRegister:n=>{t({register:n})},updateProjectName:(n,r)=>{const i=[...e().register],s=vh(i,n);i[s].name=r,t({register:i})},updatePageName:(n,r,i)=>{const s=[...e().register],o=vh(s,n),a=kU(s,o,r);s[o].pages[a].name=i,t({register:s})},addPage:(n,r,i)=>{const s=[...e().register],o=vh(s,n),a={name:r,key:i??Pr()};if(o!==-1){const l={...s[o],pages:[...s[o].pages,a]};s[o]=l,t({register:s})}else e().addProject(n,void 0,[a])},addProject:(n,r,i)=>{const s=[...e().register];s.push({name:n,key:r??Pr(),pages:i??[],tokens:[]}),t({register:s})},setLastChange:n=>{t({lastChange:n})},setLastSave:n=>{t({lastSave:n})}}),NU=(t,e)=>({activeChipSet:void 0,projectChipSets:[],setActiveChipSet:n=>{t({activeChipSet:n}),console.log("setting active chipset")},setChips:n=>{t({projectChipSets:n})},renameChip:(n,r,i)=>{const s=[...e().projectChipSets],o=s.findIndex(l=>l.key===n),a=s[o].chips.findIndex(l=>l.key===r);s[o].chips[a].name=i,t({projectChipSets:s})},renameChipSet:(n,r)=>{const i=[...e().projectChipSets],s=i.findIndex(o=>o.key===n);i[s].name=r,t({projectChipSets:i})},addChip:(n,r,i)=>{console.log("adding chips feature isn't finished yet"),console.log(n,r,i&&i);const s=[...e().projectChipSets],o=vh(s,n),a={name:r.name,key:i??Pr()};if(o!==-1){const l={...s[o],chips:[...s[o].chips,a]};console.log("found chipset: ",s[o]),s[o]=l,t({projectChipSets:s})}else e().addChipSet(n,void 0,[r])},addChipSet:(n,r,i)=>{const s=[...e().projectChipSets];s.push({name:n,key:r??Pr(),chips:i??[]}),t({projectChipSets:s})}}),Z=CU((t,e)=>({...RU(t,e),...bU(t,e),...NU(t,e),user:null,updateUser:n=>{t({user:n})},appLoaded:!1,setAppLoaded:n=>{t({appLoaded:n})},clientXY:{x:0,y:0},setClientXY:n=>{t({clientXY:n})},viewport:{x:0,y:0,zoom:1},getViewport:()=>e().viewport,setViewport:n=>{t({viewport:n})}})),lA=({visible:t,children:e,toggleVisible:n})=>L.jsx("div",{className:"projectPopupContainer",style:{display:`${t?"flex":"none"}`},onClick:r=>{r.target===r.currentTarget&&n()},children:L.jsxs("div",{className:"projectPopup",style:{zIndex:100,position:"relative"},children:[L.jsx("button",{onClick:n,style:{zIndex:101,position:"absolute",right:"-20px",top:"-12px"},children:L.jsx("span",{className:"material-symbols-outlined",children:"close"})}),e]})}),uA=({header:t,onClickAddButton:e,children:n})=>L.jsxs(L.Fragment,{children:[L.jsxs("h1",{style:{display:"flex",alignItems:"center",gap:".5em"},children:[t,L.jsx("span",{style:{fontSize:"1em"},className:"material-symbols-outlined toolbarButton",onClick:e,children:"add"})]}),L.jsx("ul",{children:n})]}),cA=({title:t,setTitle:e,handleNewTitle:n,handleAddItem:r,children:i})=>{const[s,o]=T.useState(!1),[a,l]=T.useState(!1);return L.jsx(L.Fragment,{children:L.jsxs("li",{className:"toggle",style:{listStyleType:`${s?"disclosure-open":"disclosure-closed"}`},onClick:u=>{u.target instanceof Element&&u.target.classList.contains("toggle")&&o(!s)},children:[L.jsxs("div",{className:"toggle",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a?L.jsx(L.Fragment,{children:L.jsx("input",{type:"text",value:t,onChange:u=>e(u.target.value),onBlur:u=>{n(u.target.value),console.log(`renaming ${t}`,u.target.value)}})}):L.jsx(L.Fragment,{children:t}),L.jsxs("div",{className:"toolbar",children:[L.jsx("span",{style:{fontSize:"1em"},className:"material-symbols-outlined toolbarButton",onClick:()=>l(!a),children:a?"check":"edit"}),L.jsx("span",{onClick:r,className:"material-symbols-outlined toolbarButton",children:"add"})]})]}),L.jsx("ul",{style:{display:`${s?"block":"none"}`},children:i})]})})};/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pu.apply(this,arguments)}var Li;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Li||(Li={}));const ME="popstate";function DU(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=to(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),mg("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:cd(s))}function r(i,s){Tv(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return VU(e,n,r,t)}function ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MU(){return Math.random().toString(36).substr(2,8)}function VE(t,e){return{usr:t.state,key:t.key,idx:e}}function mg(t,e,n,r){return n===void 0&&(n=null),pu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?to(e):e,{state:n,key:e&&e.key||r||MU()})}function cd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function to(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function VU(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Li.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(pu({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Li.Pop;let x=h(),g=x==null?null:x-u;u=x,l&&l({action:a,location:w.location,delta:g})}function f(x,g){a=Li.Push;let y=mg(w.location,x,g);n&&n(y,x),u=h()+1;let S=VE(y,u),I=w.createHref(y);try{o.pushState(S,"",I)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(I)}s&&l&&l({action:a,location:w.location,delta:1})}function m(x,g){a=Li.Replace;let y=mg(w.location,x,g);n&&n(y,x),u=h();let S=VE(y,u),I=w.createHref(y);o.replaceState(S,"",I),s&&l&&l({action:a,location:w.location,delta:0})}function E(x){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof x=="string"?x:cd(x);return y=y.replace(/ $/,"%20"),ut(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let w={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ME,d),l=x,()=>{i.removeEventListener(ME,d),l=null}},createHref(x){return e(i,x)},createURL:E,encodeLocation(x){let g=E(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:m,go(x){return o.go(x)}};return w}var LE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(LE||(LE={}));function LU(t,e,n){return n===void 0&&(n="/"),OU(t,e,n,!1)}function OU(t,e,n,r){let i=typeof e=="string"?to(e):e,s=xv(i.pathname||"/",n);if(s==null)return null;let o=hA(t);FU(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=XU(s);a=GU(o[l],u,r)}return a}function hA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ut(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=qi([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(ut(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),hA(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:WU(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of dA(s.path))i(s,o,l)}),e}function dA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=dA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function FU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KU(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const UU=/^:[\w-]+$/,jU=3,$U=2,BU=1,zU=10,HU=-2,OE=t=>t==="*";function WU(t,e){let n=t.split("/"),r=n.length;return n.some(OE)&&(r+=HU),e&&(r+=$U),n.filter(i=>!OE(i)).reduce((i,s)=>i+(UU.test(s)?jU:s===""?BU:zU),r)}function KU(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function GU(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=FE({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=FE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:qi([s,d.pathname]),pathnameBase:ZU(qi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=qi([s,d.pathnameBase]))}return o}function FE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qU(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const E=a[d];return m&&!E?u[f]=void 0:u[f]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function qU(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Tv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function XU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function YU(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?to(t):t;return{pathname:n?n.startsWith("/")?n:QU(n,e):e,search:ej(r),hash:tj(i)}}function QU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function kp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fA(t,e){let n=JU(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function pA(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=to(t):(i=pu({},t),ut(!i.pathname||!i.pathname.includes("?"),kp("?","pathname","search",i)),ut(!i.pathname||!i.pathname.includes("#"),kp("#","pathname","hash",i)),ut(!i.search||!i.search.includes("#"),kp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=YU(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const qi=t=>t.join("/").replace(/\/\/+/g,"/"),ZU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ej=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mA=["post","put","patch","delete"];new Set(mA);const rj=["get",...mA];new Set(rj);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(this,arguments)}const Iv=T.createContext(null),ij=T.createContext(null),no=T.createContext(null),uf=T.createContext(null),cs=T.createContext({outlet:null,matches:[],isDataRoute:!1}),gA=T.createContext(null);function sj(t,e){let{relative:n}=e===void 0?{}:e;$u()||ut(!1);let{basename:r,navigator:i}=T.useContext(no),{hash:s,pathname:o,search:a}=vA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:qi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function $u(){return T.useContext(uf)!=null}function cf(){return $u()||ut(!1),T.useContext(uf).location}function yA(t){T.useContext(no).static||T.useLayoutEffect(t)}function oj(){let{isDataRoute:t}=T.useContext(cs);return t?wj():aj()}function aj(){$u()||ut(!1);let t=T.useContext(Iv),{basename:e,future:n,navigator:r}=T.useContext(no),{matches:i}=T.useContext(cs),{pathname:s}=cf(),o=JSON.stringify(fA(i,n.v7_relativeSplatPath)),a=T.useRef(!1);return yA(()=>{a.current=!0}),T.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=pA(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:qi([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function lj(){let{matches:t}=T.useContext(cs),e=t[t.length-1];return e?e.params:{}}function vA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(no),{matches:i}=T.useContext(cs),{pathname:s}=cf(),o=JSON.stringify(fA(i,r.v7_relativeSplatPath));return T.useMemo(()=>pA(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function uj(t,e){return cj(t,e)}function cj(t,e,n,r){$u()||ut(!1);let{navigator:i}=T.useContext(no),{matches:s}=T.useContext(cs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=cf(),h;if(e){var d;let x=typeof e=="string"?to(e):e;l==="/"||(d=x.pathname)!=null&&d.startsWith(l)||ut(!1),h=x}else h=u;let f=h.pathname||"/",m=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let E=LU(t,{pathname:m}),w=mj(E&&E.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:qi([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:qi([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&w?T.createElement(uf.Provider,{value:{location:mu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Li.Pop}},w):w}function hj(){let t=_j(),e=nj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,null)}const dj=T.createElement(hj,null);class fj extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(cs.Provider,{value:this.props.routeContext},T.createElement(gA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pj(t){let{routeContext:e,match:n,children:r}=t,i=T.useContext(Iv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(cs.Provider,{value:e},r)}function mj(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||ut(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=n,E=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||E){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,E=!1,w=null,x=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||dj,l&&(u<0&&f===0?(E=!0,x=null):u===f&&(E=!0,x=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),y=()=>{let S;return m?S=w:E?S=x:d.route.Component?S=T.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,T.createElement(pj,{match:d,routeContext:{outlet:h,matches:g,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?T.createElement(fj,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var _A=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_A||{}),hd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hd||{});function gj(t){let e=T.useContext(Iv);return e||ut(!1),e}function yj(t){let e=T.useContext(ij);return e||ut(!1),e}function vj(t){let e=T.useContext(cs);return e||ut(!1),e}function wA(t){let e=vj(),n=e.matches[e.matches.length-1];return n.route.id||ut(!1),n.route.id}function _j(){var t;let e=T.useContext(gA),n=yj(hd.UseRouteError),r=wA(hd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function wj(){let{router:t}=gj(_A.UseNavigateStable),e=wA(hd.UseNavigateStable),n=T.useRef(!1);return yA(()=>{n.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,mu({fromRouteId:e},s)))},[t,e])}function yl(t){ut(!1)}function Ej(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Li.Pop,navigator:s,static:o=!1,future:a}=t;$u()&&ut(!1);let l=e.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:l,navigator:s,static:o,future:mu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=to(r));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:E="default"}=r,w=T.useMemo(()=>{let x=xv(h,l);return x==null?null:{location:{pathname:x,search:d,hash:f,state:m,key:E},navigationType:i}},[l,h,d,f,m,E,i]);return w==null?null:T.createElement(no.Provider,{value:u},T.createElement(uf.Provider,{children:n,value:w}))}function Sj(t){let{children:e,location:n}=t;return uj(gg(e),n)}new Promise(()=>{});function gg(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let s=[...e,i];if(r.type===T.Fragment){n.push.apply(n,gg(r.props.children,s));return}r.type!==yl&&ut(!1),!r.props.index||!r.props.children||ut(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=gg(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yg(){return yg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yg.apply(this,arguments)}function Tj(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ij(t,e){return t.button===0&&(!e||e==="_self")&&!xj(t)}const Cj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Aj="6";try{window.__reactRouterVersion=Aj}catch{}const Pj="startTransition",UE=dN[Pj];function Rj(t){let{basename:e,children:n,future:r,window:i}=t,s=T.useRef();s.current==null&&(s.current=DU({window:i,v5Compat:!0}));let o=s.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=T.useCallback(d=>{u&&UE?UE(()=>l(d)):l(d)},[l,u]);return T.useLayoutEffect(()=>o.listen(h),[o,h]),T.createElement(Ej,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const kj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nj=T.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=Tj(e,Cj),{basename:m}=T.useContext(no),E,w=!1;if(typeof u=="string"&&bj.test(u)&&(E=u,kj))try{let S=new URL(window.location.href),I=u.startsWith("//")?new URL(S.protocol+u):new URL(u),R=xv(I.pathname,m);I.origin===S.origin&&R!=null?u=R+I.search+I.hash:w=!0}catch{}let x=sj(u,{relative:i}),g=Dj(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:d});function y(S){r&&r(S),S.defaultPrevented||g(S)}return T.createElement("a",yg({},f,{href:E||x,onClick:w||s?r:y,ref:n,target:l}))});var jE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jE||(jE={}));var $E;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($E||($E={}));function Dj(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=oj(),u=cf(),h=vA(t,{relative:o});return T.useCallback(d=>{if(Ij(d,n)){d.preventDefault();let f=r!==void 0?r:cd(u)===cd(h);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,h,r,i,n,t,s,o,a])}const EA=({title:t,setTitle:e,handleNewTitle:n,handleClickItem:r,children:i})=>{const[s,o]=T.useState(!1);return L.jsx(L.Fragment,{children:L.jsxs("li",{onClick:a=>{a.target===a.currentTarget&&(s||r())},children:[s?L.jsx(L.Fragment,{children:L.jsx("input",{type:"text",value:t,onChange:a=>e(a.target.value),onBlur:a=>{n(a.target.value)}})}):L.jsx(L.Fragment,{children:i}),L.jsx("div",{className:"toolbar",children:L.jsx("span",{style:{fontSize:"1em"},className:"material-symbols-outlined toolbarButton",onClick:()=>o(!s),children:s?"check":"edit"})})]})})};function Mj({project:t,page:e}){const[n,r]=T.useState(e.name),i=Z(l=>l.setActivePath),s=Z(l=>l.updatePageName),o=l=>{s(t.key,e.key,l),r(l)},a=()=>{i({projectKey:t.key,pageKey:e.key})};return L.jsx(L.Fragment,{children:L.jsx(Nj,{to:`/editor/${t.key}/${e.key}`,children:L.jsx(EA,{title:n,setTitle:r,handleNewTitle:o,handleClickItem:a,children:n},e.key)})})}function Vj({project:t,pages:e}){const n=Z(l=>l.addPage),r=Z(l=>l.updateProjectName),[i,s]=T.useState(t.name),o=()=>{const l=prompt("New Page Name:");l&&n(t.key,l)},a=l=>{r(t.key,l),s(l)};return L.jsx(L.Fragment,{children:L.jsx(cA,{title:i,setTitle:s,handleNewTitle:a,handleAddItem:o,children:!e||e.length==0?L.jsx("li",{children:L.jsx("i",{style:{fontFamily:"IvyJournal",color:"grey"},children:"No pages yet :)"})}):e.map(l=>L.jsx(Mj,{project:t,page:l},l.key))})})}function SA(){const t=Z(r=>r.register),e=Z(r=>r.addProject),n=()=>{const r=prompt("New Project Name:");r&&e(r)};return L.jsx(L.Fragment,{children:L.jsx(uA,{header:"Projects",onClickAddButton:n,children:t.map(r=>L.jsx(Vj,{project:r,pages:r.pages},r.name))})})}function Lj({visible:t,toggleVisible:e}){return L.jsx(L.Fragment,{children:L.jsx(lA,{visible:t,toggleVisible:e,children:L.jsx(SA,{})})})}function BE(){return L.jsx("div",{className:"projectHome",children:L.jsx(SA,{})})}const hf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Pa(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Cv(t){return"nodeType"in t}function En(t){var e,n;return t?Pa(t)?t:Cv(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Av(t){const{Document:e}=En(t);return t instanceof e}function Bu(t){return Pa(t)?!1:t instanceof En(t).HTMLElement}function TA(t){return t instanceof En(t).SVGElement}function Ra(t){return t?Pa(t)?t.document:Cv(t)?Av(t)?t:Bu(t)||TA(t)?t.ownerDocument:document:document:document}const ai=hf?T.useLayoutEffect:T.useEffect;function Pv(t){const e=T.useRef(t);return ai(()=>{e.current=t}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function Oj(){const t=T.useRef(null),e=T.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function gu(t,e){e===void 0&&(e=[t]);const n=T.useRef(t);return ai(()=>{n.current!==t&&(n.current=t)},e),n}function zu(t,e){const n=T.useRef();return T.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function dd(t){const e=Pv(t),n=T.useRef(null),r=T.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function vg(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let bp={};function df(t,e){return T.useMemo(()=>{if(e)return e;const n=bp[t]==null?0:bp[t]+1;return bp[t]=n,t+"-"+n},[t,e])}function xA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,u]of a){const h=s[l];h!=null&&(s[l]=h+t*u)}return s},{...e})}}const Xo=xA(1),fd=xA(-1);function Fj(t){return"clientX"in t&&"clientY"in t}function IA(t){if(!t)return!1;const{KeyboardEvent:e}=En(t.target);return e&&t instanceof e}function Uj(t){if(!t)return!1;const{TouchEvent:e}=En(t.target);return e&&t instanceof e}function _g(t){if(Uj(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Fj(t)?{x:t.clientX,y:t.clientY}:null}const zE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function jj(t){return t.matches(zE)?t:t.querySelector(zE)}const $j={display:"none"};function Bj(t){let{id:e,value:n}=t;return G.createElement("div",{id:e,style:$j},n)}function zj(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return G.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Hj(){const[t,e]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const CA=T.createContext(null);function Wj(t){const e=T.useContext(CA);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Kj(){const[t]=T.useState(()=>new Set),e=T.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[T.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const Gj={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qj={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Xj(t){let{announcements:e=qj,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Gj}=t;const{announce:s,announcement:o}=Hj(),a=df("DndLiveRegion"),[l,u]=T.useState(!1);if(T.useEffect(()=>{u(!0)},[]),Wj(T.useMemo(()=>({onDragStart(d){let{active:f}=d;s(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:m}=d;e.onDragMove&&s(e.onDragMove({active:f,over:m}))},onDragOver(d){let{active:f,over:m}=d;s(e.onDragOver({active:f,over:m}))},onDragEnd(d){let{active:f,over:m}=d;s(e.onDragEnd({active:f,over:m}))},onDragCancel(d){let{active:f,over:m}=d;s(e.onDragCancel({active:f,over:m}))}}),[s,e])),!l)return null;const h=G.createElement(G.Fragment,null,G.createElement(Bj,{id:r,value:i.draggable}),G.createElement(zj,{id:a,announcement:o}));return n?Ri.createPortal(h,n):h}var pt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(pt||(pt={}));function pd(){}const ur=Object.freeze({x:0,y:0});function Yj(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Qj(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Jj(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,u=t.width*t.height,h=o*a,d=h/(l+u-h);return Number(d.toFixed(4))}return 0}const Zj=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=Jj(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(Yj)};function e4(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function AA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ur}function t4(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const n4=t4(1);function r4(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function i4(t,e,n){const r=r4(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),u=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:h,height:d,top:u,right:l+h,bottom:u+d,left:l}}const s4={ignoreTransform:!1};function Hu(t,e){e===void 0&&(e=s4);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=En(t).getComputedStyle(t);u&&(n=i4(n,u,h))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function HE(t){return Hu(t,{ignoreTransform:!0})}function o4(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function a4(t,e){return e===void 0&&(e=En(t).getComputedStyle(t)),e.position==="fixed"}function l4(t,e){e===void 0&&(e=En(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Rv(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Av(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Bu(i)||TA(i)||n.includes(i))return n;const s=En(t).getComputedStyle(i);return i!==t&&l4(i,s)&&n.push(i),a4(i,s)?n:r(i.parentNode)}return t?r(t):n}function PA(t){const[e]=Rv(t,1);return e??null}function Np(t){return!hf||!t?null:Pa(t)?t:Cv(t)?Av(t)||t===Ra(t).scrollingElement?window:Bu(t)?t:null:null}function RA(t){return Pa(t)?t.scrollX:t.scrollLeft}function kA(t){return Pa(t)?t.scrollY:t.scrollTop}function wg(t){return{x:RA(t),y:kA(t)}}var St;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(St||(St={}));function bA(t){return!hf||!t?!1:t===document.scrollingElement}function NA(t){const e={x:0,y:0},n=bA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const u4={x:.2,y:.2};function c4(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=u4);const{isTop:u,isBottom:h,isLeft:d,isRight:f}=NA(t),m={x:0,y:0},E={x:0,y:0},w={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+w.height?(m.y=St.Backward,E.y=r*Math.abs((e.top+w.height-s)/w.height)):!h&&l>=e.bottom-w.height&&(m.y=St.Forward,E.y=r*Math.abs((e.bottom-w.height-l)/w.height)),!f&&a>=e.right-w.width?(m.x=St.Forward,E.x=r*Math.abs((e.right-w.width-a)/w.width)):!d&&o<=e.left+w.width&&(m.x=St.Backward,E.x=r*Math.abs((e.left+w.width-o)/w.width)),{direction:m,speed:E}}function h4(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function DA(t){return t.reduce((e,n)=>Xo(e,wg(n)),ur)}function d4(t){return t.reduce((e,n)=>e+RA(n),0)}function f4(t){return t.reduce((e,n)=>e+kA(n),0)}function p4(t,e){if(e===void 0&&(e=Hu),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);PA(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const m4=[["x",["left","right"],d4],["y",["top","bottom"],f4]];class kv{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Rv(n),i=DA(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of m4)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),h=i[s]-u;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Nl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function g4(t){const{EventTarget:e}=En(t);return t instanceof e?t:Ra(t)}function Dp(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Bn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Bn||(Bn={}));function WE(t){t.preventDefault()}function y4(t){t.stopPropagation()}var Ve;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(Ve||(Ve={}));const MA={start:[Ve.Space,Ve.Enter],cancel:[Ve.Esc],end:[Ve.Space,Ve.Enter]},v4=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ve.Right:return{...n,x:n.x+25};case Ve.Left:return{...n,x:n.x-25};case Ve.Down:return{...n,y:n.y+25};case Ve.Up:return{...n,y:n.y-25}}};class VA{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Nl(Ra(n)),this.windowListeners=new Nl(En(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bn.Resize,this.handleCancel),this.windowListeners.add(Bn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&p4(r),n(ur)}handleKeyDown(e){if(IA(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=MA,coordinateGetter:o=v4,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:ur;this.referenceCoordinates||(this.referenceCoordinates=h);const d=o(e,{active:n,context:r.current,currentCoordinates:h});if(d){const f=fd(d,h),m={x:0,y:0},{scrollableAncestors:E}=r.current;for(const w of E){const x=e.code,{isTop:g,isRight:y,isLeft:S,isBottom:I,maxScroll:R,minScroll:M}=NA(w),C=h4(w),_={x:Math.min(x===Ve.Right?C.right-C.width/2:C.right,Math.max(x===Ve.Right?C.left:C.left+C.width/2,d.x)),y:Math.min(x===Ve.Down?C.bottom-C.height/2:C.bottom,Math.max(x===Ve.Down?C.top:C.top+C.height/2,d.y))},A=x===Ve.Right&&!y||x===Ve.Left&&!S,k=x===Ve.Down&&!I||x===Ve.Up&&!g;if(A&&_.x!==d.x){const N=w.scrollLeft+f.x,D=x===Ve.Right&&N<=R.x||x===Ve.Left&&N>=M.x;if(D&&!f.y){w.scrollTo({left:N,behavior:a});return}D?m.x=w.scrollLeft-N:m.x=x===Ve.Right?w.scrollLeft-R.x:w.scrollLeft-M.x,m.x&&w.scrollBy({left:-m.x,behavior:a});break}else if(k&&_.y!==d.y){const N=w.scrollTop+f.y,D=x===Ve.Down&&N<=R.y||x===Ve.Up&&N>=M.y;if(D&&!f.x){w.scrollTo({top:N,behavior:a});return}D?m.y=w.scrollTop-N:m.y=x===Ve.Down?w.scrollTop-R.y:w.scrollTop-M.y,m.y&&w.scrollBy({top:-m.y,behavior:a});break}}this.handleMove(e,Xo(fd(d,this.referenceCoordinates),m))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}VA.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=MA,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function KE(t){return!!(t&&"distance"in t)}function GE(t){return!!(t&&"delay"in t)}class bv{constructor(e,n,r){var i;r===void 0&&(r=g4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Ra(o),this.documentListeners=new Nl(this.document),this.listeners=new Nl(r),this.windowListeners=new Nl(En(o)),this.initialCoordinates=(i=_g(s))!=null?i:ur,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(Bn.Resize,this.handleCancel),this.windowListeners.add(Bn.DragStart,WE),this.windowListeners.add(Bn.VisibilityChange,this.handleCancel),this.windowListeners.add(Bn.ContextMenu,WE),this.documentListeners.add(Bn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(GE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(KE(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bn.Click,y4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=_g(e))!=null?n:ur,u=fd(i,l);if(!r&&a){if(KE(a)){if(a.tolerance!=null&&Dp(u,a.tolerance))return this.handleCancel();if(Dp(u,a.distance))return this.handleStart()}return GE(a)&&Dp(u,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===Ve.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const _4={move:{name:"pointermove"},end:{name:"pointerup"}};class LA extends bv{constructor(e){const{event:n}=e,r=Ra(n.target);super(e,_4,r)}}LA.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const w4={move:{name:"mousemove"},end:{name:"mouseup"}};var Eg;(function(t){t[t.RightClick=2]="RightClick"})(Eg||(Eg={}));class E4 extends bv{constructor(e){super(e,w4,Ra(e.event.target))}}E4.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Eg.RightClick?!1:(r==null||r({event:n}),!0)}}];const Mp={move:{name:"touchmove"},end:{name:"touchend"}};class S4 extends bv{constructor(e){super(e,Mp)}static setup(){return window.addEventListener(Mp.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Mp.move.name,e)};function e(){}}}S4.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Dl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Dl||(Dl={}));var md;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(md||(md={}));function T4(t){let{acceleration:e,activator:n=Dl.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=md.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:h,delta:d,threshold:f}=t;const m=I4({delta:d,disabled:!s}),[E,w]=Oj(),x=T.useRef({x:0,y:0}),g=T.useRef({x:0,y:0}),y=T.useMemo(()=>{switch(n){case Dl.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Dl.DraggableRect:return i}},[n,i,l]),S=T.useRef(null),I=T.useCallback(()=>{const M=S.current;if(!M)return;const C=x.current.x*g.current.x,_=x.current.y*g.current.y;M.scrollBy(C,_)},[]),R=T.useMemo(()=>a===md.TreeOrder?[...u].reverse():u,[a,u]);T.useEffect(()=>{if(!s||!u.length||!y){w();return}for(const M of R){if((r==null?void 0:r(M))===!1)continue;const C=u.indexOf(M),_=h[C];if(!_)continue;const{direction:A,speed:k}=c4(M,_,y,e,f);for(const N of["x","y"])m[N][A[N]]||(k[N]=0,A[N]=0);if(k.x>0||k.y>0){w(),S.current=M,E(I,o),x.current=k,g.current=A;return}}x.current={x:0,y:0},g.current={x:0,y:0},w()},[e,I,r,w,s,o,JSON.stringify(y),JSON.stringify(m),E,u,R,h,JSON.stringify(f)])}const x4={x:{[St.Backward]:!1,[St.Forward]:!1},y:{[St.Backward]:!1,[St.Forward]:!1}};function I4(t){let{delta:e,disabled:n}=t;const r=vg(e);return zu(i=>{if(n||!r||!i)return x4;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[St.Backward]:i.x[St.Backward]||s.x===-1,[St.Forward]:i.x[St.Forward]||s.x===1},y:{[St.Backward]:i.y[St.Backward]||s.y===-1,[St.Forward]:i.y[St.Forward]||s.y===1}}},[n,e,r])}function C4(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return zu(i=>{var s;return e===null?null:(s=r??i)!=null?s:null},[r,e])}function A4(t,e){return T.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var yu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(yu||(yu={}));var Sg;(function(t){t.Optimized="optimized"})(Sg||(Sg={}));const qE=new Map;function P4(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=T.useState(null),{frequency:a,measure:l,strategy:u}=i,h=T.useRef(t),d=x(),f=gu(d),m=T.useCallback(function(g){g===void 0&&(g=[]),!f.current&&o(y=>y===null?g:y.concat(g.filter(S=>!y.includes(S))))},[f]),E=T.useRef(null),w=zu(g=>{if(d&&!n)return qE;if(!g||g===qE||h.current!==t||s!=null){const y=new Map;for(let S of t){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){y.set(S.id,S.rect.current);continue}const I=S.node.current,R=I?new kv(l(I),I):null;S.rect.current=R,R&&y.set(S.id,R)}return y}return g},[t,s,n,d,l]);return T.useEffect(()=>{h.current=t},[t]),T.useEffect(()=>{d||m()},[n,d]),T.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),T.useEffect(()=>{d||typeof a!="number"||E.current!==null||(E.current=setTimeout(()=>{m(),E.current=null},a))},[a,d,m,...r]),{droppableRects:w,measureDroppableContainers:m,measuringScheduled:s!=null};function x(){switch(u){case yu.Always:return!1;case yu.BeforeDragging:return n;default:return!n}}}function OA(t,e){return zu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function R4(t,e){return OA(t,e)}function k4(t){let{callback:e,disabled:n}=t;const r=Pv(e),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return T.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function ff(t){let{callback:e,disabled:n}=t;const r=Pv(e),i=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return T.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function b4(t){return new kv(Hu(t),t)}function XE(t,e,n){e===void 0&&(e=b4);const[r,i]=T.useReducer(a,null),s=k4({callback(l){if(t)for(const u of l){const{type:h,target:d}=u;if(h==="childList"&&d instanceof HTMLElement&&d.contains(t)){i();break}}}}),o=ff({callback:i});return ai(()=>{i(),t?(o==null||o.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[t]),r;function a(l){if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const h=e(t);return JSON.stringify(l)===JSON.stringify(h)?l:h}}function N4(t){const e=OA(t);return AA(t,e)}const YE=[];function D4(t){const e=T.useRef(t),n=zu(r=>t?r&&r!==YE&&t&&e.current&&t.parentNode===e.current.parentNode?r:Rv(t):YE,[t]);return T.useEffect(()=>{e.current=t},[t]),n}function M4(t){const[e,n]=T.useState(null),r=T.useRef(t),i=T.useCallback(s=>{const o=Np(s.target);o&&n(a=>a?(a.set(o,wg(o)),new Map(a)):null)},[]);return T.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const u=Np(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,wg(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const u=Np(l);u==null||u.removeEventListener("scroll",i)})}},[i,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Xo(s,o),ur):DA(t):ur,[t,e])}function QE(t,e){e===void 0&&(e=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},e),T.useEffect(()=>{const r=t!==ur;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?fd(t,n.current):ur}function V4(t){T.useEffect(()=>{if(!hf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function L4(t,e){return T.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function FA(t){return T.useMemo(()=>t?o4(t):null,[t])}const Vp=[];function O4(t,e){e===void 0&&(e=Hu);const[n]=t,r=FA(n?En(n):null),[i,s]=T.useReducer(a,Vp),o=ff({callback:s});return t.length>0&&i===Vp&&s(),ai(()=>{t.length?t.forEach(l=>o==null?void 0:o.observe(l)):(o==null||o.disconnect(),s())},[t]),i;function a(){return t.length?t.map(l=>bA(l)?r:new kv(e(l),l)):Vp}}function F4(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Bu(e)?e:t}function U4(t){let{measure:e}=t;const[n,r]=T.useState(null),i=T.useCallback(u=>{for(const{target:h}of u)if(Bu(h)){r(d=>{const f=e(h);return d?{...d,width:f.width,height:f.height}:f});break}},[e]),s=ff({callback:i}),o=T.useCallback(u=>{const h=F4(u);s==null||s.disconnect(),h&&(s==null||s.observe(h)),r(h?e(h):null)},[e,s]),[a,l]=dd(o);return T.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const j4=[{sensor:LA,options:{}},{sensor:VA,options:{}}],$4={current:{}},_h={draggable:{measure:HE},droppable:{measure:HE,strategy:yu.WhileDragging,frequency:Sg.Optimized},dragOverlay:{measure:Hu}};class Ml extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const B4={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ml,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:pd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:_h,measureDroppableContainers:pd,windowRect:null,measuringScheduled:!1},z4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:pd,draggableNodes:new Map,over:null,measureDroppableContainers:pd},pf=T.createContext(z4),H4=T.createContext(B4);function W4(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ml}}}function K4(t,e){switch(e.type){case pt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case pt.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case pt.DragEnd:case pt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case pt.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Ml(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case pt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Ml(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case pt.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Ml(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function G4(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=T.useContext(pf),s=vg(r),o=vg(n==null?void 0:n.id);return T.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!IA(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[l.current,u.current]){if(!h)continue;const d=jj(h);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function q4(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function X4(t){return T.useMemo(()=>({draggable:{..._h.draggable,...t==null?void 0:t.draggable},droppable:{..._h.droppable,...t==null?void 0:t.droppable},dragOverlay:{..._h.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Y4(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=T.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;ai(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),d=AA(h,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=PA(u);f&&f.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const UA=T.createContext({...ur,scaleX:1,scaleY:1});var Ci;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ci||(Ci={}));const jA=T.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:h=j4,collisionDetection:d=Zj,measuring:f,modifiers:m,...E}=e;const w=T.useReducer(K4,void 0,W4),[x,g]=w,[y,S]=Kj(),[I,R]=T.useState(Ci.Uninitialized),M=I===Ci.Initialized,{draggable:{active:C,nodes:_,translate:A},droppable:{containers:k}}=x,N=C?_.get(C):null,D=T.useRef({initial:null,translated:null}),P=T.useMemo(()=>{var Me;return C!=null?{id:C,data:(Me=N==null?void 0:N.data)!=null?Me:$4,rect:D}:null},[C,N]),V=T.useRef(null),[U,j]=T.useState(null),[z,F]=T.useState(null),O=gu(E,Object.values(E)),B=df("DndDescribedBy",o),W=T.useMemo(()=>k.getEnabled(),[k]),K=X4(f),{droppableRects:Q,measureDroppableContainers:ee,measuringScheduled:oe}=P4(W,{dragging:M,dependencies:[A.x,A.y],config:K.droppable}),se=C4(_,C),pe=T.useMemo(()=>z?_g(z):null,[z]),we=mi(),ke=R4(se,K.draggable.measure);Y4({activeNode:C?_.get(C):null,config:we.layoutShiftCompensation,initialRect:ke,measure:K.draggable.measure});const me=XE(se,K.draggable.measure,ke),He=XE(se?se.parentElement:null),We=T.useRef({activatorEvent:null,active:null,activeNode:se,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xt=k.getNodeFor((n=We.current.over)==null?void 0:n.id),Ce=U4({measure:K.dragOverlay.measure}),ct=(r=Ce.nodeRef.current)!=null?r:se,Ee=M?(i=Ce.rect)!=null?i:me:null,ht=!!(Ce.nodeRef.current&&Ce.rect),ie=N4(ht?null:me),cn=FA(ct?En(ct):null),st=D4(M?xt??se:null),Sn=O4(st),Tn=q4(m,{transform:{x:A.x-ie.x,y:A.y-ie.y,scaleX:1,scaleY:1},activatorEvent:z,active:P,activeNodeRect:me,containerNodeRect:He,draggingNodeRect:Ee,over:We.current.over,overlayNodeRect:Ce.rect,scrollableAncestors:st,scrollableAncestorRects:Sn,windowRect:cn}),hn=pe?Xo(pe,A):null,en=M4(st),Yn=QE(en),be=QE(en,[me]),Ae=Xo(Tn,Yn),It=Ee?n4(Ee,Tn):null,tn=P&&It?d({active:P,collisionRect:It,droppableRects:Q,droppableContainers:W,pointerCoordinates:hn}):null,Je=Qj(tn,"id"),[$e,Ft]=T.useState(null),Ln=ht?Tn:Xo(Tn,be),On=e4(Ln,(s=$e==null?void 0:$e.rect)!=null?s:null,me),Ut=T.useCallback((Me,Oe)=>{let{sensor:dt,options:vt}=Oe;if(V.current==null)return;const Ct=_.get(V.current);if(!Ct)return;const _t=Me.nativeEvent,nn=new dt({active:V.current,activeNode:Ct,event:_t,options:vt,context:We,onStart(jt){const Ke=V.current;if(Ke==null)return;const fr=_.get(Ke);if(!fr)return;const{onDragStart:Fn}=O.current,Un={active:{id:Ke,data:fr.data,rect:D}};Ri.unstable_batchedUpdates(()=>{Fn==null||Fn(Un),R(Ci.Initializing),g({type:pt.DragStart,initialCoordinates:jt,active:Ke}),y({type:"onDragStart",event:Un})})},onMove(jt){g({type:pt.DragMove,coordinates:jt})},onEnd:fn(pt.DragEnd),onCancel:fn(pt.DragCancel)});Ri.unstable_batchedUpdates(()=>{j(nn),F(Me.nativeEvent)});function fn(jt){return async function(){const{active:fr,collisions:Fn,over:Un,scrollAdjustedTranslate:so}=We.current;let Mr=null;if(fr&&so){const{cancelDrop:rn}=O.current;Mr={activatorEvent:_t,active:fr,collisions:Fn,delta:so,over:Un},jt===pt.DragEnd&&typeof rn=="function"&&await Promise.resolve(rn(Mr))&&(jt=pt.DragCancel)}V.current=null,Ri.unstable_batchedUpdates(()=>{g({type:jt}),R(Ci.Uninitialized),Ft(null),j(null),F(null);const rn=jt===pt.DragEnd?"onDragEnd":"onDragCancel";if(Mr){const ps=O.current[rn];ps==null||ps(Mr),y({type:rn,event:Mr})}})}}},[_]),dn=T.useCallback((Me,Oe)=>(dt,vt)=>{const Ct=dt.nativeEvent,_t=_.get(vt);if(V.current!==null||!_t||Ct.dndKit||Ct.defaultPrevented)return;const nn={active:_t};Me(dt,Oe.options,nn)===!0&&(Ct.dndKit={capturedBy:Oe.sensor},V.current=vt,Ut(dt,Oe))},[_,Ut]),hr=A4(h,dn);V4(h),ai(()=>{me&&I===Ci.Initializing&&R(Ci.Initialized)},[me,I]),T.useEffect(()=>{const{onDragMove:Me}=O.current,{active:Oe,activatorEvent:dt,collisions:vt,over:Ct}=We.current;if(!Oe||!dt)return;const _t={active:Oe,activatorEvent:dt,collisions:vt,delta:{x:Ae.x,y:Ae.y},over:Ct};Ri.unstable_batchedUpdates(()=>{Me==null||Me(_t),y({type:"onDragMove",event:_t})})},[Ae.x,Ae.y]),T.useEffect(()=>{const{active:Me,activatorEvent:Oe,collisions:dt,droppableContainers:vt,scrollAdjustedTranslate:Ct}=We.current;if(!Me||V.current==null||!Oe||!Ct)return;const{onDragOver:_t}=O.current,nn=vt.get(Je),fn=nn&&nn.rect.current?{id:nn.id,rect:nn.rect.current,data:nn.data,disabled:nn.disabled}:null,jt={active:Me,activatorEvent:Oe,collisions:dt,delta:{x:Ct.x,y:Ct.y},over:fn};Ri.unstable_batchedUpdates(()=>{Ft(fn),_t==null||_t(jt),y({type:"onDragOver",event:jt})})},[Je]),ai(()=>{We.current={activatorEvent:z,active:P,activeNode:se,collisionRect:It,collisions:tn,droppableRects:Q,draggableNodes:_,draggingNode:ct,draggingNodeRect:Ee,droppableContainers:k,over:$e,scrollableAncestors:st,scrollAdjustedTranslate:Ae},D.current={initial:Ee,translated:It}},[P,se,tn,It,_,ct,Ee,Q,k,$e,st,Ae]),T4({...we,delta:A,draggingRect:It,pointerCoordinates:hn,scrollableAncestors:st,scrollableAncestorRects:Sn});const Dr=T.useMemo(()=>({active:P,activeNode:se,activeNodeRect:me,activatorEvent:z,collisions:tn,containerNodeRect:He,dragOverlay:Ce,draggableNodes:_,droppableContainers:k,droppableRects:Q,over:$e,measureDroppableContainers:ee,scrollableAncestors:st,scrollableAncestorRects:Sn,measuringConfiguration:K,measuringScheduled:oe,windowRect:cn}),[P,se,me,z,tn,He,Ce,_,k,Q,$e,ee,st,Sn,K,oe,cn]),dr=T.useMemo(()=>({activatorEvent:z,activators:hr,active:P,activeNodeRect:me,ariaDescribedById:{draggable:B},dispatch:g,draggableNodes:_,over:$e,measureDroppableContainers:ee}),[z,hr,P,me,g,B,_,$e,ee]);return G.createElement(CA.Provider,{value:S},G.createElement(pf.Provider,{value:dr},G.createElement(H4.Provider,{value:Dr},G.createElement(UA.Provider,{value:On},u)),G.createElement(G4,{disabled:(a==null?void 0:a.restoreFocus)===!1})),G.createElement(Xj,{...a,hiddenTextDescribedById:B}));function mi(){const Me=(U==null?void 0:U.autoScrollEnabled)===!1,Oe=typeof l=="object"?l.enabled===!1:l===!1,dt=M&&!Me&&!Oe;return typeof l=="object"?{...l,enabled:dt}:{enabled:dt}}}),Q4=T.createContext(null),JE="button",J4="Droppable";function $A(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=df(J4),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:h,draggableNodes:d,over:f}=T.useContext(pf),{role:m=JE,roleDescription:E="draggable",tabIndex:w=0}=i??{},x=(l==null?void 0:l.id)===e,g=T.useContext(x?UA:Q4),[y,S]=dd(),[I,R]=dd(),M=L4(o,e),C=gu(n);ai(()=>(d.set(e,{id:e,key:s,node:y,activatorNode:I,data:C}),()=>{const A=d.get(e);A&&A.key===s&&d.delete(e)}),[d,e]);const _=T.useMemo(()=>({role:m,tabIndex:w,"aria-disabled":r,"aria-pressed":x&&m===JE?!0:void 0,"aria-roledescription":E,"aria-describedby":h.draggable}),[r,m,w,x,E,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:_,isDragging:x,listeners:r?void 0:M,node:y,over:f,setNodeRef:S,setActivatorNodeRef:R,transform:g}}const Z4="Droppable",e$={timeout:25};function BA(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=df(Z4),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=T.useContext(pf),h=T.useRef({disabled:n}),d=T.useRef(!1),f=T.useRef(null),m=T.useRef(null),{disabled:E,updateMeasurementsFor:w,timeout:x}={...e$,...i},g=gu(w??r),y=T.useCallback(()=>{if(!d.current){d.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(g.current)?g.current:[g.current]),m.current=null},x)},[x]),S=ff({callback:y,disabled:E||!o}),I=T.useCallback((_,A)=>{S&&(A&&(S.unobserve(A),d.current=!1),_&&S.observe(_))},[S]),[R,M]=dd(I),C=gu(e);return T.useEffect(()=>{!S||!R.current||(S.disconnect(),d.current=!1,S.observe(R.current))},[R,S]),ai(()=>(a({type:pt.RegisterDroppable,element:{id:r,key:s,disabled:n,node:R,rect:f,data:C}}),()=>a({type:pt.UnregisterDroppable,key:s,id:r})),[r]),T.useEffect(()=>{n!==h.current.disabled&&(a({type:pt.SetDroppableDisabled,id:r,key:s,disabled:n}),h.current.disabled=n)},[r,s,n,a]),{active:o,rect:f,isOver:(l==null?void 0:l.id)===r,node:R,over:l,setNodeRef:M}}function Nv({id:t,dataKey:e,className:n,defaultText:r}){const i=Z(h=>h.nodes),s=Z(h=>h.updateNodeData),o=i.find(h=>h.id===t),a=o!=null&&o.data[e]?o.data[e]:r,l=T.useRef(null);T.useEffect(()=>{if(s(t,{[e]:a}),l.current){l.current.style.height="0px";const{scrollHeight:h}=l.current;l.current.style.height=`${h}px`}},[l,a]);const u=T.useCallback(h=>{s(t,{[e]:h.target.value})},[]);return L.jsxs(L.Fragment,{children:[L.jsx("label",{htmlFor:e,style:{display:"none"},children:e}),L.jsx("textarea",{className:`nodrag ${n}`,ref:l,id:e,name:e,onChange:u,value:a})]})}function Dv({id:t,dataKey:e,className:n,defaultText:r}){const i=Z(h=>h.nodes),s=Z(h=>h.updateNodeData),o=i.find(h=>h.id===t),a=o!=null&&o.data[e]?o.data[e]:r,l=T.useRef(null);T.useEffect(()=>{if(s(t,{[e]:a}),l.current){l.current.style.width="0px";const{scrollWidth:h}=l.current;l.current.style.width=`${h}px`}},[l,a]);const u=T.useCallback(h=>{s(t,{[e]:h.target.value})},[]);return L.jsxs(L.Fragment,{children:[L.jsx("label",{htmlFor:e,style:{display:"none"},children:e}),L.jsx("input",{className:` ${n}`,ref:l,id:e,name:e,onChange:u,value:a})]})}function Mv({chipKey:t,altID:e,setKey:n,draggable:r,onClick:i,setIsDragNDropping:s}){const o=Z(w=>w.projectChipSets),[a,l]=T.useState(),{attributes:u,listeners:h,setNodeRef:d,transform:f,isDragging:m}=$A({id:`chip-${e||t}`,data:{type:"chip",chipKey:t,setKey:n}}),E={transform:f?`translate3d(${f.x}px, ${f.y}px, 0)`:void 0,opacity:1,cursor:r?"grab":"default"};return T.useEffect(()=>{var w;o&&l(t?c$(o,n,t):(w=o.find(x=>x.key===n))==null?void 0:w.name)},[o,t]),T.useEffect(()=>{s&&s(m)},[m]),L.jsxs("div",{className:"chip",onClick:i,style:{...E,paddingRight:"14px"},children:[r?L.jsx("span",{className:"material-symbols-outlined nodrag",ref:d,...u,...r&&h,children:"drag_indicator"}):L.jsx("span",{style:{width:"10px"}}),L.jsx("p",{children:a})]})}function t$(t){const e=Z(i=>i.setNodes),n=Z(i=>i.nodes),r=i=>{const s=n.filter(o=>o.id!==i);e([...s])};return L.jsx(L.Fragment,{children:L.jsx("button",{className:"nodeButton nodrag nopan",style:{left:"-22px"},onClick:()=>{r(t.id)},children:L.jsx("div",{style:{width:"5px",height:"2.25px",backgroundColor:"lightgrey"}})})})}function n$({id:t,selected:e,onDuplicate:n}){const[r,i]=T.useState(!1),[s,o]=T.useState(!1),a=T.useRef(!1),l=Z(I=>I.clientXY),u=Z(I=>I.toggleSelectedNode),[h,d]=T.useState({x:0,y:0}),f=T.useRef(null),m=T.useRef(null),[E,w]=T.useState({x:0,y:0});T.useEffect(()=>(window.addEventListener("mouseup",g),()=>{window.removeEventListener("mouseup",g)}),[]),T.useEffect(()=>{a.current&&d({x:l.x-E.x,y:l.y-E.y})},[l]);const x=()=>{f.current=setTimeout(()=>{i(!0)},1e3)},g=()=>{f.current&&(clearTimeout(f.current),f.current=null),a.current&&n(),i(!1),o(!1),a.current=!1},y=()=>{r&&(console.log("Dragging after long press!"),o(!0),a.current=!0,i(!1),w(l))},S=()=>{u(t)};return L.jsxs(L.Fragment,{children:[s&&L.jsx("div",{className:"dragGhost",style:{transform:`translate3d(${h.x}px, ${h.y}px, 0)`}}),L.jsx("button",{className:"nodeButton nodrag nopan selectNodeButton",ref:m,style:{backgroundColor:`${e?"#87BC83":"white"}`,outline:`${r?"2px solid":""}`},onClick:S,onMouseDown:x,onMouseMove:y,children:L.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50px",backgroundColor:`${e?"white":"lightgrey"}`}})}),L.jsx("div",{className:"dragHandle"})]})}function Wu({nodeProps:t,className:e,children:n}){const r=Z(f=>f.nodes),i=Z(f=>f.getNode),s=Z(f=>f.appendNodes),o=Z(f=>f.isNodeSelected),[a,l]=T.useState(o(t.id)),u=Z(f=>f.clientXY),h=ju();T.useEffect(()=>{l(o(t.id))},[r]);const d=()=>{const f=i(t.id),m=h.screenToFlowPosition({x:u.x,y:u.y});f&&s([{...f,position:{x:m.x,y:m.y}}])};return L.jsxs(L.Fragment,{children:[a?L.jsx(t$,{id:t.id}):void 0,L.jsxs("div",{className:`${e} nodeWrapper ${a?"selected":""}`,title:JSON.stringify(t),children:[L.jsx(n$,{id:t.id,selected:a,onDuplicate:d}),L.jsx(ts,{className:"handle target",type:"target",position:re.Top,isConnectable:t.isConnectable}),n,L.jsx(ts,{className:"handle source",type:"source",position:re.Bottom,id:"a",isConnectable:t.isConnectable})]})]})}function r$(t){const e=Z(h=>h.nodes),n=Z(h=>h.deleteNodeData),r=Z(h=>h.getNode),[i,s]=T.useState(),[o,a]=T.useState(),{setNodeRef:l}=BA({id:t.id,data:{accepts:["chip"]}});T.useEffect(()=>{var d;const h=r(t.id);(d=h==null?void 0:h.data)!=null&&d.setKey?(s(h.data.setKey),a(h.data.chipKey)):(a(void 0),s(void 0))},[e]);const u=()=>{n(t.id,{chipKey:""}),n(t.id,{setKey:""})};return L.jsx(Wu,{nodeProps:t,className:"dialogue-node",children:L.jsxs("div",{className:"inner",children:[L.jsxs("div",{ref:l,style:{marginTop:`${o?0:"-10px"}`,display:"flex",alignItems:"center",gap:"4px"},children:[o&&i&&L.jsx(Mv,{chipKey:o,setKey:i,draggable:!1,altID:Pr()}),o?L.jsx("span",{className:"material-symbols-outlined chip",style:{paddingRight:"4px"},onClick:u,children:"delete"}):void 0,o?void 0:L.jsx(Dv,{id:t.id,dataKey:"character",defaultText:"Character"})]}),L.jsx(Nv,{id:t.id,dataKey:"dialogue",defaultText:"Hi! How are you today?"})]})})}function i$(t){return L.jsx(Wu,{nodeProps:t,className:"response-node",children:L.jsx(Dv,{id:t.id,dataKey:"response",defaultText:"I'm good, thanks!"})})}function s$(t){return L.jsx(Wu,{nodeProps:t,className:"exposition-node",children:L.jsx(Nv,{id:t.id,dataKey:"exposition",defaultText:"In world, where sea slugs ruled the land..."})})}function o$(t){return L.jsx(Wu,{nodeProps:t,className:"meta-node",children:L.jsx(Nv,{id:t.id,dataKey:"meta",defaultText:"The character fetches 3 mushrooms, solemnly bring them back to Jumbo, the ancient sea snail."})})}function a$(t){return L.jsx(Wu,{nodeProps:t,className:"signal-node",children:L.jsx(Dv,{id:t.id,dataKey:"signal",defaultText:"SignalKey"})})}function l$(t){var a;const e=Z(l=>l.nodes),n=Z(l=>l.edges),[r,i]=T.useState(n.find(l=>l.target===t.id)),[s,o]=T.useState(r?e.find(l=>l.id===r.source):void 0);return T.useEffect(()=>{const l=n.find(u=>u.target===t.id);i(l),l&&o(e.find(u=>u.id===(r==null?void 0:r.source)))},[e,n]),L.jsxs("div",{className:"text-receiver-node nodeWrapper",children:[L.jsx(ts,{type:"target",position:re.Top,isConnectable:t.isConnectable}),L.jsx("p",{children:s?(a=s.data)==null?void 0:a.text:void 0}),L.jsx(ts,{type:"source",position:re.Bottom,id:"a",isConnectable:t.isConnectable})]})}function u$({id:t,sourceX:e,sourceY:n,targetX:r,targetY:i}){const{setEdges:s}=ju(),[o,a,l]=gv({sourceX:e,sourceY:n,targetX:r,targetY:i});return L.jsxs(L.Fragment,{children:[L.jsx(Aa,{id:t,path:o}),L.jsx(dU,{children:L.jsx("button",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${a}px,${l}px)`,pointerEvents:"all"},className:"deleteEdgeButton nodrag nopan",onClick:()=>{s(u=>u.filter(h=>h.id!==t))},children:L.jsx("div",{style:{width:"5px",height:"2.25px",backgroundColor:"white"}})})})]})}function c$(t,e,n){const r=t.find(s=>s.key===e),i=r?r.chips.find(s=>s.key===n):void 0;return(i==null?void 0:i.name)??void 0}const h$=t=>({nodes:t.nodes,edges:t.edges,onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange,onConnect:t.onConnect}),d$={dialogue:r$,textReceiver:l$,response:i$,exposition:s$,meta:o$,signal:a$},f$={customEdge:u$},p$=t=>{T.useEffect(()=>{const e=()=>{t(window.innerWidth<770)};return e(),window.addEventListener("resize",e),window.addEventListener("touchstart",function(n){n.preventDefault()}),()=>{window.removeEventListener("resize",e)}},[])},m$=(t,e,n)=>{T.useEffect(()=>{console.log("url params:",t,e),t&&e&&n({projectKey:t,pageKey:e})},[])},g$=t=>{const e=Z(s=>s.activeChipSet),[n,r]=T.useState({left:0,right:0}),i=()=>{if(t.current){const s=t.current.offsetWidth,o=window.innerWidth-100;r({left:s>o?-(s-o):0,right:0})}};return T.useEffect(()=>{setTimeout(i,200)},[e]),T.useEffect(()=>(setTimeout(i,1e3),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}),[t]),n},y$=(t,e)=>{let n=null;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>{t(...r)},e)}},v$=t=>{const{x:e,y:n,zoom:r}=t,i=window.innerWidth,s=window.innerHeight;return{x:(i/2-e)/r,y:(s/2-n)/r}},_$=(t,e)=>{if(e.length===0)return[];const n=v$(t);console.log("Viewport center:",t,n);const r={x:Math.min(...e.map(a=>a.position.x)),y:Math.min(...e.map(a=>a.position.y))},i={x:Math.max(...e.map(a=>a.position.x)),y:Math.max(...e.map(a=>a.position.y))},s={x:(r.x+i.x)/2,y:(r.y+i.y)/2};return e.map(a=>({...a,position:{x:a.position.x-s.x+n.x,y:a.position.y-s.y+n.y}}))};function w$({isMobile:t,addNode:e,onDragStart:n}){return L.jsxs(uv,{position:"top-left",style:{display:"flex",gap:"8px",flexDirection:"column"},children:[L.jsxs("button",{className:"nodeTypePanel",onClick:()=>{e("dialogue")},onDragStart:r=>n(r,"dialogue"),draggable:!0,children:[L.jsx("span",{className:"material-symbols-rounded",children:"maps_ugc "})," ",t?void 0:"Add Dialogue"]}),L.jsxs("button",{className:"nodeTypePanel",onClick:()=>{e("response")},onDragStart:r=>n(r,"response"),draggable:!0,children:[L.jsx("span",{className:"material-symbols-rounded",children:"comic_bubble"}),t?void 0:"Add Response"]}),L.jsxs("button",{className:"nodeTypePanel",onClick:()=>{e("exposition")},onDragStart:r=>n(r,"exposition"),draggable:!0,children:[L.jsx("span",{className:"material-symbols-rounded",children:"local_library"}),t?void 0:"Add Exposition"]}),L.jsxs("button",{className:"nodeTypePanel",onClick:()=>{e("meta")},onDragStart:r=>n(r,"meta"),draggable:!0,children:[L.jsx("span",{className:"material-symbols-rounded",children:"select_all"}),t?void 0:"Add Meta Node"]}),L.jsxs("button",{className:"nodeTypePanel",onClick:()=>{e("signal")},onDragStart:r=>n(r,"signal"),draggable:!0,children:[L.jsx("span",{className:"material-symbols-rounded",children:"sensors"}),t?void 0:"Add Signal"]}),L.jsxs("button",{className:"nodeTypePanel",onClick:()=>{e("token")},onDragStart:r=>n(r,"token"),draggable:!0,children:[L.jsxs("span",{className:"material-symbols-rounded",children:[" "," key_vertical"]}),t?void 0:"Add Token"]})]})}function E$(){const t=Z(I=>I.nodes),e=Z(I=>I.edges),n=Z(I=>I.appLoaded),r=Z(I=>I.projectChipSets),i=Z(I=>I.setNodes),s=Z(I=>I.setEdges),o=Z(I=>I.setChips),a=T.useCallback(y$(()=>S(),200),[]),l=T.useRef(t),u=T.useRef(e),h=T.useRef(r),d=T.useRef([]),f=T.useRef([]),m=T.useRef(!1),E=T.useRef(0),w="font-weight: 900; background-color: #735f32; color: #f2b830";T.useEffect(()=>{const I=R=>{R.key=="z"&&R.ctrlKey&&R.shiftKey||R.key=="z"&&R.metaKey&&R.shiftKey?(R.preventDefault(),g()):(R.key=="z"&&R.ctrlKey||R.key=="z"&&R.metaKey)&&(R.preventDefault(),x())};return window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}},[]),T.useEffect(()=>{n&&(l.current=t,u.current=e,h.current=r,setTimeout(()=>{m.current?(console.log("skipping this undo stash"),m.current=!1):a()},200))},[r,t,e,n]);const x=()=>{if(E.current+=1,d.current.length>1){const R=d.current.pop();R&&f.current.push(R)}const I=d.current[d.current.length-1];I?(m.current=!0,i(I.nodes.map(R=>({...R,data:{...R.data}}))),s(I.edges),o(I.chips)):console.log("No item to undo!",I),console.log("undoStack after undo ",E.current,d.current.length,d)},g=()=>{const I=f.current.pop();I&&d.current.push(I),I?(m.current=!0,i(I.nodes.map(R=>({...R,data:{...R.data}}))),s(I.edges),o(I.chips)):console.log("No item to redo!",I),console.log("redoStack after redo ",f.current.length,f)},y=(I,R)=>I.nodes.length!==R.nodes.length||I.edges.length!==R.edges.length||I.chips.length!==R.chips.length||JSON.stringify(I.nodes)!==JSON.stringify(R.nodes)||JSON.stringify(I.edges)!==JSON.stringify(R.edges)||JSON.stringify(I.chips)!==JSON.stringify(R.chips),S=T.useCallback(()=>{const I={nodes:l.current.map(R=>({...R,data:{...R.data}})),edges:u.current.map(R=>({...R})),chips:h.current?h.current.map(R=>({...R})):h.current};(d.current.length===0||y(d.current[d.current.length-1],I))&&(d.current.length>=50&&d.current.shift(),d.current.push(I),m.current?m.current=!1:(f.current=[],console.log("%cchange occurred, resetting redo stack",w)))},[t,e,r]);return L.jsxs(L.Fragment,{children:[L.jsx("button",{onClick:x,style:{zIndex:101,opacity:`${d.current.length<2?".5":"1"}`},children:L.jsx("span",{className:"material-symbols-outlined",children:"undo"})}),L.jsx("button",{onClick:g,style:{zIndex:101,opacity:`${f.current.length<1?".5":"1"}`},children:L.jsx("span",{className:"material-symbols-outlined",children:"redo"})})]})}function S$({togglePageList:t,toggleChips:e}){return L.jsxs(uv,{position:"bottom-right",style:{display:"flex",gap:"8px",flexDirection:"column",bottom:"10px"},children:[L.jsx(E$,{}),L.jsx("button",{onClick:e,style:{zIndex:101},children:L.jsx("span",{className:"material-symbols-outlined",children:"public"})}),L.jsx("button",{onClick:t,style:{zIndex:101},children:L.jsx("span",{className:"material-symbols-outlined",children:"description"})})]})}function T$(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function vu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Tg=t=>Array.isArray(t);function zA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function _u(t){return typeof t=="string"||Array.isArray(t)}function ZE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Vv(t,e,n,r){if(typeof e=="function"){const[i,s]=ZE(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ZE(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function mf(t,e,n){const r=t.getProps();return Vv(r,e,n!==void 0?n:r.custom,t)}const Lv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ov=["initial",...Lv],Ku=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hs=new Set(Ku),Qr=t=>t*1e3,Jr=t=>t/1e3,x$={type:"spring",stiffness:500,damping:25,restSpeed:10},I$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),C$={type:"keyframes",duration:.8},A$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},P$=(t,{keyframes:e})=>e.length>2?C$:hs.has(t)?t.startsWith("scale")?I$(e[1]):x$:A$;function R$({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function Fv(t,e){return t[e]||t.default||t}const k$={skipAnimations:!1,useManualTiming:!1},b$=t=>t!==null;function gf(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(b$),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Qt=t=>t;function N$(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,h=!1,d=!1)=>{const m=d&&r?e:n;return h&&s.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,l.process(u))}};return l}const qc=["read","resolveKeyframes","update","preRender","render","postRender"],D$=40;function HA(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=qc.reduce((g,y)=>(g[y]=N$(s),g),{}),{read:a,resolveKeyframes:l,update:u,preRender:h,render:d,postRender:f}=o,m=()=>{const g=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,D$),1),i.timestamp=g,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),h.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},E=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:qc.reduce((g,y)=>{const S=o[y];return g[y]=(I,R=!1,M=!1)=>(n||E(),S.schedule(I,R,M)),g},{}),cancel:g=>{for(let y=0;y<qc.length;y++)o[qc[y]].cancel(g)},state:i,steps:o}}const{schedule:Pe,cancel:li,state:Rt,steps:Lp}=HA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qt,!0),WA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,M$=1e-7,V$=12;function L$(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=WA(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>M$&&++a<V$);return o}function Gu(t,e,n,r){if(t===e&&n===r)return Qt;const i=s=>L$(s,0,1,t,n);return s=>s===0||s===1?s:WA(i(s),e,r)}const KA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,GA=t=>e=>1-t(1-e),qA=Gu(.33,1.53,.69,.99),Uv=GA(qA),XA=KA(Uv),YA=t=>(t*=2)<1?.5*Uv(t):.5*(2-Math.pow(2,-10*(t-1))),jv=t=>1-Math.sin(Math.acos(t)),QA=GA(jv),JA=KA(jv),ZA=t=>/^0[^.\s]+$/u.test(t);function O$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||ZA(t):!0}let xg=Qt;const eP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),tP=t=>e=>typeof e=="string"&&e.startsWith(t),nP=tP("--"),F$=tP("var(--"),$v=t=>F$(t)?U$.test(t.split("/*")[0].trim()):!1,U$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,j$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $$(t){const e=j$.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function rP(t,e,n=1){const[r,i]=$$(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return eP(o)?parseFloat(o):o}return $v(i)?rP(i,e,n+1):i}const ns=(t,e,n)=>n>e?e:n<t?t:n,ka={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vl={...ka,transform:t=>ns(0,1,t)},Xc={...ka,default:1},Ll=t=>Math.round(t*1e5)/1e5,Bv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,B$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,z$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function qu(t){return typeof t=="string"}function H$(t){return t==null}const Xu=t=>({test:e=>qu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ei=Xu("deg"),Sr=Xu("%"),ue=Xu("px"),W$=Xu("vh"),K$=Xu("vw"),eS={...Sr,parse:t=>Sr.parse(t)/100,transform:t=>Sr.transform(t*100)},G$=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),tS=t=>t===ka||t===ue,nS=(t,e)=>parseFloat(t.split(", ")[e]),rS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return nS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?nS(s[1],t):0}},q$=new Set(["x","y","z"]),X$=Ku.filter(t=>!q$.has(t));function Y$(t){const e=[];return X$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const da={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:rS(4,13),y:rS(5,14)};da.translateX=da.x;da.translateY=da.y;const iP=t=>e=>e.test(t),Q$={test:t=>t==="auto",parse:t=>t},sP=[ka,ue,Sr,Ei,K$,W$,Q$],iS=t=>sP.find(iP(t)),Os=new Set;let Ig=!1,Cg=!1;function oP(){if(Cg){const t=Array.from(Os).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Y$(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Cg=!1,Ig=!1,Os.forEach(t=>t.complete()),Os.clear()}function aP(){Os.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Cg=!0)})}function J$(){aP(),oP()}class zv{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Os.add(this),Ig||(Ig=!0,Pe.read(aP),Pe.resolveKeyframes(oP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Os.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Os.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Hv=(t,e)=>n=>!!(qu(n)&&z$.test(n)&&n.startsWith(t)||e&&!H$(n)&&Object.prototype.hasOwnProperty.call(n,e)),lP=(t,e,n)=>r=>{if(!qu(r))return r;const[i,s,o,a]=r.match(Bv);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Z$=t=>ns(0,255,t),Op={...ka,transform:t=>Math.round(Z$(t))},bs={test:Hv("rgb","red"),parse:lP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Op.transform(t)+", "+Op.transform(e)+", "+Op.transform(n)+", "+Ll(Vl.transform(r))+")"};function eB(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ag={test:Hv("#"),parse:eB,transform:bs.transform},Mo={test:Hv("hsl","hue"),parse:lP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Sr.transform(Ll(e))+", "+Sr.transform(Ll(n))+", "+Ll(Vl.transform(r))+")"},Kt={test:t=>bs.test(t)||Ag.test(t)||Mo.test(t),parse:t=>bs.test(t)?bs.parse(t):Mo.test(t)?Mo.parse(t):Ag.parse(t),transform:t=>qu(t)?t:t.hasOwnProperty("red")?bs.transform(t):Mo.transform(t)};function tB(t){var e,n;return isNaN(t)&&qu(t)&&(((e=t.match(Bv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(B$))===null||n===void 0?void 0:n.length)||0)>0}const uP="number",cP="color",nB="var",rB="var(",sS="${}",iB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(iB,l=>(Kt.test(l)?(r.color.push(s),i.push(cP),n.push(Kt.parse(l))):l.startsWith(rB)?(r.var.push(s),i.push(nB),n.push(l)):(r.number.push(s),i.push(uP),n.push(parseFloat(l))),++s,sS)).split(sS);return{values:n,split:a,indexes:r,types:i}}function hP(t){return wu(t).values}function dP(t){const{split:e,types:n}=wu(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===uP?s+=Ll(i[o]):a===cP?s+=Kt.transform(i[o]):s+=i[o]}return s}}const sB=t=>typeof t=="number"?0:t;function oB(t){const e=hP(t);return dP(t)(e.map(sB))}const rs={test:tB,parse:hP,createTransformer:dP,getAnimatableNone:oB},aB=new Set(["brightness","contrast","saturate","opacity"]);function lB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Bv)||[];if(!r)return t;const i=n.replace(r,"");let s=aB.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const uB=/\b([a-z-]*)\(.*?\)/gu,Pg={...rs,getAnimatableNone:t=>{const e=t.match(uB);return e?e.map(lB).join(" "):t}},oS={...ka,transform:Math.round},Wv={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,size:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,rotate:Ei,rotateX:Ei,rotateY:Ei,rotateZ:Ei,scale:Xc,scaleX:Xc,scaleY:Xc,scaleZ:Xc,skew:Ei,skewX:Ei,skewY:Ei,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:Vl,originX:eS,originY:eS,originZ:ue,zIndex:oS,backgroundPositionX:ue,backgroundPositionY:ue,fillOpacity:Vl,strokeOpacity:Vl,numOctaves:oS},cB={...Wv,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:Pg,WebkitFilter:Pg},Kv=t=>cB[t];function fP(t,e){let n=Kv(t);return n!==Pg&&(n=rs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hB=new Set(["auto","none","0"]);function dB(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!hB.has(s)&&wu(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=fP(n,i)}class pP extends zv{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),$v(u))){const h=rP(u,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!G$.has(r)||e.length!==2)return;const[i,s]=e,o=iS(i),a=iS(s);if(o!==a)if(tS(o)&&tS(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)O$(e[i])&&r.push(i);r.length&&dB(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=da[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=da[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Gv(t){let e;return()=>(e===void 0&&(e=t()),e)}function qv(t){return typeof t=="function"}let wh;function fB(){wh=void 0}const Tr={now:()=>(wh===void 0&&Tr.set(Rt.isProcessing||k$.useManualTiming?Rt.timestamp:performance.now()),wh),set:t=>{wh=t,queueMicrotask(fB)}},aS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(rs.test(t)||t==="0")&&!t.startsWith("url("));function pB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function mB(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=aS(i,e),a=aS(s,e);return!o||!a?!1:pB(t)||(n==="spring"||qv(n))&&r}const gB=40;class mP{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Tr.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>gB?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&J$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Tr.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!mB(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(gf(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function gP(t,e){return e?t*(1e3/e):0}const yB=5;function yP(t,e,n){const r=Math.max(e-yB,0);return gP(n-t(r),e-r)}const Fp=.001,vB=.01,_B=10,wB=.05,EB=1;function SB({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=ns(wB,EB,o),t=ns(vB,_B,Jr(t)),o<1?(i=u=>{const h=u*o,d=h*t,f=h-n,m=Rg(u,o),E=Math.exp(-d);return Fp-f/m*E},s=u=>{const d=u*o*t,f=d*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,E=Math.exp(-d),w=Rg(Math.pow(u,2),o);return(-i(u)+Fp>0?-1:1)*((f-m)*E)/w}):(i=u=>{const h=Math.exp(-u*t),d=(u-n)*t+1;return-Fp+h*d},s=u=>{const h=Math.exp(-u*t),d=(n-u)*(t*t);return h*d});const a=5/t,l=xB(i,s,a);if(t=Qr(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const TB=12;function xB(t,e,n){let r=n;for(let i=1;i<TB;i++)r=r-t(r)/e(r);return r}function Rg(t,e){return t*Math.sqrt(1-e*e)}const IB=["duration","bounce"],CB=["stiffness","damping","mass"];function lS(t,e){return e.some(n=>t[n]!==void 0)}function AB(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!lS(t,CB)&&lS(t,IB)){const n=SB(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function vP({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=AB({...r,velocity:-Jr(r.velocity||0)}),m=d||0,E=l/(2*Math.sqrt(a*u)),w=s-i,x=Jr(Math.sqrt(a/u)),g=Math.abs(w)<5;n||(n=g?.01:2),e||(e=g?.005:.5);let y;if(E<1){const S=Rg(x,E);y=I=>{const R=Math.exp(-E*x*I);return s-R*((m+E*x*w)/S*Math.sin(S*I)+w*Math.cos(S*I))}}else if(E===1)y=S=>s-Math.exp(-x*S)*(w+(m+x*w)*S);else{const S=x*Math.sqrt(E*E-1);y=I=>{const R=Math.exp(-E*x*I),M=Math.min(S*I,300);return s-R*((m+E*x*w)*Math.sinh(M)+S*w*Math.cosh(M))/S}}return{calculatedDuration:f&&h||null,next:S=>{const I=y(S);if(f)o.done=S>=h;else{let R=0;E<1&&(R=S===0?Qr(m):yP(y,S,I));const M=Math.abs(R)<=n,C=Math.abs(s-I)<=e;o.done=M&&C}return o.value=o.done?s:I,o}}}function uS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},m=_=>a!==void 0&&_<a||l!==void 0&&_>l,E=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let w=n*e;const x=d+w,g=o===void 0?x:o(x);g!==x&&(w=g-d);const y=_=>-w*Math.exp(-_/r),S=_=>g+y(_),I=_=>{const A=y(_),k=S(_);f.done=Math.abs(A)<=u,f.value=f.done?g:k};let R,M;const C=_=>{m(f.value)&&(R=_,M=vP({keyframes:[f.value,E(f.value)],velocity:yP(S,_,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return C(0),{calculatedDuration:null,next:_=>{let A=!1;return!M&&R===void 0&&(A=!0,I(_),C(_)),R!==void 0&&_>=R?M.next(_-R):(!A&&I(_),f)}}}const PB=Gu(.42,0,1,1),RB=Gu(0,0,.58,1),_P=Gu(.42,0,.58,1),kB=t=>Array.isArray(t)&&typeof t[0]!="number",cS={linear:Qt,easeIn:PB,easeInOut:_P,easeOut:RB,circIn:jv,circInOut:JA,circOut:QA,backIn:Uv,backInOut:XA,backOut:qA,anticipate:YA},hS=t=>{if(Array.isArray(t)){xg(t.length===4);const[e,n,r,i]=t;return Gu(e,n,r,i)}else if(typeof t=="string")return xg(cS[t]!==void 0),cS[t];return t},bB=(t,e)=>n=>e(t(n)),Zr=(...t)=>t.reduce(bB),fa=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},qe=(t,e,n)=>t+(e-t)*n;function Up(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function NB({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Up(l,a,t+1/3),s=Up(l,a,t),o=Up(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function gd(t,e){return n=>n>0?e:t}const jp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},DB=[Ag,bs,Mo],MB=t=>DB.find(e=>e.test(t));function dS(t){const e=MB(t);if(!e)return!1;let n=e.parse(t);return e===Mo&&(n=NB(n)),n}const fS=(t,e)=>{const n=dS(t),r=dS(e);if(!n||!r)return gd(t,e);const i={...n};return s=>(i.red=jp(n.red,r.red,s),i.green=jp(n.green,r.green,s),i.blue=jp(n.blue,r.blue,s),i.alpha=qe(n.alpha,r.alpha,s),bs.transform(i))},kg=new Set(["none","hidden"]);function VB(t,e){return kg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function LB(t,e){return n=>qe(t,e,n)}function Xv(t){return typeof t=="number"?LB:typeof t=="string"?$v(t)?gd:Kt.test(t)?fS:UB:Array.isArray(t)?wP:typeof t=="object"?Kt.test(t)?fS:OB:gd}function wP(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Xv(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function OB(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Xv(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function FB(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const UB=(t,e)=>{const n=rs.createTransformer(e),r=wu(t),i=wu(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?kg.has(t)&&!i.values.length||kg.has(e)&&!r.values.length?VB(t,e):Zr(wP(FB(r,i),i.values),n):gd(t,e)};function EP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?qe(t,e,n):Xv(t)(t,e)}function jB(t,e,n){const r=[],i=n||EP,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Qt:e;a=Zr(l,a)}r.push(a)}return r}function $B(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(xg(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=jB(e,r,i),a=o.length,l=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=fa(t[h],t[h+1],u);return o[h](d)};return n?u=>l(ns(t[0],t[s-1],u)):l}function BB(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=fa(0,e,r);t.push(qe(n,1,i))}}function zB(t){const e=[0];return BB(e,t.length-1),e}function HB(t,e){return t.map(n=>n*e)}function WB(t,e){return t.map(()=>e||_P).splice(0,t.length-1)}function yd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=kB(r)?r.map(hS):hS(r),s={done:!1,value:e[0]},o=HB(n&&n.length===e.length?n:zB(e),t),a=$B(o,e,{ease:Array.isArray(i)?i:WB(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const pS=2e4;function KB(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<pS;)e+=n,r=t.next(e);return e>=pS?1/0:e}const GB=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Pe.update(e,!0),stop:()=>li(e),now:()=>Rt.isProcessing?Rt.timestamp:Tr.now()}},qB={decay:uS,inertia:uS,tween:yd,keyframes:yd,spring:vP},XB=t=>t/100;class Yv extends mP{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||zv,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=qv(n)?n:qB[n]||yd;let l,u;a!==yd&&typeof e[0]!="number"&&(l=Zr(XB,EP(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=KB(h));const{calculatedDuration:d}=h,f=d+i,m=f*(r+1)-i;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:_}=this.options;return{done:!0,value:_[_.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:m,repeatType:E,repeatDelay:w,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>h;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let S=this.currentTime,I=s;if(m){const _=Math.min(this.currentTime,h)/d;let A=Math.floor(_),k=_%1;!k&&_>=1&&(k=1),k===1&&A--,A=Math.min(A,m+1),!!(A%2)&&(E==="reverse"?(k=1-k,w&&(k-=w/d)):E==="mirror"&&(I=o)),S=ns(0,1,k)*d}const R=y?{done:!1,value:l[0]}:I.next(S);a&&(R.value=a(R.value));let{done:M}=R;!y&&u!==null&&(M=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return C&&i!==void 0&&(R.value=gf(l,this.options,i)),x&&x(R.value),C&&this.finish(),R}get duration(){const{resolved:e}=this;return e?Jr(e.calculatedDuration):0}get time(){return Jr(this.currentTime)}set time(e){e=Qr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Jr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=GB,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const SP=new Set(["opacity","clipPath","filter","transform"]),TP=t=>Array.isArray(t)&&typeof t[0]=="number",YB=10,QB=(t,e)=>{let n="";const r=Math.max(Math.round(e/YB),2);for(let i=0;i<r;i++)n+=t(fa(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`},JB={linearEasing:void 0};function ZB(t,e){const n=Gv(t);return()=>{var r;return(r=JB[e])!==null&&r!==void 0?r:n()}}const vd=ZB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function xP(t){return!!(typeof t=="function"&&vd()||!t||typeof t=="string"&&(t in bg||vd())||TP(t)||Array.isArray(t)&&t.every(xP))}const vl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,bg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vl([0,.65,.55,1]),circOut:vl([.55,0,1,.45]),backIn:vl([.31,.01,.66,-.59]),backOut:vl([.33,1.53,.69,.99])};function IP(t,e){if(t)return typeof t=="function"&&vd()?QB(t,e):TP(t)?vl(t):Array.isArray(t)?t.map(n=>IP(n,e)||bg.easeOut):bg[t]}function ez(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const h=IP(a,i);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const tz=Gv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_d=10,nz=2e4;function rz(t){return qv(t.type)||t.type==="spring"||!xP(t.ease)}function iz(t,e){const n=new Yv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<nz;)r=n.sample(s),i.push(r.value),s+=_d;return{times:void 0,keyframes:i,duration:s-_d,ease:"linear"}}const CP={anticipate:YA,backInOut:XA,circInOut:JA};function sz(t){return t in CP}class mS extends mP{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new pP(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:u,startTime:h}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&vd()&&sz(o)&&(o=CP[o]),rz(this.options)){const{onComplete:f,onUpdate:m,motionValue:E,element:w,...x}=this.options,g=iz(e,x);e=g.keyframes,e.length===1&&(e[1]=e[0]),i=g.duration,s=g.times,o=g.ease,a="keyframes"}const d=ez(l.owner.current,u,e,{...this.options,duration:i,times:s,ease:o});return d.startTime=h??this.calcStartTime(),this.pendingTimeline?(d.timeline=this.pendingTimeline,this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(gf(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Jr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Jr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Qr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Qt;const{animation:r}=n;r.timeline=e,r.onfinish=null}return Qt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:d,element:f,...m}=this.options,E=new Yv({...m,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),w=Qr(this.time);u.setWithVelocity(E.sample(w-_d).value,E.sample(w).value,_d)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return tz()&&r&&SP.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}function oz(t,e){let n;const r=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;n!==o&&t(o),n=o};return Pe.update(r,!0),()=>li(r)}const az=Gv(()=>window.ScrollTimeline!==void 0);class lz{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e){const n=this.animations.map(r=>{if(az()&&r.attachTimeline)r.attachTimeline(e);else return r.pause(),oz(i=>{r.time=r.duration*i},e)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Qv=(t,e,n,r={},i,s)=>o=>{const a=Fv(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Qr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};R$(a)||(h={...h,...P$(t,h)}),h.duration&&(h.duration=Qr(h.duration)),h.repeatDelay&&(h.repeatDelay=Qr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=gf(h.keyframes,a);if(f!==void 0)return Pe.update(()=>{h.onUpdate(f),h.onComplete()}),new lz([])}return!s&&mS.supports(h)?new mS(h):new Yv(h)},uz=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),cz=t=>Tg(t)?t[t.length-1]||0:t;function Yu(t,e){t.indexOf(e)===-1&&t.push(e)}function Jv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Zv{constructor(){this.subscriptions=[]}add(e){return Yu(this.subscriptions,e),()=>Jv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gS=30,hz=t=>!isNaN(parseFloat(t));class AP{constructor(e,n={}){this.version="11.8.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Tr.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Tr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Zv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Tr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,gS);return gP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Eu(t,e){return new AP(t,e)}function dz(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Eu(n))}function fz(t,e){const n=mf(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=cz(s[o]);dz(t,o,a)}}const yf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pz="framerAppearId",PP="data-"+yf(pz);function RP(t){return t.props[PP]}function kP(t){if(hs.has(t))return"transform";if(SP.has(t))return yf(t)}class mz extends AP{constructor(){super(...arguments),this.values=[]}add(e){const n=kP(e);n&&(Yu(this.values,n),this.update())}update(){this.set(this.values.length?this.values.join(", "):"auto")}}const Yt=t=>!!(t&&t.getVelocity);function gz(t){return!!(Yt(t)&&t.add)}function Ng(t,e){var n;if(!t.applyWillChange)return;let r=t.getValue("willChange");if(!r&&!(!((n=t.props.style)===null||n===void 0)&&n.willChange)&&(r=new mz("auto"),t.addValue("willChange",r)),gz(r))return r.add(e)}function yz({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function bP(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),m=l[d];if(m===void 0||h&&yz(h,d))continue;const E={delay:n,...Fv(o||{},d)};let w=!1;if(window.MotionHandoffAnimation){const g=RP(t);if(g){const y=window.MotionHandoffAnimation(g,d,Pe);y!==null&&(E.startTime=y,w=!0)}}Ng(t,d),f.start(Qv(d,f,m,t.shouldReduceMotion&&hs.has(d)?{type:!1}:E,t,w));const x=f.animation;x&&u.push(x)}return a&&Promise.all(u).then(()=>{Pe.update(()=>{a&&fz(t,a)})}),u}function Dg(t,e,n={}){var r;const i=mf(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(bP(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return vz(t,e,h+u,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function vz(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(_z).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(Dg(u,e,{...s,delay:n+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function _z(t,e){return t.sortNodePosition(e)}function wz(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Dg(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Dg(t,e,n);else{const i=typeof e=="function"?mf(t,e,n.custom):e;r=Promise.all(bP(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Ez=Ov.length;function NP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?NP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Ez;n++){const r=Ov[n],i=t.props[r];(_u(i)||i===!1)&&(e[r]=i)}return e}const Sz=[...Lv].reverse(),Tz=Lv.length;function xz(t){return e=>Promise.all(e.map(({animation:n,options:r})=>wz(t,n,r)))}function Iz(t){let e=xz(t),n=yS(),r=!0;const i=l=>(u,h)=>{var d;const f=mf(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:E,...w}=f;u={...u,...w,...E}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,h=NP(t.parent)||{},d=[],f=new Set;let m={},E=1/0;for(let x=0;x<Tz;x++){const g=Sz[x],y=n[g],S=u[g]!==void 0?u[g]:h[g],I=_u(S),R=g===l?y.isActive:null;R===!1&&(E=x);let M=S===h[g]&&S!==u[g]&&I;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),y.protectedKeys={...m},!y.isActive&&R===null||!S&&!y.prevProp||vu(S)||typeof S=="boolean")continue;const C=Cz(y.prevProp,S);let _=C||g===l&&y.isActive&&!M&&I||x>E&&I,A=!1;const k=Array.isArray(S)?S:[S];let N=k.reduce(i(g),{});R===!1&&(N={});const{prevResolvedValues:D={}}=y,P={...D,...N},V=z=>{_=!0,f.has(z)&&(A=!0,f.delete(z)),y.needsAnimating[z]=!0;const F=t.getValue(z);F&&(F.liveStyle=!1)};for(const z in P){const F=N[z],O=D[z];if(m.hasOwnProperty(z))continue;let B=!1;Tg(F)&&Tg(O)?B=!zA(F,O):B=F!==O,B?F!=null?V(z):f.add(z):F!==void 0&&f.has(z)?V(z):y.protectedKeys[z]=!0}y.prevProp=S,y.prevResolvedValues=N,y.isActive&&(m={...m,...N}),r&&t.blockInitialAnimation&&(_=!1),_&&(!(M&&C)||A)&&d.push(...k.map(z=>({animation:z,options:{type:g}})))}if(f.size){const x={};f.forEach(g=>{const y=t.getBaseTarget(g),S=t.getValue(g);S&&(S.liveStyle=!0),x[g]=y??null}),d.push({animation:x})}let w=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(d):Promise.resolve()}function a(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=yS(),r=!0}}}function Cz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!zA(e,t):!1}function _s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yS(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class ds{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Az extends ds{constructor(e){super(e),e.animationState||(e.animationState=Iz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();vu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Pz=0;class Rz extends ds{constructor(){super(...arguments),this.id=Pz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const kz={animation:{Feature:Az},exit:{Feature:Rz}},DP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function vf(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const bz=t=>e=>DP(e)&&t(e,vf(e));function Wr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ei(t,e,n,r){return Wr(t,e,bz(n),r)}const vS=(t,e)=>Math.abs(t-e);function Nz(t,e){const n=vS(t.x,e.x),r=vS(t.y,e.y);return Math.sqrt(n**2+r**2)}class MP{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Bp(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Nz(d.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:E}=d,{timestamp:w}=Rt;this.history.push({...E,timestamp:w});const{onStart:x,onMove:g}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=$p(f,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:E,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Bp(d.type==="pointercancel"?this.lastMoveEventInfo:$p(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),E&&E(d,x)},!DP(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=vf(e),a=$p(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Rt;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,Bp(a,this.history)),this.removeListeners=Zr(ei(this.contextWindow,"pointermove",this.handlePointerMove),ei(this.contextWindow,"pointerup",this.handlePointerUp),ei(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),li(this.updatePoint)}}function $p(t,e){return e?{point:e(t.point)}:t}function _S(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Bp({point:t},e){return{point:t,delta:_S(t,VP(e)),offset:_S(t,Dz(e)),velocity:Mz(e,.1)}}function Dz(t){return t[0]}function VP(t){return t[t.length-1]}function Mz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=VP(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Qr(e)));)n--;if(!r)return{x:0,y:0};const s=Jr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function LP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const wS=LP("dragHorizontal"),ES=LP("dragVertical");function OP(t){let e=!1;if(t==="y")e=ES();else if(t==="x")e=wS();else{const n=wS(),r=ES();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function FP(){const t=OP(!0);return t?(t(),!1):!0}function Vo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const UP=1e-4,Vz=1-UP,Lz=1+UP,jP=.01,Oz=0-jP,Fz=0+jP;function Nn(t){return t.max-t.min}function Uz(t,e,n){return Math.abs(t-e)<=n}function SS(t,e,n,r=.5){t.origin=r,t.originPoint=qe(e.min,e.max,t.origin),t.scale=Nn(n)/Nn(e),t.translate=qe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Vz&&t.scale<=Lz||isNaN(t.scale))&&(t.scale=1),(t.translate>=Oz&&t.translate<=Fz||isNaN(t.translate))&&(t.translate=0)}function Ol(t,e,n,r){SS(t.x,e.x,n.x,r?r.originX:void 0),SS(t.y,e.y,n.y,r?r.originY:void 0)}function TS(t,e,n){t.min=n.min+e.min,t.max=t.min+Nn(e)}function jz(t,e,n){TS(t.x,e.x,n.x),TS(t.y,e.y,n.y)}function xS(t,e,n){t.min=e.min-n.min,t.max=t.min+Nn(e)}function Fl(t,e,n){xS(t.x,e.x,n.x),xS(t.y,e.y,n.y)}function $z(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?qe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?qe(n,t,r.max):Math.min(t,n)),t}function IS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Bz(t,{top:e,left:n,bottom:r,right:i}){return{x:IS(t.x,n,i),y:IS(t.y,e,r)}}function CS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function zz(t,e){return{x:CS(t.x,e.x),y:CS(t.y,e.y)}}function Hz(t,e){let n=.5;const r=Nn(t),i=Nn(e);return i>r?n=fa(e.min,e.max-r,t.min):r>i&&(n=fa(t.min,t.max-i,e.min)),ns(0,1,n)}function Wz(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Mg=.35;function Kz(t=Mg){return t===!1?t=0:t===!0&&(t=Mg),{x:AS(t,"left","right"),y:AS(t,"top","bottom")}}function AS(t,e,n){return{min:PS(t,e),max:PS(t,n)}}function PS(t,e){return typeof t=="number"?t:t[e]||0}const RS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Lo=()=>({x:RS(),y:RS()}),kS=()=>({min:0,max:0}),nt=()=>({x:kS(),y:kS()});function $n(t){return[t("x"),t("y")]}function $P({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Gz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function qz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function zp(t){return t===void 0||t===1}function Vg({scale:t,scaleX:e,scaleY:n}){return!zp(t)||!zp(e)||!zp(n)}function Ts(t){return Vg(t)||BP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BP(t){return bS(t.x)||bS(t.y)}function bS(t){return t&&t!=="0%"}function wd(t,e,n){const r=t-n,i=e*r;return n+i}function NS(t,e,n,r,i){return i!==void 0&&(t=wd(t,i,r)),wd(t,n,r)+e}function Lg(t,e=0,n=1,r,i){t.min=NS(t.min,e,n,r,i),t.max=NS(t.max,e,n,r,i)}function zP(t,{x:e,y:n}){Lg(t.x,e.translate,e.scale,e.originPoint),Lg(t.y,n.translate,n.scale,n.originPoint)}const DS=.999999999999,MS=1.0000000000001;function Xz(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Fo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,zP(t,o)),r&&Ts(s.latestValues)&&Fo(t,s.latestValues))}e.x<MS&&e.x>DS&&(e.x=1),e.y<MS&&e.y>DS&&(e.y=1)}function Oo(t,e){t.min=t.min+e,t.max=t.max+e}function VS(t,e,n,r,i=.5){const s=qe(t.min,t.max,i);Lg(t,e,n,s,r)}function Fo(t,e){VS(t.x,e.x,e.scaleX,e.scale,e.originX),VS(t.y,e.y,e.scaleY,e.scale,e.originY)}function HP(t,e){return $P(qz(t.getBoundingClientRect(),e))}function Yz(t,e,n){const r=HP(t,n),{scroll:i}=e;return i&&(Oo(r.x,i.offset.x),Oo(r.y,i.offset.y)),r}const WP=({current:t})=>t?t.ownerDocument.defaultView:null,Qz=new WeakMap;class Jz{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vf(h,"page").point)},s=(h,d)=>{const{drag:f,dragPropagation:m,onDragStart:E}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=OP(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(x=>{let g=this.getAxisMotionValue(x).get()||0;if(Sr.test(g)){const{projection:y}=this.visualElement;if(y&&y.layout){const S=y.layout.layoutBox[x];S&&(g=Nn(S)*(parseFloat(g)/100))}}this.originPoint[x]=g}),E&&Pe.postRender(()=>E(h,d)),Ng(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:E,onDrag:w}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=Zz(x),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),w&&w(h,d)},a=(h,d)=>this.stop(h,d),l=()=>$n(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new MP(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:WP(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Pe.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Yc(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=$z(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Vo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Bz(i.layoutBox,n):this.constraints=!1,this.elastic=Kz(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&$n(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Wz(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Vo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Yz(r,i.root,this.visualElement.getTransformPagePoint());let o=zz(i.layout.layoutBox,s);if(n){const a=n(Gz(o));this.hasMutatedConstraints=!!a,a&&(o=$P(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=$n(h=>{if(!Yc(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,E)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Ng(this.visualElement,e),r.start(Qv(e,r,0,n,this.visualElement,!1))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$n(n=>{const{drag:r}=this.getProps();if(!Yc(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-qe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Vo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$n(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Hz({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$n(o=>{if(!Yc(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(qe(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Qz.set(this.visualElement,this);const e=this.visualElement.current,n=ei(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Vo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pe.read(r);const o=Wr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&($n(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Mg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Yc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Zz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class e3 extends ds{constructor(e){super(e),this.removeGroupControls=Qt,this.removeListeners=Qt,this.controls=new Jz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qt}unmount(){this.removeGroupControls(),this.removeListeners()}}const LS=t=>(e,n)=>{t&&Pe.postRender(()=>t(e,n))};class t3 extends ds{constructor(){super(...arguments),this.removePointerDownListener=Qt}onPointerDown(e){this.session=new MP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:LS(e),onStart:LS(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Pe.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ei(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const e0=T.createContext(null);function n3(){const t=T.useContext(e0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=T.useId();T.useEffect(()=>r(i),[]);const s=T.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const KP=T.createContext({}),GP=T.createContext({}),Eh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ul={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=OS(t,e.target.x),r=OS(t,e.target.y);return`${n}% ${r}%`}},r3={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=rs.parse(t);if(i.length>5)return r;const s=rs.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=qe(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},Ed={};function i3(t){Object.assign(Ed,t)}const{schedule:t0,cancel:J7}=HA(queueMicrotask,!1);class s3 extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;i3(o3),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Eh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Pe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),t0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qP(t){const[e,n]=n3(),r=T.useContext(KP);return L.jsx(s3,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(GP),isPresent:e,safeToRemove:n})}const o3={borderRadius:{...ul,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ul,borderTopRightRadius:ul,borderBottomLeftRadius:ul,borderBottomRightRadius:ul,boxShadow:r3},XP=["TopLeft","TopRight","BottomLeft","BottomRight"],a3=XP.length,FS=t=>typeof t=="string"?parseFloat(t):t,US=t=>typeof t=="number"||ue.test(t);function l3(t,e,n,r,i,s){i?(t.opacity=qe(0,n.opacity!==void 0?n.opacity:1,u3(r)),t.opacityExit=qe(e.opacity!==void 0?e.opacity:1,0,c3(r))):s&&(t.opacity=qe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<a3;o++){const a=`border${XP[o]}Radius`;let l=jS(e,a),u=jS(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||US(l)===US(u)?(t[a]=Math.max(qe(FS(l),FS(u),r),0),(Sr.test(u)||Sr.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=qe(e.rotate||0,n.rotate||0,r))}function jS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const u3=YP(0,.5,QA),c3=YP(.5,.95,Qt);function YP(t,e,n){return r=>r<t?0:r>e?1:n(fa(t,e,r))}function $S(t,e){t.min=e.min,t.max=e.max}function jn(t,e){$S(t.x,e.x),$S(t.y,e.y)}function BS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function zS(t,e,n,r,i){return t-=e,t=wd(t,1/n,r),i!==void 0&&(t=wd(t,1/i,r)),t}function h3(t,e=0,n=1,r=.5,i,s=t,o=t){if(Sr.test(e)&&(e=parseFloat(e),e=qe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=qe(s.min,s.max,r);t===s&&(a-=e),t.min=zS(t.min,e,n,a,i),t.max=zS(t.max,e,n,a,i)}function HS(t,e,[n,r,i],s,o){h3(t,e[n],e[r],e[i],e.scale,s,o)}const d3=["x","scaleX","originX"],f3=["y","scaleY","originY"];function WS(t,e,n,r){HS(t.x,e,d3,n?n.x:void 0,r?r.x:void 0),HS(t.y,e,f3,n?n.y:void 0,r?r.y:void 0)}function KS(t){return t.translate===0&&t.scale===1}function QP(t){return KS(t.x)&&KS(t.y)}function GS(t,e){return t.min===e.min&&t.max===e.max}function p3(t,e){return GS(t.x,e.x)&&GS(t.y,e.y)}function qS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function JP(t,e){return qS(t.x,e.x)&&qS(t.y,e.y)}function XS(t){return Nn(t.x)/Nn(t.y)}function YS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class m3{constructor(){this.members=[]}add(e){Yu(this.members,e),e.scheduleRender()}remove(e){if(Jv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function g3(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:f,skewX:m,skewY:E}=n;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),E&&(r+=`skewY(${E}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const y3=(t,e)=>t.depth-e.depth;class v3{constructor(){this.children=[],this.isDirty=!1}add(e){Yu(this.children,e),this.isDirty=!0}remove(e){Jv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(y3),this.isDirty=!1,this.children.forEach(e)}}function Sh(t){const e=Yt(t)?t.get():t;return uz(e)?e.toValue():e}function _3(t,e){const n=Tr.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(li(r),t(s-e))};return Pe.read(r,!0),()=>li(r)}function w3(t){return t instanceof SVGElement&&t.tagName!=="svg"}function E3(t,e,n){const r=Yt(t)?t:Eu(t);return r.start(Qv("",r,e,n)),r.animation}const xs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},_l=typeof window<"u"&&window.MotionDebug!==void 0,Hp=["","X","Y","Z"],S3={visibility:"hidden"},QS=1e3;let T3=0;function Wp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function ZP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=RP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Pe,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&ZP(r)}function eR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=T3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_l&&(xs.totalNodes=xs.resolvedTargetDeltas=xs.recalculatedProjection=0),this.nodes.forEach(C3),this.nodes.forEach(b3),this.nodes.forEach(N3),this.nodes.forEach(A3),_l&&window.MotionDebug.record(xs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new v3)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Zv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=w3(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=_3(f,250),Eh.hasAnimatedSinceResize&&(Eh.hasAnimatedSinceResize=!1,this.nodes.forEach(ZS))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||O3,{onLayoutAnimationStart:x,onLayoutAnimationComplete:g}=h.getProps(),y=!this.targetLayout||!JP(this.targetLayout,E)||m,S=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const I={...Fv(w,"layout"),onPlay:x,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else f||ZS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,li(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(D3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ZP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(JS);return}this.isUpdating||this.nodes.forEach(R3),this.isUpdating=!1,this.nodes.forEach(k3),this.nodes.forEach(x3),this.nodes.forEach(I3),this.clearAllSnapshots();const a=Tr.now();Rt.delta=ns(0,1e3/60,a-Rt.timestamp),Rt.timestamp=a,Rt.isProcessing=!0,Lp.update.process(Rt),Lp.preRender.process(Rt),Lp.render.process(Rt),Rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,t0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(P3),this.sharedNodes.forEach(M3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!QP(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Ts(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),F3(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return nt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(U3))){const{scroll:h}=this.root;h&&(Oo(l.x,h.offset.x),Oo(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=nt();if(jn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&jn(l,o),Oo(l.x,d.offset.x),Oo(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=nt();jn(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Fo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ts(h.latestValues)&&Fo(l,h.latestValues)}return Ts(this.latestValues)&&Fo(l,this.latestValues),l}removeTransform(o){const a=nt();jn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ts(u.latestValues))continue;Vg(u.latestValues)&&u.updateSnapshot();const h=nt(),d=u.measurePageBox();jn(h,d),WS(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Ts(this.latestValues)&&WS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Rt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),Fl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=nt(),this.targetWithTransforms=nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jn(this.target,this.layout.layoutBox),zP(this.target,this.targetDelta)):jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),Fl(this.relativeTargetOrigin,this.target,m.target),jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_l&&xs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Vg(this.parent.latestValues)||BP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Rt.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;jn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;Xz(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=nt());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(BS(this.prevProjectionDelta.x,this.projectionDelta.x),BS(this.prevProjectionDelta.y,this.projectionDelta.y)),Ol(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!YS(this.projectionDelta.x,this.prevProjectionDelta.x)||!YS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),_l&&xs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Lo(),this.projectionDelta=Lo(),this.projectionDeltaWithTransform=Lo()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=Lo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=nt(),m=l?l.source:void 0,E=this.layout?this.layout.source:void 0,w=m!==E,x=this.getStack(),g=!x||x.members.length<=1,y=!!(w&&!g&&this.options.crossfade===!0&&!this.path.some(L3));this.animationProgress=0;let S;this.mixTargetDelta=I=>{const R=I/1e3;eT(d.x,o.x,R),eT(d.y,o.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),V3(this.relativeTarget,this.relativeTargetOrigin,f,R),S&&p3(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=nt()),jn(S,this.relativeTarget)),w&&(this.animationValues=h,l3(h,u,this.latestValues,R,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(li(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{Eh.hasAnimatedSinceResize=!0,this.currentAnimation=E3(0,QS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&tR(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||nt();const d=Nn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Nn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}jn(a,l),Fo(a,h),Ol(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new m3),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Wp("z",o,u,this.animationValues);for(let h=0;h<Hp.length;h++)Wp(`rotate${Hp[h]}`,o,u,this.animationValues),Wp(`skew${Hp[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return S3;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Sh(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Sh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ts(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=g3(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:m,y:E}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${E.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in Ed){if(f[w]===void 0)continue;const{correct:x,applyTo:g}=Ed[w],y=u.transform==="none"?f[w]:x(f[w],d);if(g){const S=g.length;for(let I=0;I<S;I++)u[g[I]]=y}else u[w]=y}return this.options.layoutId&&(u.pointerEvents=d===this?Sh(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(JS),this.root.sharedNodes.clear()}}}function x3(t){t.updateLayout()}function I3(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?$n(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],m=Nn(f);f.min=r[d].min,f.max=f.min+m}):tR(s,n.layoutBox,r)&&$n(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],m=Nn(r[d]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=Lo();Ol(a,r,n.layoutBox);const l=Lo();o?Ol(l,t.applyTransform(i,!0),n.measuredBox):Ol(l,r,n.layoutBox);const u=!QP(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const E=nt();Fl(E,n.layoutBox,f.layoutBox);const w=nt();Fl(w,r,m.layoutBox),JP(E,w)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=E,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function C3(t){_l&&xs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function A3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function P3(t){t.clearSnapshot()}function JS(t){t.clearMeasurements()}function R3(t){t.isLayoutDirty=!1}function k3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ZS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function b3(t){t.resolveTargetDelta()}function N3(t){t.calcProjection()}function D3(t){t.resetSkewAndRotation()}function M3(t){t.removeLeadSnapshot()}function eT(t,e,n){t.translate=qe(e.translate,0,n),t.scale=qe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function tT(t,e,n,r){t.min=qe(e.min,n.min,r),t.max=qe(e.max,n.max,r)}function V3(t,e,n,r){tT(t.x,e.x,n.x,r),tT(t.y,e.y,n.y,r)}function L3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const O3={duration:.45,ease:[.4,0,.1,1]},nT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),rT=nT("applewebkit/")&&!nT("chrome/")?Math.round:Qt;function iT(t){t.min=rT(t.min),t.max=rT(t.max)}function F3(t){iT(t.x),iT(t.y)}function tR(t,e,n){return t==="position"||t==="preserve-aspect"&&!Uz(XS(e),XS(n),.2)}function U3(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const j3=eR({attachResizeListener:(t,e)=>Wr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kp={current:void 0},nR=eR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Kp.current){const t=new j3({});t.mount(window),t.setOptions({layoutScroll:!0}),Kp.current=t}return Kp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$3={pan:{Feature:t3},drag:{Feature:e3,ProjectionNode:nR,MeasureLayout:qP}};function sT(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||FP())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&Pe.postRender(()=>l(s,o))};return ei(t.current,n,i,{passive:!t.getProps()[r]})}class B3 extends ds{mount(){this.unmount=Zr(sT(this.node,!0),sT(this.node,!1))}unmount(){}}class z3 extends ds{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zr(Wr(this.node.current,"focus",()=>this.onFocus()),Wr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const rR=(t,e)=>e?t===e?!0:rR(t,e.parentElement):!1;function Gp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,vf(n))}class H3 extends ds{constructor(){super(...arguments),this.removeStartListeners=Qt,this.removeEndListeners=Qt,this.removeAccessibleListeners=Qt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=ei(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps(),f=!d&&!rR(this.node.current,a.target)?h:u;f&&Pe.update(()=>f(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=ei(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Zr(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Gp("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&Pe.postRender(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=Wr(this.node.current,"keyup",o),Gp("down",(a,l)=>{this.startPress(a,l)})},n=Wr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Gp("cancel",(s,o)=>this.cancelPress(s,o))},i=Wr(this.node.current,"blur",r);this.removeAccessibleListeners=Zr(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Pe.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!FP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Pe.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ei(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Wr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Zr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Og=new WeakMap,qp=new WeakMap,W3=t=>{const e=Og.get(t.target);e&&e(t)},K3=t=>{t.forEach(W3)};function G3({root:t,...e}){const n=t||document;qp.has(n)||qp.set(n,{});const r=qp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(K3,{root:t,...e})),r[i]}function q3(t,e,n){const r=G3(e);return Og.set(t,n),r.observe(t),()=>{Og.delete(t),r.unobserve(t)}}const X3={some:0,all:1};class Y3 extends ds{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:X3[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(l)};return q3(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Q3(e,n))&&this.startObserver()}unmount(){}}function Q3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const J3={inView:{Feature:Y3},tap:{Feature:H3},focus:{Feature:z3},hover:{Feature:B3}},Z3={layout:{ProjectionNode:nR,MeasureLayout:qP}},iR=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),_f=T.createContext({}),n0=typeof window<"u",e9=n0?T.useLayoutEffect:T.useEffect,sR=T.createContext({strict:!1});let oT=!1;function t9(t,e,n,r,i){var s;const{visualElement:o}=T.useContext(_f),a=T.useContext(sR),l=T.useContext(e0),u=T.useContext(iR).reducedMotion,h=T.useRef();r=r||a.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const d=h.current,f=T.useContext(GP);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&r9(h.current,n,i,f),T.useInsertionEffect(()=>{d&&d.update(n,l)});const m=n[PP],E=T.useRef(!!m&&!window.MotionHandoffIsComplete&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,m)));return e9(()=>{d&&(d.updateFeatures(),t0.render(d.render),E.current&&d.animationState&&d.animationState.animateChanges())}),T.useEffect(()=>{d&&(!E.current&&d.animationState&&d.animationState.animateChanges(),E.current=!1,oT||(oT=!0,queueMicrotask(n9)))}),d}function n9(){window.MotionHandoffIsComplete=!0}function r9(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:oR(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Vo(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function oR(t){if(t)return t.options.allowProjection!==!1?t.projection:oR(t.parent)}function i9(t,e,n){return T.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Vo(n)&&(n.current=r))},[e])}function wf(t){return vu(t.animate)||Ov.some(e=>_u(t[e]))}function aR(t){return!!(wf(t)||t.variants)}function s9(t,e){if(wf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||_u(n)?n:void 0,animate:_u(r)?r:void 0}}return t.inherit!==!1?e:{}}function o9(t){const{initial:e,animate:n}=s9(t,T.useContext(_f));return T.useMemo(()=>({initial:e,animate:n}),[aT(e),aT(n)])}function aT(t){return Array.isArray(t)?t.join(" "):t}const lT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pa={};for(const t in lT)pa[t]={isEnabled:e=>lT[t].some(n=>!!e[n])};function a9(t){for(const e in t)pa[e]={...pa[e],...t[e]}}const l9=Symbol.for("motionComponentSymbol");function u9({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&a9(t);function s(a,l){let u;const h={...T.useContext(iR),...a,layoutId:c9(a)},{isStatic:d}=h,f=o9(a),m=r(a,d);if(!d&&n0){h9();const E=d9(h);u=E.MeasureLayout,f.visualElement=t9(i,m,h,e,E.ProjectionNode)}return L.jsxs(_f.Provider,{value:f,children:[u&&f.visualElement?L.jsx(u,{visualElement:f.visualElement,...h}):null,n(i,a,i9(m,f.visualElement,l),m,d,f.visualElement)]})}const o=T.forwardRef(s);return o[l9]=i,o}function c9({layoutId:t}){const e=T.useContext(KP).id;return e&&t!==void 0?e+"-"+t:t}function h9(t,e){T.useContext(sR).strict}function d9(t){const{drag:e,layout:n}=pa;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const f9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function r0(t){return typeof t!="string"||t.includes("-")?!1:!!(f9.indexOf(t)>-1||/[A-Z]/u.test(t))}function lR(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const uR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cR(t,e,n,r){lR(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(uR.has(i)?i:yf(i),e.attrs[i])}function hR(t,{layout:e,layoutId:n}){return hs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ed[t]||t==="opacity")}function i0(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Yt(i[o])||e.style&&Yt(e.style[o])||hR(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),s}function dR(t,e,n){const r=i0(t,e,n);for(const i in t)if(Yt(t[i])||Yt(e[i])){const s=Ku.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function p9(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}function m9({applyWillChange:t=!1,scrapeMotionValuesFromProps:e,createRenderState:n,onMount:r},i,s,o,a){const l={latestValues:y9(i,s,o,a?!1:t,e),renderState:n()};return r&&(l.mount=u=>r(i,u,l)),l}const fR=t=>(e,n)=>{const r=T.useContext(_f),i=T.useContext(e0),s=()=>m9(t,e,r,i,n);return n?s():p9(s)};function g9(t,e){const n=kP(e);n&&Yu(t,n)}function uT(t,e,n){const r=Array.isArray(e)?e:[e];for(let i=0;i<r.length;i++){const s=Vv(t,r[i]);if(s){const{transitionEnd:o,transition:a,...l}=s;n(l,o)}}}function y9(t,e,n,r,i){var s;const o={},a=[],l=r&&((s=t.style)===null||s===void 0?void 0:s.willChange)===void 0,u=i(t,{});for(const x in u)o[x]=Sh(u[x]);let{initial:h,animate:d}=t;const f=wf(t),m=aR(t);e&&m&&!f&&t.inherit!==!1&&(h===void 0&&(h=e.initial),d===void 0&&(d=e.animate));let E=n?n.initial===!1:!1;E=E||h===!1;const w=E?d:h;return w&&typeof w!="boolean"&&!vu(w)&&uT(t,w,(x,g)=>{for(const y in x){let S=x[y];if(Array.isArray(S)){const I=E?S.length-1:0;S=S[I]}S!==null&&(o[y]=S)}for(const y in g)o[y]=g[y]}),l&&(d&&h!==!1&&!vu(d)&&uT(t,d,x=>{for(const g in x)g9(a,g)}),a.length&&(o.willChange=a.join(","))),o}const s0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),pR=()=>({...s0(),attrs:{}}),mR=(t,e)=>e&&typeof t=="number"?e.transform(t):t,v9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_9=Ku.length;function w9(t,e,n){let r="",i=!0;for(let s=0;s<_9;s++){const o=Ku[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=mR(a,Wv[o]);if(!l){i=!1;const h=v9[o]||o;r+=`${h}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function o0(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(hs.has(l)){o=!0;continue}else if(nP(l)){i[l]=u;continue}else{const h=mR(u,Wv[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=w9(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${u} ${h}`}}function cT(t,e,n){return typeof t=="string"?t:ue.transform(e+n*t)}function E9(t,e,n){const r=cT(e,t.x,t.width),i=cT(n,t.y,t.height);return`${r} ${i}`}const S9={offset:"stroke-dashoffset",array:"stroke-dasharray"},T9={offset:"strokeDashoffset",array:"strokeDasharray"};function x9(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?S9:T9;t[s.offset]=ue.transform(-r);const o=ue.transform(e),a=ue.transform(n);t[s.array]=`${o} ${a}`}function a0(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,d){if(o0(t,u,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:E}=t;f.transform&&(E&&(m.transform=f.transform),delete f.transform),E&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=E9(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&x9(f,o,a,l,!1)}const l0=t=>typeof t=="string"&&t.toLowerCase()==="svg",I9={useVisualState:fR({scrapeMotionValuesFromProps:dR,createRenderState:pR,onMount:(t,e,{renderState:n,latestValues:r})=>{Pe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Pe.render(()=>{a0(n,r,l0(e.tagName),t.transformTemplate),cR(e,n)})}})},C9={useVisualState:fR({applyWillChange:!0,scrapeMotionValuesFromProps:i0,createRenderState:s0})};function gR(t,e,n){for(const r in e)!Yt(e[r])&&!hR(r,n)&&(t[r]=e[r])}function A9({transformTemplate:t},e){return T.useMemo(()=>{const n=s0();return o0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function P9(t,e){const n=t.style||{},r={};return gR(r,n,t),Object.assign(r,A9(t,e)),r}function R9(t,e){const n={},r=P9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const k9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||k9.has(t)}let yR=t=>!Sd(t);function b9(t){t&&(yR=e=>e.startsWith("on")?!Sd(e):t(e))}try{b9(require("@emotion/is-prop-valid").default)}catch{}function N9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(yR(i)||n===!0&&Sd(i)||!e&&!Sd(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function D9(t,e,n,r){const i=T.useMemo(()=>{const s=pR();return a0(s,e,l0(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};gR(s,t.style,t),i.style={...s,...i.style}}return i}function M9(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(r0(n)?D9:R9)(r,s,o,n),u=N9(r,typeof n=="string",t),h=n!==T.Fragment?{...u,...l,ref:i}:{},{children:d}=r,f=T.useMemo(()=>Yt(d)?d.get():d,[d]);return T.createElement(n,{...h,children:f})}}function V9(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...r0(r)?I9:C9,preloadedFeatures:t,useRender:M9(i),createVisualElement:e,Component:r};return u9(o)}}const Fg={current:null},vR={current:!1};function L9(){if(vR.current=!0,!!n0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fg.current=t.matches;t.addListener(e),e()}else Fg.current=!1}function O9(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Yt(i))t.addValue(r,i);else if(Yt(s))t.addValue(r,Eu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Eu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const hT=new WeakMap,F9=[...sP,Kt,rs],U9=t=>F9.find(iP(t)),dT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class j9{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Tr.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Pe.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=wf(n),this.isVariantNode=aR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const m=d[f];l[f]!==void 0&&Yt(m)&&m.set(l[f],!1)}}mount(e){this.current=e,hT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),vR.current||L9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hT.delete(this.current),this.projection&&this.projection.unmount(),li(this.notifyUpdate),li(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=hs.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Pe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pa){const n=pa[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dT.length;r++){const i=dT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=O9(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Eu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(eP(i)||ZA(i))?i=parseFloat(i):!U9(i)&&rs.test(n)&&(i=fP(e,n)),this.setBaseTarget(e,Yt(i)?i.get():i)),Yt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Vv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Yt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Zv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class _R extends j9{constructor(){super(...arguments),this.KeyframeResolver=pP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function $9(t){return window.getComputedStyle(t)}class B9 extends _R{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=lR}readValueFromInstance(e,n){if(hs.has(n)){const r=Kv(n);return r&&r.default||0}else{const r=$9(e),i=(nP(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return HP(e,n)}build(e,n,r){o0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return i0(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class z9 extends _R{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hs.has(n)){const r=Kv(n);return r&&r.default||0}return n=uR.has(n)?n:yf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return dR(e,n,r)}build(e,n,r){a0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){cR(e,n,r,i)}mount(e){this.isSVGTag=l0(e.tagName),super.mount(e)}}const H9=(t,e)=>r0(t)?new z9(e):new B9(e,{allowProjection:t!==T.Fragment}),W9=V9({...kz,...J3,...$3,...Z3},H9),K9=T$(W9),wR=({visible:t,overflow:e,drag:n,children:r,controls:i,handleAddChip:s,handleOpenSettings:o})=>{const a=T.useRef(null),l=g$(a);return L.jsxs("div",{className:`chipsDash ${t?"open":"closed"}`,style:{overflow:`${e}`,position:"relative"},children:[L.jsx(K9.div,{className:"chipsDash open inner",style:{width:"min-content"},ref:a,drag:n,dragConstraints:{left:l.left,right:l.right},children:r}),L.jsxs("div",{style:{width:"100px",display:"flex",flexDirection:"row",gap:"6px",position:"absolute",right:0,padding:"10px",zIndex:"101",justifyContent:"flex-end",pointerEvents:"none",background:"linear-gradient(90deg, rgba(32,32,32,0) 0%, rgba(32,32,32,0.32) 8%, rgba(32,32,32,1) 36%)"},children:[i[0]?L.jsx("span",{className:"material-symbols-outlined chip",style:{pointerEvents:"fill"},onClick:s,children:"add"}):void 0,i[1]?L.jsx("span",{className:"material-symbols-outlined chip",style:{pointerEvents:"fill"},onClick:o,children:"settings"}):void 0]})]})},ER=({isLoading:t,children:e})=>L.jsx(L.Fragment,{children:t?L.jsx("img",{style:{width:"20px"},src:"https://media.tenor.com/2fE4s1GXDNEAAAAi/loading.gif"}):e});function G9({visible:t,draggable:e}){const n=Z(u=>u.activeChipSet),[r,i]=T.useState(!1),[s,o]=T.useState(),[a,l]=T.useState(!0);return T.useEffect(()=>{n&&l(!1)},[n]),T.useEffect(()=>{o(r?void 0:"x")},[r]),L.jsx(L.Fragment,{children:L.jsx(wR,{visible:t,overflow:r?"visible":"hidden",drag:s,controls:[!0,!1],children:L.jsx(ER,{isLoading:a,children:n==null?void 0:n.chips.map(u=>L.jsx(Mv,{chipKey:u.key,setKey:n.key,draggable:e,setIsDragNDropping:i},`chip-${u.key}`))})})})}function q9({chip:t,chipSetKey:e}){const[n,r]=T.useState(t.name),i=Z(a=>a.renameChip),s=a=>{console.log("renaming chip: ",a,e),r(a),i(e,t.key,a)},o=()=>{console.log("you clicked",t)};return L.jsx(L.Fragment,{children:L.jsx(EA,{title:n,setTitle:r,handleNewTitle:s,handleClickItem:o,children:t.name})})}function X9({chipSet:t}){const[e,n]=T.useState(t.name),r=Z(a=>a.renameChipSet),i=Z(a=>a.addChip),s=a=>{console.log("renaming chipSet: ",a,t.key),n(a),r(t.key,a)},o=()=>{console.log("adding a new chip");const a=prompt("New Chip Name:");a&&(console.log("adding chip,",a),i(t.key,{name:a,key:Pr()}))};return L.jsx(L.Fragment,{children:L.jsx(cA,{title:e,setTitle:n,handleNewTitle:s,handleAddItem:o,children:t.chips.map((a,l)=>L.jsx(q9,{chip:a,chipSetKey:t.key},l))})})}const Y9=({visible:t,toggleVisible:e})=>{const n=Z(s=>s.projectChipSets),r=Z(s=>s.addChipSet),i=()=>{const s=prompt("New Chip Set Name:");s&&r(s)};return L.jsx(L.Fragment,{children:L.jsx(lA,{visible:t,toggleVisible:e,children:L.jsx(uA,{header:"Chips",onClickAddButton:i,children:n&&(n==null?void 0:n.length)>0?n.map((s,o)=>L.jsx(X9,{chipSet:s},o)):L.jsx("p",{children:"No Chipsets :)"})})})})};function Q9({visible:t,setChildVisible:e}){const n=Z(h=>h.projectChipSets),r=Z(h=>h.setActiveChipSet),[i,s]=T.useState(!0),[o,a]=T.useState(!1);T.useEffect(()=>{localStorage.setItem("chips",JSON.stringify(n)),n&&s(!1)},[n]);const l=()=>{},u=()=>{a(!o)};return L.jsxs(L.Fragment,{children:[L.jsx(Y9,{visible:o,toggleVisible:u}),L.jsx(wR,{visible:t,overflow:"hidden",drag:"x",handleAddChip:l,handleOpenSettings:u,controls:[!0,!0],children:L.jsx(ER,{isLoading:i,children:n==null?void 0:n.map(h=>L.jsx(Mv,{setKey:h.key,draggable:!1,onClick:()=>{r(h),e(!0)}},h.key))})})]})}function J9({visible:t}){const e=Z(i=>i.projectChipSets),[n,r]=T.useState(!1);return T.useEffect(()=>{t||r(!1)},[t]),T.useEffect(()=>{localStorage.setItem("chips",JSON.stringify(e))},[e]),L.jsxs(L.Fragment,{children:[L.jsx(G9,{visible:n,draggable:!0}),L.jsx(Q9,{visible:t,setChildVisible:r})]})}function Z9(){const t=Z(f=>f.appendNodes),e=Z(f=>f.deselectAllNodes),n=Z(f=>f.getSelectedNodes),r=Z(f=>f.setClientXY),i=Z(f=>f.setViewport),s=Z(f=>f.getViewport),o=pU(),a=ju();T.useEffect(()=>(window.addEventListener("mousemove",l),()=>window.removeEventListener("mousemove",l)),[]),T.useEffect(()=>(window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)),[]),T.useEffect(()=>{i(o)},[o]);const l=f=>{r({x:f.clientX,y:f.clientY})},u=f=>{if(f.key=="c"&&f.ctrlKey||f.key=="c"&&f.metaKey){const m=[];n().forEach(E=>{if(console.log("copy node before",E),E){const w={...E};m.push(w),console.log("copy node after",w)}}),h(JSON.stringify(m))}else f.key=="v"&&f.ctrlKey||f.key=="v"&&f.metaKey?d():(f.key=="a"&&f.ctrlKey&&f.shiftKey||f.key=="a"&&f.metaKey&&f.shiftKey)&&(f.preventDefault(),e())},h=async f=>{try{await navigator.clipboard.writeText(f).then(()=>console.log("Copied to clipboard:",f))}catch(m){console.error("Failed to copy:",m)}},d=async()=>{try{await navigator.clipboard.readText().then(f=>{const m=JSON.parse(f);console.log("Pasting:",m),e();const E=_$(s(),m);t([...E]),a.fitView({nodes:E,duration:500})})}catch(f){console.error("Failed to paste:",f)}};return L.jsx(L.Fragment,{})}function e5(){const{edges:t,onNodesChange:e,onEdgesChange:n,onConnect:r}=Z(h$,Vt),i=Z(U=>U.activePath),s=Z(U=>U.nodes),o=Z(U=>U.lastChange),a=Z(U=>U.lastSave),l=Z(U=>U.projectChipSets),u=Z(U=>U.setNodes),h=Z(U=>U.updateNodeData),d=Z(U=>U.setActivePath),f=Z(U=>U.setLastChange),[m,E]=T.useState(null),[w,x]=T.useState(!1),[g,y]=T.useState(!1),[S,I]=T.useState(!1),{projectKey:R,pageKey:M}=lj();p$(x),m$(R,M,d),T.useEffect(()=>{u([...s])},[m]),T.useEffect(()=>{localStorage.setItem("nodes",JSON.stringify(s)),localStorage.setItem("edges",JSON.stringify(t)),f(new Date)},[s,t]),T.useEffect(()=>{const U=j=>{o>a&&(j.preventDefault(),j.returnValue="")};return window.addEventListener("beforeunload",U),()=>{window.removeEventListener("beforeunload",U)}},[a,o]);const C=(U,j=0,z=100)=>{u([...s,{id:Pr(),position:{x:j,y:z},data:{},type:U}])},_=(U,j)=>{U.dataTransfer.setData("application/reactflow",j),U.dataTransfer.effectAllowed="move"},A=T.useCallback(U=>{U.preventDefault(),U.dataTransfer.dropEffect="move"},[]),k=T.useCallback(U=>{U.preventDefault();const j=U.dataTransfer.getData("application/reactflow");if(!(typeof j>"u"||!j))if(m){const z=m.screenToFlowPosition({x:U.clientX,y:U.clientY});C(j,z.x,z.y)}else C(j)},[s]),N=()=>{y(!g)},D=()=>{I(!S)},P=()=>{},V=U=>{var F,O,B,W;console.log("drag end");const{active:j,over:z}=U;z&&((O=z.data.current)!=null&&O.accepts.includes((F=j.data.current)==null?void 0:F.type))&&l&&h(`${z.id}`,{setKey:(B=j.data.current)==null?void 0:B.setKey,chipKey:(W=j.data.current)==null?void 0:W.chipKey})};return L.jsxs(Sv,{children:[L.jsx(Z9,{}),L.jsxs("div",{style:{width:"100svw",height:"100svh",display:"flex",flexDirection:"column"},children:[L.jsx("p",{style:{position:"absolute",bottom:0,fontSize:".75em"},children:i?`${i.projectKey} / ${i.pageKey}`:"undefined"}),L.jsx(Lj,{visible:g,toggleVisible:N}),L.jsxs(jA,{onDragEnd:V,children:[L.jsxs(sA,{onInit:E,nodes:s,edges:t,onNodesChange:e,onEdgesChange:n,onConnect:r,onDrop:k,onDragOver:A,selectionMode:ha.Partial,nodeTypes:d$,edgeTypes:f$,minZoom:.25,maxZoom:2,children:[L.jsx(w$,{isMobile:w,addNode:C,onDragStart:_}),L.jsx(S$,{togglePageList:N,toggleChips:D,doThing:P}),L.jsx(wU,{gap:12,size:1})]}),L.jsx(J9,{visible:S})]})]})]})}var fT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},t5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},TR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),r.push(n[h],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):t5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new n5;const f=s<<2|a>>4;if(r.push(f),u!==64){const m=a<<4&240|u>>2;if(r.push(m),d!==64){const E=u<<6&192|d;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class n5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r5=function(t){const e=SR(t);return TR.encodeByteArray(e,!0)},Td=function(t){return r5(t).replace(/\./g,"")},xR=function(t){try{return TR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=()=>i5().__FIREBASE_DEFAULTS__,o5=()=>{if(typeof process>"u"||typeof fT>"u")return;const t=fT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},a5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xR(t[1]);return e&&JSON.parse(e)},Ef=()=>{try{return s5()||o5()||a5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IR=t=>{var e,n;return(n=(e=Ef())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},l5=t=>{const e=IR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},CR=()=>{var t;return(t=Ef())===null||t===void 0?void 0:t.config},AR=t=>{var e;return(e=Ef())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Td(JSON.stringify(n)),Td(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function d5(){var t;const e=(t=Ef())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function p5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function m5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g5(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y5(){return!d5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v5(){try{return typeof indexedDB=="object"}catch{return!1}}function _5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="FirebaseError";class pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=w5,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qu.prototype.create)}}class Qu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?E5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new pi(i,a,r)}}function E5(t,e){return t.replace(S5,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const S5=/\{\$([^}]+)}/g;function T5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(pT(s)&&pT(o)){if(!xd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function pT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function x5(t,e){const n=new I5(t,e);return n.subscribe.bind(n)}class I5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");C5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Xp),i.error===void 0&&(i.error=Xp),i.complete===void 0&&(i.complete=Xp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function C5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return t&&t._delegate?t._delegate:t}class Gs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new u5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R5(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P5(t){return t===Is?void 0:t}function R5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new A5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const b5={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},N5=_e.INFO,D5={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},M5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=D5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class u0{constructor(e){this.name=e,this._logLevel=N5,this._logHandler=M5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const V5=(t,e)=>e.some(n=>t instanceof n);let mT,gT;function L5(){return mT||(mT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O5(){return gT||(gT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PR=new WeakMap,Ug=new WeakMap,RR=new WeakMap,Yp=new WeakMap,c0=new WeakMap;function F5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PR.set(n,t)}).catch(()=>{}),c0.set(e,t),e}function U5(t){if(Ug.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ug.set(t,e)}let jg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ug.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function j5(t){jg=t(jg)}function $5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qp(this),e,...n);return RR.set(r,e.sort?e.sort():[e]),Xi(r)}:O5().includes(t)?function(...e){return t.apply(Qp(this),e),Xi(PR.get(this))}:function(...e){return Xi(t.apply(Qp(this),e))}}function B5(t){return typeof t=="function"?$5(t):(t instanceof IDBTransaction&&U5(t),V5(t,L5())?new Proxy(t,jg):t)}function Xi(t){if(t instanceof IDBRequest)return F5(t);if(Yp.has(t))return Yp.get(t);const e=B5(t);return e!==t&&(Yp.set(t,e),c0.set(e,t)),e}const Qp=t=>c0.get(t);function z5(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Xi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xi(o.result),l.oldVersion,l.newVersion,Xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const H5=["get","getKey","getAll","getAllKeys","count"],W5=["put","add","delete","clear"],Jp=new Map;function yT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=W5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||H5.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Jp.set(e,s),s}j5(t=>({...t,get:(e,n,r)=>yT(e,n)||t.get(e,n,r),has:(e,n)=>!!yT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(G5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function G5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $g="@firebase/app",vT="0.10.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new u0("@firebase/app"),q5="@firebase/app-compat",X5="@firebase/analytics-compat",Y5="@firebase/analytics",Q5="@firebase/app-check-compat",J5="@firebase/app-check",Z5="@firebase/auth",e6="@firebase/auth-compat",t6="@firebase/database",n6="@firebase/database-compat",r6="@firebase/functions",i6="@firebase/functions-compat",s6="@firebase/installations",o6="@firebase/installations-compat",a6="@firebase/messaging",l6="@firebase/messaging-compat",u6="@firebase/performance",c6="@firebase/performance-compat",h6="@firebase/remote-config",d6="@firebase/remote-config-compat",f6="@firebase/storage",p6="@firebase/storage-compat",m6="@firebase/firestore",g6="@firebase/vertexai-preview",y6="@firebase/firestore-compat",v6="firebase",_6="10.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="[DEFAULT]",w6={[$g]:"fire-core",[q5]:"fire-core-compat",[Y5]:"fire-analytics",[X5]:"fire-analytics-compat",[J5]:"fire-app-check",[Q5]:"fire-app-check-compat",[Z5]:"fire-auth",[e6]:"fire-auth-compat",[t6]:"fire-rtdb",[n6]:"fire-rtdb-compat",[r6]:"fire-fn",[i6]:"fire-fn-compat",[s6]:"fire-iid",[o6]:"fire-iid-compat",[a6]:"fire-fcm",[l6]:"fire-fcm-compat",[u6]:"fire-perf",[c6]:"fire-perf-compat",[h6]:"fire-rc",[d6]:"fire-rc-compat",[f6]:"fire-gcs",[p6]:"fire-gcs-compat",[m6]:"fire-fst",[y6]:"fire-fst-compat",[g6]:"fire-vertex","fire-js":"fire-js",[v6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Map,E6=new Map,zg=new Map;function _T(t,e){try{t.container.addComponent(e)}catch(n){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ma(t){const e=t.name;if(zg.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;zg.set(e,t);for(const n of Id.values())_T(n,t);for(const n of E6.values())_T(n,t);return!0}function h0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new Qu("app","Firebase",S6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=_6;function kR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Yi.create("bad-app-name",{appName:String(i)});if(n||(n=CR()),!n)throw Yi.create("no-options");const s=Id.get(i);if(s){if(xd(n,s.options)&&xd(r,s.config))return s;throw Yi.create("duplicate-app",{appName:i})}const o=new k5(i);for(const l of zg.values())o.addComponent(l);const a=new T6(n,r,o);return Id.set(i,a),a}function bR(t=Bg){const e=Id.get(t);if(!e&&t===Bg&&CR())return kR();if(!e)throw Yi.create("no-app",{appName:t});return e}function Qi(t,e,n){var r;let i=(r=w6[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(a.join(" "));return}ma(new Gs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="firebase-heartbeat-database",I6=1,Su="firebase-heartbeat-store";let Zp=null;function NR(){return Zp||(Zp=z5(x6,I6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Su)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yi.create("idb-open",{originalErrorMessage:t.message})})),Zp}async function C6(t){try{const n=(await NR()).transaction(Su),r=await n.objectStore(Su).get(DR(t));return await n.done,r}catch(e){if(e instanceof pi)ui.warn(e.message);else{const n=Yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ui.warn(n.message)}}}async function wT(t,e){try{const r=(await NR()).transaction(Su,"readwrite");await r.objectStore(Su).put(e,DR(t)),await r.done}catch(n){if(n instanceof pi)ui.warn(n.message);else{const r=Yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ui.warn(r.message)}}}function DR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=1024,P6=30*24*60*60*1e3;class R6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ET();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=P6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ET(),{heartbeatsToSend:r,unsentEntries:i}=k6(this._heartbeatsCache.heartbeats),s=Td(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ui.warn(n),""}}}function ET(){return new Date().toISOString().substring(0,10)}function k6(t,e=A6){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ST(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ST(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class b6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v5()?_5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ST(t){return Td(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t){ma(new Gs("platform-logger",e=>new K5(e),"PRIVATE")),ma(new Gs("heartbeat",e=>new R6(e),"PRIVATE")),Qi($g,vT,t),Qi($g,vT,"esm2017"),Qi("fire-js","")}N6("");var TT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,MR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,_){function A(){}A.prototype=_.prototype,C.D=_.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(k,N,D){for(var P=Array(arguments.length-2),V=2;V<arguments.length;V++)P[V-2]=arguments[V];return _.prototype[N].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,A){A||(A=0);var k=Array(16);if(typeof _=="string")for(var N=0;16>N;++N)k[N]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(N=0;16>N;++N)k[N]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=C.g[0],A=C.g[1],N=C.g[2];var D=C.g[3],P=_+(D^A&(N^D))+k[0]+3614090360&4294967295;_=A+(P<<7&4294967295|P>>>25),P=D+(N^_&(A^N))+k[1]+3905402710&4294967295,D=_+(P<<12&4294967295|P>>>20),P=N+(A^D&(_^A))+k[2]+606105819&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(_^N&(D^_))+k[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(D^A&(N^D))+k[4]+4118548399&4294967295,_=A+(P<<7&4294967295|P>>>25),P=D+(N^_&(A^N))+k[5]+1200080426&4294967295,D=_+(P<<12&4294967295|P>>>20),P=N+(A^D&(_^A))+k[6]+2821735955&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(_^N&(D^_))+k[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(D^A&(N^D))+k[8]+1770035416&4294967295,_=A+(P<<7&4294967295|P>>>25),P=D+(N^_&(A^N))+k[9]+2336552879&4294967295,D=_+(P<<12&4294967295|P>>>20),P=N+(A^D&(_^A))+k[10]+4294925233&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(_^N&(D^_))+k[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(D^A&(N^D))+k[12]+1804603682&4294967295,_=A+(P<<7&4294967295|P>>>25),P=D+(N^_&(A^N))+k[13]+4254626195&4294967295,D=_+(P<<12&4294967295|P>>>20),P=N+(A^D&(_^A))+k[14]+2792965006&4294967295,N=D+(P<<17&4294967295|P>>>15),P=A+(_^N&(D^_))+k[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=_+(N^D&(A^N))+k[1]+4129170786&4294967295,_=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(_^A))+k[6]+3225465664&4294967295,D=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(D^_))+k[11]+643717713&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^_&(N^D))+k[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^D&(A^N))+k[5]+3593408605&4294967295,_=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(_^A))+k[10]+38016083&4294967295,D=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(D^_))+k[15]+3634488961&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^_&(N^D))+k[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^D&(A^N))+k[9]+568446438&4294967295,_=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(_^A))+k[14]+3275163606&4294967295,D=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(D^_))+k[3]+4107603335&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^_&(N^D))+k[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(N^D&(A^N))+k[13]+2850285829&4294967295,_=A+(P<<5&4294967295|P>>>27),P=D+(A^N&(_^A))+k[2]+4243563512&4294967295,D=_+(P<<9&4294967295|P>>>23),P=N+(_^A&(D^_))+k[7]+1735328473&4294967295,N=D+(P<<14&4294967295|P>>>18),P=A+(D^_&(N^D))+k[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=_+(A^N^D)+k[5]+4294588738&4294967295,_=A+(P<<4&4294967295|P>>>28),P=D+(_^A^N)+k[8]+2272392833&4294967295,D=_+(P<<11&4294967295|P>>>21),P=N+(D^_^A)+k[11]+1839030562&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^_)+k[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^D)+k[1]+2763975236&4294967295,_=A+(P<<4&4294967295|P>>>28),P=D+(_^A^N)+k[4]+1272893353&4294967295,D=_+(P<<11&4294967295|P>>>21),P=N+(D^_^A)+k[7]+4139469664&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^_)+k[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^D)+k[13]+681279174&4294967295,_=A+(P<<4&4294967295|P>>>28),P=D+(_^A^N)+k[0]+3936430074&4294967295,D=_+(P<<11&4294967295|P>>>21),P=N+(D^_^A)+k[3]+3572445317&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^_)+k[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(A^N^D)+k[9]+3654602809&4294967295,_=A+(P<<4&4294967295|P>>>28),P=D+(_^A^N)+k[12]+3873151461&4294967295,D=_+(P<<11&4294967295|P>>>21),P=N+(D^_^A)+k[15]+530742520&4294967295,N=D+(P<<16&4294967295|P>>>16),P=A+(N^D^_)+k[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=_+(N^(A|~D))+k[0]+4096336452&4294967295,_=A+(P<<6&4294967295|P>>>26),P=D+(A^(_|~N))+k[7]+1126891415&4294967295,D=_+(P<<10&4294967295|P>>>22),P=N+(_^(D|~A))+k[14]+2878612391&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~_))+k[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~D))+k[12]+1700485571&4294967295,_=A+(P<<6&4294967295|P>>>26),P=D+(A^(_|~N))+k[3]+2399980690&4294967295,D=_+(P<<10&4294967295|P>>>22),P=N+(_^(D|~A))+k[10]+4293915773&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~_))+k[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~D))+k[8]+1873313359&4294967295,_=A+(P<<6&4294967295|P>>>26),P=D+(A^(_|~N))+k[15]+4264355552&4294967295,D=_+(P<<10&4294967295|P>>>22),P=N+(_^(D|~A))+k[6]+2734768916&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~_))+k[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=_+(N^(A|~D))+k[4]+4149444226&4294967295,_=A+(P<<6&4294967295|P>>>26),P=D+(A^(_|~N))+k[11]+3174756917&4294967295,D=_+(P<<10&4294967295|P>>>22),P=N+(_^(D|~A))+k[2]+718787259&4294967295,N=D+(P<<15&4294967295|P>>>17),P=A+(D^(N|~_))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var A=_-this.blockSize,k=this.B,N=this.h,D=0;D<_;){if(N==0)for(;D<=A;)i(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<_;)if(k[N++]=C.charCodeAt(D++),N==this.blockSize){i(this,k),N=0;break}}else for(;D<_;)if(k[N++]=C[D++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var A=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=A&255,A/=256;for(this.u(C),C=Array(16),_=A=0;4>_;++_)for(var k=0;32>k;k+=8)C[A++]=this.g[_]>>>k&255;return C};function s(C,_){var A=a;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=_(C)}function o(C,_){this.h=_;for(var A=[],k=!0,N=C.length-1;0<=N;N--){var D=C[N]|0;k&&D==_||(A[N]=D,k=!1)}this.g=A}var a={};function l(C){return-128<=C&&128>C?s(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return x(u(-C));for(var _=[],A=1,k=0;C>=A;k++)_[k]=C/A|0,A*=4294967296;return new o(_,0)}function h(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return x(h(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(_,8)),k=d,N=0;N<C.length;N+=8){var D=Math.min(8,C.length-N),P=parseInt(C.substring(N,N+D),_);8>D?(D=u(Math.pow(_,D)),k=k.j(D).add(u(P))):(k=k.j(A),k=k.add(u(P)))}return k}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-x(this).m();for(var C=0,_=1,A=0;A<this.g.length;A++){var k=this.i(A);C+=(0<=k?k:4294967296+k)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(E(this))return"0";if(w(this))return"-"+x(this).toString(C);for(var _=u(Math.pow(C,6)),A=this,k="";;){var N=I(A,_).g;A=g(A,N.j(_));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=N,E(A))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function E(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=g(this,C),w(C)?-1:E(C)?0:1};function x(C){for(var _=C.g.length,A=[],k=0;k<_;k++)A[k]=~C.g[k];return new o(A,~C.h).add(f)}t.abs=function(){return w(this)?x(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),A=[],k=0,N=0;N<=_;N++){var D=k+(this.i(N)&65535)+(C.i(N)&65535),P=(D>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);k=P>>>16,D&=65535,P&=65535,A[N]=P<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function g(C,_){return C.add(x(_))}t.j=function(C){if(E(this)||E(C))return d;if(w(this))return w(C)?x(this).j(x(C)):x(x(this).j(C));if(w(C))return x(this.j(x(C)));if(0>this.l(m)&&0>C.l(m))return u(this.m()*C.m());for(var _=this.g.length+C.g.length,A=[],k=0;k<2*_;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<C.g.length;N++){var D=this.i(k)>>>16,P=this.i(k)&65535,V=C.i(N)>>>16,U=C.i(N)&65535;A[2*k+2*N]+=P*U,y(A,2*k+2*N),A[2*k+2*N+1]+=D*U,y(A,2*k+2*N+1),A[2*k+2*N+1]+=P*V,y(A,2*k+2*N+1),A[2*k+2*N+2]+=D*V,y(A,2*k+2*N+2)}for(k=0;k<_;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=_;k<2*_;k++)A[k]=0;return new o(A,0)};function y(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function S(C,_){this.g=C,this.h=_}function I(C,_){if(E(_))throw Error("division by zero");if(E(C))return new S(d,d);if(w(C))return _=I(x(C),_),new S(x(_.g),x(_.h));if(w(_))return _=I(C,x(_)),new S(x(_.g),_.h);if(30<C.g.length){if(w(C)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var A=f,k=_;0>=k.l(C);)A=R(A),k=R(k);var N=M(A,1),D=M(k,1);for(k=M(k,2),A=M(A,2);!E(k);){var P=D.add(k);0>=P.l(C)&&(N=N.add(A),D=P),k=M(k,1),A=M(A,1)}return _=g(C,N.j(_)),new S(N,_)}for(N=d;0<=C.l(_);){for(A=Math.max(1,Math.floor(C.m()/_.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=u(A),P=D.j(_);w(P)||0<P.l(C);)A-=k,D=u(A),P=D.j(_);E(D)&&(D=f),N=N.add(D),C=g(C,P)}return new S(N,C)}t.A=function(C){return I(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)&C.i(k);return new o(A,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)|C.i(k);return new o(A,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),A=[],k=0;k<_;k++)A[k]=this.i(k)^C.i(k);return new o(A,this.h^C.h)};function R(C){for(var _=C.g.length+1,A=[],k=0;k<_;k++)A[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(A,C.h)}function M(C,_){var A=_>>5;_%=32;for(var k=C.g.length-A,N=[],D=0;D<k;D++)N[D]=0<_?C.i(D+A)>>>_|C.i(D+A+1)<<32-_:C.i(D+A);return new o(N,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Fs=o}).apply(typeof TT<"u"?TT:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VR,LR,wl,OR,Th,Hg,FR,UR,jR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,v){return c==Array.prototype||c==Object.prototype||(c[p]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var v=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var $=c[b];if(!($ in v))break e;v=v[$]}c=c[c.length-1],b=v[c],p=p(b),p!=b&&p!=null&&e(v,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var v=0,b=!1,$={next:function(){if(!b&&v<c.length){var H=v++;return{value:p(H,c[H]),done:!1}}return b=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(c){return c||function(){return s(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,v){return c.call.apply(c.bind,arguments)}function d(c,p,v){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,b),c.apply(p,$)}}return function(){return c.apply(p,arguments)}}function f(c,p,v){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function E(c,p){function v(){}v.prototype=p.prototype,c.aa=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(b,$,H){for(var J=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)J[Ne-2]=arguments[Ne];return p.prototype[$].apply(b,J)}}function w(c){const p=c.length;if(0<p){const v=Array(p);for(let b=0;b<p;b++)v[b]=c[b];return v}return[]}function x(c,p){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(l(b)){const $=c.length||0,H=b.length||0;c.length=$+H;for(let J=0;J<H;J++)c[$+J]=b[J]}else c.push(b)}}class g{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(c){return/^[\s\xa0]*$/.test(c)}function S(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function I(c){return I[" "](c),c}I[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(c,p,v){for(const b in c)p.call(v,c[b],b,c)}function C(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function _(c){const p={};for(const v in c)p[v]=c[v];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,p){let v,b;for(let $=1;$<arguments.length;$++){b=arguments[$];for(v in b)c[v]=b[v];for(let H=0;H<A.length;H++)v=A[H],Object.prototype.hasOwnProperty.call(b,v)&&(c[v]=b[v])}}function N(c){var p=1;c=c.split(":");const v=[];for(;0<p&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function D(c){a.setTimeout(()=>{throw c},0)}function P(){var c=O;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class V{constructor(){this.h=this.g=null}add(p,v){const b=U.get();b.set(p,v),this.h?this.h.next=b:this.g=b,this.h=b}}var U=new g(()=>new j,c=>c.reset());class j{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let z,F=!1,O=new V,B=()=>{const c=a.Promise.resolve(void 0);z=()=>{c.then(W)}};var W=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(v){D(v)}var p=U;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}F=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};a.addEventListener("test",v,p),a.removeEventListener("test",v,p)}catch{}return c}();function oe(c,p){if(Q.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(R){e:{try{I(p.nodeName);var $=!0;break e}catch{}$=!1}$||(p=null)}}else v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:se[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&oe.aa.h.call(this)}}E(oe,Q);var se={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),we=0;function ke(c,p,v,b,$){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!b,this.ha=$,this.key=++we,this.da=this.fa=!1}function me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function He(c){this.src=c,this.g={},this.h=0}He.prototype.add=function(c,p,v,b,$){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var J=xt(c,p,b,$);return-1<J?(p=c[J],v||(p.fa=!1)):(p=new ke(p,this.src,H,!!b,$),p.fa=v,c.push(p)),p};function We(c,p){var v=p.type;if(v in c.g){var b=c.g[v],$=Array.prototype.indexOf.call(b,p,void 0),H;(H=0<=$)&&Array.prototype.splice.call(b,$,1),H&&(me(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function xt(c,p,v,b){for(var $=0;$<c.length;++$){var H=c[$];if(!H.da&&H.listener==p&&H.capture==!!v&&H.ha==b)return $}return-1}var Ce="closure_lm_"+(1e6*Math.random()|0),ct={};function Ee(c,p,v,b,$){if(Array.isArray(p)){for(var H=0;H<p.length;H++)Ee(c,p[H],v,b,$);return null}return v=Yn(v),c&&c[pe]?c.K(p,v,u(b)?!!b.capture:!!b,$):ht(c,p,v,!1,b,$)}function ht(c,p,v,b,$,H){if(!p)throw Error("Invalid event type");var J=u($)?!!$.capture:!!$,Ne=hn(c);if(Ne||(c[Ce]=Ne=new He(c)),v=Ne.add(p,v,b,J,H),v.proxy)return v;if(b=ie(),v.proxy=b,b.src=c,b.listener=v,c.addEventListener)ee||($=J),$===void 0&&($=!1),c.addEventListener(p.toString(),b,$);else if(c.attachEvent)c.attachEvent(Sn(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ie(){function c(v){return p.call(c.src,c.listener,v)}const p=Tn;return c}function cn(c,p,v,b,$){if(Array.isArray(p))for(var H=0;H<p.length;H++)cn(c,p[H],v,b,$);else b=u(b)?!!b.capture:!!b,v=Yn(v),c&&c[pe]?(c=c.i,p=String(p).toString(),p in c.g&&(H=c.g[p],v=xt(H,v,b,$),-1<v&&(me(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete c.g[p],c.h--)))):c&&(c=hn(c))&&(p=c.g[p.toString()],c=-1,p&&(c=xt(p,v,b,$)),(v=-1<c?p[c]:null)&&st(v))}function st(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[pe])We(p.i,c);else{var v=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(v,b,c.capture):p.detachEvent?p.detachEvent(Sn(v),b):p.addListener&&p.removeListener&&p.removeListener(b),(v=hn(p))?(We(v,c),v.h==0&&(v.src=null,p[Ce]=null)):me(c)}}}function Sn(c){return c in ct?ct[c]:ct[c]="on"+c}function Tn(c,p){if(c.da)c=!0;else{p=new oe(p,this);var v=c.listener,b=c.ha||c.src;c.fa&&st(c),c=v.call(b,p)}return c}function hn(c){return c=c[Ce],c instanceof He?c:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yn(c){return typeof c=="function"?c:(c[en]||(c[en]=function(p){return c.handleEvent(p)}),c[en])}function be(){K.call(this),this.i=new He(this),this.M=this,this.F=null}E(be,K),be.prototype[pe]=!0,be.prototype.removeEventListener=function(c,p,v,b){cn(this,c,p,v,b)};function Ae(c,p){var v,b=c.F;if(b)for(v=[];b;b=b.F)v.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new Q(p,c);else if(p instanceof Q)p.target=p.target||c;else{var $=p;p=new Q(b,c),k(p,$)}if($=!0,v)for(var H=v.length-1;0<=H;H--){var J=p.g=v[H];$=It(J,b,!0,p)&&$}if(J=p.g=c,$=It(J,b,!0,p)&&$,$=It(J,b,!1,p)&&$,v)for(H=0;H<v.length;H++)J=p.g=v[H],$=It(J,b,!1,p)&&$}be.prototype.N=function(){if(be.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var v=c.g[p],b=0;b<v.length;b++)me(v[b]);delete c.g[p],c.h--}}this.F=null},be.prototype.K=function(c,p,v,b){return this.i.add(String(c),p,!1,v,b)},be.prototype.L=function(c,p,v,b){return this.i.add(String(c),p,!0,v,b)};function It(c,p,v,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var $=!0,H=0;H<p.length;++H){var J=p[H];if(J&&!J.da&&J.capture==v){var Ne=J.listener,At=J.ha||J.src;J.fa&&We(c.i,J),$=Ne.call(At,b)!==!1&&$}}return $&&!b.defaultPrevented}function tn(c,p,v){if(typeof c=="function")v&&(c=f(c,v));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function Je(c){c.g=tn(()=>{c.g=null,c.i&&(c.i=!1,Je(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class $e extends K{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Je(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(c){K.call(this),this.h=c,this.g={}}E(Ft,K);var Ln=[];function On(c){M(c.g,function(p,v){this.g.hasOwnProperty(v)&&st(p)},c),c.g={}}Ft.prototype.N=function(){Ft.aa.N.call(this),On(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ut=a.JSON.stringify,dn=a.JSON.parse,hr=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Dr(){}Dr.prototype.h=null;function dr(c){return c.h||(c.h=c.i())}function mi(){}var Me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oe(){Q.call(this,"d")}E(Oe,Q);function dt(){Q.call(this,"c")}E(dt,Q);var vt={},Ct=null;function _t(){return Ct=Ct||new be}vt.La="serverreachability";function nn(c){Q.call(this,vt.La,c)}E(nn,Q);function fn(c){const p=_t();Ae(p,new nn(p))}vt.STAT_EVENT="statevent";function jt(c,p){Q.call(this,vt.STAT_EVENT,c),this.stat=p}E(jt,Q);function Ke(c){const p=_t();Ae(p,new jt(p,c))}vt.Ma="timingevent";function fr(c,p){Q.call(this,vt.Ma,c),this.size=p}E(fr,Q);function Fn(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function so(c,p,v,b,$,H){c.info(function(){if(c.g)if(H)for(var J="",Ne=H.split("&"),At=0;At<Ne.length;At++){var xe=Ne[At].split("=");if(1<xe.length){var $t=xe[0];xe=xe[1];var Bt=$t.split("_");J=2<=Bt.length&&Bt[1]=="type"?J+($t+"="+xe+"&"):J+($t+"=redacted&")}}else J=null;else J=H;return"XMLHTTP REQ ("+b+") [attempt "+$+"]: "+p+`
`+v+`
`+J})}function Mr(c,p,v,b,$,H,J){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+$+"]: "+p+`
`+v+`
`+H+" "+J})}function rn(c,p,v,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Uf(c,v)+(b?" "+b:"")})}function ps(c,p){c.info(function(){return"TIMEOUT: "+p})}Un.prototype.info=function(){};function Uf(c,p){if(!c.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var b=v[c];if(!(2>b.length)){var $=b[1];if(Array.isArray($)&&!(1>$.length)){var H=$[0];if(H!="noop"&&H!="stop"&&H!="close")for(var J=1;J<$.length;J++)$[J]=""}}}}return Ut(v)}catch{return p}}var oo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},La;function ao(){}E(ao,Dr),ao.prototype.g=function(){return new XMLHttpRequest},ao.prototype.i=function(){return{}},La=new ao;function pr(c,p,v,b){this.j=c,this.i=p,this.l=v,this.R=b||1,this.U=new Ft(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uc}function uc(){this.i=null,this.g="",this.h=!1}var Oa={},Fa={};function Ua(c,p,v){c.L=1,c.v=pc(Lr(p)),c.m=v,c.P=!0,cc(c,null)}function cc(c,p){c.F=Date.now(),lo(c),c.A=Lr(c.v);var v=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),d_(v.i,"t",b),c.C=0,v=c.j.J,c.h=new uc,c.g=k_(c.j,v?p:null,!c.m),0<c.O&&(c.M=new $e(f(c.Y,c,c.g),c.O)),p=c.U,v=c.g,b=c.ca;var $="readystatechange";Array.isArray($)||($&&(Ln[0]=$.toString()),$=Ln);for(var H=0;H<$.length;H++){var J=Ee(v,$[H],b||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),fn(),so(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;const p=this.M;p&&Or(c)==3?p.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{const Bt=Or(this.g);var p=this.g.Ba();const ho=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||__(this.g)))){this.J||Bt!=4||p==7||(p==8||0>=ho?fn(3):fn(2)),$a(this);var v=this.g.Z();this.X=v;t:if(hc(this)){var b=__(this.g);c="";var $=b.length,H=Or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),ms(this);var J="";break t}this.h.i=new a.TextDecoder}for(p=0;p<$;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(H&&p==$-1)});b.length=0,this.h.g+=c,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=v==200,Mr(this.i,this.u,this.A,this.l,this.R,Bt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,At=this.g;if((Ne=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ne)){var xe=Ne;break t}}xe=null}if(v=xe)rn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gs(this,v);else{this.o=!1,this.s=3,Ke(12),Vr(this),ms(this);break e}}if(this.P){v=!0;let Qn;for(;!this.J&&this.C<J.length;)if(Qn=jf(this,J),Qn==Fa){Bt==4&&(this.s=4,Ke(14),v=!1),rn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==Oa){this.s=4,Ke(15),rn(this.i,this.l,J,"[Invalid Chunk]"),v=!1;break}else rn(this.i,this.l,Qn,null),gs(this,Qn);if(hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||J.length!=0||this.h.h||(this.s=1,Ke(16),v=!1),this.o=this.o&&v,!v)rn(this.i,this.l,J,"[Invalid Chunked Response]"),Vr(this),ms(this);else if(0<J.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Kf($t),$t.M=!0,Ke(11))}}else rn(this.i,this.l,J,null),gs(this,J);Bt==4&&Vr(this),this.o&&!this.J&&(Bt==4?C_(this.j,this):(this.o=!1,lo(this)))}else qb(this.g),v==400&&0<J.indexOf("Unknown SID")?(this.s=3,Ke(12)):(this.s=0,Ke(13)),Vr(this),ms(this)}}}catch{}finally{}};function hc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function jf(c,p){var v=c.C,b=p.indexOf(`
`,v);return b==-1?Fa:(v=Number(p.substring(v,b)),isNaN(v)?Oa:(b+=1,b+v>p.length?Fa:(p=p.slice(b,b+v),c.C=b+v,p)))}pr.prototype.cancel=function(){this.J=!0,Vr(this)};function lo(c){c.S=Date.now()+c.I,ja(c,c.I)}function ja(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fn(f(c.ba,c),p)}function $a(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ps(this.i,this.A),this.L!=2&&(fn(),Ke(17)),Vr(this),this.s=2,ms(this)):ja(this,this.S-c)};function ms(c){c.j.G==0||c.J||C_(c.j,c)}function Vr(c){$a(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,On(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function gs(c,p){try{var v=c.j;if(v.G!=0&&(v.g==c||$f(v.h,c))){if(!c.K&&$f(v.h,c)&&v.G==3){try{var b=v.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var $=b;if($[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)_c(v),yc(v);else break e;Wf(v),Ke(18)}}else v.za=$[1],0<v.za-v.T&&37500>$[2]&&v.F&&v.v==0&&!v.C&&(v.C=Fn(f(v.Za,v),6e3));if(1>=r_(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else vs(v,11)}else if((c.K||v.g==c)&&_c(v),!y(p))for($=v.Da.g.parse(p),p=0;p<$.length;p++){let xe=$[p];if(v.T=xe[0],xe=xe[1],v.G==2)if(xe[0]=="c"){v.K=xe[1],v.ia=xe[2];const $t=xe[3];$t!=null&&(v.la=$t,v.j.info("VER="+v.la));const Bt=xe[4];Bt!=null&&(v.Aa=Bt,v.j.info("SVER="+v.Aa));const ho=xe[5];ho!=null&&typeof ho=="number"&&0<ho&&(b=1.5*ho,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Qn=c.g;if(Qn){const Ec=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ec){var H=b.h;H.g||Ec.indexOf("spdy")==-1&&Ec.indexOf("quic")==-1&&Ec.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Bf(H,H.h),H.h=null))}if(b.D){const Gf=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gf&&(b.ya=Gf,Fe(b.I,b.D,Gf))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var J=c;if(b.qa=R_(b,b.J?b.ia:null,b.W),J.K){i_(b.h,J);var Ne=J,At=b.L;At&&(Ne.I=At),Ne.B&&($a(Ne),lo(Ne)),b.g=J}else x_(b);0<v.i.length&&vc(v)}else xe[0]!="stop"&&xe[0]!="close"||vs(v,7);else v.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?vs(v,7):Hf(v):xe[0]!="noop"&&v.l&&v.l.ta(xe),v.v=0)}}fn(4)}catch{}}var Nb=class{constructor(c,p){this.g=c,this.map=p}};function t_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function n_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function r_(c){return c.h?1:c.g?c.g.size:0}function $f(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Bf(c,p){c.g?c.g.add(p):c.h=p}function i_(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}t_.prototype.cancel=function(){if(this.i=s_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function s_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.D);return p}return w(c.i)}function Db(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],v=c.length,b=0;b<v;b++)p.push(c[b]);return p}p=[],v=0;for(b in c)p[v++]=c[b];return p}function Mb(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var v=0;v<c;v++)p.push(v);return p}p=[],v=0;for(const b in c)p[v++]=b;return p}}}function o_(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var v=Mb(c),b=Db(c),$=b.length,H=0;H<$;H++)p.call(void 0,b[H],v&&v[H],c)}var a_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vb(c,p){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var b=c[v].indexOf("="),$=null;if(0<=b){var H=c[v].substring(0,b);$=c[v].substring(b+1)}else H=c[v];p(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ys(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ys){this.h=c.h,dc(this,c.j),this.o=c.o,this.g=c.g,fc(this,c.s),this.l=c.l;var p=c.i,v=new Ha;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),l_(this,v),this.m=c.m}else c&&(p=String(c).match(a_))?(this.h=!1,dc(this,p[1]||"",!0),this.o=Ba(p[2]||""),this.g=Ba(p[3]||"",!0),fc(this,p[4]),this.l=Ba(p[5]||"",!0),l_(this,p[6]||"",!0),this.m=Ba(p[7]||"")):(this.h=!1,this.i=new Ha(null,this.h))}ys.prototype.toString=function(){var c=[],p=this.j;p&&c.push(za(p,u_,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(za(p,u_,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(za(v,v.charAt(0)=="/"?Fb:Ob,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",za(v,jb)),c.join("")};function Lr(c){return new ys(c)}function dc(c,p,v){c.j=v?Ba(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function fc(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function l_(c,p,v){p instanceof Ha?(c.i=p,$b(c.i,c.h)):(v||(p=za(p,Ub)),c.i=new Ha(p,c.h))}function Fe(c,p,v){c.i.set(p,v)}function pc(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ba(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function za(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,Lb),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Lb(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var u_=/[#\/\?@]/g,Ob=/[#\?:]/g,Fb=/[#\?]/g,Ub=/[#\?@]/g,jb=/#/g;function Ha(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function gi(c){c.g||(c.g=new Map,c.h=0,c.i&&Vb(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=Ha.prototype,t.add=function(c,p){gi(this),this.i=null,c=uo(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function c_(c,p){gi(c),p=uo(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function h_(c,p){return gi(c),p=uo(c,p),c.g.has(p)}t.forEach=function(c,p){gi(this),this.g.forEach(function(v,b){v.forEach(function($){c.call(p,$,b,this)},this)},this)},t.na=function(){gi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let b=0;b<p.length;b++){const $=c[b];for(let H=0;H<$.length;H++)v.push(p[b])}return v},t.V=function(c){gi(this);let p=[];if(typeof c=="string")h_(this,c)&&(p=p.concat(this.g.get(uo(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)p=p.concat(c[v])}return p},t.set=function(c,p){return gi(this),this.i=null,c=uo(this,c),h_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function d_(c,p,v){c_(c,p),0<v.length&&(c.i=null,c.g.set(uo(c,p),w(v)),c.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var b=p[v];const H=encodeURIComponent(String(b)),J=this.V(b);for(b=0;b<J.length;b++){var $=H;J[b]!==""&&($+="="+encodeURIComponent(String(J[b]))),c.push($)}}return this.i=c.join("&")};function uo(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function $b(c,p){p&&!c.j&&(gi(c),c.i=null,c.g.forEach(function(v,b){var $=b.toLowerCase();b!=$&&(c_(this,b),d_(this,$,v))},c)),c.j=p}function Bb(c,p){const v=new Un;if(a.Image){const b=new Image;b.onload=m(yi,v,"TestLoadImage: loaded",!0,p,b),b.onerror=m(yi,v,"TestLoadImage: error",!1,p,b),b.onabort=m(yi,v,"TestLoadImage: abort",!1,p,b),b.ontimeout=m(yi,v,"TestLoadImage: timeout",!1,p,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function zb(c,p){const v=new Un,b=new AbortController,$=setTimeout(()=>{b.abort(),yi(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(H=>{clearTimeout($),H.ok?yi(v,"TestPingServer: ok",!0,p):yi(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout($),yi(v,"TestPingServer: error",!1,p)})}function yi(c,p,v,b,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),b(v)}catch{}}function Hb(){this.g=new hr}function Wb(c,p,v){const b=v||"";try{o_(c,function($,H){let J=$;u($)&&(J=Ut($)),p.push(b+H+"="+encodeURIComponent(J))})}catch($){throw p.push(b+"type="+encodeURIComponent("_badmap")),$}}function Wa(c){this.l=c.Ub||null,this.j=c.eb||!1}E(Wa,Dr),Wa.prototype.g=function(){return new mc(this.l,this.j)},Wa.prototype.i=function(c){return function(){return c}}({});function mc(c,p){be.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(mc,be),t=mc.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ga(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ga(this)),this.g&&(this.readyState=3,Ga(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;f_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function f_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ka(this):Ga(this),this.readyState==3&&f_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ka(this))},t.Qa=function(c){this.g&&(this.response=c,Ka(this))},t.ga=function(){this.g&&Ka(this)};function Ka(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ga(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function Ga(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function p_(c){let p="";return M(c,function(v,b){p+=b,p+=":",p+=v,p+=`\r
`}),p}function zf(c,p,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=p_(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Fe(c,p,v))}function Ze(c){be.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ze,be);var Kb=/^https?$/i,Gb=["POST","PUT"];t=Ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():La.g(),this.v=this.o?dr(this.o):dr(La),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(H){m_(this,H);return}if(c=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var $ in b)v.set($,b[$]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const H of b.keys())v.set(H,b.get(H));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),$=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Gb,p,void 0))||b||$||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,J]of v)this.g.setRequestHeader(H,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v_(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){m_(this,H)}};function m_(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,g_(c),gc(c)}function g_(c){c.A||(c.A=!0,Ae(c,"complete"),Ae(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ae(this,"complete"),Ae(this,"abort"),gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gc(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?y_(this):this.bb())},t.bb=function(){y_(this)};function y_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Or(c)!=4||c.Z()!=2)){if(c.u&&Or(c)==4)tn(c.Ea,0,c);else if(Ae(c,"readystatechange"),Or(c)==4){c.h=!1;try{const J=c.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var b;if(b=J===0){var $=String(c.D).match(a_)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),b=!Kb.test($?$.toLowerCase():"")}v=b}if(v)Ae(c,"complete"),Ae(c,"success");else{c.m=6;try{var H=2<Or(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",g_(c)}}finally{gc(c)}}}}function gc(c,p){if(c.g){v_(c);const v=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Ae(c,"ready");try{v.onreadystatechange=b}catch{}}}function v_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Or(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Or(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),dn(p)}};function __(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qb(c){const p={};c=(c.g&&2<=Or(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(y(c[b]))continue;var v=N(c[b]);const $=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=p[$]||[];p[$]=H,H.push(v)}C(p,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qa(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function w_(c){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qa("baseRetryDelayMs",5e3,c),this.cb=qa("retryDelaySeedMs",1e4,c),this.Wa=qa("forwardChannelMaxRetries",2,c),this.wa=qa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new t_(c&&c.concurrentRequestLimit),this.Da=new Hb,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=w_.prototype,t.la=8,t.G=1,t.connect=function(c,p,v,b){Ke(0),this.W=c,this.H=p||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=R_(this,null,this.W),vc(this)};function Hf(c){if(E_(c),c.G==3){var p=c.U++,v=Lr(c.I);if(Fe(v,"SID",c.K),Fe(v,"RID",p),Fe(v,"TYPE","terminate"),Xa(c,v),p=new pr(c,c.j,p),p.L=2,p.v=pc(Lr(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=p.v,v=!0),v||(p.g=k_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),lo(p)}P_(c)}function yc(c){c.g&&(Kf(c),c.g.cancel(),c.g=null)}function E_(c){yc(c),c.u&&(a.clearTimeout(c.u),c.u=null),_c(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function vc(c){if(!n_(c.h)&&!c.s){c.s=!0;var p=c.Ga;z||B(),F||(z(),F=!0),O.add(p,c),c.B=0}}function Xb(c,p){return r_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fn(f(c.Ga,c,p),A_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new pr(this,this.j,c);let H=this.o;if(this.S&&(H?(H=_(H),k(H,this.S)):H=this.S),this.m!==null||this.O||($.H=H,H=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=T_(this,$,p),v=Lr(this.I),Fe(v,"RID",c),Fe(v,"CVER",22),this.D&&Fe(v,"X-HTTP-Session-Id",this.D),Xa(this,v),H&&(this.O?p="headers="+encodeURIComponent(String(p_(H)))+"&"+p:this.m&&zf(v,this.m,H)),Bf(this.h,$),this.Ua&&Fe(v,"TYPE","init"),this.P?(Fe(v,"$req",p),Fe(v,"SID","null"),$.T=!0,Ua($,v,null)):Ua($,v,p),this.G=2}}else this.G==3&&(c?S_(this,c):this.i.length==0||n_(this.h)||S_(this))};function S_(c,p){var v;p?v=p.l:v=c.U++;const b=Lr(c.I);Fe(b,"SID",c.K),Fe(b,"RID",v),Fe(b,"AID",c.T),Xa(c,b),c.m&&c.o&&zf(b,c.m,c.o),v=new pr(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),p&&(c.i=p.D.concat(c.i)),p=T_(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Bf(c.h,v),Ua(v,b,p)}function Xa(c,p){c.H&&M(c.H,function(v,b){Fe(p,b,v)}),c.l&&o_({},function(v,b){Fe(p,b,v)})}function T_(c,p,v){v=Math.min(c.i.length,v);var b=c.l?f(c.l.Na,c.l,c):null;e:{var $=c.i;let H=-1;for(;;){const J=["count="+v];H==-1?0<v?(H=$[0].g,J.push("ofs="+H)):H=0:J.push("ofs="+H);let Ne=!0;for(let At=0;At<v;At++){let xe=$[At].g;const $t=$[At].map;if(xe-=H,0>xe)H=Math.max(0,$[At].g-100),Ne=!1;else try{Wb($t,J,"req"+xe+"_")}catch{b&&b($t)}}if(Ne){b=J.join("&");break e}}}return c=c.i.splice(0,v),p.D=c,b}function x_(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;z||B(),F||(z(),F=!0),O.add(p,c),c.v=0}}function Wf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fn(f(c.Fa,c),A_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,I_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fn(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ke(10),yc(this),I_(this))};function Kf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function I_(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Lr(c.qa);Fe(p,"RID","rpc"),Fe(p,"SID",c.K),Fe(p,"AID",c.T),Fe(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(p,"TO",c.ja),Fe(p,"TYPE","xmlhttp"),Xa(c,p),c.m&&c.o&&zf(p,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=pc(Lr(p)),v.m=null,v.P=!0,cc(v,c)}t.Za=function(){this.C!=null&&(this.C=null,yc(this),Wf(this),Ke(19))};function _c(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function C_(c,p){var v=null;if(c.g==p){_c(c),Kf(c),c.g=null;var b=2}else if($f(c.h,p))v=p.D,i_(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var $=c.B;b=_t(),Ae(b,new fr(b,v)),vc(c)}else x_(c);else if($=p.s,$==3||$==0&&0<p.X||!(b==1&&Xb(c,p)||b==2&&Wf(c)))switch(v&&0<v.length&&(p=c.h,p.i=p.i.concat(v)),$){case 1:vs(c,5);break;case 4:vs(c,10);break;case 3:vs(c,6);break;default:vs(c,2)}}}function A_(c,p){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*p}function vs(c,p){if(c.j.info("Error code "+p),p==2){var v=f(c.fb,c),b=c.Xa;const $=!b;b=new ys(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dc(b,"https"),pc(b),$?Bb(b.toString(),v):zb(b.toString(),v)}else Ke(2);c.G=0,c.l&&c.l.sa(p),P_(c),E_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function P_(c){if(c.G=0,c.ka=[],c.l){const p=s_(c.h);(p.length!=0||c.i.length!=0)&&(x(c.ka,p),x(c.ka,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.ra()}}function R_(c,p,v){var b=v instanceof ys?Lr(v):new ys(v);if(b.g!="")p&&(b.g=p+"."+b.g),fc(b,b.s);else{var $=a.location;b=$.protocol,p=p?p+"."+$.hostname:$.hostname,$=+$.port;var H=new ys(null);b&&dc(H,b),p&&(H.g=p),$&&fc(H,$),v&&(H.l=v),b=H}return v=c.D,p=c.ya,v&&p&&Fe(b,v,p),Fe(b,"VER",c.la),Xa(c,b),b}function k_(c,p,v){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ze(new Wa({eb:v})):new Ze(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function b_(){}t=b_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wc(){}wc.prototype.g=function(c,p){return new xn(c,p)};function xn(c,p){be.call(this),this.g=new w_(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!y(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new co(this)}E(xn,be),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Hf(this.g)},xn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Ut(c),c=v);p.i.push(new Nb(p.Ya++,c)),p.G==3&&vc(p)},xn.prototype.N=function(){this.g.l=null,delete this.j,Hf(this.g),delete this.g,xn.aa.N.call(this)};function N_(c){Oe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const v in p){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}E(N_,Oe);function D_(){dt.call(this),this.status=1}E(D_,dt);function co(c){this.g=c}E(co,b_),co.prototype.ua=function(){Ae(this.g,"a")},co.prototype.ta=function(c){Ae(this.g,new N_(c))},co.prototype.sa=function(c){Ae(this.g,new D_)},co.prototype.ra=function(){Ae(this.g,"b")},wc.prototype.createWebChannel=wc.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,jR=function(){return new wc},UR=function(){return _t()},FR=vt,Hg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oo.NO_ERROR=0,oo.TIMEOUT=8,oo.HTTP_ERROR=6,Th=oo,lc.COMPLETE="complete",OR=lc,mi.EventType=Me,Me.OPEN="a",Me.CLOSE="b",Me.ERROR="c",Me.MESSAGE="d",be.prototype.listen=be.prototype.K,wl=mi,LR=Wa,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,VR=Ze}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const xT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na="10.13.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new u0("@firebase/firestore");function cl(){return qs.logLevel}function ne(t,...e){if(qs.logLevel<=_e.DEBUG){const n=e.map(d0);qs.debug(`Firestore (${Na}): ${t}`,...n)}}function ci(t,...e){if(qs.logLevel<=_e.ERROR){const n=e.map(d0);qs.error(`Firestore (${Na}): ${t}`,...n)}}function ga(t,...e){if(qs.logLevel<=_e.WARN){const n=e.map(d0);qs.warn(`Firestore (${Na}): ${t}`,...n)}}function d0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: `+t;throw ci(e),new Error(e)}function De(t,e){t||he()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class M6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class V6{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ji,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ji)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new $R(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Gt(e)}}class L6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class O6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new L6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new F6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=j6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function ya(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new yt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new yt(0,0))}static max(){return new de(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(),r===void 0?r=e.length-n:r>e.length-n&&he(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Tu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class tt extends Tu{construct(e,n,r){return new tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const $6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Tu{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return $6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ae(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ae(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ae(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ae(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(tt.fromString(e))}static fromName(e){return new le(tt.fromString(e).popFirst(5))}static empty(){return new le(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new tt(e.slice()))}}function B6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new yt(n+1,0):new yt(n,r));return new is(i,le.empty(),e)}function z6(t){return new is(t.readTime,t.key,-1)}class is{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new is(de.min(),le.empty(),-1)}static max(){return new is(de.max(),le.empty(),-1)}}function H6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==W6)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function G6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ec(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}f0.oe=-1;function Sf(t){return t==null}function Cd(t){return t===0&&1/t==-1/0}function q6(t){return typeof t=="number"&&Number.isInteger(t)&&!Cd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}}class Jc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,r,i,s){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new CT(this.data.getIterator())}getIteratorFrom(e){return new CT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class CT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new An([])}unionWith(e){let n=new Dt(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ya(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HR("Invalid base64 string: "+s):s}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const X6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(t){if(De(!!t),typeof t=="string"){let e=0;const n=X6.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xs(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function m0(t){const e=t.mapValue.fields.__previous_value__;return p0(e)?m0(e):e}function xu(t){const e=ss(t.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Iu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?p0(t)?4:J6(t)?9007199254740991:Q6(t)?10:11:he()}function Rr(t,e){if(t===e)return!0;const n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xu(t).isEqual(xu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ss(i.timestampValue),a=ss(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xs(i.bytesValue).isEqual(Xs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return rt(i.geoPointValue.latitude)===rt(s.geoPointValue.latitude)&&rt(i.geoPointValue.longitude)===rt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return rt(i.integerValue)===rt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=rt(i.doubleValue),a=rt(s.doubleValue);return o===a?Cd(o)===Cd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ya(t.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IT(o)!==IT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Rr(o[l],a[l])))return!1;return!0}(t,e);default:return he()}}function Cu(t,e){return(t.values||[]).find(n=>Rr(n,e))!==void 0}function va(t,e){if(t===e)return 0;const n=Ys(t),r=Ys(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=rt(s.integerValue||s.doubleValue),l=rt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return AT(t.timestampValue,e.timestampValue);case 4:return AT(xu(t),xu(e));case 5:return Ie(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Xs(s),l=Xs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ie(a[u],l[u]);if(h!==0)return h}return Ie(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ie(rt(s.latitude),rt(o.latitude));return a!==0?a:Ie(rt(s.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return PT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,E=(l=f.value)===null||l===void 0?void 0:l.arrayValue,w=Ie(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:PT(m,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zc.mapValue&&o===Zc.mapValue)return 0;if(s===Zc.mapValue)return 1;if(o===Zc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Ie(l[d],h[d]);if(f!==0)return f;const m=va(a[l[d]],u[h[d]]);if(m!==0)return m}return Ie(l.length,h.length)}(t.mapValue,e.mapValue);default:throw he()}}function AT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=ss(t),r=ss(e),i=Ie(n.seconds,r.seconds);return i!==0?i:Ie(n.nanos,r.nanos)}function PT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=va(n[i],r[i]);if(s)return s}return Ie(n.length,r.length)}function _a(t){return Wg(t)}function Wg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Wg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Wg(n.fields[o])}`;return i+"}"}(t.mapValue):he()}function Kg(t){return!!t&&"integerValue"in t}function g0(t){return!!t&&"arrayValue"in t}function RT(t){return!!t&&"nullValue"in t}function kT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xh(t){return!!t&&"mapValue"in t}function Q6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ul(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ro(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ul(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ul(t.arrayValue.values[n]);return e}return Object.assign({},t)}function J6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ul(n)}setAll(e){let n=bt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ul(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ro(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mn(Ul(this.value))}}function WR(t){const e=[];return ro(t.fields,(n,r)=>{const i=new bt([n]);if(xh(r)){const s=WR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Xt(e,0,de.min(),de.min(),de.min(),mn.empty(),0)}static newFoundDocument(e,n,r,i){return new Xt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Xt(e,2,n,de.min(),de.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,de.min(),de.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.position=e,this.inclusive=n}}function bT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=va(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function NT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n="asc"){this.field=e,this.dir=n}}function Z6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{}class mt extends KR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tH(e,n,r):n==="array-contains"?new iH(e,r):n==="in"?new sH(e,r):n==="not-in"?new oH(e,r):n==="array-contains-any"?new aH(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nH(e,r):new rH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(va(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends KR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new kr(e,n)}matches(e){return GR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function GR(t){return t.op==="and"}function qR(t){return eH(t)&&GR(t)}function eH(t){for(const e of t.filters)if(e instanceof kr)return!1;return!0}function Gg(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+_a(t.value);if(qR(t))return t.filters.map(e=>Gg(e)).join(",");{const e=t.filters.map(n=>Gg(n)).join(",");return`${t.op}(${e})`}}function XR(t,e){return t instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&Rr(r.value,i.value)}(t,e):t instanceof kr?function(r,i){return i instanceof kr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XR(o,i.filters[a]),!0):!1}(t,e):void he()}function YR(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${_a(n.value)}`}(t):t instanceof kr?function(n){return n.op.toString()+" {"+n.getFilters().map(YR).join(" ,")+"}"}(t):"Filter"}class tH extends mt{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class nH extends mt{constructor(e,n){super(e,"in",n),this.keys=QR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rH extends mt{constructor(e,n){super(e,"not-in",n),this.keys=QR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class iH extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return g0(n)&&Cu(n.arrayValue,this.value)}}class sH extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cu(this.value.arrayValue,n)}}class oH extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Cu(this.value.arrayValue,n)}}class aH extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!g0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function DT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new lH(t,e,n,r,i,s,o)}function y0(t){const e=fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Sf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_a(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_a(r)).join(",")),e.ue=n}return e.ue}function v0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NT(t.startAt,e.startAt)&&NT(t.endAt,e.endAt)}function qg(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function uH(t,e,n,r,i,s,o,a){return new Tf(t,e,n,r,i,s,o,a)}function _0(t){return new Tf(t)}function MT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cH(t){return t.collectionGroup!==null}function jl(t){const e=fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dt(bt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Pd(s,r))}),n.has(bt.keyField().canonicalString())||e.ce.push(new Pd(bt.keyField(),r))}return e.ce}function xr(t){const e=fe(t);return e.le||(e.le=hH(e,jl(t))),e.le}function hH(t,e){if(t.limitType==="F")return DT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Pd(i.field,s)});const n=t.endAt?new Ad(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ad(t.startAt.position,t.startAt.inclusive):null;return DT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xg(t,e,n){return new Tf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xf(t,e){return v0(xr(t),xr(e))&&t.limitType===e.limitType}function JR(t){return`${y0(xr(t))}|lt:${t.limitType}`}function vo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>YR(i)).join(", ")}]`),Sf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>_a(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>_a(i)).join(",")),`Target(${r})`}(xr(t))}; limitType=${t.limitType})`}function If(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of jl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=bT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,jl(r),i)||r.endAt&&!function(o,a,l){const u=bT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,jl(r),i))}(t,e)}function dH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZR(t){return(e,n)=>{let r=!1;for(const i of jl(t)){const s=fH(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function fH(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?va(l,u):he()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return zR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=new Qe(le.comparator);function hi(){return pH}const ek=new Qe(le.comparator);function El(...t){let e=ek;for(const n of t)e=e.insert(n.key,n);return e}function tk(t){let e=ek;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ns(){return $l()}function nk(){return $l()}function $l(){return new Da(t=>t.toString(),(t,e)=>t.isEqual(e))}const mH=new Qe(le.comparator),gH=new Dt(le.comparator);function ye(...t){let e=gH;for(const n of t)e=e.add(n);return e}const yH=new Dt(Ie);function vH(){return yH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function rk(t){return{integerValue:""+t}}function _H(t,e){return q6(e)?rk(e):w0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this._=void 0}}function wH(t,e,n){return t instanceof Rd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&p0(s)&&(s=m0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Au?sk(t,e):t instanceof Pu?ok(t,e):function(i,s){const o=ik(i,s),a=VT(o)+VT(i.Pe);return Kg(o)&&Kg(i.Pe)?rk(a):w0(i.serializer,a)}(t,e)}function EH(t,e,n){return t instanceof Au?sk(t,e):t instanceof Pu?ok(t,e):n}function ik(t,e){return t instanceof kd?function(r){return Kg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Rd extends Cf{}class Au extends Cf{constructor(e){super(),this.elements=e}}function sk(t,e){const n=ak(e);for(const r of t.elements)n.some(i=>Rr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Pu extends Cf{constructor(e){super(),this.elements=e}}function ok(t,e){let n=ak(e);for(const r of t.elements)n=n.filter(i=>!Rr(i,r));return{arrayValue:{values:n}}}class kd extends Cf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function VT(t){return rt(t.integerValue||t.doubleValue)}function ak(t){return g0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function SH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Au&&i instanceof Au||r instanceof Pu&&i instanceof Pu?ya(r.elements,i.elements,Rr):r instanceof kd&&i instanceof kd?Rr(r.Pe,i.Pe):r instanceof Rd&&i instanceof Rd}(t.transform,e.transform)}class TH{constructor(e,n){this.version=e,this.transformResults=n}}class Ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Af{}function lk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ck(t.key,Ir.none()):new tc(t.key,t.data,Ir.none());{const n=t.data,r=mn.empty();let i=new Dt(bt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fs(t.key,r,new An(i.toArray()),Ir.none())}}function xH(t,e,n){t instanceof tc?function(i,s,o){const a=i.value.clone(),l=OT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fs?function(i,s,o){if(!Ih(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=OT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(uk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bl(t,e,n,r){return t instanceof tc?function(s,o,a,l){if(!Ih(s.precondition,o))return a;const u=s.value.clone(),h=FT(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof fs?function(s,o,a,l){if(!Ih(s.precondition,o))return a;const u=FT(s.fieldTransforms,l,o),h=o.data;return h.setAll(uk(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Ih(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function IH(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ik(r.transform,i||null);s!=null&&(n===null&&(n=mn.empty()),n.set(r.field,s))}return n||null}function LT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ya(r,i,(s,o)=>SH(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tc extends Af{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fs extends Af{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function uk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function OT(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,EH(o,a,n[i]))}return r}function FT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,wH(s,o,e))}return r}class ck extends Af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CH extends Af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&xH(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=lk(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ya(this.mutations,e.mutations,(n,r)=>LT(n,r))&&ya(this.baseMutations,e.baseMutations,(n,r)=>LT(n,r))}}class E0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return mH}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new E0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Se;function kH(t){switch(t){default:return he();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function hk(t){if(t===void 0)return ci("GRPC error has no .code"),X.UNKNOWN;switch(t){case ot.OK:return X.OK;case ot.CANCELLED:return X.CANCELLED;case ot.UNKNOWN:return X.UNKNOWN;case ot.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case ot.INTERNAL:return X.INTERNAL;case ot.UNAVAILABLE:return X.UNAVAILABLE;case ot.UNAUTHENTICATED:return X.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case ot.NOT_FOUND:return X.NOT_FOUND;case ot.ALREADY_EXISTS:return X.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return X.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case ot.ABORTED:return X.ABORTED;case ot.OUT_OF_RANGE:return X.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return X.UNIMPLEMENTED;case ot.DATA_LOSS:return X.DATA_LOSS;default:return he()}}(Se=ot||(ot={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=new Fs([4294967295,4294967295],0);function UT(t){const e=bH().encode(t),n=new MR;return n.update(e),new Uint8Array(n.digest())}function jT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fs([n,r],0),new Fs([i,s],0)]}class S0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Sl(`Invalid padding: ${n}`);if(r<0)throw new Sl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Sl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Sl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Fs.fromNumber(r)));return i.compare(NH)===1&&(i=new Fs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=UT(e),[r,i]=jT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new S0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=UT(e),[r,i]=jT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pf(de.min(),i,new Qe(Ie),hi(),ye())}}class nc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nc(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class dk{constructor(e,n){this.targetId=e,this.me=n}}class fk{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $T{constructor(){this.fe=0,this.ge=zT(),this.pe=Lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he()}}),new nc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=zT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DH{constructor(e){this.Le=e,this.Be=new Map,this.ke=hi(),this.qe=BT(),this.Qe=new Qe(Ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(qg(s))if(r===0){const o=new le(s.path);this.Ue(n,o,Xt.newNoDocument(o,de.min()))}else De(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Xs(r).toUint8Array()}catch(l){if(l instanceof HR)return ga("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new S0(o,i,s)}catch(l){return ga(l instanceof Sl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qg(a.target)){const l=new le(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Xt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ye();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Pf(e,n,this.Qe,this.ke,r);return this.ke=hi(),this.qe=BT(),this.Qe=new Qe(Ie),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $T,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Dt(Ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $T),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function BT(){return new Qe(le.comparator)}function zT(){return new Qe(le.comparator)}const MH={asc:"ASCENDING",desc:"DESCENDING"},VH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LH={and:"AND",or:"OR"};class OH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yg(t,e){return t.useProto3Json||Sf(e)?e:{value:e}}function bd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FH(t,e){return bd(t,e.toTimestamp())}function Cr(t){return De(!!t),de.fromTimestamp(function(n){const r=ss(n);return new yt(r.seconds,r.nanos)}(t))}function T0(t,e){return Qg(t,e).canonicalString()}function Qg(t,e){const n=function(i){return new tt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mk(t){const e=tt.fromString(t);return De(wk(e)),e}function Jg(t,e){return T0(t.databaseId,e.path)}function em(t,e){const n=mk(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(yk(n))}function gk(t,e){return T0(t.databaseId,e)}function UH(t){const e=mk(t);return e.length===4?tt.emptyPath():yk(e)}function Zg(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yk(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HT(t,e,n){return{name:Jg(t,e),fields:n.value.mapValue.fields}}function jH(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(De(h===void 0||typeof h=="string"),Lt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?X.UNKNOWN:hk(u.code);return new ae(h,u.message||"")}(o);n=new fk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=em(t,r.document.name),s=Cr(r.document.updateTime),o=r.document.createTime?Cr(r.document.createTime):de.min(),a=new mn({mapValue:{fields:r.document.fields}}),l=Xt.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ch(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=em(t,r.document),s=r.readTime?Cr(r.readTime):de.min(),o=Xt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ch([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=em(t,r.document),s=r.removedTargetIds||[];n=new Ch([],s,i,null)}else{if(!("filter"in e))return he();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new RH(i,s),a=r.targetId;n=new dk(a,o)}}return n}function $H(t,e){let n;if(e instanceof tc)n={update:HT(t,e.key,e.value)};else if(e instanceof ck)n={delete:Jg(t,e.key)};else if(e instanceof fs)n={update:HT(t,e.key,e.data),updateMask:YH(e.fieldMask)};else{if(!(e instanceof CH))return he();n={verify:Jg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Rd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw he()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:FH(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he()}(t,e.precondition)),n}function BH(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Cr(i.updateTime):Cr(s);return o.isEqual(de.min())&&(o=Cr(s)),new TH(o,i.transformResults||[])}(n,e))):[]}function zH(t,e){return{documents:[gk(t,e.path)]}}function HH(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gk(t,i);const s=function(u){if(u.length!==0)return _k(kr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:_o(f.field),direction:GH(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Yg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function WH(t){let e=UH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=vk(d);return f instanceof kr&&qR(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(E){return new Pd(wo(E.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Sf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Ad(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new Ad(m,f)}(n.endAt)),uH(e,i,o,s,a,"F",l,u)}function KH(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wo(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wo(n.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=wo(n.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wo(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(n){return mt.create(wo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kr.create(n.compositeFilter.filters.map(r=>vk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he()}function GH(t){return MH[t]}function qH(t){return VH[t]}function XH(t){return LH[t]}function _o(t){return{fieldPath:t.canonicalString()}}function wo(t){return bt.fromServerFormat(t.fieldPath)}function _k(t){return t instanceof mt?function(n){if(n.op==="=="){if(kT(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NAN"}};if(RT(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kT(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NAN"}};if(RT(n.value))return{unaryFilter:{field:_o(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(n.field),op:qH(n.op),value:n.value}}}(t):t instanceof kr?function(n){const r=n.getFilters().map(i=>_k(i));return r.length===1?r[0]:{compositeFilter:{op:XH(n.op),filters:r}}}(t):he()}function YH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,r,i,s=de.min(),o=de.min(),a=Lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e){this.ct=e}}function JH(t){const e=WH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(){this.un=new eW}addToCollectionParentIndex(e,n){return this.un.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(is.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class eW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dt(tt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wa(0)}static kn(){return new wa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(){this.changes=new Da(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Bl(r.mutation,i,An.empty(),yt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=Ns();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=El();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hi();const o=$l(),a=function(){return $l()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof fs)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Bl(h.mutation,u,h.mutation.getFieldMask(),yt.now())):o.set(u.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new nW(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=$l();let i=new Qe((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||An.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(i.get(a.batchId)||ye()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=nk();h.forEach(f=>{if(!s.has(f)){const m=lk(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(Ns());let a=-1,l=s;return o.next(u=>q.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ye())).next(h=>({batchId:a,changes:tk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=El();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=El();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,l=>{const u=function(d,f){return new Tf(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Xt.newInvalidDocument(h)))});let a=El();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Bl(h.mutation,u,An.empty(),yt.now()),If(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Cr(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:JH(i.bundledQuery),readTime:Cr(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(){this.overlays=new Qe(le.comparator),this.Ir=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ns();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Ns(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Qe((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Ns(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ns(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PH(n,r));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.Tr=new Dt(wt.Er),this.dr=new Dt(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new wt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new tt([])),r=new wt(n,e),i=new wt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new tt([])),r=new wt(n,e),i=new wt(n,e+1);let s=ye();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new wt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Ie(e.wr,n.wr)}static Ar(e,n){return Ie(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Dt(wt.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AH(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new wt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wt(n,0),i=new wt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(Ie);return n.forEach(i=>{const s=new wt(i,0),o=new wt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new wt(new le(s),0);let a=new Dt(Ie);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(n.mutations,i=>{const s=new wt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new wt(n,0),i=this.br.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(e){this.Mr=e,this.docs=function(){return new Qe(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=hi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xt.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hi();const o=n.path,a=new le(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||H6(z6(h),r)<=0||(i.has(h.key)||If(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){he()}Or(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uW(this)}getSize(e){return q.resolve(this.size)}}class uW extends tW{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e){this.persistence=e,this.Nr=new Da(n=>y0(n),v0),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Lr=0,this.Br=new x0,this.targetCount=0,this.kr=wa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Kn(n),q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e,n){this.qr={},this.overlays={},this.Qr=new f0(0),this.Kr=!1,this.Kr=!0,this.$r=new oW,this.referenceDelegate=e(this),this.Ur=new cW(this),this.indexManager=new ZH,this.remoteDocumentCache=function(i){return new lW(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new QH(n),this.Gr=new iW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new aW(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new dW(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class dW extends K6{constructor(e){super(),this.currentSequenceNumber=e}}class I0{constructor(e){this.persistence=e,this.Jr=new x0,this.Yr=null}static Zr(e){return new I0(e)}get Xr(){if(this.Yr)return this.Yr;throw he()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const i=le.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return q.or([()=>q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new C0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return y5()?8:G6(Zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fW;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(cl()<=_e.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",vo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(cl()<=_e.DEBUG&&ne("QueryEngine","Query:",vo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(cl()<=_e.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",vo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):q.resolve())}Yi(e,n){if(MT(n))return q.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xg(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Xg(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return MT(n)||i.isEqual(de.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?q.resolve(null):(cl()<=_e.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vo(n)),this.rs(e,o,n,B6(i,-1)).next(a=>a))})}ts(e,n){let r=new Dt(ZR(e));return n.forEach((i,s)=>{If(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return cl()<=_e.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",vo(n)),this.Ji.getDocumentsMatchingQuery(e,n,is.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Qe(Ie),this._s=new Da(s=>y0(s),v0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rW(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gW(t,e,n,r){return new mW(t,e,n,r)}async function Ek(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ye();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function yW(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let m=q.resolve();return f.forEach(E=>{m=m.next(()=>h.getEntry(l,E)).next(w=>{const x=u.docVersions.get(E);De(x!==null),w.version.compareTo(x)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Sk(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vW(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Lt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(w,x,g){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=hi(),u=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(_W(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(de.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function _W(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hi();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function wW(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EW(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Oi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ey(t,e,n){const r=fe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ec(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function WT(t,e,n){const r=fe(t);let i=de.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=fe(l),f=d._s.get(h);return f!==void 0?q.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(r,o,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:ye())).next(a=>(SW(r,dH(e),a),{documents:a,Ts:s})))}function SW(t,e,n){let r=t.us.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class KT{constructor(){this.activeTargetIds=vH()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TW{constructor(){this.so=new KT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new KT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh=null;function tm(){return eh===null?eh=function(){return 268435456+Math.round(2147483648*Math.random())}():eh++,"0x"+eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class AW extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=tm(),l=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ga("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=IW[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=tm();return new Promise((o,a)=>{const l=new VR;l.setWithCredentials(!0),l.listenOnce(OR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Th.NO_ERROR:const h=l.getResponseJson();ne(Wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Th.TIMEOUT:ne(Wt,`RPC '${e}' ${s} timed out`),a(new ae(X.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const d=l.getStatus();if(ne(Wt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const E=function(x){const g=x.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(g)>=0?g:X.UNKNOWN}(m.status);a(new ae(E,m.message))}else a(new ae(X.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ae(X.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{ne(Wt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ne(Wt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=tm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jR(),a=UR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new LR({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ne(Wt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const E=new CW({Io:x=>{m?ne(Wt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(f||(ne(Wt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ne(Wt,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},To:()=>d.close()}),w=(x,g,y)=>{x.listen(g,S=>{try{y(S)}catch(I){setTimeout(()=>{throw I},0)}})};return w(d,wl.EventType.OPEN,()=>{m||(ne(Wt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),w(d,wl.EventType.CLOSE,()=>{m||(m=!0,ne(Wt,`RPC '${e}' stream ${i} transport closed`),E.So())}),w(d,wl.EventType.ERROR,x=>{m||(m=!0,ga(Wt,`RPC '${e}' stream ${i} transport errored:`,x),E.So(new ae(X.UNAVAILABLE,"The operation could not be completed")))}),w(d,wl.EventType.MESSAGE,x=>{var g;if(!m){const y=x.data[0];De(!!y);const S=y,I=S.error||((g=S[0])===null||g===void 0?void 0:g.error);if(I){ne(Wt,`RPC '${e}' stream ${i} received error:`,I);const R=I.status;let M=function(A){const k=ot[A];if(k!==void 0)return hk(k)}(R),C=I.message;M===void 0&&(M=X.INTERNAL,C="Unknown error status: "+R+" with message "+I.message),m=!0,E.So(new ae(M,C)),d.close()}else ne(Wt,`RPC '${e}' stream ${i} received:`,y),E.bo(y)}}),w(a,FR.STAT_EVENT,x=>{x.stat===Hg.PROXY?ne(Wt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Hg.NOPROXY&&ne(Wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return new OH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tk(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(ci(n.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ae(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PW extends xk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=jH(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Cr(o.readTime):de.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Zg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=qg(l)?{documents:zH(s,l)}:{query:HH(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pk(s,o.resumeToken);const u=Yg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=bd(s,o.snapshotVersion.toTimestamp());const u=Yg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=KH(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Zg(this.serializer),n.removeTarget=e,this.a_(n)}}class RW extends xk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=BH(e.writeResults,e.commitTime),r=Cr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Zg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$H(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Qg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(X.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Qg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(X.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class bW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ci(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{io(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=fe(l);u.L_.add(4),await rc(u),u.q_.set("Unknown"),u.L_.delete(4),await kf(u)}(this))})}),this.q_=new bW(r,i)}}async function kf(t){if(io(t))for(const e of t.B_)await e(!0)}async function rc(t){for(const e of t.B_)await e(!1)}function Ik(t,e){const n=fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),k0(n)?R0(n):Ma(n).r_()&&P0(n,e))}function A0(t,e){const n=fe(t),r=Ma(n);n.N_.delete(e),r.r_()&&Ck(n,e),n.N_.size===0&&(r.r_()?r.o_():io(n)&&n.q_.set("Unknown"))}function P0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ma(t).A_(e)}function Ck(t,e){t.Q_.xe(e),Ma(t).R_(e)}function R0(t){t.Q_=new DH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ma(t).start(),t.q_.v_()}function k0(t){return io(t)&&!Ma(t).n_()&&t.N_.size>0}function io(t){return fe(t).L_.size===0}function Ak(t){t.Q_=void 0}async function DW(t){t.q_.set("Online")}async function MW(t){t.N_.forEach((e,n)=>{P0(t,e)})}async function VW(t,e){Ak(t),k0(t)?(t.q_.M_(e),R0(t)):t.q_.set("Unknown")}async function LW(t,e,n){if(t.q_.set("Online"),e instanceof fk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nd(t,r)}else if(e instanceof Ch?t.Q_.Ke(e):e instanceof dk?t.Q_.He(e):t.Q_.We(e),!n.isEqual(de.min()))try{const r=await Sk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),Ck(s,l);const d=new Oi(h.target,l,u,h.sequenceNumber);P0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await Nd(t,r)}}async function Nd(t,e,n){if(!ec(e))throw e;t.L_.add(1),await rc(t),t.q_.set("Offline"),n||(n=()=>Sk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await kf(t)})}function Pk(t,e){return e().catch(n=>Nd(t,n,e))}async function bf(t){const e=fe(t),n=os(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;OW(e);)try{const i=await wW(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,FW(e,i)}catch(i){await Nd(e,i)}Rk(e)&&kk(e)}function OW(t){return io(t)&&t.O_.length<10}function FW(t,e){t.O_.push(e);const n=os(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Rk(t){return io(t)&&!os(t).n_()&&t.O_.length>0}function kk(t){os(t).start()}async function UW(t){os(t).p_()}async function jW(t){const e=os(t);for(const n of t.O_)e.m_(n.mutations)}async function $W(t,e,n){const r=t.O_.shift(),i=E0.from(r,e,n);await Pk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await bf(t)}async function BW(t,e){e&&os(t).V_&&await async function(r,i){if(function(o){return kH(o)&&o!==X.ABORTED}(i.code)){const s=r.O_.shift();os(r).s_(),await Pk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await bf(r)}}(t,e),Rk(t)&&kk(t)}async function qT(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=io(n);n.L_.add(3),await rc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await kf(n)}async function zW(t,e){const n=fe(t);e?(n.L_.delete(2),await kf(n)):e||(n.L_.add(2),await rc(n),n.q_.set("Unknown"))}function Ma(t){return t.K_||(t.K_=function(n,r,i){const s=fe(n);return s.w_(),new PW(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:DW.bind(null,t),Ro:MW.bind(null,t),mo:VW.bind(null,t),d_:LW.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),k0(t)?R0(t):t.q_.set("Unknown")):(await t.K_.stop(),Ak(t))})),t.K_}function os(t){return t.U_||(t.U_=function(n,r,i){const s=fe(n);return s.w_(),new RW(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UW.bind(null,t),mo:BW.bind(null,t),f_:jW.bind(null,t),g_:$W.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bf(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new b0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N0(t,e){if(ci("AsyncQueue",`${e}: ${t}`),ec(t))return new ae(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=El(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new Yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(){this.W_=new Qe(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):he():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ea{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ea(e,n,Yo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class WW{constructor(){this.queries=YT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=YT(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ae(X.ABORTED,"Firestore shutting down"))}}function YT(){return new Da(t=>JR(t),xf)}async function KW(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new HW,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=N0(o,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&D0(n)}async function GW(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qW(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&D0(n)}function XW(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function D0(t){t.Y_.forEach(e=>{e.next()})}var ty,QT;(QT=ty||(ty={})).ea="default",QT.Cache="cache";class YW{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ty.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.key=e}}class Nk{constructor(e){this.key=e}}class QW{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=ZR(e),this.Ra=new Yo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new XT,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),m=If(this.query,d)?d:null,E=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;f&&m?f.data.isEqual(m.data)?E!==w&&(r.track({type:3,doc:m}),x=!0):this.ga(f,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),x=!0):f&&!m&&(r.track({type:1,doc:f}),x=!0,(l||u)&&(a=!0)),x&&(m?(o=o.add(m),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,E){const w=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return w(m)-w(E)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Ea(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new XT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Nk(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bk(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ea.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class JW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZW{constructor(e){this.key=e,this.va=!1}}class e8{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Da(a=>JR(a),xf),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(le.comparator),this.Na=new Map,this.La=new x0,this.Ba={},this.ka=new Map,this.qa=wa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function t8(t,e,n=!0){const r=Fk(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Dk(r,e,n,!0),i}async function n8(t,e){const n=Fk(t);await Dk(n,e,!0,!1)}async function Dk(t,e,n,r){const i=await EW(t.localStore,xr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await r8(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ik(t.remoteStore,i),a}async function r8(t,e,n,r,i){t.Ka=(d,f,m)=>async function(w,x,g,y){let S=x.view.ma(g);S.ns&&(S=await WT(w.localStore,x.query,!1).then(({documents:C})=>x.view.ma(C,S)));const I=y&&y.targetChanges.get(x.targetId),R=y&&y.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(S,w.isPrimaryClient,I,R);return ZT(w,x.targetId,M.wa),M.snapshot}(t,d,f,m);const s=await WT(t.localStore,e,!0),o=new QW(e,s.Ts),a=o.ma(s.documents),l=nc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);ZT(t,n,u.wa);const h=new JW(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function i8(t,e,n){const r=fe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!xf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ey(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&A0(r.remoteStore,i.targetId),ny(r,i.targetId)}).catch(Zu)):(ny(r,i.targetId),await ey(r.localStore,i.targetId,!0))}async function s8(t,e){const n=fe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),A0(n.remoteStore,r.targetId))}async function o8(t,e,n){const r=f8(t);try{const i=await function(o,a){const l=fe(o),u=yt.now(),h=a.reduce((m,E)=>m.add(E.key),ye());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=hi(),w=ye();return l.cs.getEntries(m,h).next(x=>{E=x,E.forEach((g,y)=>{y.isValidDocument()||(w=w.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(x=>{d=x;const g=[];for(const y of a){const S=IH(y,d.get(y.key).overlayedDocument);S!=null&&g.push(new fs(y.key,S,WR(S.value.mapValue),Ir.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,g,a)}).next(x=>{f=x;const g=x.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(m,x.batchId,g)})}).then(()=>({batchId:f.batchId,changes:tk(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Qe(Ie)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await ic(r,i.changes),await bf(r.remoteStore)}catch(i){const s=N0(i,"Failed to persist write");n.reject(s)}}async function Mk(t,e){const n=fe(t);try{const r=await vW(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?De(o.va):i.removedDocuments.size>0&&(De(o.va),o.va=!1))}),await ic(n,r,e)}catch(r){await Zu(r)}}function JT(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&D0(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a8(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Qe(le.comparator);o=o.insert(s,Xt.newNoDocument(s,de.min()));const a=ye().add(s),l=new Pf(de.min(),new Map,new Qe(Ie),o,a);await Mk(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),M0(r)}else await ey(r.localStore,e,!1).then(()=>ny(r,e,n)).catch(Zu)}async function l8(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await yW(n.localStore,e);Lk(n,r,null),Vk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ic(n,i)}catch(i){await Zu(i)}}async function u8(t,e,n){const r=fe(t);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(De(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);Lk(r,e,n),Vk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ic(r,i)}catch(i){await Zu(i)}}function Vk(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Lk(t,e,n){const r=fe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ny(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Ok(t,r)})}function Ok(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(A0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),M0(t))}function ZT(t,e,n){for(const r of n)r instanceof bk?(t.La.addReference(r.key,e),c8(t,r)):r instanceof Nk?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Ok(t,r.key)):he()}function c8(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),M0(t))}function M0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(tt.fromString(e)),r=t.qa.next();t.Na.set(r,new ZW(n)),t.Oa=t.Oa.insert(n,r),Ik(t.remoteStore,new Oi(xr(_0(n.path)),r,"TargetPurposeLimboResolution",f0.oe))}}async function ic(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=C0.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const h=fe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>q.forEach(u,f=>q.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>q.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!ec(d))throw d;ne("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),E=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(f,w)}}}(r.localStore,s))}async function h8(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await Ek(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ae(X.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ic(n,r.hs)}}function d8(t,e){const n=fe(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let i=ye();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Fk(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a8.bind(null,e),e.Ca.d_=qW.bind(null,e.eventManager),e.Ca.$a=XW.bind(null,e.eventManager),e}function f8(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u8.bind(null,e),e}class e1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Rf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return gW(this.persistence,new pW,e.initialUser,this.serializer)}createPersistence(e){return new hW(I0.Zr,this.serializer)}createSharedClientState(e){return new TW}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class p8{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=h8.bind(null,this.syncEngine),await zW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WW}()}createDatastore(e){const n=Rf(e.databaseInfo.databaseId),r=function(s){return new AW(s)}(e.databaseInfo);return function(s,o,a,l){return new kW(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new NW(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JT(this.syncEngine,n,0),function(){return GT.D()?new GT:new xW}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const d=new e8(i,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);ne("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await rc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=BR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ne("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ne("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=N0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rm(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ek(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await v8(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>qT(e.remoteStore,i)),t._onlineComponents=e}function y8(t){return t.name==="FirebaseError"?t.code===X.FAILED_PRECONDITION||t.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function v8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await rm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!y8(n))throw n;ga("Error using user provided cache. Falling back to memory cache: "+n),await rm(t,new e1)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await rm(t,new e1);return t._offlineComponents}async function Uk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await t1(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await t1(t,new p8))),t._onlineComponents}function _8(t){return Uk(t).then(e=>e.syncEngine)}async function w8(t){const e=await Uk(t),n=e.eventManager;return n.onListen=t8.bind(null,e.syncEngine),n.onUnlisten=i8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s8.bind(null,e.syncEngine),n}function E8(t,e,n={}){const r=new Ji;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new m8({next:f=>{o.enqueueAndForget(()=>GW(s,d));const m=f.docs.has(a);!m&&f.fromCache?u.reject(new ae(X.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?u.reject(new ae(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new YW(_0(a.path),h,{includeMetadataChanges:!0,_a:!0});return KW(s,d)}(await w8(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t,e,n){if(!n)throw new ae(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function T8(t,e,n,r){if(e===!0&&r===!0)throw new ae(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function r1(t){if(!le.isDocumentKey(t))throw new ae(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function V0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function Qs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=V0(t);throw new ae(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class L0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ae(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ae(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new D6;switch(r.type){case"firstParty":return new O6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n1.get(n);r&&(ne("ComponentProvider","Removing Datastore"),n1.delete(n),r.terminate())}(this),Promise.resolve()}}function x8(t,e,n,r={}){var i;const s=(t=Qs(t,L0))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Gt.MOCK_USER;else{a=c5(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ae(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Gt(u)}t._authCredentials=new M6(new $R(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new O0(this.firestore,e,this._query)}}class Rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class Ru extends O0{constructor(e,n,r){super(e,n,_0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new le(e))}withConverter(e){return new Ru(this.firestore,e,this._path)}}function ku(t,e,...n){if(t=an(t),arguments.length===1&&(e=BR.newId()),S8("doc","path",e),t instanceof L0){const r=tt.fromString(e,...n);return r1(r),new Rn(t,null,new le(r))}{if(!(t instanceof Rn||t instanceof Ru))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return r1(r),new Rn(t.firestore,t instanceof Ru?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Tk(this,"async_queue_retry"),this.Eu=()=>{const n=nm();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=nm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Ji;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!ec(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ci("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=b0.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&he()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Nf extends L0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new I8}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bk(this),this._firestoreClient.terminate()}}function C8(t,e){const n=typeof t=="object"?t:bR(),r=typeof t=="string"?t:"(default)",i=h0(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=l5("firestore");s&&x8(i,...s)}return i}function $k(t){return t._firestoreClient||Bk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Bk(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new Y6(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new g8(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sa(Lt.fromBase64String(e))}catch(n){throw new ae(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sa(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=/^__.*__$/;class P8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new tc(e,this.data,n,this.fieldTransforms)}}class zk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Hk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class $0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new $0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Dd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Hk(this.wu)&&A8.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class R8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rf(e)}Nu(e,n,r,i=!1){return new $0({wu:e,methodName:n,Ou:r,path:bt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wk(t){const e=t._freezeSettings(),n=Rf(t._databaseId);return new R8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k8(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);B0("Data must be an object, but it was:",o,r);const a=Kk(r,o);let l,u;if(s.merge)l=new An(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=ry(e,d,n);if(!o.contains(f))throw new ae(X.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);qk(h,f)||h.push(f)}l=new An(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new P8(new mn(a),l,u)}class Mf extends F0{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mf}}function b8(t,e,n,r){const i=t.Nu(1,e,n);B0("Data must be an object, but it was:",i,r);const s=[],o=mn.empty();ro(r,(l,u)=>{const h=z0(e,l,n);u=an(u);const d=i.Cu(h);if(u instanceof Mf)s.push(h);else{const f=Vf(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new An(s);return new zk(o,a,i.fieldTransforms)}function N8(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[ry(e,r,n)],l=[i];if(s.length%2!=0)throw new ae(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(ry(e,s[f])),l.push(s[f+1]);const u=[],h=mn.empty();for(let f=a.length-1;f>=0;--f)if(!qk(u,a[f])){const m=a[f];let E=l[f];E=an(E);const w=o.Cu(m);if(E instanceof Mf)u.push(m);else{const x=Vf(E,w);x!=null&&(u.push(m),h.set(m,x))}}const d=new An(u);return new zk(h,d,o.fieldTransforms)}function Vf(t,e){if(Gk(t=an(t)))return B0("Unsupported field value:",e,t),Kk(t,e);if(t instanceof F0)return function(r,i){if(!Hk(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Vf(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _H(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=yt.fromDate(r);return{timestampValue:bd(i.serializer,s)}}if(r instanceof yt){const s=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bd(i.serializer,s)}}if(r instanceof U0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sa)return{bytesValue:pk(i.serializer,r._byteString)};if(r instanceof Rn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:T0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof j0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return w0(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${V0(r)}`)}(t,e)}function Kk(t,e){const n={};return zR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(t,(r,i)=>{const s=Vf(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Gk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof U0||t instanceof Sa||t instanceof Rn||t instanceof F0||t instanceof j0)}function B0(t,e,n){if(!Gk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=V0(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function ry(t,e,n){if((e=an(e))instanceof Df)return e._internalPath;if(typeof e=="string")return z0(t,e);throw Dd("Field path arguments must be of type string or ",t,!1,void 0,n)}const D8=new RegExp("[~\\*/\\[\\]]");function z0(t,e,n){if(e.search(D8)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Df(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ae(X.INVALID_ARGUMENT,a+t+l)}function qk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yk("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class M8 extends Xk{data(){return super.data()}}function Yk(t,e){return typeof e=="string"?z0(t,e):e instanceof Df?e._internalPath:e._delegate._internalPath}class V8{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ro(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>rt(o.doubleValue));return new j0(s)}convertGeoPoint(e){return new U0(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=m0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const n=ss(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tt.fromString(e);De(wk(r));const i=new Iu(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qk extends Xk{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new F8(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class F8 extends Qk{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){t=Qs(t,Rn);const e=Qs(t.firestore,Nf);return E8($k(e),t._key).then(n=>j8(e,t,n))}class U8 extends V8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function iy(t,e,n){t=Qs(t,Rn);const r=Qs(t.firestore,Nf),i=L8(t.converter,e,n);return Zk(r,[k8(Wk(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ir.none())])}function sy(t,e,n,...r){t=Qs(t,Rn);const i=Qs(t.firestore,Nf),s=Wk(i);let o;return o=typeof(e=an(e))=="string"||e instanceof Df?N8(s,"updateDoc",t._key,e,n,r):b8(s,"updateDoc",t._key,e),Zk(i,[o.toMutation(t._key,Ir.exists(!0))])}function Zk(t,e){return function(r,i){const s=new Ji;return r.asyncQueue.enqueueAndForget(async()=>o8(await _8(r),i,s)),s.promise}($k(t),e)}function j8(t,e,n){const r=n.docs.get(e._key),i=new U8(t);return new Qk(t,i,e._key,r,new O8(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Na=i})(ba),ma(new Gs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Nf(new V6(r.getProvider("auth-internal")),new U6(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ae(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qi(xT,"4.7.2",e),Qi(xT,"4.7.2","esm2017")})();function H0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function eb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $8=eb,tb=new Qu("auth","Firebase",eb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new u0("@firebase/auth");function B8(t,...e){Md.logLevel<=_e.WARN&&Md.warn(`Auth (${ba}): ${t}`,...e)}function Ah(t,...e){Md.logLevel<=_e.ERROR&&Md.error(`Auth (${ba}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,...e){throw K0(t,...e)}function ar(t,...e){return K0(t,...e)}function W0(t,e,n){const r=Object.assign(Object.assign({},$8()),{[e]:n});return new Qu("auth","Firebase",r).create(e,{appName:t.name})}function Us(t){return W0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z8(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&br(t,"argument-error"),W0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function K0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tb.create(t,...e)}function ce(t,e,...n){if(!t)throw K0(e,...n)}function Gr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ah(e),new Error(e)}function di(t,e){t||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function H8(){return s1()==="http:"||s1()==="https:"}function s1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H8()||p5()||"connection"in navigator)?navigator.onLine:!0}function K8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.shortDelay=e,this.longDelay=n,di(n>e,"Short delay should be less than long delay!"),this.isMobile=h5()||m5()}get(){return W8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t,e){di(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=new sc(3e4,6e4);function q0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Va(t,e,n,r,i={}){return rb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ju(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return f5()||(u.referrerPolicy="no-referrer"),nb.fetch()(ib(t,t.config.apiHost,n,a),u)})}async function rb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},G8),e);try{const i=new Y8(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw th(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw th(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw th(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw W0(t,h,u);br(t,h)}}catch(i){if(i instanceof pi)throw i;br(t,"network-request-failed",{message:String(i)})}}async function X8(t,e,n,r,i={}){const s=await Va(t,e,n,r,i);return"mfaPendingCredential"in s&&br(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ib(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?G0(t.config,i):`${t.config.apiScheme}://${i}`}class Y8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ar(this.auth,"network-request-failed")),q8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function th(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ar(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q8(t,e){return Va(t,"POST","/v1/accounts:delete",e)}async function sb(t,e){return Va(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J8(t,e=!1){const n=an(t),r=await n.getIdToken(e),i=X0(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:zl(im(i.auth_time)),issuedAtTime:zl(im(i.iat)),expirationTime:zl(im(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function im(t){return Number(t)*1e3}function X0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const i=xR(n);return i?JSON.parse(i):(Ah("Failed to decode base64 JWT payload"),null)}catch(i){return Ah("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function o1(t){const e=X0(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pi&&Z8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Z8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await bu(t,sb(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ob(s.providerUserInfo):[],a=nK(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function tK(t){const e=an(t);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nK(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ob(t){return t.map(e=>{var{providerId:n}=e,r=H0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rK(t,e){const n=await rb(t,{},async()=>{const r=Ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ib(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iK(t,e){return Va(t,"POST","/v2/accounts:revokeToken",q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=o1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await rK(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Qo;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=H0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ay(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bu(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return J8(this,e)}reload(){return tK(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kr(this.auth.app))return Promise.reject(Us(this.auth));const e=await this.getIdToken();return await bu(this,Q8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:I,isAnonymous:R,providerData:M,stsTokenManager:C}=n;ce(S&&C,e,"internal-error");const _=Qo.fromJSON(this.name,C);ce(typeof S=="string",e,"internal-error"),wi(d,e.name),wi(f,e.name),ce(typeof I=="boolean",e,"internal-error"),ce(typeof R=="boolean",e,"internal-error"),wi(m,e.name),wi(E,e.name),wi(w,e.name),wi(x,e.name),wi(g,e.name),wi(y,e.name);const A=new qr({uid:S,auth:e,email:f,emailVerified:I,displayName:d,isAnonymous:R,photoURL:E,phoneNumber:m,tenantId:w,stsTokenManager:_,createdAt:g,lastLoginAt:y});return M&&Array.isArray(M)&&(A.providerData=M.map(k=>Object.assign({},k))),x&&(A._redirectEventId=x),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Qo;i.updateFromServerResponse(n);const s=new qr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Vd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ce(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ob(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Qo;a.updateFromIdToken(r);const l=new qr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ay(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new Map;function Xr(t){di(t instanceof Function,"Expected a class definition");let e=a1.get(t);return e?(di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,a1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ab.type="NONE";const l1=ab;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t,e,n){return`firebase:${t}:${e}:${n}`}class Jo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ph(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ph("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Jo(Xr(l1),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Xr(l1);const o=Ph(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=qr._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Jo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Jo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fb(e))return"Blackberry";if(pb(e))return"Webos";if(ub(e))return"Safari";if((e.includes("chrome/")||cb(e))&&!e.includes("edge/"))return"Chrome";if(db(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lb(t=Zt()){return/firefox\//i.test(t)}function ub(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cb(t=Zt()){return/crios\//i.test(t)}function hb(t=Zt()){return/iemobile/i.test(t)}function db(t=Zt()){return/android/i.test(t)}function fb(t=Zt()){return/blackberry/i.test(t)}function pb(t=Zt()){return/webos/i.test(t)}function Y0(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sK(t=Zt()){var e;return Y0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oK(){return g5()&&document.documentMode===10}function mb(t=Zt()){return Y0(t)||db(t)||pb(t)||fb(t)||/windows phone/i.test(t)||hb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t,e=[]){let n;switch(t){case"Browser":n=u1(Zt());break;case"Worker":n=`${u1(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ba}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lK(t,e={}){return Va(t,"GET","/v2/passwordPolicy",q0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=6;class cK{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uK,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c1(this),this.idTokenSubscription=new c1(this),this.beforeStateQueue=new aK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sb(this,{idToken:e}),r=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kr(this.app))return Promise.reject(Us(this));const n=e?an(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kr(this.app)?Promise.reject(Us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kr(this.app)?Promise.reject(Us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lK(this),n=new cK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[Xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&B8(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lf(t){return an(t)}class c1{constructor(e){this.auth=e,this.observer=null,this.addObserver=x5(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dK(t){Q0=t}function fK(t){return Q0.loadJS(t)}function pK(){return Q0.gapiScript}function mK(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK(t,e){const n=h0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xd(s,e??{}))return i;br(i,"already-initialized")}return n.initialize({options:e})}function yK(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vK(t,e,n){const r=Lf(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=yb(e),{host:o,port:a}=_K(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),wK()}function yb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _K(t){const e=yb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:h1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:h1(o)}}}function h1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wK(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,n){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t,e){return X8(t,"POST","/v1/accounts:signInWithIdp",q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK="http://localhost";class Js extends vb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=H0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Js(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zo(e,n)}buildRequest(){const e={requestUri:EK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ju(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends J0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends oc{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends oc{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends oc{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Di.credential(n,r)}catch{return null}}}Di.TWITTER_SIGN_IN_METHOD="twitter.com";Di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await qr._fromIdTokenResponse(e,r,i),o=d1(r);return new Ta({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=d1(r);return new Ta({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function d1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends pi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ld.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ld(e,n,r,i)}}function _b(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(t,s,e,r):s})}async function SK(t,e,n=!1){const r=await bu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ta._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TK(t,e,n=!1){const{auth:r}=t;if(Kr(r.app))return Promise.reject(Us(r));const i="reauthenticate";try{const s=await bu(t,_b(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=X0(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Ta._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&br(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xK(t,e,n=!1){if(Kr(t.app))return Promise.reject(Us(t));const r="signIn",i=await _b(t,r,e),s=await Ta._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function IK(t,e,n,r){return an(t).onIdTokenChanged(e,n,r)}function CK(t,e,n){return an(t).beforeAuthStateChanged(e,n)}function AK(t,e,n,r){return an(t).onAuthStateChanged(e,n,r)}function PK(t){return an(t).signOut()}const Od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK=1e3,kK=10;class Eb extends wb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);oK()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kK):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Eb.type="LOCAL";const Sb=Eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends wb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Tb.type="SESSION";const xb=Tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Of(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await bK(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Of.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Z0("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function DK(t){Ar().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function MK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LK(){return Ib()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="firebaseLocalStorageDb",OK=1,Fd="firebaseLocalStorage",Ab="fbase_key";class ac{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ff(t,e){return t.transaction([Fd],e?"readwrite":"readonly").objectStore(Fd)}function FK(){const t=indexedDB.deleteDatabase(Cb);return new ac(t).toPromise()}function ly(){const t=indexedDB.open(Cb,OK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fd,{keyPath:Ab})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fd)?e(r):(r.close(),await FK(),e(await ly()))})})}async function f1(t,e,n){const r=Ff(t,!0).put({[Ab]:e,value:n});return new ac(r).toPromise()}async function UK(t,e){const n=Ff(t,!1).get(e),r=await new ac(n).toPromise();return r===void 0?null:r.value}function p1(t,e){const n=Ff(t,!0).delete(e);return new ac(n).toPromise()}const jK=800,$K=3;class Pb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$K)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Of._getInstance(LK()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await MK(),!this.activeServiceWorker)return;this.sender=new NK(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await f1(e,Od,"1"),await p1(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>f1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>UK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ff(i,!1).getAll();return new ac(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Pb.type="LOCAL";const BK=Pb;new sc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e){return e?Xr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends vb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zK(t){return xK(t.auth,new e_(t),t.bypassAuthState)}function HK(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),TK(n,new e_(t),t.bypassAuthState)}async function WK(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),SK(n,new e_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zK;case"linkViaPopup":case"linkViaRedirect":return WK;case"reauthViaPopup":case"reauthViaRedirect":return HK;default:br(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=new sc(2e3,1e4);async function GK(t,e,n){if(Kr(t.app))return Promise.reject(ar(t,"operation-not-supported-in-this-environment"));const r=Lf(t);z8(t,e,J0);const i=Rb(r,n);return new Ds(r,"signInViaPopup",e,i).executeNotNull()}class Ds extends kb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=Z0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KK.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK="pendingRedirect",Rh=new Map;class XK extends kb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const r=await YK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YK(t,e){const n=ZK(e),r=JK(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function QK(t,e){Rh.set(t._key(),e)}function JK(t){return Xr(t._redirectPersistence)}function ZK(t){return Ph(qK,t.config.apiKey,t.name)}async function e7(t,e,n=!1){if(Kr(t.app))return Promise.reject(Us(t));const r=Lf(t),i=Rb(r,e),o=await new XK(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=10*60*1e3;class n7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ar(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t7&&this.cachedEventUids.clear(),this.cachedEventUids.has(m1(e))}saveEventToCache(e){this.cachedEventUids.add(m1(e)),this.lastProcessedEventTime=Date.now()}}function m1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e={}){return Va(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o7=/^https?/;async function a7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i7(t);for(const n of e)try{if(l7(n))return}catch{}br(t,"unauthorized-domain")}function l7(t){const e=oy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!o7.test(n))return!1;if(s7.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=new sc(3e4,6e4);function g1(){const t=Ar().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function c7(t){return new Promise((e,n)=>{var r,i,s;function o(){g1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g1(),n(ar(t,"network-request-failed"))},timeout:u7.get()})}if(!((i=(r=Ar().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ar().gapi)===null||s===void 0)&&s.load)o();else{const a=mK("iframefcb");return Ar()[a]=()=>{gapi.load?o():n(ar(t,"network-request-failed"))},fK(`${pK()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw kh=null,e})}let kh=null;function h7(t){return kh=kh||c7(t),kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=new sc(5e3,15e3),f7="__/auth/iframe",p7="emulator/auth/iframe",m7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y7(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?G0(e,p7):`https://${t.config.authDomain}/${f7}`,r={apiKey:e.apiKey,appName:t.name,v:ba},i=g7.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ju(r).slice(1)}`}async function v7(t){const e=await h7(t),n=Ar().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:y7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m7,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ar(t,"network-request-failed"),a=Ar().setTimeout(()=>{s(o)},d7.get());function l(){Ar().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w7=500,E7=600,S7="_blank",T7="http://localhost";class y1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x7(t,e,n,r=w7,i=E7){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},_7),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Zt().toLowerCase();n&&(a=cb(u)?S7:n),lb(u)&&(e=e||T7,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,E])=>`${f}${m}=${E},`,"");if(sK(u)&&a!=="_self")return I7(e||"",a),new y1(null);const d=window.open(e||"",a,h);ce(d,t,"popup-blocked");try{d.focus()}catch{}return new y1(d)}function I7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7="__/auth/handler",A7="emulator/auth/handler",P7=encodeURIComponent("fac");async function v1(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ba,eventId:i};if(e instanceof J0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",T5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof oc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${P7}=${encodeURIComponent(l)}`:"";return`${R7(t)}?${Ju(a).slice(1)}${u}`}function R7({config:t}){return t.emulator?G0(t,A7):`https://${t.authDomain}/${C7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="webStorageSupport";class k7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xb,this._completeRedirectFn=e7,this._overrideRedirectResult=QK}async _openPopup(e,n,r,i){var s;di((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await v1(e,n,r,oy(),i);return x7(e,o,Z0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await v1(e,n,r,oy(),i);return DK(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(di(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await v7(e),r=new n7(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sm,{type:sm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[sm];o!==void 0&&n(!!o),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mb()||ub()||Y0()}}const b7=k7;var _1="@firebase/auth",w1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M7(t){ma(new Gs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gb(t)},u=new hK(r,i,s,l);return yK(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ma(new Gs("auth-internal",e=>{const n=Lf(e.getProvider("auth").getImmediate());return(r=>new N7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(_1,w1,D7(t)),Qi(_1,w1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=5*60,L7=AR("authIdTokenMaxAge")||V7;let E1=null;const O7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>L7)return;const i=n==null?void 0:n.token;E1!==i&&(E1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function F7(t=bR()){const e=h0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gK(t,{popupRedirectResolver:b7,persistence:[BK,Sb,xb]}),r=AR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=O7(s.toString());CK(n,o,()=>o(n.currentUser)),IK(n,a=>o(a))}}const i=IR("auth");return i&&vK(n,`http://${i}`),n}function U7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dK({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ar("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",U7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M7("Browser");var j7="firebase",$7="10.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(j7,$7,"app");const B7={apiKey:"AIzaSyAQOWLW33YmcldSc_tpJgpcH9Nl-jXF5Ec",authDomain:"winged-precinct-418901.firebaseapp.com",projectId:"winged-precinct-418901",storageBucket:"winged-precinct-418901.appspot.com",messagingSenderId:"908912265044",appId:"1:908912265044:web:350310428d15ffc2b56ac1",measurementId:"G-3NF1PZKCYX"},z7=kR(B7),Nu=C8(z7),Hl=F7(),H7=new $r;Hl.setPersistence(Sb);console.log(Hl.currentUser);const W7=async(t,e,n)=>{if(t)try{const r=ku(Nu,`flow-users/${t.uid}/projects/${e}/pages/${n}`),i=await Jk(r);if(i.exists())return console.log("Received node data:",i.data()),i.data();console.log("No such page!")}catch(r){console.error("Error getting page:",r)}else console.log("no user!");return{nodes:[],edges:[]}},K7=async t=>{if(t){const e=ku(Nu,`flow-users/${t.uid}`);try{const n=await Jk(e);if(n.exists())return console.log("Received Metadata:",n.data()),n.data();console.log("No such metadata!")}catch(n){console.error("Error getting document:",n)}}},G7=async(t,e,n,r,i)=>{if(t){const s=ku(Nu,`flow-users/${t.uid}/projects/${e}/pages/${n}`);try{await sy(s,{nodes:[...r],edges:[...i]}),console.log(`${e} ${n} updated successfully`)}catch(o){console.log(o);try{iy(s,{nodes:[...r],edges:[...i]},{merge:!0}).then(()=>{console.log(`${e} ${n} set successfully`,{nodes:[...r],edges:[...i]})}).catch(a=>{console.error("Error setting document:",a)})}catch(a){console.log(a)}}}else{alert("You must be logged in to use the Cloud Save feature.");return}};function q7(){const t=T.useRef(!1),e=Z(R=>R.nodes),n=Z(R=>R.edges),r=Z(R=>R.user),i=Z(R=>R.activePath),s=Z(R=>R.register),o=Z(R=>R.projectChipSets),a=Z(R=>R.setNodes),l=Z(R=>R.setEdges),u=Z(R=>R.updateUser),h=Z(R=>R.setRegister),d=Z(R=>R.setChips),f=Z(R=>R.setActivePath),m=Z(R=>R.setLastChange),E=Z(R=>R.setLastSave),w=Z(R=>R.setAppLoaded);T.useEffect(()=>{const R=async()=>{const M=await K7(r);if(M!=null&&M.register){const C=[...s,...M.register];console.log("REGISTER SETTING on USER UPDATE"),console.log(s),console.log(M.register),console.log(C),h(C)}M!=null&&M.projectChipSets&&d(M.projectChipSets)};r&&!t.current&&(R(),t.current=!0,i&&f({projectKey:i==null?void 0:i.projectKey,pageKey:i==null?void 0:i.pageKey}))},[r]),T.useEffect(()=>{const R=async()=>{let M;if(i&&r?(console.log("fetching page...",i.projectKey,i.pageKey),M=await W7(r,i.projectKey,i.pageKey)):console.log("no page found, "),M){const{edges:C,nodes:_}=M;l(C),a(_),setTimeout(()=>{w(!0)},1e3)}};w(!1),R()},[i]),T.useEffect(()=>{const R=AK(Hl,M=>{M?(console.log("User is logged in:",M),u(M)):(console.log("No user logged in."),u(null))});return()=>R()},[u]),T.useEffect(()=>{localStorage.setItem("register",JSON.stringify(s)),localStorage.setItem("active path",JSON.stringify(i)),m(new Date)},[s,i]);const x=async()=>{if(r){const R=ku(Nu,`flow-users/${r.uid}`);try{await sy(R,{register:s}),console.log("register updated successfully")}catch(M){console.log(M);try{await iy(R,{register:s}),console.log("register set successfully")}catch(C){console.log(C)}}}},g=async()=>{if(r){const R=ku(Nu,`flow-users/${r.uid}`);try{await sy(R,{projectChipSets:o}),console.log("chips updated successfully")}catch(M){console.log(M);try{await iy(R,{projectChipSets:o}),console.log("chips set successfully")}catch(C){console.log(C)}}}},y=async()=>{try{await x(),await g(),i&&await G7(r,i.projectKey,i.pageKey,e,n),E(new Date)}catch(R){console.log("set page error",R)}},S=async()=>{try{const R=await GK(Hl,H7);console.log(R),u(R.user)}catch(R){console.log("error signing in",R)}},I=async()=>{try{const R=await PK(Hl);console.log("result of Logout",R),u(null)}catch(R){console.log("logout error",R)}};return L.jsx(L.Fragment,{children:L.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px",position:"absolute",right:"10px",top:"10px",zIndex:1},children:[r?L.jsx(L.Fragment,{children:L.jsxs("button",{style:{padding:"3px 6px"},onClick:I,children:[r?L.jsx("img",{src:r.photoURL??"",style:{width:"30px",borderRadius:"50px"}}):void 0,L.jsx("p",{style:{fontSize:"16px"},children:"Log Out"})]})}):L.jsx("button",{onClick:S,children:"Log In with Google"}),r?void 0:L.jsx("img",{style:{pointerEvents:"none",width:"50px"},src:"https://gifdb.com/images/high/animated-stars-loading-icon-38ccjfav8iijnqrb.gif"}),L.jsx("button",{onClick:y,children:L.jsx("span",{className:"material-symbols-outlined",children:"save"})})]})})}function S1(){const{attributes:t,listeners:e,setNodeRef:n,transform:r,isDragging:i}=$A({id:Pr(),data:{type:"type1"}}),s={transform:r?`translate3d(${r.x}px, ${r.y}px, 0)`:void 0,opacity:i?.5:1,cursor:"grab",border:"1px solid black",padding:"10px",backgroundColor:"#f0f0f0"};return L.jsx("div",{className:"draggable",ref:n,style:s,...t,...e,children:"Drag Me"})}function X7({Component:t}){const{setNodeRef:e}=BA({id:Pr(),data:{accepts:["type1"]}});return L.jsx("div",{ref:e,style:{width:"50%",height:"25px",border:"1px solid gray",borderRadius:"10px"},children:t?L.jsx(t,{}):void 0})}function Y7(){const[t,e]=T.useState(),n=r=>{var o,a;const{active:i,over:s}=r;s&&((a=s.data.current)!=null&&a.accepts.includes((o=i.data.current)==null?void 0:o.type))&&(console.log("OVER"),e(S1))};return L.jsxs(jA,{onDragEnd:n,children:[L.jsx(S1,{}),L.jsx(X7,{Component:t??void 0})]})}function Q7(){return L.jsxs(L.Fragment,{children:[L.jsx(q7,{}),L.jsxs(Sj,{children:[L.jsx(yl,{path:"/editor/:projectKey/:pageKey",element:L.jsx(e5,{})}),L.jsx(yl,{path:"/projects",element:L.jsx(BE,{})}),L.jsx(yl,{path:"/Dnd",element:L.jsx(Y7,{})}),L.jsx(yl,{path:"*",element:L.jsx(BE,{})})]})]})}om.createRoot(document.getElementById("root")).render(L.jsx(G.StrictMode,{children:L.jsx(Rj,{children:L.jsx(Q7,{})})}));
