(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function bv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mv={exports:{}},Zu={},Ov={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=Symbol.for("react.element"),Fx=Symbol.for("react.portal"),zx=Symbol.for("react.fragment"),Ux=Symbol.for("react.strict_mode"),jx=Symbol.for("react.profiler"),Bx=Symbol.for("react.provider"),Hx=Symbol.for("react.context"),Wx=Symbol.for("react.forward_ref"),Kx=Symbol.for("react.suspense"),Gx=Symbol.for("react.memo"),qx=Symbol.for("react.lazy"),vg=Symbol.iterator;function Qx(e){return e===null||typeof e!="object"?null:(e=vg&&e[vg]||e["@@iterator"],typeof e=="function"?e:null)}var $v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lv=Object.assign,Fv={};function Fo(e,t,n){this.props=e,this.context=t,this.refs=Fv,this.updater=n||$v}Fo.prototype.isReactComponent={};Fo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zv(){}zv.prototype=Fo.prototype;function qf(e,t,n){this.props=e,this.context=t,this.refs=Fv,this.updater=n||$v}var Qf=qf.prototype=new zv;Qf.constructor=qf;Lv(Qf,Fo.prototype);Qf.isPureReactComponent=!0;var _g=Array.isArray,Uv=Object.prototype.hasOwnProperty,Xf={current:null},jv={key:!0,ref:!0,__self:!0,__source:!0};function Bv(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Uv.call(t,r)&&!jv.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Da,type:e,key:o,ref:s,props:i,_owner:Xf.current}}function Xx(e,t){return{$$typeof:Da,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Da}function Yx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wg=/\/+/g;function eh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yx(""+e.key):t.toString(36)}function bl(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Da:case Fx:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+eh(s,0):r,_g(i)?(n="",e!=null&&(n=e.replace(wg,"$&/")+"/"),bl(i,t,n,"",function(u){return u})):i!=null&&(Yf(i)&&(i=Xx(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(wg,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",_g(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+eh(o,a);s+=bl(o,t,n,l,i)}else if(l=Qx(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+eh(o,a++),s+=bl(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ja(e,t,n){if(e==null)return e;var r=[],i=0;return bl(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Zx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},Ml={transition:null},Jx={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Ml,ReactCurrentOwner:Xf};ue.Children={map:Ja,forEach:function(e,t,n){Ja(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ja(e,function(){t++}),t},toArray:function(e){return Ja(e,function(t){return t})||[]},only:function(e){if(!Yf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Fo;ue.Fragment=zx;ue.Profiler=jx;ue.PureComponent=qf;ue.StrictMode=Ux;ue.Suspense=Kx;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jx;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Lv({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Xf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Uv.call(t,l)&&!jv.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Da,type:e.type,key:i,ref:o,props:r,_owner:s}};ue.createContext=function(e){return e={$$typeof:Hx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bx,_context:e},e.Consumer=e};ue.createElement=Bv;ue.createFactory=function(e){var t=Bv.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:Wx,render:e}};ue.isValidElement=Yf;ue.lazy=function(e){return{$$typeof:qx,_payload:{_status:-1,_result:e},_init:Zx}};ue.memo=function(e,t){return{$$typeof:Gx,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Ml.transition;Ml.transition={};try{e()}finally{Ml.transition=t}};ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ue.useCallback=function(e,t){return kt.current.useCallback(e,t)};ue.useContext=function(e){return kt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return kt.current.useEffect(e,t)};ue.useId=function(){return kt.current.useId()};ue.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return kt.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};ue.useRef=function(e){return kt.current.useRef(e)};ue.useState=function(e){return kt.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return kt.current.useTransition()};ue.version="18.2.0";Ov.exports=ue;var A=Ov.exports;const O=bv(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eI=A,tI=Symbol.for("react.element"),nI=Symbol.for("react.fragment"),rI=Object.prototype.hasOwnProperty,iI=eI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oI={key:!0,ref:!0,__self:!0,__source:!0};function Hv(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)rI.call(t,r)&&!oI.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:tI,type:e,key:o,ref:s,props:i,_owner:iI.current}}Zu.Fragment=nI;Zu.jsx=Hv;Zu.jsxs=Hv;Mv.exports=Zu;var F=Mv.exports,id={},Wv={exports:{}},Bt={},Kv={exports:{}},Gv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,T){var P=C.length;C.push(T);e:for(;0<P;){var b=P-1>>>1,z=C[b];if(0<i(z,T))C[b]=T,C[P]=z,P=b;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var T=C[0],P=C.pop();if(P!==T){C[0]=P;e:for(var b=0,z=C.length,Q=z>>>1;b<Q;){var q=2*(b+1)-1,J=C[q],te=q+1,se=C[te];if(0>i(J,P))te<z&&0>i(se,J)?(C[b]=se,C[te]=P,b=te):(C[b]=J,C[q]=P,b=q);else if(te<z&&0>i(se,P))C[b]=se,C[te]=P,b=te;else break e}}return T}function i(C,T){var P=C.sortIndex-T.sortIndex;return P!==0?P:C.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(C){for(var T=n(u);T!==null;){if(T.callback===null)r(u);else if(T.startTime<=C)r(u),T.sortIndex=T.expirationTime,t(l,T);else break;T=n(u)}}function _(C){if(v=!1,y(C),!g)if(n(l)!==null)g=!0,R(E);else{var T=n(u);T!==null&&$(_,T.startTime-C)}}function E(C,T){g=!1,v&&(v=!1,m(k),k=-1),f=!0;var P=d;try{for(y(T),h=n(l);h!==null&&(!(h.expirationTime>T)||C&&!U());){var b=h.callback;if(typeof b=="function"){h.callback=null,d=h.priorityLevel;var z=b(h.expirationTime<=T);T=e.unstable_now(),typeof z=="function"?h.callback=z:h===n(l)&&r(l),y(T)}else r(l);h=n(l)}if(h!==null)var Q=!0;else{var q=n(u);q!==null&&$(_,q.startTime-T),Q=!1}return Q}finally{h=null,d=P,f=!1}}var I=!1,x=null,k=-1,N=5,M=-1;function U(){return!(e.unstable_now()-M<N)}function H(){if(x!==null){var C=e.unstable_now();M=C;var T=!0;try{T=x(!0,C)}finally{T?D():(I=!1,x=null)}}else I=!1}var D;if(typeof p=="function")D=function(){p(H)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,V=S.port2;S.port1.onmessage=H,D=function(){V.postMessage(null)}}else D=function(){w(H,0)};function R(C){x=C,I||(I=!0,D())}function $(C,T){k=w(function(){C(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,R(E))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(C){switch(d){case 1:case 2:case 3:var T=3;break;default:T=d}var P=d;d=T;try{return C()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,T){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var P=d;d=C;try{return T()}finally{d=P}},e.unstable_scheduleCallback=function(C,T,P){var b=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?b+P:b):P=b,C){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=P+z,C={id:c++,callback:T,priorityLevel:C,startTime:P,expirationTime:z,sortIndex:-1},P>b?(C.sortIndex=P,t(u,C),n(l)===null&&C===n(u)&&(v?(m(k),k=-1):v=!0,$(_,P-b))):(C.sortIndex=z,t(l,C),g||f||(g=!0,R(E))),C},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(C){var T=d;return function(){var P=d;d=T;try{return C.apply(this,arguments)}finally{d=P}}}})(Gv);Kv.exports=Gv;var sI=Kv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv=A,zt=sI;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qv=new Set,Hs={};function Ii(e,t){_o(e,t),_o(e+"Capture",t)}function _o(e,t){for(Hs[e]=t,e=0;e<t.length;e++)Qv.add(t[e])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),od=Object.prototype.hasOwnProperty,aI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eg={},Sg={};function lI(e){return od.call(Sg,e)?!0:od.call(Eg,e)?!1:aI.test(e)?Sg[e]=!0:(Eg[e]=!0,!1)}function uI(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cI(e,t,n,r){if(t===null||typeof t>"u"||uI(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function At(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new At(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new At(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new At(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new At(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new At(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new At(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new At(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new At(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new At(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zf=/[\-:]([a-z])/g;function Jf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zf,Jf);ut[t]=new At(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zf,Jf);ut[t]=new At(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zf,Jf);ut[t]=new At(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new At(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new At(e,1,!1,e.toLowerCase(),null,!0,!0)});function ep(e,t,n,r){var i=ut.hasOwnProperty(t)?ut[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cI(t,n,i,r)&&(n=null),r||i===null?lI(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rr=qv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,el=Symbol.for("react.element"),Wi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),tp=Symbol.for("react.strict_mode"),sd=Symbol.for("react.profiler"),Xv=Symbol.for("react.provider"),Yv=Symbol.for("react.context"),np=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),ld=Symbol.for("react.suspense_list"),rp=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),Zv=Symbol.for("react.offscreen"),Tg=Symbol.iterator;function ns(e){return e===null||typeof e!="object"?null:(e=Tg&&e[Tg]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,th;function _s(e){if(th===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);th=t&&t[1]||""}return`
`+th+e}var nh=!1;function rh(e,t){if(!e||nh)return"";nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{nh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_s(e):""}function hI(e){switch(e.tag){case 5:return _s(e.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return e=rh(e.type,!1),e;case 11:return e=rh(e.type.render,!1),e;case 1:return e=rh(e.type,!0),e;default:return""}}function ud(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ki:return"Fragment";case Wi:return"Portal";case sd:return"Profiler";case tp:return"StrictMode";case ad:return"Suspense";case ld:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yv:return(e.displayName||"Context")+".Consumer";case Xv:return(e._context.displayName||"Context")+".Provider";case np:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rp:return t=e.displayName||null,t!==null?t:ud(e.type)||"Memo";case lr:t=e._payload,e=e._init;try{return ud(e(t))}catch{}}return null}function dI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ud(t);case 8:return t===tp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fI(e){var t=Jv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tl(e){e._valueTracker||(e._valueTracker=fI(e))}function e_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function eu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cd(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function xg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Rr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function t_(e,t){t=t.checked,t!=null&&ep(e,"checked",t,!1)}function hd(e,t){t_(e,t);var n=Rr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dd(e,t.type,n):t.hasOwnProperty("defaultValue")&&dd(e,t.type,Rr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ig(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function dd(e,t,n){(t!=="number"||eu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ws=Array.isArray;function oo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Rr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function fd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(ws(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Rr(n)}}function n_(e,t){var n=Rr(t.value),r=Rr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ag(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function r_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?r_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nl,i_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nl=nl||document.createElement("div"),nl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ws(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pI=["Webkit","ms","Moz","O"];Object.keys(Rs).forEach(function(e){pI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rs[t]=Rs[e]})});function o_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Rs.hasOwnProperty(e)&&Rs[e]?(""+t).trim():t+"px"}function s_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=o_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var mI=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function md(e,t){if(t){if(mI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function gd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=null;function ip(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vd=null,so=null,ao=null;function Cg(e){if(e=Ma(e)){if(typeof vd!="function")throw Error(B(280));var t=e.stateNode;t&&(t=rc(t),vd(e.stateNode,e.type,t))}}function a_(e){so?ao?ao.push(e):ao=[e]:so=e}function l_(){if(so){var e=so,t=ao;if(ao=so=null,Cg(e),t)for(e=0;e<t.length;e++)Cg(t[e])}}function u_(e,t){return e(t)}function c_(){}var ih=!1;function h_(e,t,n){if(ih)return e(t,n);ih=!0;try{return u_(e,t,n)}finally{ih=!1,(so!==null||ao!==null)&&(c_(),l_())}}function Ks(e,t){var n=e.stateNode;if(n===null)return null;var r=rc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var _d=!1;if(Qn)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){_d=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{_d=!1}function gI(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ps=!1,tu=null,nu=!1,wd=null,yI={onError:function(e){Ps=!0,tu=e}};function vI(e,t,n,r,i,o,s,a,l){Ps=!1,tu=null,gI.apply(yI,arguments)}function _I(e,t,n,r,i,o,s,a,l){if(vI.apply(this,arguments),Ps){if(Ps){var u=tu;Ps=!1,tu=null}else throw Error(B(198));nu||(nu=!0,wd=u)}}function ki(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rg(e){if(ki(e)!==e)throw Error(B(188))}function wI(e){var t=e.alternate;if(!t){if(t=ki(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Rg(i),e;if(o===r)return Rg(i),t;o=o.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function f_(e){return e=wI(e),e!==null?p_(e):null}function p_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=p_(e);if(t!==null)return t;e=e.sibling}return null}var m_=zt.unstable_scheduleCallback,Pg=zt.unstable_cancelCallback,EI=zt.unstable_shouldYield,SI=zt.unstable_requestPaint,Me=zt.unstable_now,TI=zt.unstable_getCurrentPriorityLevel,op=zt.unstable_ImmediatePriority,g_=zt.unstable_UserBlockingPriority,ru=zt.unstable_NormalPriority,xI=zt.unstable_LowPriority,y_=zt.unstable_IdlePriority,Ju=null,In=null;function II(e){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Ju,e,void 0,(e.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:CI,kI=Math.log,AI=Math.LN2;function CI(e){return e>>>=0,e===0?32:31-(kI(e)/AI|0)|0}var rl=64,il=4194304;function Es(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function iu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Es(a):(o&=s,o!==0&&(r=Es(o)))}else s=n&~i,s!==0?r=Es(s):o!==0&&(r=Es(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hn(t),i=1<<n,r|=e[n],t&=~i;return r}function RI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-hn(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=RI(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Ed(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function v_(){var e=rl;return rl<<=1,!(rl&4194240)&&(rl=64),e}function oh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Va(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hn(t),e[t]=n}function NI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-hn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function sp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ye=0;function __(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var w_,ap,E_,S_,T_,Sd=!1,ol=[],vr=null,_r=null,wr=null,Gs=new Map,qs=new Map,dr=[],DI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ng(e,t){switch(e){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Gs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qs.delete(t.pointerId)}}function is(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Ma(t),t!==null&&ap(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function VI(e,t,n,r,i){switch(t){case"focusin":return vr=is(vr,e,t,n,r,i),!0;case"dragenter":return _r=is(_r,e,t,n,r,i),!0;case"mouseover":return wr=is(wr,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Gs.set(o,is(Gs.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,qs.set(o,is(qs.get(o)||null,e,t,n,r,i)),!0}return!1}function x_(e){var t=Zr(e.target);if(t!==null){var n=ki(t);if(n!==null){if(t=n.tag,t===13){if(t=d_(n),t!==null){e.blockedOn=t,T_(e.priority,function(){E_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ol(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Td(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yd=r,n.target.dispatchEvent(r),yd=null}else return t=Ma(n),t!==null&&ap(t),e.blockedOn=n,!1;t.shift()}return!0}function Dg(e,t,n){Ol(e)&&n.delete(t)}function bI(){Sd=!1,vr!==null&&Ol(vr)&&(vr=null),_r!==null&&Ol(_r)&&(_r=null),wr!==null&&Ol(wr)&&(wr=null),Gs.forEach(Dg),qs.forEach(Dg)}function os(e,t){e.blockedOn===t&&(e.blockedOn=null,Sd||(Sd=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,bI)))}function Qs(e){function t(i){return os(i,e)}if(0<ol.length){os(ol[0],e);for(var n=1;n<ol.length;n++){var r=ol[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vr!==null&&os(vr,e),_r!==null&&os(_r,e),wr!==null&&os(wr,e),Gs.forEach(t),qs.forEach(t),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)x_(n),n.blockedOn===null&&dr.shift()}var lo=rr.ReactCurrentBatchConfig,ou=!0;function MI(e,t,n,r){var i=ye,o=lo.transition;lo.transition=null;try{ye=1,lp(e,t,n,r)}finally{ye=i,lo.transition=o}}function OI(e,t,n,r){var i=ye,o=lo.transition;lo.transition=null;try{ye=4,lp(e,t,n,r)}finally{ye=i,lo.transition=o}}function lp(e,t,n,r){if(ou){var i=Td(e,t,n,r);if(i===null)mh(e,t,r,su,n),Ng(e,r);else if(VI(i,e,t,n,r))r.stopPropagation();else if(Ng(e,r),t&4&&-1<DI.indexOf(e)){for(;i!==null;){var o=Ma(i);if(o!==null&&w_(o),o=Td(e,t,n,r),o===null&&mh(e,t,r,su,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else mh(e,t,r,null,n)}}var su=null;function Td(e,t,n,r){if(su=null,e=ip(r),e=Zr(e),e!==null)if(t=ki(e),t===null)e=null;else if(n=t.tag,n===13){if(e=d_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return su=e,null}function I_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TI()){case op:return 1;case g_:return 4;case ru:case xI:return 16;case y_:return 536870912;default:return 16}default:return 16}}var mr=null,up=null,$l=null;function k_(){if($l)return $l;var e,t=up,n=t.length,r,i="value"in mr?mr.value:mr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return $l=i.slice(e,1<r?1-r:void 0)}function Ll(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sl(){return!0}function Vg(){return!1}function Ht(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sl:Vg,this.isPropagationStopped=Vg,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),t}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cp=Ht(zo),ba=Pe({},zo,{view:0,detail:0}),$I=Ht(ba),sh,ah,ss,ec=Pe({},ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ss&&(ss&&e.type==="mousemove"?(sh=e.screenX-ss.screenX,ah=e.screenY-ss.screenY):ah=sh=0,ss=e),sh)},movementY:function(e){return"movementY"in e?e.movementY:ah}}),bg=Ht(ec),LI=Pe({},ec,{dataTransfer:0}),FI=Ht(LI),zI=Pe({},ba,{relatedTarget:0}),lh=Ht(zI),UI=Pe({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),jI=Ht(UI),BI=Pe({},zo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),HI=Ht(BI),WI=Pe({},zo,{data:0}),Mg=Ht(WI),KI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qI[e])?!!t[e]:!1}function hp(){return QI}var XI=Pe({},ba,{key:function(e){if(e.key){var t=KI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ll(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?GI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hp,charCode:function(e){return e.type==="keypress"?Ll(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ll(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),YI=Ht(XI),ZI=Pe({},ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=Ht(ZI),JI=Pe({},ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hp}),ek=Ht(JI),tk=Pe({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),nk=Ht(tk),rk=Pe({},ec,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ik=Ht(rk),ok=[9,13,27,32],dp=Qn&&"CompositionEvent"in window,Ns=null;Qn&&"documentMode"in document&&(Ns=document.documentMode);var sk=Qn&&"TextEvent"in window&&!Ns,A_=Qn&&(!dp||Ns&&8<Ns&&11>=Ns),$g=" ",Lg=!1;function C_(e,t){switch(e){case"keyup":return ok.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gi=!1;function ak(e,t){switch(e){case"compositionend":return R_(t);case"keypress":return t.which!==32?null:(Lg=!0,$g);case"textInput":return e=t.data,e===$g&&Lg?null:e;default:return null}}function lk(e,t){if(Gi)return e==="compositionend"||!dp&&C_(e,t)?(e=k_(),$l=up=mr=null,Gi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return A_&&t.locale!=="ko"?null:t.data;default:return null}}var uk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uk[e.type]:t==="textarea"}function P_(e,t,n,r){a_(r),t=au(t,"onChange"),0<t.length&&(n=new cp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ds=null,Xs=null;function ck(e){U_(e,0)}function tc(e){var t=Xi(e);if(e_(t))return e}function hk(e,t){if(e==="change")return t}var N_=!1;if(Qn){var uh;if(Qn){var ch="oninput"in document;if(!ch){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),ch=typeof zg.oninput=="function"}uh=ch}else uh=!1;N_=uh&&(!document.documentMode||9<document.documentMode)}function Ug(){Ds&&(Ds.detachEvent("onpropertychange",D_),Xs=Ds=null)}function D_(e){if(e.propertyName==="value"&&tc(Xs)){var t=[];P_(t,Xs,e,ip(e)),h_(ck,t)}}function dk(e,t,n){e==="focusin"?(Ug(),Ds=t,Xs=n,Ds.attachEvent("onpropertychange",D_)):e==="focusout"&&Ug()}function fk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tc(Xs)}function pk(e,t){if(e==="click")return tc(t)}function mk(e,t){if(e==="input"||e==="change")return tc(t)}function gk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:gk;function Ys(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!od.call(t,i)||!pn(e[i],t[i]))return!1}return!0}function jg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bg(e,t){var n=jg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jg(n)}}function V_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?V_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function b_(){for(var e=window,t=eu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=eu(e.document)}return t}function fp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yk(e){var t=b_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&V_(n.ownerDocument.documentElement,n)){if(r!==null&&fp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Bg(n,o);var s=Bg(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vk=Qn&&"documentMode"in document&&11>=document.documentMode,qi=null,xd=null,Vs=null,Id=!1;function Hg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Id||qi==null||qi!==eu(r)||(r=qi,"selectionStart"in r&&fp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vs&&Ys(Vs,r)||(Vs=r,r=au(xd,"onSelect"),0<r.length&&(t=new cp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qi)))}function al(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qi={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},hh={},M_={};Qn&&(M_=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function nc(e){if(hh[e])return hh[e];if(!Qi[e])return e;var t=Qi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in M_)return hh[e]=t[n];return e}var O_=nc("animationend"),$_=nc("animationiteration"),L_=nc("animationstart"),F_=nc("transitionend"),z_=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(e,t){z_.set(e,t),Ii(t,[e])}for(var dh=0;dh<Wg.length;dh++){var fh=Wg[dh],_k=fh.toLowerCase(),wk=fh[0].toUpperCase()+fh.slice(1);br(_k,"on"+wk)}br(O_,"onAnimationEnd");br($_,"onAnimationIteration");br(L_,"onAnimationStart");br("dblclick","onDoubleClick");br("focusin","onFocus");br("focusout","onBlur");br(F_,"onTransitionEnd");_o("onMouseEnter",["mouseout","mouseover"]);_o("onMouseLeave",["mouseout","mouseover"]);_o("onPointerEnter",["pointerout","pointerover"]);_o("onPointerLeave",["pointerout","pointerover"]);Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ek=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function Kg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,_I(r,t,void 0,e),e.currentTarget=null}function U_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Kg(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Kg(i,a,u),o=l}}}if(nu)throw e=wd,nu=!1,wd=null,e}function Te(e,t){var n=t[Pd];n===void 0&&(n=t[Pd]=new Set);var r=e+"__bubble";n.has(r)||(j_(t,e,2,!1),n.add(r))}function ph(e,t,n){var r=0;t&&(r|=4),j_(n,e,r,t)}var ll="_reactListening"+Math.random().toString(36).slice(2);function Zs(e){if(!e[ll]){e[ll]=!0,Qv.forEach(function(n){n!=="selectionchange"&&(Ek.has(n)||ph(n,!1,e),ph(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ll]||(t[ll]=!0,ph("selectionchange",!1,t))}}function j_(e,t,n,r){switch(I_(t)){case 1:var i=MI;break;case 4:i=OI;break;default:i=lp}n=i.bind(null,t,n,e),i=void 0,!_d||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function mh(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Zr(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}h_(function(){var u=o,c=ip(n),h=[];e:{var d=z_.get(e);if(d!==void 0){var f=cp,g=e;switch(e){case"keypress":if(Ll(n)===0)break e;case"keydown":case"keyup":f=YI;break;case"focusin":g="focus",f=lh;break;case"focusout":g="blur",f=lh;break;case"beforeblur":case"afterblur":f=lh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=FI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=ek;break;case O_:case $_:case L_:f=jI;break;case F_:f=nk;break;case"scroll":f=$I;break;case"wheel":f=ik;break;case"copy":case"cut":case"paste":f=HI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Og}var v=(t&4)!==0,w=!v&&e==="scroll",m=v?d!==null?d+"Capture":null:d;v=[];for(var p=u,y;p!==null;){y=p;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,m!==null&&(_=Ks(p,m),_!=null&&v.push(Js(p,_,y)))),w)break;p=p.return}0<v.length&&(d=new f(d,g,null,n,c),h.push({event:d,listeners:v}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&n!==yd&&(g=n.relatedTarget||n.fromElement)&&(Zr(g)||g[Xn]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?Zr(g):null,g!==null&&(w=ki(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(v=bg,_="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=Og,_="onPointerLeave",m="onPointerEnter",p="pointer"),w=f==null?d:Xi(f),y=g==null?d:Xi(g),d=new v(_,p+"leave",f,n,c),d.target=w,d.relatedTarget=y,_=null,Zr(c)===u&&(v=new v(m,p+"enter",g,n,c),v.target=y,v.relatedTarget=w,_=v),w=_,f&&g)t:{for(v=f,m=g,p=0,y=v;y;y=Vi(y))p++;for(y=0,_=m;_;_=Vi(_))y++;for(;0<p-y;)v=Vi(v),p--;for(;0<y-p;)m=Vi(m),y--;for(;p--;){if(v===m||m!==null&&v===m.alternate)break t;v=Vi(v),m=Vi(m)}v=null}else v=null;f!==null&&Gg(h,d,f,v,!1),g!==null&&w!==null&&Gg(h,w,g,v,!0)}}e:{if(d=u?Xi(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=hk;else if(Fg(d))if(N_)E=mk;else{E=fk;var I=dk}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=pk);if(E&&(E=E(e,u))){P_(h,E,n,c);break e}I&&I(e,d,u),e==="focusout"&&(I=d._wrapperState)&&I.controlled&&d.type==="number"&&dd(d,"number",d.value)}switch(I=u?Xi(u):window,e){case"focusin":(Fg(I)||I.contentEditable==="true")&&(qi=I,xd=u,Vs=null);break;case"focusout":Vs=xd=qi=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Hg(h,n,c);break;case"selectionchange":if(vk)break;case"keydown":case"keyup":Hg(h,n,c)}var x;if(dp)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gi?C_(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(A_&&n.locale!=="ko"&&(Gi||k!=="onCompositionStart"?k==="onCompositionEnd"&&Gi&&(x=k_()):(mr=c,up="value"in mr?mr.value:mr.textContent,Gi=!0)),I=au(u,k),0<I.length&&(k=new Mg(k,e,null,n,c),h.push({event:k,listeners:I}),x?k.data=x:(x=R_(n),x!==null&&(k.data=x)))),(x=sk?ak(e,n):lk(e,n))&&(u=au(u,"onBeforeInput"),0<u.length&&(c=new Mg("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=x))}U_(h,t)})}function Js(e,t,n){return{instance:e,listener:t,currentTarget:n}}function au(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ks(e,n),o!=null&&r.unshift(Js(e,o,i)),o=Ks(e,t),o!=null&&r.push(Js(e,o,i))),e=e.return}return r}function Vi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gg(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Ks(n,o),l!=null&&s.unshift(Js(n,l,a))):i||(l=Ks(n,o),l!=null&&s.push(Js(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Sk=/\r\n?/g,Tk=/\u0000|\uFFFD/g;function qg(e){return(typeof e=="string"?e:""+e).replace(Sk,`
`).replace(Tk,"")}function ul(e,t,n){if(t=qg(t),qg(e)!==t&&n)throw Error(B(425))}function lu(){}var kd=null,Ad=null;function Cd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rd=typeof setTimeout=="function"?setTimeout:void 0,xk=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,Ik=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(e){return Qg.resolve(null).then(e).catch(kk)}:Rd;function kk(e){setTimeout(function(){throw e})}function gh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Qs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qs(t)}function Er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Uo=Math.random().toString(36).slice(2),En="__reactFiber$"+Uo,ea="__reactProps$"+Uo,Xn="__reactContainer$"+Uo,Pd="__reactEvents$"+Uo,Ak="__reactListeners$"+Uo,Ck="__reactHandles$"+Uo;function Zr(e){var t=e[En];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xn]||n[En]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xg(e);e!==null;){if(n=e[En])return n;e=Xg(e)}return t}e=n,n=e.parentNode}return null}function Ma(e){return e=e[En]||e[Xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function rc(e){return e[ea]||null}var Nd=[],Yi=-1;function Mr(e){return{current:e}}function Ie(e){0>Yi||(e.current=Nd[Yi],Nd[Yi]=null,Yi--)}function we(e,t){Yi++,Nd[Yi]=e.current,e.current=t}var Pr={},Et=Mr(Pr),Vt=Mr(!1),pi=Pr;function wo(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function bt(e){return e=e.childContextTypes,e!=null}function uu(){Ie(Vt),Ie(Et)}function Yg(e,t,n){if(Et.current!==Pr)throw Error(B(168));we(Et,t),we(Vt,n)}function B_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(B(108,dI(e)||"Unknown",i));return Pe({},n,r)}function cu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,pi=Et.current,we(Et,e),we(Vt,Vt.current),!0}function Zg(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=B_(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,Ie(Vt),Ie(Et),we(Et,e)):Ie(Vt),we(Vt,n)}var zn=null,ic=!1,yh=!1;function H_(e){zn===null?zn=[e]:zn.push(e)}function Rk(e){ic=!0,H_(e)}function Or(){if(!yh&&zn!==null){yh=!0;var e=0,t=ye;try{var n=zn;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zn=null,ic=!1}catch(i){throw zn!==null&&(zn=zn.slice(e+1)),m_(op,Or),i}finally{ye=t,yh=!1}}return null}var Zi=[],Ji=0,hu=null,du=0,Kt=[],Gt=0,mi=null,Un=1,jn="";function Wr(e,t){Zi[Ji++]=du,Zi[Ji++]=hu,hu=e,du=t}function W_(e,t,n){Kt[Gt++]=Un,Kt[Gt++]=jn,Kt[Gt++]=mi,mi=e;var r=Un;e=jn;var i=32-hn(r)-1;r&=~(1<<i),n+=1;var o=32-hn(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Un=1<<32-hn(t)+i|n<<i|r,jn=o+e}else Un=1<<o|n<<i|r,jn=e}function pp(e){e.return!==null&&(Wr(e,1),W_(e,1,0))}function mp(e){for(;e===hu;)hu=Zi[--Ji],Zi[Ji]=null,du=Zi[--Ji],Zi[Ji]=null;for(;e===mi;)mi=Kt[--Gt],Kt[Gt]=null,jn=Kt[--Gt],Kt[Gt]=null,Un=Kt[--Gt],Kt[Gt]=null}var Ft=null,Lt=null,ke=!1,ln=null;function K_(e,t){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Jg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,Lt=Er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=mi!==null?{id:Un,overflow:jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,Lt=null,!0):!1;default:return!1}}function Dd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vd(e){if(ke){var t=Lt;if(t){var n=t;if(!Jg(e,t)){if(Dd(e))throw Error(B(418));t=Er(n.nextSibling);var r=Ft;t&&Jg(e,t)?K_(r,n):(e.flags=e.flags&-4097|2,ke=!1,Ft=e)}}else{if(Dd(e))throw Error(B(418));e.flags=e.flags&-4097|2,ke=!1,Ft=e}}}function ey(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function cl(e){if(e!==Ft)return!1;if(!ke)return ey(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cd(e.type,e.memoizedProps)),t&&(t=Lt)){if(Dd(e))throw G_(),Error(B(418));for(;t;)K_(e,t),t=Er(t.nextSibling)}if(ey(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lt=Er(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=Ft?Er(e.stateNode.nextSibling):null;return!0}function G_(){for(var e=Lt;e;)e=Er(e.nextSibling)}function Eo(){Lt=Ft=null,ke=!1}function gp(e){ln===null?ln=[e]:ln.push(e)}var Pk=rr.ReactCurrentBatchConfig;function on(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var fu=Mr(null),pu=null,eo=null,yp=null;function vp(){yp=eo=pu=null}function _p(e){var t=fu.current;Ie(fu),e._currentValue=t}function bd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function uo(e,t){pu=e,yp=eo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function tn(e){var t=e._currentValue;if(yp!==e)if(e={context:e,memoizedValue:t,next:null},eo===null){if(pu===null)throw Error(B(308));eo=e,pu.dependencies={lanes:0,firstContext:e}}else eo=eo.next=e;return t}var Jr=null;function wp(e){Jr===null?Jr=[e]:Jr.push(e)}function q_(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,wp(t)):(n.next=i.next,i.next=n),t.interleaved=n,Yn(e,r)}function Yn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ur=!1;function Ep(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Yn(e,n)}return i=r.interleaved,i===null?(t.next=t,wp(r)):(t.next=i.next,i.next=t),r.interleaved=t,Yn(e,n)}function Fl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sp(e,n)}}function ty(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mu(e,t,n,r){var i=e.updateQueue;ur=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var h=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(d=t,f=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=Pe({},h,d);break e;case 2:ur=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);yi|=s,e.lanes=s,e.memoizedState=h}}function ny(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var X_=new qv.Component().refs;function Md(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var oc={isMounted:function(e){return(e=e._reactInternals)?ki(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=It(),i=xr(e),o=Wn(r,i);o.payload=t,n!=null&&(o.callback=n),t=Sr(e,o,i),t!==null&&(dn(t,e,i,r),Fl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=It(),i=xr(e),o=Wn(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Sr(e,o,i),t!==null&&(dn(t,e,i,r),Fl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=It(),r=xr(e),i=Wn(n,r);i.tag=2,t!=null&&(i.callback=t),t=Sr(e,i,r),t!==null&&(dn(t,e,r,n),Fl(t,e,r))}};function ry(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Ys(n,r)||!Ys(i,o):!0}function Y_(e,t,n){var r=!1,i=Pr,o=t.contextType;return typeof o=="object"&&o!==null?o=tn(o):(i=bt(t)?pi:Et.current,r=t.contextTypes,o=(r=r!=null)?wo(e,i):Pr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function iy(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oc.enqueueReplaceState(t,t.state,null)}function Od(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=X_,Ep(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=tn(o):(o=bt(t)?pi:Et.current,i.context=wo(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Md(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&oc.enqueueReplaceState(i,i.state,null),mu(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function as(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;a===X_&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function hl(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oy(e){var t=e._init;return t(e._payload)}function Z_(e){function t(m,p){if(e){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function n(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function i(m,p){return m=Ir(m,p),m.index=0,m.sibling=null,m}function o(m,p,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,p,y,_){return p===null||p.tag!==6?(p=xh(y,m.mode,_),p.return=m,p):(p=i(p,y),p.return=m,p)}function l(m,p,y,_){var E=y.type;return E===Ki?c(m,p,y.props.children,_,y.key):p!==null&&(p.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===lr&&oy(E)===p.type)?(_=i(p,y.props),_.ref=as(m,p,y),_.return=m,_):(_=Wl(y.type,y.key,y.props,null,m.mode,_),_.ref=as(m,p,y),_.return=m,_)}function u(m,p,y,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Ih(y,m.mode,_),p.return=m,p):(p=i(p,y.children||[]),p.return=m,p)}function c(m,p,y,_,E){return p===null||p.tag!==7?(p=ci(y,m.mode,_,E),p.return=m,p):(p=i(p,y),p.return=m,p)}function h(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=xh(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case el:return y=Wl(p.type,p.key,p.props,null,m.mode,y),y.ref=as(m,null,p),y.return=m,y;case Wi:return p=Ih(p,m.mode,y),p.return=m,p;case lr:var _=p._init;return h(m,_(p._payload),y)}if(ws(p)||ns(p))return p=ci(p,m.mode,y,null),p.return=m,p;hl(m,p)}return null}function d(m,p,y,_){var E=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:a(m,p,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case el:return y.key===E?l(m,p,y,_):null;case Wi:return y.key===E?u(m,p,y,_):null;case lr:return E=y._init,d(m,p,E(y._payload),_)}if(ws(y)||ns(y))return E!==null?null:c(m,p,y,_,null);hl(m,y)}return null}function f(m,p,y,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(y)||null,a(p,m,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case el:return m=m.get(_.key===null?y:_.key)||null,l(p,m,_,E);case Wi:return m=m.get(_.key===null?y:_.key)||null,u(p,m,_,E);case lr:var I=_._init;return f(m,p,y,I(_._payload),E)}if(ws(_)||ns(_))return m=m.get(y)||null,c(p,m,_,E,null);hl(p,_)}return null}function g(m,p,y,_){for(var E=null,I=null,x=p,k=p=0,N=null;x!==null&&k<y.length;k++){x.index>k?(N=x,x=null):N=x.sibling;var M=d(m,x,y[k],_);if(M===null){x===null&&(x=N);break}e&&x&&M.alternate===null&&t(m,x),p=o(M,p,k),I===null?E=M:I.sibling=M,I=M,x=N}if(k===y.length)return n(m,x),ke&&Wr(m,k),E;if(x===null){for(;k<y.length;k++)x=h(m,y[k],_),x!==null&&(p=o(x,p,k),I===null?E=x:I.sibling=x,I=x);return ke&&Wr(m,k),E}for(x=r(m,x);k<y.length;k++)N=f(x,m,k,y[k],_),N!==null&&(e&&N.alternate!==null&&x.delete(N.key===null?k:N.key),p=o(N,p,k),I===null?E=N:I.sibling=N,I=N);return e&&x.forEach(function(U){return t(m,U)}),ke&&Wr(m,k),E}function v(m,p,y,_){var E=ns(y);if(typeof E!="function")throw Error(B(150));if(y=E.call(y),y==null)throw Error(B(151));for(var I=E=null,x=p,k=p=0,N=null,M=y.next();x!==null&&!M.done;k++,M=y.next()){x.index>k?(N=x,x=null):N=x.sibling;var U=d(m,x,M.value,_);if(U===null){x===null&&(x=N);break}e&&x&&U.alternate===null&&t(m,x),p=o(U,p,k),I===null?E=U:I.sibling=U,I=U,x=N}if(M.done)return n(m,x),ke&&Wr(m,k),E;if(x===null){for(;!M.done;k++,M=y.next())M=h(m,M.value,_),M!==null&&(p=o(M,p,k),I===null?E=M:I.sibling=M,I=M);return ke&&Wr(m,k),E}for(x=r(m,x);!M.done;k++,M=y.next())M=f(x,m,k,M.value,_),M!==null&&(e&&M.alternate!==null&&x.delete(M.key===null?k:M.key),p=o(M,p,k),I===null?E=M:I.sibling=M,I=M);return e&&x.forEach(function(H){return t(m,H)}),ke&&Wr(m,k),E}function w(m,p,y,_){if(typeof y=="object"&&y!==null&&y.type===Ki&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case el:e:{for(var E=y.key,I=p;I!==null;){if(I.key===E){if(E=y.type,E===Ki){if(I.tag===7){n(m,I.sibling),p=i(I,y.props.children),p.return=m,m=p;break e}}else if(I.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===lr&&oy(E)===I.type){n(m,I.sibling),p=i(I,y.props),p.ref=as(m,I,y),p.return=m,m=p;break e}n(m,I);break}else t(m,I);I=I.sibling}y.type===Ki?(p=ci(y.props.children,m.mode,_,y.key),p.return=m,m=p):(_=Wl(y.type,y.key,y.props,null,m.mode,_),_.ref=as(m,p,y),_.return=m,m=_)}return s(m);case Wi:e:{for(I=y.key;p!==null;){if(p.key===I)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(m,p.sibling),p=i(p,y.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else t(m,p);p=p.sibling}p=Ih(y,m.mode,_),p.return=m,m=p}return s(m);case lr:return I=y._init,w(m,p,I(y._payload),_)}if(ws(y))return g(m,p,y,_);if(ns(y))return v(m,p,y,_);hl(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(m,p.sibling),p=i(p,y),p.return=m,m=p):(n(m,p),p=xh(y,m.mode,_),p.return=m,m=p),s(m)):n(m,p)}return w}var So=Z_(!0),J_=Z_(!1),Oa={},kn=Mr(Oa),ta=Mr(Oa),na=Mr(Oa);function ei(e){if(e===Oa)throw Error(B(174));return e}function Sp(e,t){switch(we(na,t),we(ta,e),we(kn,Oa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pd(t,e)}Ie(kn),we(kn,t)}function To(){Ie(kn),Ie(ta),Ie(na)}function ew(e){ei(na.current);var t=ei(kn.current),n=pd(t,e.type);t!==n&&(we(ta,e),we(kn,n))}function Tp(e){ta.current===e&&(Ie(kn),Ie(ta))}var Ce=Mr(0);function gu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vh=[];function xp(){for(var e=0;e<vh.length;e++)vh[e]._workInProgressVersionPrimary=null;vh.length=0}var zl=rr.ReactCurrentDispatcher,_h=rr.ReactCurrentBatchConfig,gi=0,Re=null,Ue=null,qe=null,yu=!1,bs=!1,ra=0,Nk=0;function ht(){throw Error(B(321))}function Ip(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pn(e[n],t[n]))return!1;return!0}function kp(e,t,n,r,i,o){if(gi=o,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zl.current=e===null||e.memoizedState===null?Mk:Ok,e=n(r,i),bs){o=0;do{if(bs=!1,ra=0,25<=o)throw Error(B(301));o+=1,qe=Ue=null,t.updateQueue=null,zl.current=$k,e=n(r,i)}while(bs)}if(zl.current=vu,t=Ue!==null&&Ue.next!==null,gi=0,qe=Ue=Re=null,yu=!1,t)throw Error(B(300));return e}function Ap(){var e=ra!==0;return ra=0,e}function _n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Re.memoizedState=qe=e:qe=qe.next=e,qe}function nn(){if(Ue===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=qe===null?Re.memoizedState:qe.next;if(t!==null)qe=t,Ue=e;else{if(e===null)throw Error(B(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},qe===null?Re.memoizedState=qe=e:qe=qe.next=e}return qe}function ia(e,t){return typeof t=="function"?t(e):t}function wh(e){var t=nn(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=Ue,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((gi&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,s=r):l=l.next=h,Re.lanes|=c,yi|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,pn(r,t.memoizedState)||(Nt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Re.lanes|=o,yi|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eh(e){var t=nn(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);pn(o,t.memoizedState)||(Nt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function tw(){}function nw(e,t){var n=Re,r=nn(),i=t(),o=!pn(r.memoizedState,i);if(o&&(r.memoizedState=i,Nt=!0),r=r.queue,Cp(ow.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,oa(9,iw.bind(null,n,r,i,t),void 0,null),Qe===null)throw Error(B(349));gi&30||rw(n,t,i)}return i}function rw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function iw(e,t,n,r){t.value=n,t.getSnapshot=r,sw(t)&&aw(e)}function ow(e,t,n){return n(function(){sw(t)&&aw(e)})}function sw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pn(e,n)}catch{return!0}}function aw(e){var t=Yn(e,1);t!==null&&dn(t,e,1,-1)}function sy(e){var t=_n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:e},t.queue=e,e=e.dispatch=bk.bind(null,Re,e),[t.memoizedState,e]}function oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function lw(){return nn().memoizedState}function Ul(e,t,n,r){var i=_n();Re.flags|=e,i.memoizedState=oa(1|t,n,void 0,r===void 0?null:r)}function sc(e,t,n,r){var i=nn();r=r===void 0?null:r;var o=void 0;if(Ue!==null){var s=Ue.memoizedState;if(o=s.destroy,r!==null&&Ip(r,s.deps)){i.memoizedState=oa(t,n,o,r);return}}Re.flags|=e,i.memoizedState=oa(1|t,n,o,r)}function ay(e,t){return Ul(8390656,8,e,t)}function Cp(e,t){return sc(2048,8,e,t)}function uw(e,t){return sc(4,2,e,t)}function cw(e,t){return sc(4,4,e,t)}function hw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dw(e,t,n){return n=n!=null?n.concat([e]):null,sc(4,4,hw.bind(null,t,e),n)}function Rp(){}function fw(e,t){var n=nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ip(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pw(e,t){var n=nn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ip(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function mw(e,t,n){return gi&21?(pn(n,t)||(n=v_(),Re.lanes|=n,yi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n)}function Dk(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=_h.transition;_h.transition={};try{e(!1),t()}finally{ye=n,_h.transition=r}}function gw(){return nn().memoizedState}function Vk(e,t,n){var r=xr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yw(e))vw(t,n);else if(n=q_(e,t,n,r),n!==null){var i=It();dn(n,e,r,i),_w(n,t,r)}}function bk(e,t,n){var r=xr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yw(e))vw(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,pn(a,s)){var l=t.interleaved;l===null?(i.next=i,wp(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=q_(e,t,i,r),n!==null&&(i=It(),dn(n,e,r,i),_w(n,t,r))}}function yw(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function vw(e,t){bs=yu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _w(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sp(e,n)}}var vu={readContext:tn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Mk={readContext:tn,useCallback:function(e,t){return _n().memoizedState=[e,t===void 0?null:t],e},useContext:tn,useEffect:ay,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ul(4194308,4,hw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ul(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ul(4,2,e,t)},useMemo:function(e,t){var n=_n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vk.bind(null,Re,e),[r.memoizedState,e]},useRef:function(e){var t=_n();return e={current:e},t.memoizedState=e},useState:sy,useDebugValue:Rp,useDeferredValue:function(e){return _n().memoizedState=e},useTransition:function(){var e=sy(!1),t=e[0];return e=Dk.bind(null,e[1]),_n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Re,i=_n();if(ke){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),Qe===null)throw Error(B(349));gi&30||rw(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,ay(ow.bind(null,r,o,e),[e]),r.flags|=2048,oa(9,iw.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_n(),t=Qe.identifierPrefix;if(ke){var n=jn,r=Un;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ra++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Nk++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ok={readContext:tn,useCallback:fw,useContext:tn,useEffect:Cp,useImperativeHandle:dw,useInsertionEffect:uw,useLayoutEffect:cw,useMemo:pw,useReducer:wh,useRef:lw,useState:function(){return wh(ia)},useDebugValue:Rp,useDeferredValue:function(e){var t=nn();return mw(t,Ue.memoizedState,e)},useTransition:function(){var e=wh(ia)[0],t=nn().memoizedState;return[e,t]},useMutableSource:tw,useSyncExternalStore:nw,useId:gw,unstable_isNewReconciler:!1},$k={readContext:tn,useCallback:fw,useContext:tn,useEffect:Cp,useImperativeHandle:dw,useInsertionEffect:uw,useLayoutEffect:cw,useMemo:pw,useReducer:Eh,useRef:lw,useState:function(){return Eh(ia)},useDebugValue:Rp,useDeferredValue:function(e){var t=nn();return Ue===null?t.memoizedState=e:mw(t,Ue.memoizedState,e)},useTransition:function(){var e=Eh(ia)[0],t=nn().memoizedState;return[e,t]},useMutableSource:tw,useSyncExternalStore:nw,useId:gw,unstable_isNewReconciler:!1};function xo(e,t){try{var n="",r=t;do n+=hI(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Sh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $d(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lk=typeof WeakMap=="function"?WeakMap:Map;function ww(e,t,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wu||(wu=!0,Gd=r),$d(e,t)},n}function Ew(e,t,n){n=Wn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){$d(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$d(e,t),typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function ly(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lk;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Zk.bind(null,e,t,n),t.then(e,e))}function uy(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cy(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wn(-1,1),t.tag=2,Sr(n,t,1))),n.lanes|=1),e)}var Fk=rr.ReactCurrentOwner,Nt=!1;function Tt(e,t,n,r){t.child=e===null?J_(t,null,n,r):So(t,e.child,n,r)}function hy(e,t,n,r,i){n=n.render;var o=t.ref;return uo(t,i),r=kp(e,t,n,r,o,i),n=Ap(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zn(e,t,i)):(ke&&n&&pp(t),t.flags|=1,Tt(e,t,r,i),t.child)}function dy(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!$p(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Sw(e,t,o,r,i)):(e=Wl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ys,n(s,r)&&e.ref===t.ref)return Zn(e,t,i)}return t.flags|=1,e=Ir(o,r),e.ref=t.ref,e.return=t,t.child=e}function Sw(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Ys(o,r)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Zn(e,t,i)}return Ld(e,t,n,r,i)}function Tw(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(no,$t),$t|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(no,$t),$t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,we(no,$t),$t|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,we(no,$t),$t|=r;return Tt(e,t,i,n),t.child}function xw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ld(e,t,n,r,i){var o=bt(n)?pi:Et.current;return o=wo(t,o),uo(t,i),n=kp(e,t,n,r,o,i),r=Ap(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zn(e,t,i)):(ke&&r&&pp(t),t.flags|=1,Tt(e,t,n,i),t.child)}function fy(e,t,n,r,i){if(bt(n)){var o=!0;cu(t)}else o=!1;if(uo(t,i),t.stateNode===null)jl(e,t),Y_(t,n,r),Od(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=tn(u):(u=bt(n)?pi:Et.current,u=wo(t,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&iy(t,s,r,u),ur=!1;var d=t.memoizedState;s.state=d,mu(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Vt.current||ur?(typeof c=="function"&&(Md(t,n,c,r),l=t.memoizedState),(a=ur||ry(t,n,a,r,d,l,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Q_(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:on(t.type,a),s.props=u,h=t.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=tn(l):(l=bt(n)?pi:Et.current,l=wo(t,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||d!==l)&&iy(t,s,r,l),ur=!1,d=t.memoizedState,s.state=d,mu(t,r,s,i);var g=t.memoizedState;a!==h||d!==g||Vt.current||ur?(typeof f=="function"&&(Md(t,n,f,r),g=t.memoizedState),(u=ur||ry(t,n,u,r,d,g,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),s.props=r,s.state=g,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Fd(e,t,n,r,o,i)}function Fd(e,t,n,r,i,o){xw(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&Zg(t,n,!1),Zn(e,t,o);r=t.stateNode,Fk.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=So(t,e.child,null,o),t.child=So(t,null,a,o)):Tt(e,t,a,o),t.memoizedState=r.state,i&&Zg(t,n,!0),t.child}function Iw(e){var t=e.stateNode;t.pendingContext?Yg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yg(e,t.context,!1),Sp(e,t.containerInfo)}function py(e,t,n,r,i){return Eo(),gp(i),t.flags|=256,Tt(e,t,n,r),t.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function Ud(e){return{baseLanes:e,cachePool:null,transitions:null}}function kw(e,t,n){var r=t.pendingProps,i=Ce.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),we(Ce,i&1),e===null)return Vd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=uc(s,r,0,null),e=ci(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ud(n),t.memoizedState=zd,e):Pp(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zk(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ir(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ir(a,o):(o=ci(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Ud(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=zd,r}return o=e.child,e=o.sibling,r=Ir(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Pp(e,t){return t=uc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function dl(e,t,n,r){return r!==null&&gp(r),So(t,e.child,null,n),e=Pp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zk(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=Sh(Error(B(422))),dl(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=uc({mode:"visible",children:r.children},i,0,null),o=ci(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&So(t,e.child,null,s),t.child.memoizedState=Ud(s),t.memoizedState=zd,o);if(!(t.mode&1))return dl(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(B(419)),r=Sh(o,r,void 0),dl(e,t,s,r)}if(a=(s&e.childLanes)!==0,Nt||a){if(r=Qe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Yn(e,i),dn(r,e,i,-1))}return Op(),r=Sh(Error(B(421))),dl(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Jk.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Lt=Er(i.nextSibling),Ft=t,ke=!0,ln=null,e!==null&&(Kt[Gt++]=Un,Kt[Gt++]=jn,Kt[Gt++]=mi,Un=e.id,jn=e.overflow,mi=t),t=Pp(t,r.children),t.flags|=4096,t)}function my(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),bd(e.return,t,n)}function Th(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Aw(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Tt(e,t,r.children,n),r=Ce.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&my(e,n,t);else if(e.tag===19)my(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(Ce,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&gu(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Th(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&gu(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Th(t,!0,n,null,o);break;case"together":Th(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),yi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=Ir(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ir(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Uk(e,t,n){switch(t.tag){case 3:Iw(t),Eo();break;case 5:ew(t);break;case 1:bt(t.type)&&cu(t);break;case 4:Sp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;we(fu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(Ce,Ce.current&1),t.flags|=128,null):n&t.child.childLanes?kw(e,t,n):(we(Ce,Ce.current&1),e=Zn(e,t,n),e!==null?e.sibling:null);we(Ce,Ce.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Aw(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Ce,Ce.current),r)break;return null;case 22:case 23:return t.lanes=0,Tw(e,t,n)}return Zn(e,t,n)}var Cw,jd,Rw,Pw;Cw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jd=function(){};Rw=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ei(kn.current);var o=null;switch(n){case"input":i=cd(e,i),r=cd(e,r),o=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),o=[];break;case"textarea":i=fd(e,i),r=fd(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=lu)}md(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hs.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Te("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Pw=function(e,t,n,r){n!==r&&(t.flags|=4)};function ls(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jk(e,t,n){var r=t.pendingProps;switch(mp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return bt(t.type)&&uu(),dt(t),null;case 3:return r=t.stateNode,To(),Ie(Vt),Ie(Et),xp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(cl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(Xd(ln),ln=null))),jd(e,t),dt(t),null;case 5:Tp(t);var i=ei(na.current);if(n=t.type,e!==null&&t.stateNode!=null)Rw(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return dt(t),null}if(e=ei(kn.current),cl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[En]=t,r[ea]=o,e=(t.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(i=0;i<Ss.length;i++)Te(Ss[i],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":xg(r,o),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Te("invalid",r);break;case"textarea":kg(r,o),Te("invalid",r)}md(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&ul(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&ul(r.textContent,a,e),i=["children",""+a]):Hs.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Te("scroll",r)}switch(n){case"input":tl(r),Ig(r,o,!0);break;case"textarea":tl(r),Ag(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=lu)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=r_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[En]=t,e[ea]=r,Cw(e,t,!1,!1),t.stateNode=e;e:{switch(s=gd(n,r),n){case"dialog":Te("cancel",e),Te("close",e),i=r;break;case"iframe":case"object":case"embed":Te("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ss.length;i++)Te(Ss[i],e);i=r;break;case"source":Te("error",e),i=r;break;case"img":case"image":case"link":Te("error",e),Te("load",e),i=r;break;case"details":Te("toggle",e),i=r;break;case"input":xg(e,r),i=cd(e,r),Te("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Te("invalid",e);break;case"textarea":kg(e,r),i=fd(e,r),Te("invalid",e);break;default:i=r}md(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?s_(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&i_(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ws(e,l):typeof l=="number"&&Ws(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Hs.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Te("scroll",e):l!=null&&ep(e,o,l,s))}switch(n){case"input":tl(e),Ig(e,r,!1);break;case"textarea":tl(e),Ag(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Rr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?oo(e,!!r.multiple,o,!1):r.defaultValue!=null&&oo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Pw(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=ei(na.current),ei(kn.current),cl(t)){if(r=t.stateNode,n=t.memoizedProps,r[En]=t,(o=r.nodeValue!==n)&&(e=Ft,e!==null))switch(e.tag){case 3:ul(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ul(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=t,t.stateNode=r}return dt(t),null;case 13:if(Ie(Ce),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&Lt!==null&&t.mode&1&&!(t.flags&128))G_(),Eo(),t.flags|=98560,o=!1;else if(o=cl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(B(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[En]=t}else Eo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),o=!1}else ln!==null&&(Xd(ln),ln=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ce.current&1?Be===0&&(Be=3):Op())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return To(),jd(e,t),e===null&&Zs(t.stateNode.containerInfo),dt(t),null;case 10:return _p(t.type._context),dt(t),null;case 17:return bt(t.type)&&uu(),dt(t),null;case 19:if(Ie(Ce),o=t.memoizedState,o===null)return dt(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)ls(o,!1);else{if(Be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=gu(e),s!==null){for(t.flags|=128,ls(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Ce,Ce.current&1|2),t.child}e=e.sibling}o.tail!==null&&Me()>Io&&(t.flags|=128,r=!0,ls(o,!1),t.lanes=4194304)}else{if(!r)if(e=gu(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ls(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ke)return dt(t),null}else 2*Me()-o.renderingStartTime>Io&&n!==1073741824&&(t.flags|=128,r=!0,ls(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Me(),t.sibling=null,n=Ce.current,we(Ce,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return Mp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$t&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function Bk(e,t){switch(mp(t),t.tag){case 1:return bt(t.type)&&uu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return To(),Ie(Vt),Ie(Et),xp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Tp(t),null;case 13:if(Ie(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Ce),null;case 4:return To(),null;case 10:return _p(t.type._context),null;case 22:case 23:return Mp(),null;case 24:return null;default:return null}}var fl=!1,gt=!1,Hk=typeof WeakSet=="function"?WeakSet:Set,X=null;function to(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(e,t,r)}else n.current=null}function Bd(e,t,n){try{n()}catch(r){De(e,t,r)}}var gy=!1;function Wk(e,t){if(kd=ou,e=b_(),fp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,h=e,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(l=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===e)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ad={focusedElem:e,selectionRange:n},ou=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:on(t.type,v),w);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(_){De(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return g=gy,gy=!1,g}function Ms(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Bd(t,n,o)}i=i.next}while(i!==r)}}function ac(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Nw(e){var t=e.alternate;t!==null&&(e.alternate=null,Nw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[En],delete t[ea],delete t[Pd],delete t[Ak],delete t[Ck])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dw(e){return e.tag===5||e.tag===3||e.tag===4}function yy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=lu));else if(r!==4&&(e=e.child,e!==null))for(Wd(e,t,n),e=e.sibling;e!==null;)Wd(e,t,n),e=e.sibling}function Kd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Kd(e,t,n),e=e.sibling;e!==null;)Kd(e,t,n),e=e.sibling}var nt=null,sn=!1;function sr(e,t,n){for(n=n.child;n!==null;)Vw(e,t,n),n=n.sibling}function Vw(e,t,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Ju,n)}catch{}switch(n.tag){case 5:gt||to(n,t);case 6:var r=nt,i=sn;nt=null,sr(e,t,n),nt=r,sn=i,nt!==null&&(sn?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(sn?(e=nt,n=n.stateNode,e.nodeType===8?gh(e.parentNode,n):e.nodeType===1&&gh(e,n),Qs(e)):gh(nt,n.stateNode));break;case 4:r=nt,i=sn,nt=n.stateNode.containerInfo,sn=!0,sr(e,t,n),nt=r,sn=i;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Bd(n,t,s),i=i.next}while(i!==r)}sr(e,t,n);break;case 1:if(!gt&&(to(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,t,a)}sr(e,t,n);break;case 21:sr(e,t,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,sr(e,t,n),gt=r):sr(e,t,n);break;default:sr(e,t,n)}}function vy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Hk),t.forEach(function(r){var i=eA.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,sn=!1;break e;case 3:nt=a.stateNode.containerInfo,sn=!0;break e;case 4:nt=a.stateNode.containerInfo,sn=!0;break e}a=a.return}if(nt===null)throw Error(B(160));Vw(o,s,i),nt=null,sn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){De(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bw(t,e),t=t.sibling}function bw(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rn(t,e),vn(e),r&4){try{Ms(3,e,e.return),ac(3,e)}catch(v){De(e,e.return,v)}try{Ms(5,e,e.return)}catch(v){De(e,e.return,v)}}break;case 1:rn(t,e),vn(e),r&512&&n!==null&&to(n,n.return);break;case 5:if(rn(t,e),vn(e),r&512&&n!==null&&to(n,n.return),e.flags&32){var i=e.stateNode;try{Ws(i,"")}catch(v){De(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&t_(i,o),gd(a,s);var u=gd(a,o);for(s=0;s<l.length;s+=2){var c=l[s],h=l[s+1];c==="style"?s_(i,h):c==="dangerouslySetInnerHTML"?i_(i,h):c==="children"?Ws(i,h):ep(i,c,h,u)}switch(a){case"input":hd(i,o);break;case"textarea":n_(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?oo(i,!!o.multiple,f,!1):d!==!!o.multiple&&(o.defaultValue!=null?oo(i,!!o.multiple,o.defaultValue,!0):oo(i,!!o.multiple,o.multiple?[]:"",!1))}i[ea]=o}catch(v){De(e,e.return,v)}}break;case 6:if(rn(t,e),vn(e),r&4){if(e.stateNode===null)throw Error(B(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){De(e,e.return,v)}}break;case 3:if(rn(t,e),vn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(v){De(e,e.return,v)}break;case 4:rn(t,e),vn(e);break;case 13:rn(t,e),vn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Vp=Me())),r&4&&vy(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(gt=(u=gt)||c,rn(t,e),gt=u):rn(t,e),vn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(X=e,c=e.child;c!==null;){for(h=X=c;X!==null;){switch(d=X,f=d.child,d.tag){case 0:case 11:case 14:case 15:Ms(4,d,d.return);break;case 1:to(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){De(r,n,v)}}break;case 5:to(d,d.return);break;case 22:if(d.memoizedState!==null){wy(h);continue}}f!==null?(f.return=d,X=f):wy(h)}c=c.sibling}e:for(c=null,h=e;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,l=h.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=o_("display",s))}catch(v){De(e,e.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){De(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rn(t,e),vn(e),r&4&&vy(e);break;case 21:break;default:rn(t,e),vn(e)}}function vn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Dw(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ws(i,""),r.flags&=-33);var o=yy(e);Kd(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=yy(e);Wd(e,a,s);break;default:throw Error(B(161))}}catch(l){De(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kk(e,t,n){X=e,Mw(e)}function Mw(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var i=X,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||fl;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||gt;a=fl;var u=gt;if(fl=s,(gt=l)&&!u)for(X=i;X!==null;)s=X,l=s.child,s.tag===22&&s.memoizedState!==null?Ey(i):l!==null?(l.return=s,X=l):Ey(i);for(;o!==null;)X=o,Mw(o),o=o.sibling;X=i,fl=a,gt=u}_y(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,X=o):_y(e)}}function _y(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||ac(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:on(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ny(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ny(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Qs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}gt||t.flags&512&&Hd(t)}catch(d){De(t,t.return,d)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function wy(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Ey(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ac(4,t)}catch(l){De(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){De(t,i,l)}}var o=t.return;try{Hd(t)}catch(l){De(t,o,l)}break;case 5:var s=t.return;try{Hd(t)}catch(l){De(t,s,l)}}}catch(l){De(t,t.return,l)}if(t===e){X=null;break}var a=t.sibling;if(a!==null){a.return=t.return,X=a;break}X=t.return}}var Gk=Math.ceil,_u=rr.ReactCurrentDispatcher,Np=rr.ReactCurrentOwner,Jt=rr.ReactCurrentBatchConfig,de=0,Qe=null,Fe=null,st=0,$t=0,no=Mr(0),Be=0,sa=null,yi=0,lc=0,Dp=0,Os=null,Pt=null,Vp=0,Io=1/0,Fn=null,wu=!1,Gd=null,Tr=null,pl=!1,gr=null,Eu=0,$s=0,qd=null,Bl=-1,Hl=0;function It(){return de&6?Me():Bl!==-1?Bl:Bl=Me()}function xr(e){return e.mode&1?de&2&&st!==0?st&-st:Pk.transition!==null?(Hl===0&&(Hl=v_()),Hl):(e=ye,e!==0||(e=window.event,e=e===void 0?16:I_(e.type)),e):1}function dn(e,t,n,r){if(50<$s)throw $s=0,qd=null,Error(B(185));Va(e,n,r),(!(de&2)||e!==Qe)&&(e===Qe&&(!(de&2)&&(lc|=n),Be===4&&fr(e,st)),Mt(e,r),n===1&&de===0&&!(t.mode&1)&&(Io=Me()+500,ic&&Or()))}function Mt(e,t){var n=e.callbackNode;PI(e,t);var r=iu(e,e===Qe?st:0);if(r===0)n!==null&&Pg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Pg(n),t===1)e.tag===0?Rk(Sy.bind(null,e)):H_(Sy.bind(null,e)),Ik(function(){!(de&6)&&Or()}),n=null;else{switch(__(r)){case 1:n=op;break;case 4:n=g_;break;case 16:n=ru;break;case 536870912:n=y_;break;default:n=ru}n=Bw(n,Ow.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ow(e,t){if(Bl=-1,Hl=0,de&6)throw Error(B(327));var n=e.callbackNode;if(co()&&e.callbackNode!==n)return null;var r=iu(e,e===Qe?st:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Su(e,r);else{t=r;var i=de;de|=2;var o=Lw();(Qe!==e||st!==t)&&(Fn=null,Io=Me()+500,ui(e,t));do try{Xk();break}catch(a){$w(e,a)}while(!0);vp(),_u.current=o,de=i,Fe!==null?t=0:(Qe=null,st=0,t=Be)}if(t!==0){if(t===2&&(i=Ed(e),i!==0&&(r=i,t=Qd(e,i))),t===1)throw n=sa,ui(e,0),fr(e,r),Mt(e,Me()),n;if(t===6)fr(e,r);else{if(i=e.current.alternate,!(r&30)&&!qk(i)&&(t=Su(e,r),t===2&&(o=Ed(e),o!==0&&(r=o,t=Qd(e,o))),t===1))throw n=sa,ui(e,0),fr(e,r),Mt(e,Me()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:Kr(e,Pt,Fn);break;case 3:if(fr(e,r),(r&130023424)===r&&(t=Vp+500-Me(),10<t)){if(iu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){It(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Rd(Kr.bind(null,e,Pt,Fn),t);break}Kr(e,Pt,Fn);break;case 4:if(fr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-hn(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gk(r/1960))-r,10<r){e.timeoutHandle=Rd(Kr.bind(null,e,Pt,Fn),r);break}Kr(e,Pt,Fn);break;case 5:Kr(e,Pt,Fn);break;default:throw Error(B(329))}}}return Mt(e,Me()),e.callbackNode===n?Ow.bind(null,e):null}function Qd(e,t){var n=Os;return e.current.memoizedState.isDehydrated&&(ui(e,t).flags|=256),e=Su(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&Xd(t)),e}function Xd(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function qk(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!pn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fr(e,t){for(t&=~Dp,t&=~lc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hn(t),r=1<<n;e[n]=-1,t&=~r}}function Sy(e){if(de&6)throw Error(B(327));co();var t=iu(e,0);if(!(t&1))return Mt(e,Me()),null;var n=Su(e,t);if(e.tag!==0&&n===2){var r=Ed(e);r!==0&&(t=r,n=Qd(e,r))}if(n===1)throw n=sa,ui(e,0),fr(e,t),Mt(e,Me()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kr(e,Pt,Fn),Mt(e,Me()),null}function bp(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(Io=Me()+500,ic&&Or())}}function vi(e){gr!==null&&gr.tag===0&&!(de&6)&&co();var t=de;de|=1;var n=Jt.transition,r=ye;try{if(Jt.transition=null,ye=1,e)return e()}finally{ye=r,Jt.transition=n,de=t,!(de&6)&&Or()}}function Mp(){$t=no.current,Ie(no)}function ui(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xk(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(mp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uu();break;case 3:To(),Ie(Vt),Ie(Et),xp();break;case 5:Tp(r);break;case 4:To();break;case 13:Ie(Ce);break;case 19:Ie(Ce);break;case 10:_p(r.type._context);break;case 22:case 23:Mp()}n=n.return}if(Qe=e,Fe=e=Ir(e.current,null),st=$t=t,Be=0,sa=null,Dp=lc=yi=0,Pt=Os=null,Jr!==null){for(t=0;t<Jr.length;t++)if(n=Jr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Jr=null}return e}function $w(e,t){do{var n=Fe;try{if(vp(),zl.current=vu,yu){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yu=!1}if(gi=0,qe=Ue=Re=null,bs=!1,ra=0,Np.current=null,n===null||n.return===null){Be=1,sa=t,Fe=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=uy(s);if(f!==null){f.flags&=-257,cy(f,s,a,o,t),f.mode&1&&ly(o,u,t),t=f,l=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if(!(t&1)){ly(o,u,t),Op();break e}l=Error(B(426))}}else if(ke&&a.mode&1){var w=uy(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),cy(w,s,a,o,t),gp(xo(l,a));break e}}o=l=xo(l,a),Be!==4&&(Be=2),Os===null?Os=[o]:Os.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=ww(o,l,t);ty(o,m);break e;case 1:a=l;var p=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Tr===null||!Tr.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=Ew(o,a,t);ty(o,_);break e}}o=o.return}while(o!==null)}zw(n)}catch(E){t=E,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Lw(){var e=_u.current;return _u.current=vu,e===null?vu:e}function Op(){(Be===0||Be===3||Be===2)&&(Be=4),Qe===null||!(yi&268435455)&&!(lc&268435455)||fr(Qe,st)}function Su(e,t){var n=de;de|=2;var r=Lw();(Qe!==e||st!==t)&&(Fn=null,ui(e,t));do try{Qk();break}catch(i){$w(e,i)}while(!0);if(vp(),de=n,_u.current=r,Fe!==null)throw Error(B(261));return Qe=null,st=0,Be}function Qk(){for(;Fe!==null;)Fw(Fe)}function Xk(){for(;Fe!==null&&!EI();)Fw(Fe)}function Fw(e){var t=jw(e.alternate,e,$t);e.memoizedProps=e.pendingProps,t===null?zw(e):Fe=t,Np.current=null}function zw(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Bk(n,t),n!==null){n.flags&=32767,Fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,Fe=null;return}}else if(n=jk(n,t,$t),n!==null){Fe=n;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);Be===0&&(Be=5)}function Kr(e,t,n){var r=ye,i=Jt.transition;try{Jt.transition=null,ye=1,Yk(e,t,n,r)}finally{Jt.transition=i,ye=r}return null}function Yk(e,t,n,r){do co();while(gr!==null);if(de&6)throw Error(B(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(NI(e,o),e===Qe&&(Fe=Qe=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pl||(pl=!0,Bw(ru,function(){return co(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Jt.transition,Jt.transition=null;var s=ye;ye=1;var a=de;de|=4,Np.current=null,Wk(e,n),bw(n,e),yk(Ad),ou=!!kd,Ad=kd=null,e.current=n,Kk(n),SI(),de=a,ye=s,Jt.transition=o}else e.current=n;if(pl&&(pl=!1,gr=e,Eu=i),o=e.pendingLanes,o===0&&(Tr=null),II(n.stateNode),Mt(e,Me()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wu)throw wu=!1,e=Gd,Gd=null,e;return Eu&1&&e.tag!==0&&co(),o=e.pendingLanes,o&1?e===qd?$s++:($s=0,qd=e):$s=0,Or(),null}function co(){if(gr!==null){var e=__(Eu),t=Jt.transition,n=ye;try{if(Jt.transition=null,ye=16>e?16:e,gr===null)var r=!1;else{if(e=gr,gr=null,Eu=0,de&6)throw Error(B(331));var i=de;for(de|=4,X=e.current;X!==null;){var o=X,s=o.child;if(X.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var c=X;switch(c.tag){case 0:case 11:case 15:Ms(8,c,o)}var h=c.child;if(h!==null)h.return=c,X=h;else for(;X!==null;){c=X;var d=c.sibling,f=c.return;if(Nw(c),c===u){X=null;break}if(d!==null){d.return=f,X=d;break}X=f}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}X=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,X=s;else e:for(;X!==null;){if(o=X,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ms(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,X=m;break e}X=o.return}}var p=e.current;for(X=p;X!==null;){s=X;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,X=y;else e:for(s=p;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ac(9,a)}}catch(E){De(a,a.return,E)}if(a===s){X=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,X=_;break e}X=a.return}}if(de=i,Or(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Ju,e)}catch{}r=!0}return r}finally{ye=n,Jt.transition=t}}return!1}function Ty(e,t,n){t=xo(n,t),t=ww(e,t,1),e=Sr(e,t,1),t=It(),e!==null&&(Va(e,1,t),Mt(e,t))}function De(e,t,n){if(e.tag===3)Ty(e,e,n);else for(;t!==null;){if(t.tag===3){Ty(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tr===null||!Tr.has(r))){e=xo(n,e),e=Ew(t,e,1),t=Sr(t,e,1),e=It(),t!==null&&(Va(t,1,e),Mt(t,e));break}}t=t.return}}function Zk(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(st&n)===n&&(Be===4||Be===3&&(st&130023424)===st&&500>Me()-Vp?ui(e,0):Dp|=n),Mt(e,t)}function Uw(e,t){t===0&&(e.mode&1?(t=il,il<<=1,!(il&130023424)&&(il=4194304)):t=1);var n=It();e=Yn(e,t),e!==null&&(Va(e,t,n),Mt(e,n))}function Jk(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Uw(e,n)}function eA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),Uw(e,n)}var jw;jw=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vt.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,Uk(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,ke&&t.flags&1048576&&W_(t,du,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;jl(e,t),e=t.pendingProps;var i=wo(t,Et.current);uo(t,n),i=kp(null,t,r,e,i,n);var o=Ap();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bt(r)?(o=!0,cu(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ep(t),i.updater=oc,t.stateNode=i,i._reactInternals=t,Od(t,r,e,n),t=Fd(null,t,r,!0,o,n)):(t.tag=0,ke&&o&&pp(t),Tt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(jl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=nA(r),e=on(r,e),i){case 0:t=Ld(null,t,r,e,n);break e;case 1:t=fy(null,t,r,e,n);break e;case 11:t=hy(null,t,r,e,n);break e;case 14:t=dy(null,t,r,on(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:on(r,i),Ld(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:on(r,i),fy(e,t,r,i,n);case 3:e:{if(Iw(t),e===null)throw Error(B(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Q_(e,t),mu(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=xo(Error(B(423)),t),t=py(e,t,r,n,i);break e}else if(r!==i){i=xo(Error(B(424)),t),t=py(e,t,r,n,i);break e}else for(Lt=Er(t.stateNode.containerInfo.firstChild),Ft=t,ke=!0,ln=null,n=J_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Eo(),r===i){t=Zn(e,t,n);break e}Tt(e,t,r,n)}t=t.child}return t;case 5:return ew(t),e===null&&Vd(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,Cd(r,i)?s=null:o!==null&&Cd(r,o)&&(t.flags|=32),xw(e,t),Tt(e,t,s,n),t.child;case 6:return e===null&&Vd(t),null;case 13:return kw(e,t,n);case 4:return Sp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=So(t,null,r,n):Tt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:on(r,i),hy(e,t,r,i,n);case 7:return Tt(e,t,t.pendingProps,n),t.child;case 8:return Tt(e,t,t.pendingProps.children,n),t.child;case 12:return Tt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,we(fu,r._currentValue),r._currentValue=s,o!==null)if(pn(o.value,s)){if(o.children===i.children&&!Vt.current){t=Zn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Wn(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bd(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(B(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),bd(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Tt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,uo(t,n),i=tn(i),r=r(i),t.flags|=1,Tt(e,t,r,n),t.child;case 14:return r=t.type,i=on(r,t.pendingProps),i=on(r.type,i),dy(e,t,r,i,n);case 15:return Sw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:on(r,i),jl(e,t),t.tag=1,bt(r)?(e=!0,cu(t)):e=!1,uo(t,n),Y_(t,r,i),Od(t,r,i,n),Fd(null,t,r,!0,e,n);case 19:return Aw(e,t,n);case 22:return Tw(e,t,n)}throw Error(B(156,t.tag))};function Bw(e,t){return m_(e,t)}function tA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,n,r){return new tA(e,t,n,r)}function $p(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nA(e){if(typeof e=="function")return $p(e)?1:0;if(e!=null){if(e=e.$$typeof,e===np)return 11;if(e===rp)return 14}return 2}function Ir(e,t){var n=e.alternate;return n===null?(n=Yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wl(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")$p(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ki:return ci(n.children,i,o,t);case tp:s=8,i|=8;break;case sd:return e=Yt(12,n,t,i|2),e.elementType=sd,e.lanes=o,e;case ad:return e=Yt(13,n,t,i),e.elementType=ad,e.lanes=o,e;case ld:return e=Yt(19,n,t,i),e.elementType=ld,e.lanes=o,e;case Zv:return uc(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xv:s=10;break e;case Yv:s=9;break e;case np:s=11;break e;case rp:s=14;break e;case lr:s=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=Yt(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ci(e,t,n,r){return e=Yt(7,e,r,t),e.lanes=n,e}function uc(e,t,n,r){return e=Yt(22,e,r,t),e.elementType=Zv,e.lanes=n,e.stateNode={isHidden:!1},e}function xh(e,t,n){return e=Yt(6,e,null,t),e.lanes=n,e}function Ih(e,t,n){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oh(0),this.expirationTimes=oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lp(e,t,n,r,i,o,s,a,l){return e=new rA(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Yt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ep(o),e}function iA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Hw(e){if(!e)return Pr;e=e._reactInternals;e:{if(ki(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(bt(n))return B_(e,n,t)}return t}function Ww(e,t,n,r,i,o,s,a,l){return e=Lp(n,r,!0,e,i,o,s,a,l),e.context=Hw(null),n=e.current,r=It(),i=xr(n),o=Wn(r,i),o.callback=t??null,Sr(n,o,i),e.current.lanes=i,Va(e,i,r),Mt(e,r),e}function cc(e,t,n,r){var i=t.current,o=It(),s=xr(i);return n=Hw(n),t.context===null?t.context=n:t.pendingContext=n,t=Wn(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Sr(i,t,s),e!==null&&(dn(e,i,s,o),Fl(e,i,s)),s}function Tu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fp(e,t){xy(e,t),(e=e.alternate)&&xy(e,t)}function oA(){return null}var Kw=typeof reportError=="function"?reportError:function(e){console.error(e)};function zp(e){this._internalRoot=e}hc.prototype.render=zp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));cc(e,t,null,null)};hc.prototype.unmount=zp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vi(function(){cc(null,e,null,null)}),t[Xn]=null}};function hc(e){this._internalRoot=e}hc.prototype.unstable_scheduleHydration=function(e){if(e){var t=S_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<dr.length&&t!==0&&t<dr[n].priority;n++);dr.splice(n,0,e),n===0&&x_(e)}};function Up(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Iy(){}function sA(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Tu(s);o.call(u)}}var s=Ww(t,r,e,0,null,!1,!1,"",Iy);return e._reactRootContainer=s,e[Xn]=s.current,Zs(e.nodeType===8?e.parentNode:e),vi(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Tu(l);a.call(u)}}var l=Lp(e,0,!1,null,null,!1,!1,"",Iy);return e._reactRootContainer=l,e[Xn]=l.current,Zs(e.nodeType===8?e.parentNode:e),vi(function(){cc(t,l,n,r)}),l}function fc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Tu(s);a.call(l)}}cc(t,s,e,i)}else s=sA(n,t,e,i,r);return Tu(s)}w_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Es(t.pendingLanes);n!==0&&(sp(t,n|1),Mt(t,Me()),!(de&6)&&(Io=Me()+500,Or()))}break;case 13:vi(function(){var r=Yn(e,1);if(r!==null){var i=It();dn(r,e,1,i)}}),Fp(e,1)}};ap=function(e){if(e.tag===13){var t=Yn(e,134217728);if(t!==null){var n=It();dn(t,e,134217728,n)}Fp(e,134217728)}};E_=function(e){if(e.tag===13){var t=xr(e),n=Yn(e,t);if(n!==null){var r=It();dn(n,e,t,r)}Fp(e,t)}};S_=function(){return ye};T_=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};vd=function(e,t,n){switch(t){case"input":if(hd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=rc(r);if(!i)throw Error(B(90));e_(r),hd(r,i)}}}break;case"textarea":n_(e,n);break;case"select":t=n.value,t!=null&&oo(e,!!n.multiple,t,!1)}};u_=bp;c_=vi;var aA={usingClientEntryPoint:!1,Events:[Ma,Xi,rc,a_,l_,bp]},us={findFiberByHostInstance:Zr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lA={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=f_(e),e===null?null:e.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||oA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{Ju=ml.inject(lA),In=ml}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aA;Bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Up(t))throw Error(B(200));return iA(e,t,null,n)};Bt.createRoot=function(e,t){if(!Up(e))throw Error(B(299));var n=!1,r="",i=Kw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Lp(e,1,!1,null,null,n,!1,r,i),e[Xn]=t.current,Zs(e.nodeType===8?e.parentNode:e),new zp(t)};Bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=f_(t),e=e===null?null:e.stateNode,e};Bt.flushSync=function(e){return vi(e)};Bt.hydrate=function(e,t,n){if(!dc(t))throw Error(B(200));return fc(null,e,t,!0,n)};Bt.hydrateRoot=function(e,t,n){if(!Up(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Kw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Ww(t,null,e,1,n??null,i,!1,o,s),e[Xn]=t.current,Zs(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new hc(t)};Bt.render=function(e,t,n){if(!dc(t))throw Error(B(200));return fc(null,e,t,!1,n)};Bt.unmountComponentAtNode=function(e){if(!dc(e))throw Error(B(40));return e._reactRootContainer?(vi(function(){fc(null,null,e,!1,function(){e._reactRootContainer=null,e[Xn]=null})}),!0):!1};Bt.unstable_batchedUpdates=bp;Bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!dc(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return fc(e,t,n,!1,r)};Bt.version="18.2.0-next-9e3b772b8-20220608";function Gw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gw)}catch(e){console.error(e)}}Gw(),Wv.exports=Bt;var qw=Wv.exports,ky=qw;id.createRoot=ky.createRoot,id.hydrateRoot=ky.hydrateRoot;function Ct(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ct(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Qw={exports:{}},Xw={},Yw={exports:{}},Zw={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ko=A;function uA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cA=typeof Object.is=="function"?Object.is:uA,hA=ko.useState,dA=ko.useEffect,fA=ko.useLayoutEffect,pA=ko.useDebugValue;function mA(e,t){var n=t(),r=hA({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return fA(function(){i.value=n,i.getSnapshot=t,kh(i)&&o({inst:i})},[e,n,t]),dA(function(){return kh(i)&&o({inst:i}),e(function(){kh(i)&&o({inst:i})})},[e]),pA(n),n}function kh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cA(e,n)}catch{return!0}}function gA(e,t){return t()}var yA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gA:mA;Zw.useSyncExternalStore=ko.useSyncExternalStore!==void 0?ko.useSyncExternalStore:yA;Yw.exports=Zw;var vA=Yw.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=A,_A=vA;function wA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var EA=typeof Object.is=="function"?Object.is:wA,SA=_A.useSyncExternalStore,TA=pc.useRef,xA=pc.useEffect,IA=pc.useMemo,kA=pc.useDebugValue;Xw.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=TA(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=IA(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),i!==void 0&&s.hasValue){var g=s.value;if(i(g,f))return h=g}return h=f}if(g=h,EA(c,f))return g;var v=r(f);return i!==void 0&&i(g,v)?g:(c=f,h=v)}var u=!1,c,h,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var a=SA(e,o[0],o[1]);return xA(function(){s.hasValue=!0,s.value=a},[a]),kA(a),a};Qw.exports=Xw;var AA=Qw.exports;const Jw=bv(AA);var CA={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Ay=e=>{let t;const n=new Set,r=(c,h)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const f=t;t=h??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(g=>g(t,f))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(CA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},e1=e=>e?Ay(e):Ay,{useDebugValue:RA}=O,{useSyncExternalStoreWithSelector:PA}=Jw,NA=e=>e;function t1(e,t=NA,n){const r=PA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return RA(r),r}const Cy=(e,t)=>{const n=e1(e),r=(i,o=t)=>t1(n,i,o);return Object.assign(r,n),r},DA=(e,t)=>e?Cy(e,t):Cy;function Xe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var VA={value:()=>{}};function mc(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Kl(n)}function Kl(e){this._=e}function bA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Kl.prototype=mc.prototype={constructor:Kl,on:function(e,t){var n=this._,r=bA(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=MA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Ry(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ry(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Kl(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function MA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ry(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=VA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yd="http://www.w3.org/1999/xhtml";const Py={svg:"http://www.w3.org/2000/svg",xhtml:Yd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Py.hasOwnProperty(t)?{space:Py[t],local:e}:e}function OA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yd&&t.documentElement.namespaceURI===Yd?t.createElement(e):t.createElementNS(n,e)}}function $A(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function n1(e){var t=gc(e);return(t.local?$A:OA)(t)}function LA(){}function jp(e){return e==null?LA:function(){return this.querySelector(e)}}function FA(e){typeof e!="function"&&(e=jp(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Ut(r,this._parents)}function zA(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function UA(){return[]}function r1(e){return e==null?UA:function(){return this.querySelectorAll(e)}}function jA(e){return function(){return zA(e.apply(this,arguments))}}function BA(e){typeof e=="function"?e=jA(e):e=r1(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new Ut(r,i)}function i1(e){return function(){return this.matches(e)}}function o1(e){return function(t){return t.matches(e)}}var HA=Array.prototype.find;function WA(e){return function(){return HA.call(this.children,e)}}function KA(){return this.firstElementChild}function GA(e){return this.select(e==null?KA:WA(typeof e=="function"?e:o1(e)))}var qA=Array.prototype.filter;function QA(){return Array.from(this.children)}function XA(e){return function(){return qA.call(this.children,e)}}function YA(e){return this.selectAll(e==null?QA:XA(typeof e=="function"?e:o1(e)))}function ZA(e){typeof e!="function"&&(e=i1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Ut(r,this._parents)}function s1(e){return new Array(e.length)}function JA(){return new Ut(this._enter||this._groups.map(s1),this._parents)}function xu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xu.prototype={constructor:xu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function eC(e){return function(){return e}}function tC(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new xu(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function nC(e,t,n,r,i,o,s){var a,l,u=new Map,c=t.length,h=o.length,d=new Array(c),f;for(a=0;a<c;++a)(l=t[a])&&(d[a]=f=s.call(l,l.__data__,a,t)+"",u.has(f)?i[a]=l:u.set(f,l));for(a=0;a<h;++a)f=s.call(e,o[a],a,o)+"",(l=u.get(f))?(r[a]=l,l.__data__=o[a],u.delete(f)):n[a]=new xu(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(d[a])===l&&(i[a]=l)}function rC(e){return e.__data__}function iC(e,t){if(!arguments.length)return Array.from(this,rC);var n=t?nC:tC,r=this._parents,i=this._groups;typeof e!="function"&&(e=eC(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],d=h.length,f=oC(e.call(c,c&&c.__data__,u,r)),g=f.length,v=a[u]=new Array(g),w=s[u]=new Array(g),m=l[u]=new Array(d);n(c,h,v,w,m,f,t);for(var p=0,y=0,_,E;p<g;++p)if(_=v[p]){for(p>=y&&(y=p+1);!(E=w[y])&&++y<g;);_._next=E||null}}return s=new Ut(s,r),s._enter=a,s._exit=l,s}function oC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sC(){return new Ut(this._exit||this._groups.map(s1),this._parents)}function aC(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function lC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=r[l],h=u.length,d=a[l]=new Array(h),f,g=0;g<h;++g)(f=u[g]||c[g])&&(d[g]=f);for(;l<i;++l)a[l]=n[l];return new Ut(a,this._parents)}function uC(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function cC(e){e||(e=hC);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Ut(i,this._parents).order()}function hC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function dC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fC(){return Array.from(this)}function pC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function mC(){let e=0;for(const t of this)++e;return e}function gC(){return!this.node()}function yC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function vC(e){return function(){this.removeAttribute(e)}}function _C(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wC(e,t){return function(){this.setAttribute(e,t)}}function EC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function SC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function TC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function xC(e,t){var n=gc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_C:vC:typeof t=="function"?n.local?TC:SC:n.local?EC:wC)(n,t))}function a1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function IC(e){return function(){this.style.removeProperty(e)}}function kC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function AC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function CC(e,t,n){return arguments.length>1?this.each((t==null?IC:typeof t=="function"?AC:kC)(e,t,n??"")):Ao(this.node(),e)}function Ao(e,t){return e.style.getPropertyValue(t)||a1(e).getComputedStyle(e,null).getPropertyValue(t)}function RC(e){return function(){delete this[e]}}function PC(e,t){return function(){this[e]=t}}function NC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function DC(e,t){return arguments.length>1?this.each((t==null?RC:typeof t=="function"?NC:PC)(e,t)):this.node()[e]}function l1(e){return e.trim().split(/^|\s+/)}function Bp(e){return e.classList||new u1(e)}function u1(e){this._node=e,this._names=l1(e.getAttribute("class")||"")}u1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function c1(e,t){for(var n=Bp(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function h1(e,t){for(var n=Bp(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function VC(e){return function(){c1(this,e)}}function bC(e){return function(){h1(this,e)}}function MC(e,t){return function(){(t.apply(this,arguments)?c1:h1)(this,e)}}function OC(e,t){var n=l1(e+"");if(arguments.length<2){for(var r=Bp(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?MC:t?VC:bC)(n,t))}function $C(){this.textContent=""}function LC(e){return function(){this.textContent=e}}function FC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function zC(e){return arguments.length?this.each(e==null?$C:(typeof e=="function"?FC:LC)(e)):this.node().textContent}function UC(){this.innerHTML=""}function jC(e){return function(){this.innerHTML=e}}function BC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function HC(e){return arguments.length?this.each(e==null?UC:(typeof e=="function"?BC:jC)(e)):this.node().innerHTML}function WC(){this.nextSibling&&this.parentNode.appendChild(this)}function KC(){return this.each(WC)}function GC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qC(){return this.each(GC)}function QC(e){var t=typeof e=="function"?e:n1(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function XC(){return null}function YC(e,t){var n=typeof e=="function"?e:n1(e),r=t==null?XC:typeof t=="function"?t:jp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ZC(){var e=this.parentNode;e&&e.removeChild(this)}function JC(){return this.each(ZC)}function e2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function t2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function n2(e){return this.select(e?t2:e2)}function r2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function i2(e){return function(t){e.call(this,t,this.__data__)}}function o2(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function s2(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function a2(e,t,n){return function(){var r=this.__on,i,o=i2(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function l2(e,t,n){var r=o2(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?a2:s2,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function d1(e,t,n){var r=a1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function u2(e,t){return function(){return d1(this,e,t)}}function c2(e,t){return function(){return d1(this,e,t.apply(this,arguments))}}function h2(e,t){return this.each((typeof t=="function"?c2:u2)(e,t))}function*d2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var f1=[null];function Ut(e,t){this._groups=e,this._parents=t}function $a(){return new Ut([[document.documentElement]],f1)}function f2(){return this}Ut.prototype=$a.prototype={constructor:Ut,select:FA,selectAll:BA,selectChild:GA,selectChildren:YA,filter:ZA,data:iC,enter:JA,exit:sC,join:aC,merge:lC,selection:f2,order:uC,sort:cC,call:dC,nodes:fC,node:pC,size:mC,empty:gC,each:yC,attr:xC,style:CC,property:DC,classed:OC,text:zC,html:HC,raise:KC,lower:qC,append:QC,insert:YC,remove:JC,clone:n2,datum:r2,on:l2,dispatch:h2,[Symbol.iterator]:d2};function qt(e){return typeof e=="string"?new Ut([[document.querySelector(e)]],[document.documentElement]):new Ut([[e]],f1)}function p2(e){let t;for(;t=e.sourceEvent;)e=t;return e}function an(e,t){if(e=p2(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const m2={passive:!1},aa={capture:!0,passive:!1};function Ah(e){e.stopImmediatePropagation()}function ho(e){e.preventDefault(),e.stopImmediatePropagation()}function p1(e){var t=e.document.documentElement,n=qt(e).on("dragstart.drag",ho,aa);"onselectstart"in t?n.on("selectstart.drag",ho,aa):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function m1(e,t){var n=e.document.documentElement,r=qt(e).on("dragstart.drag",null);t&&(r.on("click.drag",ho,aa),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gl=e=>()=>e;function Zd(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Zd.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function g2(e){return!e.ctrlKey&&!e.button}function y2(){return this.parentNode}function v2(e,t){return t??{x:e.x,y:e.y}}function _2(){return navigator.maxTouchPoints||"ontouchstart"in this}function w2(){var e=g2,t=y2,n=v2,r=_2,i={},o=mc("start","drag","end"),s=0,a,l,u,c,h=0;function d(_){_.on("mousedown.drag",f).filter(r).on("touchstart.drag",w).on("touchmove.drag",m,m2).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(_,E){if(!(c||!e.call(this,_,E))){var I=y(this,t.call(this,_,E),_,E,"mouse");I&&(qt(_.view).on("mousemove.drag",g,aa).on("mouseup.drag",v,aa),p1(_.view),Ah(_),u=!1,a=_.clientX,l=_.clientY,I("start",_))}}function g(_){if(ho(_),!u){var E=_.clientX-a,I=_.clientY-l;u=E*E+I*I>h}i.mouse("drag",_)}function v(_){qt(_.view).on("mousemove.drag mouseup.drag",null),m1(_.view,u),ho(_),i.mouse("end",_)}function w(_,E){if(e.call(this,_,E)){var I=_.changedTouches,x=t.call(this,_,E),k=I.length,N,M;for(N=0;N<k;++N)(M=y(this,x,_,E,I[N].identifier,I[N]))&&(Ah(_),M("start",_,I[N]))}}function m(_){var E=_.changedTouches,I=E.length,x,k;for(x=0;x<I;++x)(k=i[E[x].identifier])&&(ho(_),k("drag",_,E[x]))}function p(_){var E=_.changedTouches,I=E.length,x,k;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),x=0;x<I;++x)(k=i[E[x].identifier])&&(Ah(_),k("end",_,E[x]))}function y(_,E,I,x,k,N){var M=o.copy(),U=an(N||I,E),H,D,S;if((S=n.call(_,new Zd("beforestart",{sourceEvent:I,target:d,identifier:k,active:s,x:U[0],y:U[1],dx:0,dy:0,dispatch:M}),x))!=null)return H=S.x-U[0]||0,D=S.y-U[1]||0,function V(R,$,C){var T=U,P;switch(R){case"start":i[k]=V,P=s++;break;case"end":delete i[k],--s;case"drag":U=an(C||$,E),P=s;break}M.call(R,_,new Zd(R,{sourceEvent:$,subject:S,target:d,identifier:k,active:P,x:U[0]+H,y:U[1]+D,dx:U[0]-T[0],dy:U[1]-T[1],dispatch:M}),x)}}return d.filter=function(_){return arguments.length?(e=typeof _=="function"?_:gl(!!_),d):e},d.container=function(_){return arguments.length?(t=typeof _=="function"?_:gl(_),d):t},d.subject=function(_){return arguments.length?(n=typeof _=="function"?_:gl(_),d):n},d.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:gl(!!_),d):r},d.on=function(){var _=o.on.apply(o,arguments);return _===o?d:_},d.clickDistance=function(_){return arguments.length?(h=(_=+_)*_,d):Math.sqrt(h)},d}function Hp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function g1(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function La(){}var la=.7,Iu=1/la,fo="\\s*([+-]?\\d+)\\s*",ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",E2=/^#([0-9a-f]{3,8})$/,S2=new RegExp(`^rgb\\(${fo},${fo},${fo}\\)$`),T2=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),x2=new RegExp(`^rgba\\(${fo},${fo},${fo},${ua}\\)$`),I2=new RegExp(`^rgba\\(${An},${An},${An},${ua}\\)$`),k2=new RegExp(`^hsl\\(${ua},${An},${An}\\)$`),A2=new RegExp(`^hsla\\(${ua},${An},${An},${ua}\\)$`),Ny={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hp(La,ca,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Dy,formatHex:Dy,formatHex8:C2,formatHsl:R2,formatRgb:Vy,toString:Vy});function Dy(){return this.rgb().formatHex()}function C2(){return this.rgb().formatHex8()}function R2(){return y1(this).formatHsl()}function Vy(){return this.rgb().formatRgb()}function ca(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=E2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?by(t):n===3?new Dt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=S2.exec(e))?new Dt(t[1],t[2],t[3],1):(t=T2.exec(e))?new Dt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=x2.exec(e))?yl(t[1],t[2],t[3],t[4]):(t=I2.exec(e))?yl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=k2.exec(e))?$y(t[1],t[2]/100,t[3]/100,1):(t=A2.exec(e))?$y(t[1],t[2]/100,t[3]/100,t[4]):Ny.hasOwnProperty(e)?by(Ny[e]):e==="transparent"?new Dt(NaN,NaN,NaN,0):null}function by(e){return new Dt(e>>16&255,e>>8&255,e&255,1)}function yl(e,t,n,r){return r<=0&&(e=t=n=NaN),new Dt(e,t,n,r)}function P2(e){return e instanceof La||(e=ca(e)),e?(e=e.rgb(),new Dt(e.r,e.g,e.b,e.opacity)):new Dt}function Jd(e,t,n,r){return arguments.length===1?P2(e):new Dt(e,t,n,r??1)}function Dt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hp(Dt,Jd,g1(La,{brighter(e){return e=e==null?Iu:Math.pow(Iu,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?la:Math.pow(la,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Dt(hi(this.r),hi(this.g),hi(this.b),ku(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:My,formatHex:My,formatHex8:N2,formatRgb:Oy,toString:Oy}));function My(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}`}function N2(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}${ti((isNaN(this.opacity)?1:this.opacity)*255)}`}function Oy(){const e=ku(this.opacity);return`${e===1?"rgb(":"rgba("}${hi(this.r)}, ${hi(this.g)}, ${hi(this.b)}${e===1?")":`, ${e})`}`}function ku(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ti(e){return e=hi(e),(e<16?"0":"")+e.toString(16)}function $y(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new un(e,t,n,r)}function y1(e){if(e instanceof un)return new un(e.h,e.s,e.l,e.opacity);if(e instanceof La||(e=ca(e)),!e)return new un;if(e instanceof un)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new un(s,a,l,e.opacity)}function D2(e,t,n,r){return arguments.length===1?y1(e):new un(e,t,n,r??1)}function un(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hp(un,D2,g1(La,{brighter(e){return e=e==null?Iu:Math.pow(Iu,e),new un(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?la:Math.pow(la,e),new un(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Dt(Ch(e>=240?e-240:e+120,i,r),Ch(e,i,r),Ch(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new un(Ly(this.h),vl(this.s),vl(this.l),ku(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ku(this.opacity);return`${e===1?"hsl(":"hsla("}${Ly(this.h)}, ${vl(this.s)*100}%, ${vl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ly(e){return e=(e||0)%360,e<0?e+360:e}function vl(e){return Math.max(0,Math.min(1,e||0))}function Ch(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const v1=e=>()=>e;function V2(e,t){return function(n){return e+n*t}}function b2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function M2(e){return(e=+e)==1?_1:function(t,n){return n-t?b2(t,n,e):v1(isNaN(t)?n:t)}}function _1(e,t){var n=t-e;return n?V2(e,n):v1(isNaN(e)?t:e)}const Fy=function e(t){var n=M2(t);function r(i,o){var s=n((i=Jd(i)).r,(o=Jd(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=_1(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function cr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ef=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rh=new RegExp(ef.source,"g");function O2(e){return function(){return e}}function $2(e){return function(t){return e(t)+""}}function L2(e,t){var n=ef.lastIndex=Rh.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=ef.exec(e))&&(i=Rh.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:cr(r,i)})),n=Rh.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?$2(l[0].x):O2(t):(t=l.length,function(u){for(var c=0,h;c<t;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}var zy=180/Math.PI,tf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function w1(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*zy,skewX:Math.atan(l)*zy,scaleX:s,scaleY:a}}var _l;function F2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tf:w1(t.a,t.b,t.c,t.d,t.e,t.f)}function z2(e){return e==null||(_l||(_l=document.createElementNS("http://www.w3.org/2000/svg","g")),_l.setAttribute("transform",e),!(e=_l.transform.baseVal.consolidate()))?tf:(e=e.matrix,w1(e.a,e.b,e.c,e.d,e.e,e.f))}function E1(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,h,d,f,g){if(u!==h||c!==d){var v=f.push("translate(",null,t,null,n);g.push({i:v-4,x:cr(u,h)},{i:v-2,x:cr(c,d)})}else(h||d)&&f.push("translate("+h+t+d+n)}function s(u,c,h,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:cr(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function a(u,c,h,d){u!==c?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:cr(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function l(u,c,h,d,f,g){if(u!==h||c!==d){var v=f.push(i(f)+"scale(",null,",",null,")");g.push({i:v-4,x:cr(u,h)},{i:v-2,x:cr(c,d)})}else(h!==1||d!==1)&&f.push(i(f)+"scale("+h+","+d+")")}return function(u,c){var h=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,h,d),s(u.rotate,c.rotate,h,d),a(u.skewX,c.skewX,h,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,d),u=c=null,function(f){for(var g=-1,v=d.length,w;++g<v;)h[(w=d[g]).i]=w.x(f);return h.join("")}}}var U2=E1(F2,"px, ","px)","deg)"),j2=E1(z2,", ",")",")"),B2=1e-12;function Uy(e){return((e=Math.exp(e))+1/e)/2}function H2(e){return((e=Math.exp(e))-1/e)/2}function W2(e){return((e=Math.exp(2*e))-1)/(e+1)}const K2=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],h=s[1],d=s[2],f=c-a,g=h-l,v=f*f+g*g,w,m;if(v<B2)m=Math.log(d/u)/t,w=function(x){return[a+x*f,l+x*g,u*Math.exp(t*x*m)]};else{var p=Math.sqrt(v),y=(d*d-u*u+r*v)/(2*u*n*p),_=(d*d-u*u-r*v)/(2*d*n*p),E=Math.log(Math.sqrt(y*y+1)-y),I=Math.log(Math.sqrt(_*_+1)-_);m=(I-E)/t,w=function(x){var k=x*m,N=Uy(E),M=u/(n*p)*(N*W2(t*k+E)-H2(E));return[a+M*f,l+M*g,u*N/Uy(t*k+E)]}}return w.duration=m*1e3*t/Math.SQRT2,w}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Co=0,Ts=0,cs=0,S1=1e3,Au,xs,Cu=0,_i=0,yc=0,ha=typeof performance=="object"&&performance.now?performance:Date,T1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wp(){return _i||(T1(G2),_i=ha.now()+yc)}function G2(){_i=0}function Ru(){this._call=this._time=this._next=null}Ru.prototype=x1.prototype={constructor:Ru,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Wp():+n)+(t==null?0:+t),!this._next&&xs!==this&&(xs?xs._next=this:Au=this,xs=this),this._call=e,this._time=n,nf()},stop:function(){this._call&&(this._call=null,this._time=1/0,nf())}};function x1(e,t,n){var r=new Ru;return r.restart(e,t,n),r}function q2(){Wp(),++Co;for(var e=Au,t;e;)(t=_i-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Co}function jy(){_i=(Cu=ha.now())+yc,Co=Ts=0;try{q2()}finally{Co=0,X2(),_i=0}}function Q2(){var e=ha.now(),t=e-Cu;t>S1&&(yc-=t,Cu=e)}function X2(){for(var e,t=Au,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Au=n);xs=e,nf(r)}function nf(e){if(!Co){Ts&&(Ts=clearTimeout(Ts));var t=e-_i;t>24?(e<1/0&&(Ts=setTimeout(jy,e-ha.now()-yc)),cs&&(cs=clearInterval(cs))):(cs||(Cu=ha.now(),cs=setInterval(Q2,S1)),Co=1,T1(jy))}}function By(e,t,n){var r=new Ru;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Y2=mc("start","end","cancel","interrupt"),Z2=[],I1=0,Hy=1,rf=2,Gl=3,Wy=4,of=5,ql=6;function vc(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;J2(e,n,{name:t,index:r,group:i,on:Y2,tween:Z2,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:I1})}function Kp(e,t){var n=gn(e,t);if(n.state>I1)throw new Error("too late; already scheduled");return n}function Vn(e,t){var n=gn(e,t);if(n.state>Gl)throw new Error("too late; already running");return n}function gn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function J2(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=x1(o,0,n.time);function o(u){n.state=Hy,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,h,d,f;if(n.state!==Hy)return l();for(c in r)if(f=r[c],f.name===n.name){if(f.state===Gl)return By(s);f.state===Wy?(f.state=ql,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[c]):+c<t&&(f.state=ql,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[c])}if(By(function(){n.state===Gl&&(n.state=Wy,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=rf,n.on.call("start",e,e.__data__,n.index,n.group),n.state===rf){for(n.state=Gl,i=new Array(d=n.tween.length),c=0,h=-1;c<d;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=of,1),h=-1,d=i.length;++h<d;)i[h].call(e,c);n.state===of&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ql,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ql(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>rf&&r.state<of,r.state=ql,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function eR(e){return this.each(function(){Ql(this,e)})}function tR(e,t){var n,r;return function(){var i=Vn(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function nR(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Vn(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function rR(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=gn(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?tR:nR)(n,e,t))}function Gp(e,t,n){var r=e._id;return e.each(function(){var i=Vn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return gn(i,r).value[t]}}function k1(e,t){var n;return(typeof t=="number"?cr:t instanceof ca?Fy:(n=ca(t))?(t=n,Fy):L2)(e,t)}function iR(e){return function(){this.removeAttribute(e)}}function oR(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sR(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function aR(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function lR(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function uR(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function cR(e,t){var n=gc(e),r=n==="transform"?j2:k1;return this.attrTween(e,typeof t=="function"?(n.local?uR:lR)(n,r,Gp(this,"attr."+e,t)):t==null?(n.local?oR:iR)(n):(n.local?aR:sR)(n,r,t))}function hR(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dR(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fR(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&dR(e,o)),n}return i._value=t,i}function pR(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&hR(e,o)),n}return i._value=t,i}function mR(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=gc(e);return this.tween(n,(r.local?fR:pR)(r,t))}function gR(e,t){return function(){Kp(this,e).delay=+t.apply(this,arguments)}}function yR(e,t){return t=+t,function(){Kp(this,e).delay=t}}function vR(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gR:yR)(t,e)):gn(this.node(),t).delay}function _R(e,t){return function(){Vn(this,e).duration=+t.apply(this,arguments)}}function wR(e,t){return t=+t,function(){Vn(this,e).duration=t}}function ER(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_R:wR)(t,e)):gn(this.node(),t).duration}function SR(e,t){if(typeof t!="function")throw new Error;return function(){Vn(this,e).ease=t}}function TR(e){var t=this._id;return arguments.length?this.each(SR(t,e)):gn(this.node(),t).ease}function xR(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Vn(this,e).ease=n}}function IR(e){if(typeof e!="function")throw new Error;return this.each(xR(this._id,e))}function kR(e){typeof e!="function"&&(e=i1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Jn(r,this._parents,this._name,this._id)}function AR(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],c=l.length,h=s[a]=new Array(c),d,f=0;f<c;++f)(d=l[f]||u[f])&&(h[f]=d);for(;a<r;++a)s[a]=t[a];return new Jn(s,this._parents,this._name,this._id)}function CR(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function RR(e,t,n){var r,i,o=CR(t)?Kp:Vn;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function PR(e,t){var n=this._id;return arguments.length<2?gn(this.node(),n).on.on(e):this.each(RR(n,e,t))}function NR(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function DR(){return this.on("end.remove",NR(this._id))}function VR(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jp(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),c,h,d=0;d<l;++d)(c=a[d])&&(h=e.call(c,c.__data__,d,a))&&("__data__"in c&&(h.__data__=c.__data__),u[d]=h,vc(u[d],t,n,d,u,gn(c,n)));return new Jn(o,this._parents,t,n)}function bR(e){var t=this._name,n=this._id;typeof e!="function"&&(e=r1(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var d=e.call(c,c.__data__,h,l),f,g=gn(c,n),v=0,w=d.length;v<w;++v)(f=d[v])&&vc(f,t,n,v,d,g);o.push(d),s.push(c)}return new Jn(o,s,t,n)}var MR=$a.prototype.constructor;function OR(){return new MR(this._groups,this._parents)}function $R(e,t){var n,r,i;return function(){var o=Ao(this,e),s=(this.style.removeProperty(e),Ao(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function A1(e){return function(){this.style.removeProperty(e)}}function LR(e,t,n){var r,i=n+"",o;return function(){var s=Ao(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function FR(e,t,n){var r,i,o;return function(){var s=Ao(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ao(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function zR(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Vn(this,e),u=l.on,c=l.value[o]==null?a||(a=A1(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(s,i=c),l.on=r}}function UR(e,t,n){var r=(e+="")=="transform"?U2:k1;return t==null?this.styleTween(e,$R(e,r)).on("end.style."+e,A1(e)):typeof t=="function"?this.styleTween(e,FR(e,r,Gp(this,"style."+e,t))).each(zR(this._id,e)):this.styleTween(e,LR(e,r,t),n).on("end.style."+e,null)}function jR(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function BR(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&jR(e,s,n)),r}return o._value=t,o}function HR(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,BR(e,t,n??""))}function WR(e){return function(){this.textContent=e}}function KR(e){return function(){var t=e(this);this.textContent=t??""}}function GR(e){return this.tween("text",typeof e=="function"?KR(Gp(this,"text",e)):WR(e==null?"":e+""))}function qR(e){return function(t){this.textContent=e.call(this,t)}}function QR(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&qR(i)),t}return r._value=e,r}function XR(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,QR(e))}function YR(){for(var e=this._name,t=this._id,n=C1(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=gn(l,t);vc(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Jn(r,this._parents,e,n)}function ZR(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=Vn(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var JR=0;function Jn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function C1(){return++JR}var $n=$a.prototype;Jn.prototype={constructor:Jn,select:VR,selectAll:bR,selectChild:$n.selectChild,selectChildren:$n.selectChildren,filter:kR,merge:AR,selection:OR,transition:YR,call:$n.call,nodes:$n.nodes,node:$n.node,size:$n.size,empty:$n.empty,each:$n.each,on:PR,attr:cR,attrTween:mR,style:UR,styleTween:HR,text:GR,textTween:XR,remove:DR,tween:rR,delay:vR,duration:ER,ease:TR,easeVarying:IR,end:ZR,[Symbol.iterator]:$n[Symbol.iterator]};function eP(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var tP={time:null,delay:0,duration:250,ease:eP};function nP(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rP(e){var t,n;e instanceof Jn?(t=e._id,e=e._name):(t=C1(),(n=tP).time=Wp(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&vc(l,e,t,u,s,n||nP(l,t));return new Jn(r,this._parents,e,t)}$a.prototype.interrupt=eR;$a.prototype.transition=rP;const wl=e=>()=>e;function iP(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Bn(e,t,n){this.k=e,this.x=t,this.y=n}Bn.prototype={constructor:Bn,scale:function(e){return e===1?this:new Bn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Bn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kn=new Bn(1,0,0);Bn.prototype;function Ph(e){e.stopImmediatePropagation()}function hs(e){e.preventDefault(),e.stopImmediatePropagation()}function oP(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function sP(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ky(){return this.__zoom||Kn}function aP(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function lP(){return navigator.maxTouchPoints||"ontouchstart"in this}function uP(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function R1(){var e=oP,t=sP,n=uP,r=aP,i=lP,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=K2,u=mc("start","zoom","end"),c,h,d,f=500,g=150,v=0,w=10;function m(S){S.property("__zoom",Ky).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",U).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(S,V,R,$){var C=S.selection?S.selection():S;C.property("__zoom",Ky),S!==C?E(S,V,R,$):C.interrupt().each(function(){I(this,arguments).event($).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},m.scaleBy=function(S,V,R,$){m.scaleTo(S,function(){var C=this.__zoom.k,T=typeof V=="function"?V.apply(this,arguments):V;return C*T},R,$)},m.scaleTo=function(S,V,R,$){m.transform(S,function(){var C=t.apply(this,arguments),T=this.__zoom,P=R==null?_(C):typeof R=="function"?R.apply(this,arguments):R,b=T.invert(P),z=typeof V=="function"?V.apply(this,arguments):V;return n(y(p(T,z),P,b),C,s)},R,$)},m.translateBy=function(S,V,R,$){m.transform(S,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),s)},null,$)},m.translateTo=function(S,V,R,$,C){m.transform(S,function(){var T=t.apply(this,arguments),P=this.__zoom,b=$==null?_(T):typeof $=="function"?$.apply(this,arguments):$;return n(Kn.translate(b[0],b[1]).scale(P.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof R=="function"?-R.apply(this,arguments):-R),T,s)},$,C)};function p(S,V){return V=Math.max(o[0],Math.min(o[1],V)),V===S.k?S:new Bn(V,S.x,S.y)}function y(S,V,R){var $=V[0]-R[0]*S.k,C=V[1]-R[1]*S.k;return $===S.x&&C===S.y?S:new Bn(S.k,$,C)}function _(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function E(S,V,R,$){S.on("start.zoom",function(){I(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event($).end()}).tween("zoom",function(){var C=this,T=arguments,P=I(C,T).event($),b=t.apply(C,T),z=R==null?_(b):typeof R=="function"?R.apply(C,T):R,Q=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),q=C.__zoom,J=typeof V=="function"?V.apply(C,T):V,te=l(q.invert(z).concat(Q/q.k),J.invert(z).concat(Q/J.k));return function(se){if(se===1)se=J;else{var pe=te(se),fe=Q/pe[2];se=new Bn(fe,z[0]-pe[0]*fe,z[1]-pe[1]*fe)}P.zoom(null,se)}})}function I(S,V,R){return!R&&S.__zooming||new x(S,V)}function x(S,V){this.that=S,this.args=V,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,V),this.taps=0}x.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,V){return this.mouse&&S!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var V=qt(this.that).datum();u.call(S,this.that,new iP(S,{sourceEvent:this.sourceEvent,target:m,type:S,transform:this.that.__zoom,dispatch:u}),V)}};function k(S,...V){if(!e.apply(this,arguments))return;var R=I(this,V).event(S),$=this.__zoom,C=Math.max(o[0],Math.min(o[1],$.k*Math.pow(2,r.apply(this,arguments)))),T=an(S);if(R.wheel)(R.mouse[0][0]!==T[0]||R.mouse[0][1]!==T[1])&&(R.mouse[1]=$.invert(R.mouse[0]=T)),clearTimeout(R.wheel);else{if($.k===C)return;R.mouse=[T,$.invert(T)],Ql(this),R.start()}hs(S),R.wheel=setTimeout(P,g),R.zoom("mouse",n(y(p($,C),R.mouse[0],R.mouse[1]),R.extent,s));function P(){R.wheel=null,R.end()}}function N(S,...V){if(d||!e.apply(this,arguments))return;var R=S.currentTarget,$=I(this,V,!0).event(S),C=qt(S.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",Q,!0),T=an(S,R),P=S.clientX,b=S.clientY;p1(S.view),Ph(S),$.mouse=[T,this.__zoom.invert(T)],Ql(this),$.start();function z(q){if(hs(q),!$.moved){var J=q.clientX-P,te=q.clientY-b;$.moved=J*J+te*te>v}$.event(q).zoom("mouse",n(y($.that.__zoom,$.mouse[0]=an(q,R),$.mouse[1]),$.extent,s))}function Q(q){C.on("mousemove.zoom mouseup.zoom",null),m1(q.view,$.moved),hs(q),$.event(q).end()}}function M(S,...V){if(e.apply(this,arguments)){var R=this.__zoom,$=an(S.changedTouches?S.changedTouches[0]:S,this),C=R.invert($),T=R.k*(S.shiftKey?.5:2),P=n(y(p(R,T),$,C),t.apply(this,V),s);hs(S),a>0?qt(this).transition().duration(a).call(E,P,$,S):qt(this).call(m.transform,P,$,S)}}function U(S,...V){if(e.apply(this,arguments)){var R=S.touches,$=R.length,C=I(this,V,S.changedTouches.length===$).event(S),T,P,b,z;for(Ph(S),P=0;P<$;++P)b=R[P],z=an(b,this),z=[z,this.__zoom.invert(z),b.identifier],C.touch0?!C.touch1&&C.touch0[2]!==z[2]&&(C.touch1=z,C.taps=0):(C.touch0=z,T=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),T&&(C.taps<2&&(h=z[0],c=setTimeout(function(){c=null},f)),Ql(this),C.start())}}function H(S,...V){if(this.__zooming){var R=I(this,V).event(S),$=S.changedTouches,C=$.length,T,P,b,z;for(hs(S),T=0;T<C;++T)P=$[T],b=an(P,this),R.touch0&&R.touch0[2]===P.identifier?R.touch0[0]=b:R.touch1&&R.touch1[2]===P.identifier&&(R.touch1[0]=b);if(P=R.that.__zoom,R.touch1){var Q=R.touch0[0],q=R.touch0[1],J=R.touch1[0],te=R.touch1[1],se=(se=J[0]-Q[0])*se+(se=J[1]-Q[1])*se,pe=(pe=te[0]-q[0])*pe+(pe=te[1]-q[1])*pe;P=p(P,Math.sqrt(se/pe)),b=[(Q[0]+J[0])/2,(Q[1]+J[1])/2],z=[(q[0]+te[0])/2,(q[1]+te[1])/2]}else if(R.touch0)b=R.touch0[0],z=R.touch0[1];else return;R.zoom("touch",n(y(P,b,z),R.extent,s))}}function D(S,...V){if(this.__zooming){var R=I(this,V).event(S),$=S.changedTouches,C=$.length,T,P;for(Ph(S),d&&clearTimeout(d),d=setTimeout(function(){d=null},f),T=0;T<C;++T)P=$[T],R.touch0&&R.touch0[2]===P.identifier?delete R.touch0:R.touch1&&R.touch1[2]===P.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(P=an(P,this),Math.hypot(h[0]-P[0],h[1]-P[1])<w)){var b=qt(this).on("dblclick.zoom");b&&b.apply(this,arguments)}}}return m.wheelDelta=function(S){return arguments.length?(r=typeof S=="function"?S:wl(+S),m):r},m.filter=function(S){return arguments.length?(e=typeof S=="function"?S:wl(!!S),m):e},m.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:wl(!!S),m):i},m.extent=function(S){return arguments.length?(t=typeof S=="function"?S:wl([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),m):t},m.scaleExtent=function(S){return arguments.length?(o[0]=+S[0],o[1]=+S[1],m):[o[0],o[1]]},m.translateExtent=function(S){return arguments.length?(s[0][0]=+S[0][0],s[1][0]=+S[1][0],s[0][1]=+S[0][1],s[1][1]=+S[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(S){return arguments.length?(n=S,m):n},m.duration=function(S){return arguments.length?(a=+S,m):a},m.interpolate=function(S){return arguments.length?(l=S,m):l},m.on=function(){var S=u.on.apply(u,arguments);return S===u?m:S},m.clickDistance=function(S){return arguments.length?(v=(S=+S)*S,m):Math.sqrt(v)},m.tapDistance=function(S){return arguments.length?(w=+S,m):w},m}const _c=A.createContext(null),cP=_c.Provider,er={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},P1=er.error001();function Se(e,t){const n=A.useContext(_c);if(n===null)throw new Error(P1);return t1(n,e,t)}const Je=()=>{const e=A.useContext(_c);if(e===null)throw new Error(P1);return A.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},hP=e=>e.userSelectionActive?"none":"all";function qp({position:e,children:t,className:n,style:r,...i}){const o=Se(hP),s=`${e}`.split("-");return O.createElement("div",{className:Ct(["react-flow__panel",n,...s]),style:{...r,pointerEvents:o},...i},t)}function dP({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:O.createElement(qp,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},O.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const fP=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c})=>{const h=A.useRef(null),[d,f]=A.useState({x:0,y:0,width:0,height:0}),g=Ct(["react-flow__edge-textwrapper",u]);return A.useEffect(()=>{if(h.current){const v=h.current.getBBox();f({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:O.createElement("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:g,visibility:d.width?"visible":"hidden",...c},i&&O.createElement("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),O.createElement("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:h,style:r},n),l)};var pP=A.memo(fP);const Qp=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ro=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Xp=(e={x:0,y:0},t)=>({x:Ro(e.x,t[0][0],t[1][0]),y:Ro(e.y,t[0][1],t[1][1])}),Gy=(e,t,n)=>e<t?Ro(Math.abs(e-t),1,50)/50:e>n?-Ro(Math.abs(e-n),1,50)/50:0,N1=(e,t)=>{const n=Gy(e.x,35,t.width-35)*20,r=Gy(e.y,35,t.height-35)*20;return[n,r]},D1=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},V1=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),da=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),b1=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),qy=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),mP=(e,t)=>b1(V1(da(e),da(t))),sf=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},gP=e=>Zt(e.width)&&Zt(e.height)&&Zt(e.x)&&Zt(e.y),Zt=e=>!isNaN(e)&&isFinite(e),ze=Symbol.for("internals"),M1=["Enter"," ","Escape"],yP=(e,t)=>{},vP=e=>"nativeEvent"in e;function af(e){var i,o;const t=vP(e)?e.nativeEvent:e,n=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const O1=e=>"clientX"in e,kr=(e,t)=>{var o,s;const n=O1(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Pu=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},jo=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:d,interactionWidth:f=20})=>O.createElement(O.Fragment,null,O.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:d}),f&&O.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),i&&Zt(n)&&Zt(r)?O.createElement(pP,{x:n,y:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);jo.displayName="BaseEdge";function ds(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function $1({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function L1({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,c=Math.abs(l-e),h=Math.abs(u-t);return[l,u,c,h]}var wi;(function(e){e.Strict="strict",e.Loose="loose"})(wi||(wi={}));var ni;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ni||(ni={}));var Po;(function(e){e.Partial="partial",e.Full="full"})(Po||(Po={}));var pr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(pr||(pr={}));var Nu;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Nu||(Nu={}));var G;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(G||(G={}));function Qy({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===G.Left||e===G.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function F1({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:i,targetPosition:o=G.Top}){const[s,a]=Qy({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=Qy({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,h,d,f]=L1({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${a} ${l},${u} ${r},${i}`,c,h,d,f]}const Yp=A.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=G.Bottom,targetPosition:o=G.Top,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:d,markerEnd:f,markerStart:g,interactionWidth:v})=>{const[w,m,p]=F1({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return O.createElement(jo,{path:w,labelX:m,labelY:p,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:d,markerEnd:f,markerStart:g,interactionWidth:v})});Yp.displayName="SimpleBezierEdge";const Xy={[G.Left]:{x:-1,y:0},[G.Right]:{x:1,y:0},[G.Top]:{x:0,y:-1},[G.Bottom]:{x:0,y:1}},_P=({source:e,sourcePosition:t=G.Bottom,target:n})=>t===G.Left||t===G.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Yy=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function wP({source:e,sourcePosition:t=G.Bottom,target:n,targetPosition:r=G.Top,center:i,offset:o}){const s=Xy[t],a=Xy[r],l={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},c=_P({source:l,sourcePosition:t,target:u}),h=c.x!==0?"x":"y",d=c[h];let f=[],g,v;const w={x:0,y:0},m={x:0,y:0},[p,y,_,E]=$1({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){g=i.x||p,v=i.y||y;const x=[{x:g,y:l.y},{x:g,y:u.y}],k=[{x:l.x,y:v},{x:u.x,y:v}];s[h]===d?f=h==="x"?x:k:f=h==="x"?k:x}else{const x=[{x:l.x,y:u.y}],k=[{x:u.x,y:l.y}];if(h==="x"?f=s.x===d?k:x:f=s.y===d?x:k,t===r){const D=Math.abs(e[h]-n[h]);if(D<=o){const S=Math.min(o-1,o-D);s[h]===d?w[h]=(l[h]>e[h]?-1:1)*S:m[h]=(u[h]>n[h]?-1:1)*S}}if(t!==r){const D=h==="x"?"y":"x",S=s[h]===a[D],V=l[D]>u[D],R=l[D]<u[D];(s[h]===1&&(!S&&V||S&&R)||s[h]!==1&&(!S&&R||S&&V))&&(f=h==="x"?x:k)}const N={x:l.x+w.x,y:l.y+w.y},M={x:u.x+m.x,y:u.y+m.y},U=Math.max(Math.abs(N.x-f[0].x),Math.abs(M.x-f[0].x)),H=Math.max(Math.abs(N.y-f[0].y),Math.abs(M.y-f[0].y));U>=H?(g=(N.x+M.x)/2,v=f[0].y):(g=f[0].x,v=(N.y+M.y)/2)}return[[e,{x:l.x+w.x,y:l.y+w.y},...f,{x:u.x+m.x,y:u.y+m.y},n],g,v,_,E]}function EP(e,t,n,r){const i=Math.min(Yy(e,t)/2,Yy(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+i*u},${s}Q ${o},${s} ${o},${s+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function lf({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:i,targetPosition:o=G.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20}){const[c,h,d,f,g]=wP({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u});return[c.reduce((w,m,p)=>{let y="";return p>0&&p<c.length-1?y=EP(c[p-1],m,c[p+1],s):y=`${p===0?"M":"L"}${m.x} ${m.y}`,w+=y,w},""),h,d,f,g]}const wc=A.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:h=G.Bottom,targetPosition:d=G.Top,markerEnd:f,markerStart:g,pathOptions:v,interactionWidth:w})=>{const[m,p,y]=lf({sourceX:e,sourceY:t,sourcePosition:h,targetX:n,targetY:r,targetPosition:d,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return O.createElement(jo,{path:m,labelX:p,labelY:y,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:g,interactionWidth:w})});wc.displayName="SmoothStepEdge";const Zp=A.memo(e=>{var t;return O.createElement(wc,{...e,pathOptions:A.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Zp.displayName="StepEdge";function SP({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=$1({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Jp=A.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:d,interactionWidth:f})=>{const[g,v,w]=SP({sourceX:e,sourceY:t,targetX:n,targetY:r});return O.createElement(jo,{path:g,labelX:v,labelY:w,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:d,interactionWidth:f})});Jp.displayName="StraightEdge";function El(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Zy({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case G.Left:return[t-El(t-r,o),n];case G.Right:return[t+El(r-t,o),n];case G.Top:return[t,n-El(n-i,o)];case G.Bottom:return[t,n+El(i-n,o)]}}function em({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:i,targetPosition:o=G.Top,curvature:s=.25}){const[a,l]=Zy({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,c]=Zy({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[h,d,f,g]=L1({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${r},${i}`,h,d,f,g]}const Du=A.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=G.Bottom,targetPosition:o=G.Top,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:d,markerEnd:f,markerStart:g,pathOptions:v,interactionWidth:w})=>{const[m,p,y]=em({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:v==null?void 0:v.curvature});return O.createElement(jo,{path:m,labelX:p,labelY:y,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:d,markerEnd:f,markerStart:g,interactionWidth:w})});Du.displayName="BezierEdge";const tm=A.createContext(null),TP=tm.Provider;tm.Consumer;const xP=()=>A.useContext(tm),IP=e=>"id"in e&&"source"in e&&"target"in e,kP=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,uf=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,AP=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),z1=(e,t)=>{if(!e.source||!e.target)return t;let n;return IP(e)?n={...e}:n={...e,id:kP(e)},AP(n,t)?t:t.concat(n)},cf=({x:e,y:t},[n,r,i],o,[s,a])=>{const l={x:(e-n)/i,y:(t-r)/i};return o?{x:s*Math.round(l.x/s),y:a*Math.round(l.y/a)}:l},U1=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),di=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Ec=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:s}=di(i,t).positionAbsolute;return V1(r,da({x:o,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return b1(n)},j1=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1,a=[0,0])=>{const l={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(c=>{const{width:h,height:d,selectable:f=!0,hidden:g=!1}=c;if(s&&!f||g)return!1;const{positionAbsolute:v}=di(c,a),w={x:v.x,y:v.y,width:h||0,height:d||0},m=sf(l,w),p=typeof h>"u"||typeof d>"u"||h===null||d===null,y=o&&m>0,_=(h||0)*(d||0);(p||y||m>=_||c.dragging)&&u.push(c)}),u},B1=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},H1=(e,t,n,r,i,o=.1)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),l=Math.min(s,a),u=Ro(l,r,i),c=e.x+e.width/2,h=e.y+e.height/2,d=t/2-c*u,f=n/2-h*u;return{x:d,y:f,zoom:u}},Gr=(e,t=0)=>e.transition().duration(t);function Jy(e,t,n,r){return(t[n]||[]).reduce((i,o)=>{var s,a;return`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+o.x+o.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),i},[])}function CP(e,t,n,r,i,o){const{x:s,y:a}=kr(e),u=t.elementsFromPoint(s,a).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const v=nm(void 0,u),w=u.getAttribute("data-handleid"),m=o({nodeId:g,id:w,type:v});if(m){const p=i.find(y=>y.nodeId===g&&y.type===v&&y.id===w);return{handle:{id:w,type:v,nodeId:g,x:(p==null?void 0:p.x)||n.x,y:(p==null?void 0:p.y)||n.y},validHandleResult:m}}}}let c=[],h=1/0;if(i.forEach(g=>{const v=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(v<=r){const w=o(g);v<=h&&(v<h?c=[{handle:g,validHandleResult:w}]:v===h&&c.push({handle:g,validHandleResult:w}),h=v)}}),!c.length)return{handle:null,validHandleResult:W1()};if(c.length===1)return c[0];const d=c.some(({validHandleResult:g})=>g.isValid),f=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:v})=>f?g.type==="target":d?v.isValid:!0)||c[0]}const RP={source:null,target:null,sourceHandle:null,targetHandle:null},W1=()=>({handleDomNode:null,isValid:!1,connection:RP,endHandle:null});function K1(e,t,n,r,i,o,s){const a=i==="target",l=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...W1(),handleDomNode:l};if(l){const c=nm(void 0,l),h=l.getAttribute("data-nodeid"),d=l.getAttribute("data-handleid"),f=l.classList.contains("connectable"),g=l.classList.contains("connectableend"),v={source:a?h:n,sourceHandle:a?d:r,target:a?n:h,targetHandle:a?r:d};u.connection=v,f&&g&&(t===wi.Strict?a&&c==="source"||!a&&c==="target":h!==n||d!==r)&&(u.endHandle={nodeId:h,handleId:d,type:c},u.isValid=o(v))}return u}function PP({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[ze]){const{handleBounds:s}=o[ze];let a=[],l=[];s&&(a=Jy(o,s,"source",`${t}-${n}-${r}`),l=Jy(o,s,"target",`${t}-${n}-${r}`)),i.push(...a,...l)}return i},[])}function nm(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Nh(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function NP(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function G1({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:s,isValidConnection:a,edgeUpdaterType:l,onEdgeUpdateEnd:u}){const c=D1(e.target),{connectionMode:h,domNode:d,autoPanOnConnect:f,connectionRadius:g,onConnectStart:v,panBy:w,getNodes:m,cancelConnection:p}=o();let y=0,_;const{x:E,y:I}=kr(e),x=c==null?void 0:c.elementFromPoint(E,I),k=nm(l,x),N=d==null?void 0:d.getBoundingClientRect();if(!N||!k)return;let M,U=kr(e,N),H=!1,D=null,S=!1,V=null;const R=PP({nodes:m(),nodeId:n,handleId:t,handleType:k}),$=()=>{if(!f)return;const[P,b]=N1(U,N);w({x:P,y:b}),y=requestAnimationFrame($)};s({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:n,handleId:t,type:k},connectionEndHandle:null}),v==null||v(e,{nodeId:n,handleId:t,handleType:k});function C(P){const{transform:b}=o();U=kr(P,N);const{handle:z,validHandleResult:Q}=CP(P,c,cf(U,b,!1,[1,1]),g,R,q=>K1(q,h,n,t,i?"target":"source",a,c));if(_=z,H||($(),H=!0),V=Q.handleDomNode,D=Q.connection,S=Q.isValid,s({connectionPosition:_&&S?U1({x:_.x,y:_.y},b):U,connectionStatus:NP(!!_,S),connectionEndHandle:Q.endHandle}),!_&&!S&&!V)return Nh(M);D.source!==D.target&&V&&(Nh(M),M=V,V.classList.add("connecting","react-flow__handle-connecting"),V.classList.toggle("valid",S),V.classList.toggle("react-flow__handle-valid",S))}function T(P){var b,z;(_||V)&&D&&S&&(r==null||r(D)),(z=(b=o()).onConnectEnd)==null||z.call(b,P),l&&(u==null||u(P)),Nh(M),p(),cancelAnimationFrame(y),H=!1,S=!1,D=null,V=null,c.removeEventListener("mousemove",C),c.removeEventListener("mouseup",T),c.removeEventListener("touchmove",C),c.removeEventListener("touchend",T)}c.addEventListener("mousemove",C),c.addEventListener("mouseup",T),c.addEventListener("touchmove",C),c.addEventListener("touchend",T)}const e0=()=>!0,DP=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),VP=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},q1=A.forwardRef(({type:e="source",position:t=G.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:h,...d},f)=>{var N,M;const g=s||null,v=e==="target",w=Je(),m=xP(),{connectOnClick:p,noPanClassName:y}=Se(DP,Xe),{connecting:_,clickConnecting:E}=Se(VP(m,g,e),Xe);m||(M=(N=w.getState()).onError)==null||M.call(N,"010",er.error010());const I=U=>{const{defaultEdgeOptions:H,onConnect:D,hasDefaultEdges:S}=w.getState(),V={...H,...U};if(S){const{edges:R,setEdges:$}=w.getState();$(z1(V,R))}D==null||D(V),a==null||a(V)},x=U=>{if(!m)return;const H=O1(U);i&&(H&&U.button===0||!H)&&G1({event:U,handleId:g,nodeId:m,onConnect:I,isTarget:v,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||e0}),H?c==null||c(U):h==null||h(U)},k=U=>{const{onClickConnectStart:H,onClickConnectEnd:D,connectionClickStartHandle:S,connectionMode:V,isValidConnection:R}=w.getState();if(!m||!S&&!i)return;if(!S){H==null||H(U,{nodeId:m,handleId:g,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:g}});return}const $=D1(U.target),C=n||R||e0,{connection:T,isValid:P}=K1({nodeId:m,id:g,type:e},V,S.nodeId,S.handleId||null,S.type,C,$);P&&I(T),D==null||D(U),w.setState({connectionClickStartHandle:null})};return O.createElement("div",{"data-handleid":g,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${g}-${e}`,className:Ct(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",y,u,{source:!v,target:v,connectable:r,connectablestart:i,connectableend:o,connecting:E,connectionindicator:r&&(i&&!_||o&&_)}]),onMouseDown:x,onTouchStart:x,onClick:p?k:void 0,ref:f,...d},l)});q1.displayName="Handle";var Ye=A.memo(q1);const Q1=({data:e,isConnectable:t,targetPosition:n=G.Top,sourcePosition:r=G.Bottom})=>O.createElement(O.Fragment,null,O.createElement(Ye,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,O.createElement(Ye,{type:"source",position:r,isConnectable:t}));Q1.displayName="DefaultNode";var hf=A.memo(Q1);const X1=({data:e,isConnectable:t,sourcePosition:n=G.Bottom})=>O.createElement(O.Fragment,null,e==null?void 0:e.label,O.createElement(Ye,{type:"source",position:n,isConnectable:t}));X1.displayName="InputNode";var Y1=A.memo(X1);const Z1=({data:e,isConnectable:t,targetPosition:n=G.Top})=>O.createElement(O.Fragment,null,O.createElement(Ye,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Z1.displayName="OutputNode";var J1=A.memo(Z1);const rm=()=>null;rm.displayName="GroupNode";const bP=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Sl=e=>e.id;function MP(e,t){return Xe(e.selectedNodes.map(Sl),t.selectedNodes.map(Sl))&&Xe(e.selectedEdges.map(Sl),t.selectedEdges.map(Sl))}const eE=A.memo(({onSelectionChange:e})=>{const t=Je(),{selectedNodes:n,selectedEdges:r}=Se(bP,MP);return A.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(o=>o(i))},[n,r,e]),null});eE.displayName="SelectionListener";const OP=e=>!!e.onSelectionChange;function $P({onSelectionChange:e}){const t=Se(OP);return e||t?O.createElement(eE,{onSelectionChange:e}):null}const LP=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function bi(e,t){A.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ae(e,t,n){A.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const FP=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:h,edgesFocusable:d,edgesUpdatable:f,elevateNodesOnSelect:g,minZoom:v,maxZoom:w,nodeExtent:m,onNodesChange:p,onEdgesChange:y,elementsSelectable:_,connectionMode:E,snapGrid:I,snapToGrid:x,translateExtent:k,connectOnClick:N,defaultEdgeOptions:M,fitView:U,fitViewOptions:H,onNodesDelete:D,onEdgesDelete:S,onNodeDrag:V,onNodeDragStart:R,onNodeDragStop:$,onSelectionDrag:C,onSelectionDragStart:T,onSelectionDragStop:P,noPanClassName:b,nodeOrigin:z,rfId:Q,autoPanOnConnect:q,autoPanOnNodeDrag:J,onError:te,connectionRadius:se,isValidConnection:pe,nodeDragThreshold:fe})=>{const{setNodes:ge,setEdges:Oe,setDefaultNodesAndEdges:We,setMinZoom:Rt,setMaxZoom:Ae,setTranslateExtent:Wt,setNodeExtent:_e,reset:tt}=Se(LP,Xe),Z=Je();return A.useEffect(()=>{const bn=r==null?void 0:r.map(Mn=>({...Mn,...M}));return We(n,bn),()=>{tt()}},[]),ae("defaultEdgeOptions",M,Z.setState),ae("connectionMode",E,Z.setState),ae("onConnect",i,Z.setState),ae("onConnectStart",o,Z.setState),ae("onConnectEnd",s,Z.setState),ae("onClickConnectStart",a,Z.setState),ae("onClickConnectEnd",l,Z.setState),ae("nodesDraggable",u,Z.setState),ae("nodesConnectable",c,Z.setState),ae("nodesFocusable",h,Z.setState),ae("edgesFocusable",d,Z.setState),ae("edgesUpdatable",f,Z.setState),ae("elementsSelectable",_,Z.setState),ae("elevateNodesOnSelect",g,Z.setState),ae("snapToGrid",x,Z.setState),ae("snapGrid",I,Z.setState),ae("onNodesChange",p,Z.setState),ae("onEdgesChange",y,Z.setState),ae("connectOnClick",N,Z.setState),ae("fitViewOnInit",U,Z.setState),ae("fitViewOnInitOptions",H,Z.setState),ae("onNodesDelete",D,Z.setState),ae("onEdgesDelete",S,Z.setState),ae("onNodeDrag",V,Z.setState),ae("onNodeDragStart",R,Z.setState),ae("onNodeDragStop",$,Z.setState),ae("onSelectionDrag",C,Z.setState),ae("onSelectionDragStart",T,Z.setState),ae("onSelectionDragStop",P,Z.setState),ae("noPanClassName",b,Z.setState),ae("nodeOrigin",z,Z.setState),ae("rfId",Q,Z.setState),ae("autoPanOnConnect",q,Z.setState),ae("autoPanOnNodeDrag",J,Z.setState),ae("onError",te,Z.setState),ae("connectionRadius",se,Z.setState),ae("isValidConnection",pe,Z.setState),ae("nodeDragThreshold",fe,Z.setState),bi(e,ge),bi(t,Oe),bi(v,Rt),bi(w,Ae),bi(k,Wt),bi(m,_e),null},t0={display:"none"},zP={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},tE="react-flow__node-desc",nE="react-flow__edge-desc",UP="react-flow__aria-live",jP=e=>e.ariaLiveMessage;function BP({rfId:e}){const t=Se(jP);return O.createElement("div",{id:`${UP}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:zP},t)}function HP({rfId:e,disableKeyboardA11y:t}){return O.createElement(O.Fragment,null,O.createElement("div",{id:`${tE}-${e}`,style:t0},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),O.createElement("div",{id:`${nE}-${e}`,style:t0},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&O.createElement(BP,{rfId:e}))}var fa=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=A.useState(!1),i=A.useRef(!1),o=A.useRef(new Set([])),[s,a]=A.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.split("+")),c=u.reduce((h,d)=>h.concat(...d),[]);return[u,c]}return[[],[]]},[e]);return A.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const c=f=>{if(i.current=f.ctrlKey||f.metaKey||f.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&af(f))return!1;const v=r0(f.code,a);o.current.add(f[v]),n0(s,o.current,!1)&&(f.preventDefault(),r(!0))},h=f=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&af(f))return!1;const v=r0(f.code,a);n0(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(f[v]),f.key==="Meta"&&o.current.clear(),i.current=!1},d=()=>{o.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",d),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",d)}}},[e,r]),n};function n0(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function r0(e,t){return t.includes(e)?"code":"key"}function rE(e,t,n,r){var s,a;if(!e.parentNode)return n;const i=t.get(e.parentNode),o=di(i,r);return rE(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((s=i[ze])==null?void 0:s.z)??0)>(n.z??0)?((a=i[ze])==null?void 0:a.z)??0:n.z??0},r)}function iE(e,t,n){e.forEach(r=>{var i;if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:o,y:s,z:a}=rE(r,e,{...r.position,z:((i=r[ze])==null?void 0:i.z)??0},t);r.positionAbsolute={x:o,y:s},r[ze].z=a,n!=null&&n[r.id]&&(r[ze].isParent=!0)}})}function Dh(e,t,n,r){const i=new Map,o={},s=r?1e3:0;return e.forEach(a=>{var d;const l=(Zt(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=t.get(a.id),c={...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(o[a.parentNode]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(c,ze,{enumerable:!1,value:{handleBounds:h||(d=u==null?void 0:u[ze])==null?void 0:d.handleBounds,z:l}}),i.set(a.id,c)}),iE(i,n,o),i}function oE(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:h}=e(),d=t.initial&&!u&&c;if(a&&l&&(d||!t.initial)){const g=n().filter(w=>{var p;const m=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(p=t.nodes)!=null&&p.length?m&&t.nodes.some(y=>y.id===w.id):m}),v=g.every(w=>w.width&&w.height);if(g.length>0&&v){const w=Ec(g,h),{x:m,y:p,zoom:y}=H1(w,r,i,t.minZoom??o,t.maxZoom??s,t.padding??.1),_=Kn.translate(m,p).scale(y);return typeof t.duration=="number"&&t.duration>0?a.transform(Gr(l,t.duration),_):a.transform(l,_),!0}}return!1}function WP(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ze]:r[ze],selected:n.selected})}),new Map(t)}function KP(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Tl({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&r({nodeInternals:WP(e,i)}),s==null||s(e)),t!=null&&t.length&&(u&&r({edges:KP(t,o)}),a==null||a(t))}const Mi=()=>{},GP={zoomIn:Mi,zoomOut:Mi,zoomTo:Mi,getZoom:()=>1,setViewport:Mi,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Mi,fitBounds:Mi,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},qP=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),QP=()=>{const e=Je(),{d3Zoom:t,d3Selection:n}=Se(qP,Xe);return A.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Gr(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Gr(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(Gr(n,o==null?void 0:o.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[s,a,l]=e.getState().transform,u=Kn.translate(i.x??s,i.y??a).scale(i.zoom??l);t.transform(Gr(n,o==null?void 0:o.duration),u)},getViewport:()=>{const[i,o,s]=e.getState().transform;return{x:i,y:o,zoom:s}},fitView:i=>oE(e.getState,i),setCenter:(i,o,s)=>{const{width:a,height:l,maxZoom:u}=e.getState(),c=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:u,h=a/2-i*c,d=l/2-o*c,f=Kn.translate(h,d).scale(c);t.transform(Gr(n,s==null?void 0:s.duration),f)},fitBounds:(i,o)=>{const{width:s,height:a,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:h,zoom:d}=H1(i,s,a,l,u,(o==null?void 0:o.padding)??.1),f=Kn.translate(c,h).scale(d);t.transform(Gr(n,o==null?void 0:o.duration),f)},project:i=>{const{transform:o,snapToGrid:s,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),cf(i,o,s,a)},screenToFlowPosition:i=>{const{transform:o,snapToGrid:s,snapGrid:a,domNode:l}=e.getState();if(!l)return i;const{x:u,y:c}=l.getBoundingClientRect(),h={x:i.x-u,y:i.y-c};return cf(h,o,s,a)},flowToScreenPosition:i=>{const{transform:o,domNode:s}=e.getState();if(!s)return i;const{x:a,y:l}=s.getBoundingClientRect(),u=U1(i,o);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:GP,[t,n])};function im(){const e=QP(),t=Je(),n=A.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),r=A.useCallback(v=>t.getState().nodeInternals.get(v),[]),i=A.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(w=>({...w}))},[]),o=A.useCallback(v=>{const{edges:w=[]}=t.getState();return w.find(m=>m.id===v)},[]),s=A.useCallback(v=>{const{getNodes:w,setNodes:m,hasDefaultNodes:p,onNodesChange:y}=t.getState(),_=w(),E=typeof v=="function"?v(_):v;if(p)m(E);else if(y){const I=E.length===0?_.map(x=>({type:"remove",id:x.id})):E.map(x=>({item:x,type:"reset"}));y(I)}},[]),a=A.useCallback(v=>{const{edges:w=[],setEdges:m,hasDefaultEdges:p,onEdgesChange:y}=t.getState(),_=typeof v=="function"?v(w):v;if(p)m(_);else if(y){const E=_.length===0?w.map(I=>({type:"remove",id:I.id})):_.map(I=>({item:I,type:"reset"}));y(E)}},[]),l=A.useCallback(v=>{const w=Array.isArray(v)?v:[v],{getNodes:m,setNodes:p,hasDefaultNodes:y,onNodesChange:_}=t.getState();if(y){const I=[...m(),...w];p(I)}else if(_){const E=w.map(I=>({item:I,type:"add"}));_(E)}},[]),u=A.useCallback(v=>{const w=Array.isArray(v)?v:[v],{edges:m=[],setEdges:p,hasDefaultEdges:y,onEdgesChange:_}=t.getState();if(y)p([...m,...w]);else if(_){const E=w.map(I=>({item:I,type:"add"}));_(E)}},[]),c=A.useCallback(()=>{const{getNodes:v,edges:w=[],transform:m}=t.getState(),[p,y,_]=m;return{nodes:v().map(E=>({...E})),edges:w.map(E=>({...E})),viewport:{x:p,y,zoom:_}}},[]),h=A.useCallback(({nodes:v,edges:w})=>{const{nodeInternals:m,getNodes:p,edges:y,hasDefaultNodes:_,hasDefaultEdges:E,onNodesDelete:I,onEdgesDelete:x,onNodesChange:k,onEdgesChange:N}=t.getState(),M=(v||[]).map(V=>V.id),U=(w||[]).map(V=>V.id),H=p().reduce((V,R)=>{const $=!M.includes(R.id)&&R.parentNode&&V.find(T=>T.id===R.parentNode);return(typeof R.deletable=="boolean"?R.deletable:!0)&&(M.includes(R.id)||$)&&V.push(R),V},[]),D=y.filter(V=>typeof V.deletable=="boolean"?V.deletable:!0),S=D.filter(V=>U.includes(V.id));if(H||S){const V=B1(H,D),R=[...S,...V],$=R.reduce((C,T)=>(C.includes(T.id)||C.push(T.id),C),[]);if((E||_)&&(E&&t.setState({edges:y.filter(C=>!$.includes(C.id))}),_&&(H.forEach(C=>{m.delete(C.id)}),t.setState({nodeInternals:new Map(m)}))),$.length>0&&(x==null||x(R),N&&N($.map(C=>({id:C,type:"remove"})))),H.length>0&&(I==null||I(H),k)){const C=H.map(T=>({id:T.id,type:"remove"}));k(C)}}},[]),d=A.useCallback(v=>{const w=gP(v),m=w?null:t.getState().nodeInternals.get(v.id);return!w&&!m?[null,null,w]:[w?v:qy(m),m,w]},[]),f=A.useCallback((v,w=!0,m)=>{const[p,y,_]=d(v);return p?(m||t.getState().getNodes()).filter(E=>{if(!_&&(E.id===y.id||!E.positionAbsolute))return!1;const I=qy(E),x=sf(I,p);return w&&x>0||x>=p.width*p.height}):[]},[]),g=A.useCallback((v,w,m=!0)=>{const[p]=d(v);if(!p)return!1;const y=sf(p,w);return m&&y>0||y>=p.width*p.height},[]);return A.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:s,setEdges:a,addNodes:l,addEdges:u,toObject:c,deleteElements:h,getIntersectingNodes:f,isNodeIntersecting:g}),[e,n,r,i,o,s,a,l,u,c,h,f,g])}const XP={actInsideInputWithModifier:!1};var YP=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Je(),{deleteElements:r}=im(),i=fa(e,XP),o=fa(t);A.useEffect(()=>{if(i){const{edges:s,getNodes:a}=n.getState(),l=a().filter(c=>c.selected),u=s.filter(c=>c.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),A.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function ZP(e){const t=Je();A.useEffect(()=>{let n;const r=()=>{var o,s;if(!e.current)return;const i=Qp(e.current);(i.height===0||i.width===0)&&((s=(o=t.getState()).onError)==null||s.call(o,"004",er.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const om={position:"absolute",width:"100%",height:"100%",top:0,left:0},JP=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,xl=e=>({x:e.x,y:e.y,zoom:e.k}),Oi=(e,t)=>e.target.closest(`.${t}`),i0=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),o0=e=>{const t=e.ctrlKey&&Pu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},eN=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),tN=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=ni.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:h=!0,defaultViewport:d,translateExtent:f,minZoom:g,maxZoom:v,zoomActivationKeyCode:w,preventScrolling:m=!0,children:p,noWheelClassName:y,noPanClassName:_})=>{const E=A.useRef(),I=Je(),x=A.useRef(!1),k=A.useRef(!1),N=A.useRef(null),M=A.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:H,d3ZoomHandler:D,userSelectionActive:S}=Se(eN,Xe),V=fa(w),R=A.useRef(0),$=A.useRef(!1),C=A.useRef();return ZP(N),A.useEffect(()=>{if(N.current){const T=N.current.getBoundingClientRect(),P=R1().scaleExtent([g,v]).translateExtent(f),b=qt(N.current).call(P),z=Kn.translate(d.x,d.y).scale(Ro(d.zoom,g,v)),Q=[[0,0],[T.width,T.height]],q=P.constrain()(z,Q,f);P.transform(b,q),P.wheelDelta(o0),I.setState({d3Zoom:P,d3Selection:b,d3ZoomHandler:b.on("wheel.zoom"),transform:[q.x,q.y,q.k],domNode:N.current.closest(".react-flow")})}},[]),A.useEffect(()=>{H&&U&&(s&&!V&&!S?H.on("wheel.zoom",T=>{if(Oi(T,y))return!1;T.preventDefault(),T.stopImmediatePropagation();const P=H.property("__zoom").k||1,b=Pu();if(T.ctrlKey&&o&&b){const fe=an(T),ge=o0(T),Oe=P*Math.pow(2,ge);U.scaleTo(H,Oe,fe,T);return}const z=T.deltaMode===1?20:1;let Q=l===ni.Vertical?0:T.deltaX*z,q=l===ni.Horizontal?0:T.deltaY*z;!b&&T.shiftKey&&l!==ni.Vertical&&(Q=T.deltaY*z,q=0),U.translateBy(H,-(Q/P)*a,-(q/P)*a,{internal:!0});const J=xl(H.property("__zoom")),{onViewportChangeStart:te,onViewportChange:se,onViewportChangeEnd:pe}=I.getState();clearTimeout(C.current),$.current||($.current=!0,t==null||t(T,J),te==null||te(J)),$.current&&(e==null||e(T,J),se==null||se(J),C.current=setTimeout(()=>{n==null||n(T,J),pe==null||pe(J),$.current=!1},150))},{passive:!1}):typeof D<"u"&&H.on("wheel.zoom",function(T,P){if(!m||Oi(T,y))return null;T.preventDefault(),D.call(this,T,P)},{passive:!1}))},[S,s,l,H,U,D,V,o,m,y,t,e,n]),A.useEffect(()=>{U&&U.on("start",T=>{var z,Q;if(!T.sourceEvent||T.sourceEvent.internal)return null;R.current=(z=T.sourceEvent)==null?void 0:z.button;const{onViewportChangeStart:P}=I.getState(),b=xl(T.transform);x.current=!0,M.current=b,((Q=T.sourceEvent)==null?void 0:Q.type)==="mousedown"&&I.setState({paneDragging:!0}),P==null||P(b),t==null||t(T.sourceEvent,b)})},[U,t]),A.useEffect(()=>{U&&(S&&!x.current?U.on("zoom",null):S||U.on("zoom",T=>{var b;const{onViewportChange:P}=I.getState();if(I.setState({transform:[T.transform.x,T.transform.y,T.transform.k]}),k.current=!!(r&&i0(h,R.current??0)),(e||P)&&!((b=T.sourceEvent)!=null&&b.internal)){const z=xl(T.transform);P==null||P(z),e==null||e(T.sourceEvent,z)}}))},[S,U,e,h,r]),A.useEffect(()=>{U&&U.on("end",T=>{if(!T.sourceEvent||T.sourceEvent.internal)return null;const{onViewportChangeEnd:P}=I.getState();if(x.current=!1,I.setState({paneDragging:!1}),r&&i0(h,R.current??0)&&!k.current&&r(T.sourceEvent),k.current=!1,(n||P)&&JP(M.current,T.transform)){const b=xl(T.transform);M.current=b,clearTimeout(E.current),E.current=setTimeout(()=>{P==null||P(b),n==null||n(T.sourceEvent,b)},s?150:0)}})},[U,s,h,n,r]),A.useEffect(()=>{U&&U.filter(T=>{const P=V||i,b=o&&T.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&T.button===1&&T.type==="mousedown"&&(Oi(T,"react-flow__node")||Oi(T,"react-flow__edge")))return!0;if(!h&&!P&&!s&&!u&&!o||S||!u&&T.type==="dblclick"||Oi(T,y)&&T.type==="wheel"||Oi(T,_)&&(T.type!=="wheel"||s&&T.type==="wheel"&&!V)||!o&&T.ctrlKey&&T.type==="wheel"||!P&&!s&&!b&&T.type==="wheel"||!h&&(T.type==="mousedown"||T.type==="touchstart")||Array.isArray(h)&&!h.includes(T.button)&&(T.type==="mousedown"||T.type==="touchstart"))return!1;const z=Array.isArray(h)&&h.includes(T.button)||!T.button||T.button<=1;return(!T.ctrlKey||T.type==="wheel")&&z})},[S,U,i,o,s,u,h,c,V]),O.createElement("div",{className:"react-flow__renderer",ref:N,style:om},p)},nN=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rN(){const{userSelectionActive:e,userSelectionRect:t}=Se(nN,Xe);return e&&t?O.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function s0(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function sE(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(a=>a.id===i.id);if(o.length===0)return r.push(i),r;const s={...i};for(const a of o)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s0(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&s0(r,s);break}case"remove":return r}return r.push(s),r},n)}function aE(e,t){return sE(e,t)}function iN(e,t){return sE(e,t)}const hr=(e,t)=>({id:e,type:"select",selected:t});function ro(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(hr(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(hr(r.id,!1))),n},[])}const Vh=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},oN=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),lE=A.memo(({isSelecting:e,selectionMode:t=Po.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:h})=>{const d=A.useRef(null),f=Je(),g=A.useRef(0),v=A.useRef(0),w=A.useRef(),{userSelectionActive:m,elementsSelectable:p,dragging:y}=Se(oN,Xe),_=()=>{f.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},E=D=>{o==null||o(D),f.getState().resetSelectedElements(),f.setState({nodesSelectionActive:!1})},I=D=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){D.preventDefault();return}s==null||s(D)},x=a?D=>a(D):void 0,k=D=>{const{resetSelectedElements:S,domNode:V}=f.getState();if(w.current=V==null?void 0:V.getBoundingClientRect(),!p||!e||D.button!==0||D.target!==d.current||!w.current)return;const{x:R,y:$}=kr(D,w.current);S(),f.setState({userSelectionRect:{width:0,height:0,startX:R,startY:$,x:R,y:$}}),r==null||r(D)},N=D=>{const{userSelectionRect:S,nodeInternals:V,edges:R,transform:$,onNodesChange:C,onEdgesChange:T,nodeOrigin:P,getNodes:b}=f.getState();if(!e||!w.current||!S)return;f.setState({userSelectionActive:!0,nodesSelectionActive:!1});const z=kr(D,w.current),Q=S.startX??0,q=S.startY??0,J={...S,x:z.x<Q?z.x:Q,y:z.y<q?z.y:q,width:Math.abs(z.x-Q),height:Math.abs(z.y-q)},te=b(),se=j1(V,J,$,t===Po.Partial,!0,P),pe=B1(se,R).map(ge=>ge.id),fe=se.map(ge=>ge.id);if(g.current!==fe.length){g.current=fe.length;const ge=ro(te,fe);ge.length&&(C==null||C(ge))}if(v.current!==pe.length){v.current=pe.length;const ge=ro(R,pe);ge.length&&(T==null||T(ge))}f.setState({userSelectionRect:J})},M=D=>{if(D.button!==0)return;const{userSelectionRect:S}=f.getState();!m&&S&&D.target===d.current&&(E==null||E(D)),f.setState({nodesSelectionActive:g.current>0}),_(),i==null||i(D)},U=D=>{m&&(f.setState({nodesSelectionActive:g.current>0}),i==null||i(D)),_()},H=p&&(e||m);return O.createElement("div",{className:Ct(["react-flow__pane",{dragging:y,selection:e}]),onClick:H?void 0:Vh(E,d),onContextMenu:Vh(I,d),onWheel:Vh(x,d),onMouseEnter:H?void 0:l,onMouseDown:H?k:void 0,onMouseMove:H?N:u,onMouseUp:H?M:void 0,onMouseLeave:H?U:c,ref:d,style:om},h,O.createElement(rN,null))});lE.displayName="Pane";function uE(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:uE(n,t):!1}function a0(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function sN(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!uE(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var o,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=i.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height,expandParent:i.expandParent}})}function aN(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function cE(e,t,n,r,i=[0,0],o){const s=aN(e,e.extent||r);let a=s;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const c=n.get(e.parentNode),{x:h,y:d}=di(c,i).positionAbsolute;a=c&&Zt(h)&&Zt(d)&&Zt(c.width)&&Zt(c.height)?[[h+e.width*i[0],d+e.height*i[1]],[h+c.width-e.width+e.width*i[0],d+c.height-e.height+e.height*i[1]]]:a}else o==null||o("005",er.error005()),a=s;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const c=n.get(e.parentNode),{x:h,y:d}=di(c,i).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+d],[e.extent[1][0]+h,e.extent[1][1]+d]]}let l={x:0,y:0};if(e.parentNode){const c=n.get(e.parentNode);l=di(c,i).positionAbsolute}const u=a&&a!=="parent"?Xp(t,a):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function bh({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const l0=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),s=t.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return o.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...Qp(l)}})};function fs(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function df({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeInternals:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",er.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function lN(){const e=Je();return A.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:o?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function Mh(e){return(t,n,r)=>e==null?void 0:e(t,r)}function hE({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:s}){const a=Je(),[l,u]=A.useState(!1),c=A.useRef([]),h=A.useRef({x:null,y:null}),d=A.useRef(0),f=A.useRef(null),g=A.useRef({x:0,y:0}),v=A.useRef(null),w=A.useRef(!1),m=A.useRef(!1),p=lN();return A.useEffect(()=>{if(e!=null&&e.current){const y=qt(e.current),_=({x,y:k})=>{const{nodeInternals:N,onNodeDrag:M,onSelectionDrag:U,updateNodePositions:H,nodeExtent:D,snapGrid:S,snapToGrid:V,nodeOrigin:R,onError:$}=a.getState();h.current={x,y:k};let C=!1,T={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&D){const b=Ec(c.current,R);T=da(b)}if(c.current=c.current.map(b=>{const z={x:x-b.distance.x,y:k-b.distance.y};V&&(z.x=S[0]*Math.round(z.x/S[0]),z.y=S[1]*Math.round(z.y/S[1]));const Q=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];c.current.length>1&&D&&!b.extent&&(Q[0][0]=b.positionAbsolute.x-T.x+D[0][0],Q[1][0]=b.positionAbsolute.x+(b.width??0)-T.x2+D[1][0],Q[0][1]=b.positionAbsolute.y-T.y+D[0][1],Q[1][1]=b.positionAbsolute.y+(b.height??0)-T.y2+D[1][1]);const q=cE(b,z,N,Q,R,$);return C=C||b.position.x!==q.position.x||b.position.y!==q.position.y,b.position=q.position,b.positionAbsolute=q.positionAbsolute,b}),!C)return;H(c.current,!0,!0),u(!0);const P=i?M:Mh(U);if(P&&v.current){const[b,z]=bh({nodeId:i,dragItems:c.current,nodeInternals:N});P(v.current,b,z)}},E=()=>{if(!f.current)return;const[x,k]=N1(g.current,f.current);if(x!==0||k!==0){const{transform:N,panBy:M}=a.getState();h.current.x=(h.current.x??0)-x/N[2],h.current.y=(h.current.y??0)-k/N[2],M({x,y:k})&&_(h.current)}d.current=requestAnimationFrame(E)},I=x=>{var R;const{nodeInternals:k,multiSelectionActive:N,nodesDraggable:M,unselectNodesAndEdges:U,onNodeDragStart:H,onSelectionDragStart:D}=a.getState();m.current=!0;const S=i?H:Mh(D);(!s||!o)&&!N&&i&&((R=k.get(i))!=null&&R.selected||U()),i&&o&&s&&df({id:i,store:a,nodeRef:e});const V=p(x);if(h.current=V,c.current=sN(k,M,V,i),S&&c.current){const[$,C]=bh({nodeId:i,dragItems:c.current,nodeInternals:k});S(x.sourceEvent,$,C)}};if(t)y.on(".drag",null);else{const x=w2().on("start",k=>{const{domNode:N,nodeDragThreshold:M}=a.getState();M===0&&I(k);const U=p(k);h.current=U,f.current=(N==null?void 0:N.getBoundingClientRect())||null,g.current=kr(k.sourceEvent,f.current)}).on("drag",k=>{var H,D;const N=p(k),{autoPanOnNodeDrag:M,nodeDragThreshold:U}=a.getState();if(!w.current&&m.current&&M&&(w.current=!0,E()),!m.current){const S=N.xSnapped-(((H=h==null?void 0:h.current)==null?void 0:H.x)??0),V=N.ySnapped-(((D=h==null?void 0:h.current)==null?void 0:D.y)??0);Math.sqrt(S*S+V*V)>U&&I(k)}(h.current.x!==N.xSnapped||h.current.y!==N.ySnapped)&&c.current&&m.current&&(v.current=k.sourceEvent,g.current=kr(k.sourceEvent,f.current),_(N))}).on("end",k=>{if(m.current&&(u(!1),w.current=!1,m.current=!1,cancelAnimationFrame(d.current),c.current)){const{updateNodePositions:N,nodeInternals:M,onNodeDragStop:U,onSelectionDragStop:H}=a.getState(),D=i?U:Mh(H);if(N(c.current,!1,!1),D){const[S,V]=bh({nodeId:i,dragItems:c.current,nodeInternals:M});D(k.sourceEvent,S,V)}}}).filter(k=>{const N=k.target;return!k.button&&(!n||!a0(N,`.${n}`,e))&&(!r||a0(N,r,e))});return y.call(x),()=>{y.on(".drag",null)}}}},[e,t,n,r,o,a,i,s,p]),l}function dE(){const e=Je();return A.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:s,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:c}=e.getState(),h=s().filter(p=>p.selected&&(p.draggable||c&&typeof p.draggable>"u")),d=a?l[0]:5,f=a?l[1]:5,g=n.isShiftPressed?4:1,v=n.x*d*g,w=n.y*f*g,m=h.map(p=>{if(p.positionAbsolute){const y={x:p.positionAbsolute.x+v,y:p.positionAbsolute.y+w};a&&(y.x=l[0]*Math.round(y.x/l[0]),y.y=l[1]*Math.round(y.y/l[1]));const{positionAbsolute:_,position:E}=cE(p,y,r,i,void 0,u);p.position=E,p.positionAbsolute=_}return p});o(m,!0,!1)},[])}const po={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ps=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:s,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:h,onMouseMove:d,onMouseLeave:f,onContextMenu:g,onDoubleClick:v,style:w,className:m,isDraggable:p,isSelectable:y,isConnectable:_,isFocusable:E,selectNodesOnDrag:I,sourcePosition:x,targetPosition:k,hidden:N,resizeObserver:M,dragHandle:U,zIndex:H,isParent:D,noDragClassName:S,noPanClassName:V,initialized:R,disableKeyboardA11y:$,ariaLabel:C,rfId:T,hasHandleBounds:P})=>{const b=Je(),z=A.useRef(null),Q=A.useRef(x),q=A.useRef(k),J=A.useRef(r),te=y||p||c||h||d||f,se=dE(),pe=fs(n,b.getState,h),fe=fs(n,b.getState,d),ge=fs(n,b.getState,f),Oe=fs(n,b.getState,g),We=fs(n,b.getState,v),Rt=_e=>{const{nodeDragThreshold:tt}=b.getState();if(y&&(!I||!p||tt>0)&&df({id:n,store:b,nodeRef:z}),c){const Z=b.getState().nodeInternals.get(n);Z&&c(_e,{...Z})}},Ae=_e=>{if(!af(_e))if(M1.includes(_e.key)&&y){const tt=_e.key==="Escape";df({id:n,store:b,unselect:tt,nodeRef:z})}else!$&&p&&u&&Object.prototype.hasOwnProperty.call(po,_e.key)&&(b.setState({ariaLiveMessage:`Moved selected node ${_e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),se({x:po[_e.key].x,y:po[_e.key].y,isShiftPressed:_e.shiftKey}))};A.useEffect(()=>()=>{z.current&&(M==null||M.unobserve(z.current))},[]),A.useEffect(()=>{if(z.current&&!N){const _e=z.current;(!R||!P)&&(M==null||M.unobserve(_e),M==null||M.observe(_e))}},[N,R,P]),A.useEffect(()=>{const _e=J.current!==r,tt=Q.current!==x,Z=q.current!==k;z.current&&(_e||tt||Z)&&(_e&&(J.current=r),tt&&(Q.current=x),Z&&(q.current=k),b.getState().updateNodeDimensions([{id:n,nodeElement:z.current,forceUpdate:!0}]))},[n,r,x,k]);const Wt=hE({nodeRef:z,disabled:N||!p,noDragClassName:S,handleSelector:U,nodeId:n,isSelectable:y,selectNodesOnDrag:I});return N?null:O.createElement("div",{className:Ct(["react-flow__node",`react-flow__node-${r}`,{[V]:p},m,{selected:u,selectable:y,parent:D,dragging:Wt}]),ref:z,style:{zIndex:H,transform:`translate(${a}px,${l}px)`,pointerEvents:te?"all":"none",visibility:R?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:pe,onMouseMove:fe,onMouseLeave:ge,onContextMenu:Oe,onClick:Rt,onDoubleClick:We,onKeyDown:E?Ae:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":$?void 0:`${tE}-${T}`,"aria-label":C},O.createElement(TP,{value:n},O.createElement(e,{id:n,data:i,type:r,xPos:o,yPos:s,selected:u,isConnectable:_,sourcePosition:x,targetPosition:k,dragging:Wt,dragHandle:U,zIndex:H})))};return t.displayName="NodeWrapper",A.memo(t)};const uN=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Ec(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function cN({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Je(),{width:i,height:o,x:s,y:a,transformString:l,userSelectionActive:u}=Se(uN,Xe),c=dE(),h=A.useRef(null);if(A.useEffect(()=>{var g;n||(g=h.current)==null||g.focus({preventScroll:!0})},[n]),hE({nodeRef:h}),u||!i||!o)return null;const d=e?g=>{const v=r.getState().getNodes().filter(w=>w.selected);e(g,v)}:void 0,f=g=>{Object.prototype.hasOwnProperty.call(po,g.key)&&c({x:po[g.key].x,y:po[g.key].y,isShiftPressed:g.shiftKey})};return O.createElement("div",{className:Ct(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},O.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:o,top:a,left:s}}))}var hN=A.memo(cN);const dN=e=>e.nodesSelectionActive,fE=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:h,selectionOnDrag:d,selectionMode:f,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:m,zoomActivationKeyCode:p,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:E,panOnScroll:I,panOnScrollSpeed:x,panOnScrollMode:k,zoomOnDoubleClick:N,panOnDrag:M,defaultViewport:U,translateExtent:H,minZoom:D,maxZoom:S,preventScrolling:V,onSelectionContextMenu:R,noWheelClassName:$,noPanClassName:C,disableKeyboardA11y:T})=>{const P=Se(dN),b=fa(h),z=fa(m),Q=z||M,q=z||I,J=b||d&&Q!==!0;return YP({deleteKeyCode:a,multiSelectionKeyCode:w}),O.createElement(tN,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:o,elementsSelectable:y,zoomOnScroll:_,zoomOnPinch:E,panOnScroll:q,panOnScrollSpeed:x,panOnScrollMode:k,zoomOnDoubleClick:N,panOnDrag:!b&&Q,defaultViewport:U,translateExtent:H,minZoom:D,maxZoom:S,zoomActivationKeyCode:p,preventScrolling:V,noWheelClassName:$,noPanClassName:C},O.createElement(lE,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:Q,isSelecting:!!J,selectionMode:f},e,P&&O.createElement(hN,{onSelectionContextMenu:R,noPanClassName:C,disableKeyboardA11y:T})))};fE.displayName="FlowRenderer";var fN=A.memo(fE);function pN(e){return Se(A.useCallback(n=>e?j1(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function mN(e){const t={input:ps(e.input||Y1),default:ps(e.default||hf),output:ps(e.output||J1),group:ps(e.group||rm)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=ps(e[o]||hf),i),n);return{...t,...r}}const gN=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},yN=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),pE=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:s}=Se(yN,Xe),a=pN(e.onlyRenderVisibleElements),l=A.useRef(),u=A.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(h=>{const d=h.map(f=>({id:f.target.getAttribute("data-id"),nodeElement:f.target,forceUpdate:!0}));o(d)});return l.current=c,c},[]);return A.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),O.createElement("div",{className:"react-flow__nodes",style:om},a.map(c=>{var E,I,x;let h=c.type||"default";e.nodeTypes[h]||(s==null||s("003",er.error003(h)),h="default");const d=e.nodeTypes[h]||e.nodeTypes.default,f=!!(c.draggable||t&&typeof c.draggable>"u"),g=!!(c.selectable||i&&typeof c.selectable>"u"),v=!!(c.connectable||n&&typeof c.connectable>"u"),w=!!(c.focusable||r&&typeof c.focusable>"u"),m=e.nodeExtent?Xp(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,p=(m==null?void 0:m.x)??0,y=(m==null?void 0:m.y)??0,_=gN({x:p,y,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return O.createElement(d,{key:c.id,id:c.id,className:c.className,style:c.style,type:h,data:c.data,sourcePosition:c.sourcePosition||G.Bottom,targetPosition:c.targetPosition||G.Top,hidden:c.hidden,xPos:p,yPos:y,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:f,isSelectable:g,isConnectable:v,isFocusable:w,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((E=c[ze])==null?void 0:E.z)??0,isParent:!!((I=c[ze])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!((x=c[ze])!=null&&x.handleBounds)})}))};pE.displayName="NodeRenderer";var vN=A.memo(pE);const _N=(e,t,n)=>n===G.Left?e-t:n===G.Right?e+t:e,wN=(e,t,n)=>n===G.Top?e-t:n===G.Bottom?e+t:e,u0="react-flow__edgeupdater",c0=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a})=>O.createElement("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:Ct([u0,`${u0}-${a}`]),cx:_N(t,r,e),cy:wN(n,r,e),r,stroke:"transparent",fill:"transparent"}),EN=()=>!0;var $i=e=>{const t=({id:n,className:r,type:i,data:o,onClick:s,onEdgeDoubleClick:a,selected:l,animated:u,label:c,labelStyle:h,labelShowBg:d,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:v,style:w,source:m,target:p,sourceX:y,sourceY:_,targetX:E,targetY:I,sourcePosition:x,targetPosition:k,elementsSelectable:N,hidden:M,sourceHandleId:U,targetHandleId:H,onContextMenu:D,onMouseEnter:S,onMouseMove:V,onMouseLeave:R,edgeUpdaterRadius:$,onEdgeUpdate:C,onEdgeUpdateStart:T,onEdgeUpdateEnd:P,markerEnd:b,markerStart:z,rfId:Q,ariaLabel:q,isFocusable:J,isUpdatable:te,pathOptions:se,interactionWidth:pe})=>{const fe=A.useRef(null),[ge,Oe]=A.useState(!1),[We,Rt]=A.useState(!1),Ae=Je(),Wt=A.useMemo(()=>`url('#${uf(z,Q)}')`,[z,Q]),_e=A.useMemo(()=>`url('#${uf(b,Q)}')`,[b,Q]);if(M)return null;const tt=ct=>{var yn;const{edges:Ot,addSelectedEdges:Ur,unselectNodesAndEdges:jr,multiSelectionActive:Br}=Ae.getState(),On=Ot.find(es=>es.id===n);On&&(N&&(Ae.setState({nodesSelectionActive:!1}),On.selected&&Br?(jr({nodes:[],edges:[On]}),(yn=fe.current)==null||yn.blur()):Ur([n])),s&&s(ct,On))},Z=ds(n,Ae.getState,a),bn=ds(n,Ae.getState,D),Mn=ds(n,Ae.getState,S),Zo=ds(n,Ae.getState,V),Pi=ds(n,Ae.getState,R),Fr=(ct,Ot)=>{if(ct.button!==0)return;const{edges:Ur,isValidConnection:jr}=Ae.getState(),Br=Ot?p:m,On=(Ot?H:U)||null,yn=Ot?"target":"source",es=jr||EN,Yc=Ot,ts=Ur.find(Hr=>Hr.id===n);Rt(!0),T==null||T(ct,ts,yn);const Zc=Hr=>{Rt(!1),P==null||P(Hr,ts,yn)};G1({event:ct,handleId:On,nodeId:Br,onConnect:Hr=>C==null?void 0:C(ts,Hr),isTarget:Yc,getState:Ae.getState,setState:Ae.setState,isValidConnection:es,edgeUpdaterType:yn,onEdgeUpdateEnd:Zc})},ir=ct=>Fr(ct,!0),Ni=ct=>Fr(ct,!1),or=()=>Oe(!0),zr=()=>Oe(!1),Jo=!N&&!s,Di=ct=>{var Ot;if(M1.includes(ct.key)&&N){const{unselectNodesAndEdges:Ur,addSelectedEdges:jr,edges:Br}=Ae.getState();ct.key==="Escape"?((Ot=fe.current)==null||Ot.blur(),Ur({edges:[Br.find(yn=>yn.id===n)]})):jr([n])}};return O.createElement("g",{className:Ct(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:Jo,updating:ge}]),onClick:tt,onDoubleClick:Z,onContextMenu:bn,onMouseEnter:Mn,onMouseMove:Zo,onMouseLeave:Pi,onKeyDown:J?Di:void 0,tabIndex:J?0:void 0,role:J?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":q===null?void 0:q||`Edge from ${m} to ${p}`,"aria-describedby":J?`${nE}-${Q}`:void 0,ref:fe},!We&&O.createElement(e,{id:n,source:m,target:p,selected:l,animated:u,label:c,labelStyle:h,labelShowBg:d,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:v,data:o,style:w,sourceX:y,sourceY:_,targetX:E,targetY:I,sourcePosition:x,targetPosition:k,sourceHandleId:U,targetHandleId:H,markerStart:Wt,markerEnd:_e,pathOptions:se,interactionWidth:pe}),te&&O.createElement(O.Fragment,null,(te==="source"||te===!0)&&O.createElement(c0,{position:x,centerX:y,centerY:_,radius:$,onMouseDown:ir,onMouseEnter:or,onMouseOut:zr,type:"source"}),(te==="target"||te===!0)&&O.createElement(c0,{position:k,centerX:E,centerY:I,radius:$,onMouseDown:Ni,onMouseEnter:or,onMouseOut:zr,type:"target"})))};return t.displayName="EdgeWrapper",A.memo(t)};function SN(e){const t={default:$i(e.default||Du),straight:$i(e.bezier||Jp),step:$i(e.step||Zp),smoothstep:$i(e.step||wc),simplebezier:$i(e.simplebezier||Yp)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=$i(e[o]||Du),i),n);return{...t,...r}}function h0(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case G.Top:return{x:r+o/2,y:i};case G.Right:return{x:r+o,y:i+s/2};case G.Bottom:return{x:r+o/2,y:i+s};case G.Left:return{x:r,y:i+s/2}}}function d0(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const TN=(e,t,n,r,i,o)=>{const s=h0(n,e,t),a=h0(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function xN({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=da({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:s/l[2],height:a/l[2]}),h=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),d=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(h*d)>0}function f0(e){var r,i,o,s,a;const t=((r=e==null?void 0:e[ze])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const IN=[{level:0,isMaxLevel:!0,edges:[]}];function kN(e,t,n=!1){let r=-1;const i=e.reduce((s,a)=>{var c,h;const l=Zt(a.zIndex);let u=l?a.zIndex:0;if(n){const d=t.get(a.target),f=t.get(a.source),g=a.selected||(d==null?void 0:d.selected)||(f==null?void 0:f.selected),v=Math.max(((c=f==null?void 0:f[ze])==null?void 0:c.z)||0,((h=d==null?void 0:d[ze])==null?void 0:h.z)||0,1e3);u=(l?a.zIndex:0)+(g?v:0)}return s[u]?s[u].push(a):s[u]=[a],r=u>r?u:r,s},{}),o=Object.entries(i).map(([s,a])=>{const l=+s;return{edges:a,level:l,isMaxLevel:l===r}});return o.length===0?IN:o}function AN(e,t,n){const r=Se(A.useCallback(i=>e?i.edges.filter(o=>{const s=t.get(o.source),a=t.get(o.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&xN({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return kN(r,t,n)}const CN=({color:e="none",strokeWidth:t=1})=>O.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),RN=({color:e="none",strokeWidth:t=1})=>O.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),p0={[Nu.Arrow]:CN,[Nu.ArrowClosed]:RN};function PN(e){const t=Je();return A.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(p0,e)?p0[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",er.error009(e)),null)},[e])}const NN=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const l=PN(t);return l?O.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0"},O.createElement(l,{color:n,strokeWidth:s})):null},DN=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=uf(s,t);r.includes(a)||(i.push({id:a,color:s.color||e,...s}),r.push(a))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},mE=({defaultColor:e,rfId:t})=>{const n=Se(A.useCallback(DN({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,s)=>o.id!==i[s].id)));return O.createElement("defs",null,n.map(r=>O.createElement(NN,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};mE.displayName="MarkerDefinitions";var VN=A.memo(mE);const bN=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),gE=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeUpdate:s,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:h,edgeUpdaterRadius:d,onEdgeDoubleClick:f,onEdgeUpdateStart:g,onEdgeUpdateEnd:v,children:w})=>{const{edgesFocusable:m,edgesUpdatable:p,elementsSelectable:y,width:_,height:E,connectionMode:I,nodeInternals:x,onError:k}=Se(bN,Xe),N=AN(t,x,n);return _?O.createElement(O.Fragment,null,N.map(({level:M,edges:U,isMaxLevel:H})=>O.createElement("svg",{key:M,style:{zIndex:M},width:_,height:E,className:"react-flow__edges react-flow__container"},H&&O.createElement(VN,{defaultColor:e,rfId:r}),O.createElement("g",null,U.map(D=>{const[S,V,R]=f0(x.get(D.source)),[$,C,T]=f0(x.get(D.target));if(!R||!T)return null;let P=D.type||"default";i[P]||(k==null||k("011",er.error011(P)),P="default");const b=i[P]||i.default,z=I===wi.Strict?C.target:(C.target??[]).concat(C.source??[]),Q=d0(V.source,D.sourceHandle),q=d0(z,D.targetHandle),J=(Q==null?void 0:Q.position)||G.Bottom,te=(q==null?void 0:q.position)||G.Top,se=!!(D.focusable||m&&typeof D.focusable>"u"),pe=typeof s<"u"&&(D.updatable||p&&typeof D.updatable>"u");if(!Q||!q)return k==null||k("008",er.error008(Q,D)),null;const{sourceX:fe,sourceY:ge,targetX:Oe,targetY:We}=TN(S,Q,J,$,q,te);return O.createElement(b,{key:D.id,id:D.id,className:Ct([D.className,o]),type:P,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:fe,sourceY:ge,targetX:Oe,targetY:We,sourcePosition:J,targetPosition:te,elementsSelectable:y,onEdgeUpdate:s,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:h,edgeUpdaterRadius:d,onEdgeDoubleClick:f,onEdgeUpdateStart:g,onEdgeUpdateEnd:v,rfId:r,ariaLabel:D.ariaLabel,isFocusable:se,isUpdatable:pe,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth})})))),w):null};gE.displayName="EdgeRenderer";var MN=A.memo(gE);const ON=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function $N({children:e}){const t=Se(ON);return O.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function LN(e){const t=im(),n=A.useRef(!1);A.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const FN={[G.Left]:G.Right,[G.Right]:G.Left,[G.Top]:G.Bottom,[G.Bottom]:G.Top},yE=({nodeId:e,handleType:t,style:n,type:r=pr.Bezier,CustomComponent:i,connectionStatus:o})=>{var I,x,k;const{fromNode:s,handleId:a,toX:l,toY:u,connectionMode:c}=Se(A.useCallback(N=>({fromNode:N.nodeInternals.get(e),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[e]),Xe),h=(I=s==null?void 0:s[ze])==null?void 0:I.handleBounds;let d=h==null?void 0:h[t];if(c===wi.Loose&&(d=d||(h==null?void 0:h[t==="source"?"target":"source"])),!s||!d)return null;const f=a?d.find(N=>N.id===a):d[0],g=f?f.x+f.width/2:(s.width??0)/2,v=f?f.y+f.height/2:s.height??0,w=(((x=s.positionAbsolute)==null?void 0:x.x)??0)+g,m=(((k=s.positionAbsolute)==null?void 0:k.y)??0)+v,p=f==null?void 0:f.position,y=p?FN[p]:null;if(!p||!y)return null;if(i)return O.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:f,fromX:w,fromY:m,toX:l,toY:u,fromPosition:p,toPosition:y,connectionStatus:o});let _="";const E={sourceX:w,sourceY:m,sourcePosition:p,targetX:l,targetY:u,targetPosition:y};return r===pr.Bezier?[_]=em(E):r===pr.Step?[_]=lf({...E,borderRadius:0}):r===pr.SmoothStep?[_]=lf(E):r===pr.SimpleBezier?[_]=F1(E):_=`M${w},${m} ${l},${u}`,O.createElement("path",{d:_,fill:"none",className:"react-flow__connection-path",style:n})};yE.displayName="ConnectionLine";const zN=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function UN({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:s,width:a,height:l,connectionStatus:u}=Se(zN,Xe);return!(i&&o&&a&&s)?null:O.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},O.createElement("g",{className:Ct(["react-flow__connection",u])},O.createElement(yE,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function m0(e,t){return A.useRef(null),Je(),A.useMemo(()=>t(e),[e])}const vE=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:h,onNodeMouseLeave:d,onNodeContextMenu:f,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:w,connectionLineType:m,connectionLineStyle:p,connectionLineComponent:y,connectionLineContainerStyle:_,selectionKeyCode:E,selectionOnDrag:I,selectionMode:x,multiSelectionKeyCode:k,panActivationKeyCode:N,zoomActivationKeyCode:M,deleteKeyCode:U,onlyRenderVisibleElements:H,elementsSelectable:D,selectNodesOnDrag:S,defaultViewport:V,translateExtent:R,minZoom:$,maxZoom:C,preventScrolling:T,defaultMarkerColor:P,zoomOnScroll:b,zoomOnPinch:z,panOnScroll:Q,panOnScrollSpeed:q,panOnScrollMode:J,zoomOnDoubleClick:te,panOnDrag:se,onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:ge,onPaneMouseLeave:Oe,onPaneScroll:We,onPaneContextMenu:Rt,onEdgeUpdate:Ae,onEdgeContextMenu:Wt,onEdgeMouseEnter:_e,onEdgeMouseMove:tt,onEdgeMouseLeave:Z,edgeUpdaterRadius:bn,onEdgeUpdateStart:Mn,onEdgeUpdateEnd:Zo,noDragClassName:Pi,noWheelClassName:Fr,noPanClassName:ir,elevateEdgesOnSelect:Ni,disableKeyboardA11y:or,nodeOrigin:zr,nodeExtent:Jo,rfId:Di})=>{const ct=m0(e,mN),Ot=m0(t,SN);return LN(o),O.createElement(fN,{onPaneClick:pe,onPaneMouseEnter:fe,onPaneMouseMove:ge,onPaneMouseLeave:Oe,onPaneContextMenu:Rt,onPaneScroll:We,deleteKeyCode:U,selectionKeyCode:E,selectionOnDrag:I,selectionMode:x,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:k,panActivationKeyCode:N,zoomActivationKeyCode:M,elementsSelectable:D,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:b,zoomOnPinch:z,zoomOnDoubleClick:te,panOnScroll:Q,panOnScrollSpeed:q,panOnScrollMode:J,panOnDrag:se,defaultViewport:V,translateExtent:R,minZoom:$,maxZoom:C,onSelectionContextMenu:g,preventScrolling:T,noDragClassName:Pi,noWheelClassName:Fr,noPanClassName:ir,disableKeyboardA11y:or},O.createElement($N,null,O.createElement(MN,{edgeTypes:Ot,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:Ae,onlyRenderVisibleElements:H,onEdgeContextMenu:Wt,onEdgeMouseEnter:_e,onEdgeMouseMove:tt,onEdgeMouseLeave:Z,onEdgeUpdateStart:Mn,onEdgeUpdateEnd:Zo,edgeUpdaterRadius:bn,defaultMarkerColor:P,noPanClassName:ir,elevateEdgesOnSelect:!!Ni,disableKeyboardA11y:or,rfId:Di},O.createElement(UN,{style:p,type:m,component:y,containerStyle:_})),O.createElement("div",{className:"react-flow__edgelabel-renderer"}),O.createElement(vN,{nodeTypes:ct,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:h,onNodeMouseLeave:d,onNodeContextMenu:f,selectNodesOnDrag:S,onlyRenderVisibleElements:H,noPanClassName:ir,noDragClassName:Pi,disableKeyboardA11y:or,nodeOrigin:zr,nodeExtent:Jo,rfId:Di})))};vE.displayName="GraphView";var jN=A.memo(vE);const ff=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ar={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ff,nodeExtent:ff,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:wi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:yP,isValidConnection:void 0},BN=()=>DA((e,t)=>({...ar,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:Dh(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",s=i?Dh(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=t(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const h=window.getComputedStyle(c),{m22:d}=new window.DOMMatrixReadOnly(h.transform),f=n.reduce((v,w)=>{const m=i.get(w.id);if(m){const p=Qp(w.nodeElement);!!(p.width&&p.height&&(m.width!==p.width||m.height!==p.height||w.forceUpdate))&&(i.set(m.id,{...m,[ze]:{...m[ze],handleBounds:{source:l0(".source",w.nodeElement,d,u),target:l0(".target",w.nodeElement,d,u)}},...p}),v.push({id:m.id,type:"dimensions",dimensions:p}))}return v},[]);iE(i,u);const g=s||o&&!s&&oE(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:g}),(f==null?void 0:f.length)>0&&(r==null||r(f))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),s=n.map(a=>{const l={id:a.id,type:"position",dragging:i};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});o(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(o){const u=aE(n,a()),c=Dh(u,i,s,l);e({nodeInternals:c})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(l=>hr(l,!0)):(s=ro(o(),n),a=ro(i,[])),Tl({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(l=>hr(l,!0)):(s=ro(i,n),a=ro(o(),[])),Tl({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),s=n||o(),a=r||i,l=s.map(c=>(c.selected=!1,hr(c.id,!1))),u=a.map(c=>hr(c.id,!1));Tl({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(a=>a.selected).map(a=>hr(a.id,!1)),s=n.filter(a=>a.selected).map(a=>hr(a.id,!1));Tl({changedNodes:o,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Xp(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:s,d3Selection:a,translateExtent:l}=t();if(!s||!a||!n.x&&!n.y)return!1;const u=Kn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[i,o]],h=s==null?void 0:s.constrain()(u,c,l);return s.transform(a,h),r[0]!==h.x||r[1]!==h.y||r[2]!==h.k},cancelConnection:()=>e({connectionNodeId:ar.connectionNodeId,connectionHandleId:ar.connectionHandleId,connectionHandleType:ar.connectionHandleType,connectionStatus:ar.connectionStatus,connectionStartHandle:ar.connectionStartHandle,connectionEndHandle:ar.connectionEndHandle}),reset:()=>e({...ar})}),Object.is),sm=({children:e})=>{const t=A.useRef(null);return t.current||(t.current=BN()),O.createElement(cP,{value:t.current},e)};sm.displayName="ReactFlowProvider";const _E=({children:e})=>A.useContext(_c)?O.createElement(O.Fragment,null,e):O.createElement(sm,null,e);_E.displayName="ReactFlowWrapper";const HN={input:Y1,default:hf,output:J1,group:rm},WN={default:Du,straight:Jp,step:Zp,smoothstep:wc,simplebezier:Yp},KN=[0,0],GN=[15,15],qN={x:0,y:0,zoom:1},QN={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},wE=A.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=HN,edgeTypes:s=WN,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:h,onMoveEnd:d,onConnect:f,onConnectStart:g,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:m,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:E,onNodeDoubleClick:I,onNodeDragStart:x,onNodeDrag:k,onNodeDragStop:N,onNodesDelete:M,onEdgesDelete:U,onSelectionChange:H,onSelectionDragStart:D,onSelectionDrag:S,onSelectionDragStop:V,onSelectionContextMenu:R,onSelectionStart:$,onSelectionEnd:C,connectionMode:T=wi.Strict,connectionLineType:P=pr.Bezier,connectionLineStyle:b,connectionLineComponent:z,connectionLineContainerStyle:Q,deleteKeyCode:q="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:te=!1,selectionMode:se=Po.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:fe=Pu()?"Meta":"Control",zoomActivationKeyCode:ge=Pu()?"Meta":"Control",snapToGrid:Oe=!1,snapGrid:We=GN,onlyRenderVisibleElements:Rt=!1,selectNodesOnDrag:Ae=!0,nodesDraggable:Wt,nodesConnectable:_e,nodesFocusable:tt,nodeOrigin:Z=KN,edgesFocusable:bn,edgesUpdatable:Mn,elementsSelectable:Zo,defaultViewport:Pi=qN,minZoom:Fr=.5,maxZoom:ir=2,translateExtent:Ni=ff,preventScrolling:or=!0,nodeExtent:zr,defaultMarkerColor:Jo="#b1b1b7",zoomOnScroll:Di=!0,zoomOnPinch:ct=!0,panOnScroll:Ot=!1,panOnScrollSpeed:Ur=.5,panOnScrollMode:jr=ni.Free,zoomOnDoubleClick:Br=!0,panOnDrag:On=!0,onPaneClick:yn,onPaneMouseEnter:es,onPaneMouseMove:Yc,onPaneMouseLeave:ts,onPaneScroll:Zc,onPaneContextMenu:pg,children:Hr,onEdgeUpdate:ux,onEdgeContextMenu:cx,onEdgeDoubleClick:hx,onEdgeMouseEnter:dx,onEdgeMouseMove:fx,onEdgeMouseLeave:px,onEdgeUpdateStart:mx,onEdgeUpdateEnd:gx,edgeUpdaterRadius:yx=10,onNodesChange:vx,onEdgesChange:_x,noDragClassName:wx="nodrag",noWheelClassName:Ex="nowheel",noPanClassName:mg="nopan",fitView:Sx=!1,fitViewOptions:Tx,connectOnClick:xx=!0,attributionPosition:Ix,proOptions:kx,defaultEdgeOptions:Ax,elevateNodesOnSelect:Cx=!0,elevateEdgesOnSelect:Rx=!1,disableKeyboardA11y:gg=!1,autoPanOnConnect:Px=!0,autoPanOnNodeDrag:Nx=!0,connectionRadius:Dx=20,isValidConnection:Vx,onError:bx,style:Mx,id:yg,nodeDragThreshold:Ox,...$x},Lx)=>{const Jc=yg||"1";return O.createElement("div",{...$x,style:{...Mx,...QN},ref:Lx,className:Ct(["react-flow",i]),"data-testid":"rf__wrapper",id:yg},O.createElement(_E,null,O.createElement(jN,{onInit:u,onMove:c,onMoveStart:h,onMoveEnd:d,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:_,onNodeContextMenu:E,onNodeDoubleClick:I,nodeTypes:o,edgeTypes:s,connectionLineType:P,connectionLineStyle:b,connectionLineComponent:z,connectionLineContainerStyle:Q,selectionKeyCode:J,selectionOnDrag:te,selectionMode:se,deleteKeyCode:q,multiSelectionKeyCode:fe,panActivationKeyCode:pe,zoomActivationKeyCode:ge,onlyRenderVisibleElements:Rt,selectNodesOnDrag:Ae,defaultViewport:Pi,translateExtent:Ni,minZoom:Fr,maxZoom:ir,preventScrolling:or,zoomOnScroll:Di,zoomOnPinch:ct,zoomOnDoubleClick:Br,panOnScroll:Ot,panOnScrollSpeed:Ur,panOnScrollMode:jr,panOnDrag:On,onPaneClick:yn,onPaneMouseEnter:es,onPaneMouseMove:Yc,onPaneMouseLeave:ts,onPaneScroll:Zc,onPaneContextMenu:pg,onSelectionContextMenu:R,onSelectionStart:$,onSelectionEnd:C,onEdgeUpdate:ux,onEdgeContextMenu:cx,onEdgeDoubleClick:hx,onEdgeMouseEnter:dx,onEdgeMouseMove:fx,onEdgeMouseLeave:px,onEdgeUpdateStart:mx,onEdgeUpdateEnd:gx,edgeUpdaterRadius:yx,defaultMarkerColor:Jo,noDragClassName:wx,noWheelClassName:Ex,noPanClassName:mg,elevateEdgesOnSelect:Rx,rfId:Jc,disableKeyboardA11y:gg,nodeOrigin:Z,nodeExtent:zr}),O.createElement(FP,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:f,onConnectStart:g,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:m,nodesDraggable:Wt,nodesConnectable:_e,nodesFocusable:tt,edgesFocusable:bn,edgesUpdatable:Mn,elementsSelectable:Zo,elevateNodesOnSelect:Cx,minZoom:Fr,maxZoom:ir,nodeExtent:zr,onNodesChange:vx,onEdgesChange:_x,snapToGrid:Oe,snapGrid:We,connectionMode:T,translateExtent:Ni,connectOnClick:xx,defaultEdgeOptions:Ax,fitView:Sx,fitViewOptions:Tx,onNodesDelete:M,onEdgesDelete:U,onNodeDragStart:x,onNodeDrag:k,onNodeDragStop:N,onSelectionDrag:S,onSelectionDragStart:D,onSelectionDragStop:V,noPanClassName:mg,nodeOrigin:Z,rfId:Jc,autoPanOnConnect:Px,autoPanOnNodeDrag:Nx,onError:bx,connectionRadius:Dx,isValidConnection:Vx,nodeDragThreshold:Ox}),O.createElement($P,{onSelectionChange:H}),Hr,O.createElement(dP,{proOptions:kx,position:Ix}),O.createElement(HP,{rfId:Jc,disableKeyboardA11y:gg})))});wE.displayName="ReactFlow";const XN=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function YN({children:e}){const t=Se(XN);return t?qw.createPortal(e,t):null}const EE=({id:e,x:t,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:l,className:u,borderRadius:c,shapeRendering:h,onClick:d,selected:f})=>{const{background:g,backgroundColor:v}=o||{},w=s||g||v;return O.createElement("rect",{className:Ct(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:c,ry:c,width:r,height:i,fill:w,stroke:a,strokeWidth:l,shapeRendering:h,onClick:d?m=>d(m,e):void 0})};EE.displayName="MiniMapNode";var ZN=A.memo(EE);const JN=e=>e.nodeOrigin,eD=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Oh=e=>e instanceof Function?e:()=>e;function tD({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:o=ZN,onClick:s}){const a=Se(eD,Xe),l=Se(JN),u=Oh(t),c=Oh(e),h=Oh(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return O.createElement(O.Fragment,null,a.map(f=>{const{x:g,y:v}=di(f,l).positionAbsolute;return O.createElement(o,{key:f.id,x:g,y:v,width:f.width,height:f.height,style:f.style,selected:f.selected,className:h(f),color:u(f),borderRadius:r,strokeColor:c(f),strokeWidth:i,shapeRendering:d,onClick:s,id:f.id})}))}var nD=A.memo(tD);const rD=200,iD=150,oD=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?mP(Ec(t,e.nodeOrigin),n):n,rfId:e.rfId}},sD="react-flow__minimap-desc";function SE({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s=2,nodeComponent:a,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:c=1,position:h="bottom-right",onClick:d,onNodeClick:f,pannable:g=!1,zoomable:v=!1,ariaLabel:w="React Flow mini map",inversePan:m=!1,zoomStep:p=10,offsetScale:y=5}){const _=Je(),E=A.useRef(null),{boundingRect:I,viewBB:x,rfId:k}=Se(oD,Xe),N=(e==null?void 0:e.width)??rD,M=(e==null?void 0:e.height)??iD,U=I.width/N,H=I.height/M,D=Math.max(U,H),S=D*N,V=D*M,R=y*D,$=I.x-(S-I.width)/2-R,C=I.y-(V-I.height)/2-R,T=S+R*2,P=V+R*2,b=`${sD}-${k}`,z=A.useRef(0);z.current=D,A.useEffect(()=>{if(E.current){const J=qt(E.current),te=fe=>{const{transform:ge,d3Selection:Oe,d3Zoom:We}=_.getState();if(fe.sourceEvent.type!=="wheel"||!Oe||!We)return;const Rt=-fe.sourceEvent.deltaY*(fe.sourceEvent.deltaMode===1?.05:fe.sourceEvent.deltaMode?1:.002)*p,Ae=ge[2]*Math.pow(2,Rt);We.scaleTo(Oe,Ae)},se=fe=>{const{transform:ge,d3Selection:Oe,d3Zoom:We,translateExtent:Rt,width:Ae,height:Wt}=_.getState();if(fe.sourceEvent.type!=="mousemove"||!Oe||!We)return;const _e=z.current*Math.max(1,ge[2])*(m?-1:1),tt={x:ge[0]-fe.sourceEvent.movementX*_e,y:ge[1]-fe.sourceEvent.movementY*_e},Z=[[0,0],[Ae,Wt]],bn=Kn.translate(tt.x,tt.y).scale(ge[2]),Mn=We.constrain()(bn,Z,Rt);We.transform(Oe,Mn)},pe=R1().on("zoom",g?se:null).on("zoom.wheel",v?te:null);return J.call(pe),()=>{J.on("zoom",null)}}},[g,v,m,p]);const Q=d?J=>{const te=an(J);d(J,{x:te[0],y:te[1]})}:void 0,q=f?(J,te)=>{const se=_.getState().nodeInternals.get(te);f(J,se)}:void 0;return O.createElement(qp,{position:h,style:e,className:Ct(["react-flow__minimap",t]),"data-testid":"rf__minimap"},O.createElement("svg",{width:N,height:M,viewBox:`${$} ${C} ${T} ${P}`,role:"img","aria-labelledby":b,ref:E,onClick:Q},w&&O.createElement("title",{id:b},w),O.createElement(nD,{onClick:q,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:a}),O.createElement("path",{className:"react-flow__minimap-mask",d:`M${$-R},${C-R}h${T+R*2}v${P+R*2}h${-T-R*2}z
        M${x.x},${x.y}h${x.width}v${x.height}h${-x.width}z`,fill:l,fillRule:"evenodd",stroke:u,strokeWidth:c,pointerEvents:"none"})))}SE.displayName="MiniMap";var aD=A.memo(SE),fn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(fn||(fn={}));function lD({color:e,dimensions:t,lineWidth:n}){return O.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function uD({color:e,radius:t}){return O.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const cD={[fn.Dots]:"#91919a",[fn.Lines]:"#eee",[fn.Cross]:"#e2e2e2"},hD={[fn.Dots]:1,[fn.Lines]:1,[fn.Cross]:6},dD=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function TE({id:e,variant:t=fn.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=2,color:s,style:a,className:l}){const u=A.useRef(null),{transform:c,patternId:h}=Se(dD,Xe),d=s||cD[t],f=r||hD[t],g=t===fn.Dots,v=t===fn.Cross,w=Array.isArray(n)?n:[n,n],m=[w[0]*c[2]||1,w[1]*c[2]||1],p=f*c[2],y=v?[p,p]:m,_=g?[p/o,p/o]:[y[0]/o,y[1]/o];return O.createElement("svg",{className:Ct(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},O.createElement("pattern",{id:h+e,x:c[0]%m[0],y:c[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`},g?O.createElement(uD,{color:d,radius:p/o}):O.createElement(lD,{dimensions:y,color:d,lineWidth:i})),O.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+e})`}))}TE.displayName="Background";var fD=A.memo(TE),xE={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:pD}=O,{useSyncExternalStoreWithSelector:mD}=Jw;let g0=!1;const gD=e=>e;function yD(e,t=gD,n){(xE?"production":void 0)!=="production"&&n&&!g0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),g0=!0);const r=mD(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return pD(r),r}const y0=e=>{(xE?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?e1(e):e,n=(r,i)=>yD(t,r,i);return Object.assign(n,t),n},vD=e=>e?y0(e):y0,_D=[{id:"1",position:{x:10,y:0},data:{label:"1"},type:"dialogue"},{id:"2",position:{x:0,y:100},data:{label:"2"},type:"dialogue"}],wD=[{id:"e1-2",source:"1",target:"2",type:"customEdge"}],vt=vD((e,t)=>({nodes:_D,edges:wD,onNodesChange:n=>{e({nodes:aE(n,t().nodes)})},onEdgesChange:n=>{e({edges:iN(n,t().edges)})},onConnect:n=>{e({edges:z1({...n,type:"customEdge"},t().edges)})},setNodes:n=>{e({nodes:n})},setEdges:n=>{e({edges:n})},updateNodeText:(n,r)=>{e({nodes:t().nodes.map(i=>i.id===n?{...i,data:{...i.data,...r}}:i)})}}));var pf=function(e,t){return pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},pf(e,t)};function ED(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");pf(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ke=function(){return Ke=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ke.apply(this,arguments)};function SD(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Li(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(h){s(h)}}function l(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}function Fi(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function wn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function am(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lm(e,t){return e(t={exports:{}},t.exports),t.exports}var qr=lm(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function r(){var i=this;this.locked=new Map,this.addToLocked=function(o,s){var a=i.locked.get(o);a===void 0?s===void 0?i.locked.set(o,[]):i.locked.set(o,[s]):s!==void 0&&(a.unshift(s),i.locked.set(o,a))},this.isLocked=function(o){return i.locked.has(o)},this.lock=function(o){return new Promise(function(s,a){i.isLocked(o)?i.addToLocked(o,s):(i.addToLocked(o),s())})},this.unlock=function(o){var s=i.locked.get(o);if(s!==void 0&&s.length!==0){var a=s.pop();i.locked.set(o,s),a!==void 0&&setTimeout(a,0)}else i.locked.delete(o)}}return r.getInstance=function(){return r.instance===void 0&&(r.instance=new r),r.instance},r}();t.default=function(){return n.getInstance()}});am(qr);var TD=am(lm(function(e,t){var n=Xr&&Xr.__awaiter||function(c,h,d,f){return new(d||(d=Promise))(function(g,v){function w(y){try{p(f.next(y))}catch(_){v(_)}}function m(y){try{p(f.throw(y))}catch(_){v(_)}}function p(y){y.done?g(y.value):new d(function(_){_(y.value)}).then(w,m)}p((f=f.apply(c,h||[])).next())})},r=Xr&&Xr.__generator||function(c,h){var d,f,g,v,w={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return v={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function m(p){return function(y){return function(_){if(d)throw new TypeError("Generator is already executing.");for(;w;)try{if(d=1,f&&(g=2&_[0]?f.return:_[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,_[1])).done)return g;switch(f=0,g&&(_=[2&_[0],g.value]),_[0]){case 0:case 1:g=_;break;case 4:return w.label++,{value:_[1],done:!1};case 5:w.label++,f=_[1],_=[0];continue;case 7:_=w.ops.pop(),w.trys.pop();continue;default:if(g=w.trys,!((g=g.length>0&&g[g.length-1])||_[0]!==6&&_[0]!==2)){w=0;continue}if(_[0]===3&&(!g||_[1]>g[0]&&_[1]<g[3])){w.label=_[1];break}if(_[0]===6&&w.label<g[1]){w.label=g[1],g=_;break}if(g&&w.label<g[2]){w.label=g[2],w.ops.push(_);break}g[2]&&w.ops.pop(),w.trys.pop();continue}_=h.call(c,w)}catch(E){_=[6,E],f=0}finally{d=g=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([p,y])}}},i=Xr;Object.defineProperty(t,"__esModule",{value:!0});var o="browser-tabs-lock-key",s={key:function(c){return n(i,void 0,void 0,function(){return r(this,function(h){throw new Error("Unsupported")})})},getItem:function(c){return n(i,void 0,void 0,function(){return r(this,function(h){throw new Error("Unsupported")})})},clear:function(){return n(i,void 0,void 0,function(){return r(this,function(c){return[2,window.localStorage.clear()]})})},removeItem:function(c){return n(i,void 0,void 0,function(){return r(this,function(h){throw new Error("Unsupported")})})},setItem:function(c,h){return n(i,void 0,void 0,function(){return r(this,function(d){throw new Error("Unsupported")})})},keySync:function(c){return window.localStorage.key(c)},getItemSync:function(c){return window.localStorage.getItem(c)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(c){return window.localStorage.removeItem(c)},setItemSync:function(c,h){return window.localStorage.setItem(c,h)}};function a(c){return new Promise(function(h){return setTimeout(h,c)})}function l(c){for(var h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",d="",f=0;f<c;f++)d+=h[Math.floor(Math.random()*h.length)];return d}var u=function(){function c(h){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+l(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=h,c.waiters===void 0&&(c.waiters=[])}return c.prototype.acquireLock=function(h,d){return d===void 0&&(d=5e3),n(this,void 0,void 0,function(){var f,g,v,w,m,p,y;return r(this,function(_){switch(_.label){case 0:f=Date.now()+l(4),g=Date.now()+d,v=o+"-"+h,w=this.storageHandler===void 0?s:this.storageHandler,_.label=1;case 1:return Date.now()<g?[4,a(30)]:[3,8];case 2:return _.sent(),w.getItemSync(v)!==null?[3,5]:(m=this.id+"-"+h+"-"+f,[4,a(Math.floor(25*Math.random()))]);case 3:return _.sent(),w.setItemSync(v,JSON.stringify({id:this.id,iat:f,timeoutKey:m,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,a(30)];case 4:return _.sent(),(p=w.getItemSync(v))!==null&&(y=JSON.parse(p)).id===this.id&&y.iat===f?(this.acquiredIatSet.add(f),this.refreshLockWhileAcquired(v,f),[2,!0]):[3,7];case 5:return c.lockCorrector(this.storageHandler===void 0?s:this.storageHandler),[4,this.waitForSomethingToChange(g)];case 6:_.sent(),_.label=7;case 7:return f=Date.now()+l(4),[3,1];case 8:return[2,!1]}})})},c.prototype.refreshLockWhileAcquired=function(h,d){return n(this,void 0,void 0,function(){var f=this;return r(this,function(g){return setTimeout(function(){return n(f,void 0,void 0,function(){var v,w,m;return r(this,function(p){switch(p.label){case 0:return[4,qr.default().lock(d)];case 1:return p.sent(),this.acquiredIatSet.has(d)?(v=this.storageHandler===void 0?s:this.storageHandler,(w=v.getItemSync(h))===null?(qr.default().unlock(d),[2]):((m=JSON.parse(w)).timeRefreshed=Date.now(),v.setItemSync(h,JSON.stringify(m)),qr.default().unlock(d),this.refreshLockWhileAcquired(h,d),[2])):(qr.default().unlock(d),[2])}})})},1e3),[2]})})},c.prototype.waitForSomethingToChange=function(h){return n(this,void 0,void 0,function(){return r(this,function(d){switch(d.label){case 0:return[4,new Promise(function(f){var g=!1,v=Date.now(),w=!1;function m(){if(w||(window.removeEventListener("storage",m),c.removeFromWaiting(m),clearTimeout(p),w=!0),!g){g=!0;var y=50-(Date.now()-v);y>0?setTimeout(f,y):f(null)}}window.addEventListener("storage",m),c.addToWaiting(m);var p=setTimeout(m,Math.max(0,h-Date.now()))})];case 1:return d.sent(),[2]}})})},c.addToWaiting=function(h){this.removeFromWaiting(h),c.waiters!==void 0&&c.waiters.push(h)},c.removeFromWaiting=function(h){c.waiters!==void 0&&(c.waiters=c.waiters.filter(function(d){return d!==h}))},c.notifyWaiters=function(){c.waiters!==void 0&&c.waiters.slice().forEach(function(h){return h()})},c.prototype.releaseLock=function(h){return n(this,void 0,void 0,function(){return r(this,function(d){switch(d.label){case 0:return[4,this.releaseLock__private__(h)];case 1:return[2,d.sent()]}})})},c.prototype.releaseLock__private__=function(h){return n(this,void 0,void 0,function(){var d,f,g,v;return r(this,function(w){switch(w.label){case 0:return d=this.storageHandler===void 0?s:this.storageHandler,f=o+"-"+h,(g=d.getItemSync(f))===null?[2]:(v=JSON.parse(g)).id!==this.id?[3,2]:[4,qr.default().lock(v.iat)];case 1:w.sent(),this.acquiredIatSet.delete(v.iat),d.removeItemSync(f),qr.default().unlock(v.iat),c.notifyWaiters(),w.label=2;case 2:return[2]}})})},c.lockCorrector=function(h){for(var d=Date.now()-5e3,f=h,g=[],v=0;;){var w=f.keySync(v);if(w===null)break;g.push(w),v++}for(var m=!1,p=0;p<g.length;p++){var y=g[p];if(y.includes(o)){var _=f.getItemSync(y);if(_!==null){var E=JSON.parse(_);(E.timeRefreshed===void 0&&E.timeAcquired<d||E.timeRefreshed!==void 0&&E.timeRefreshed<d)&&(f.removeItemSync(y),m=!0)}}}m&&c.notifyWaiters()},c.waiters=void 0,c}();t.default=u}));const xD={timeoutInSeconds:60},IE={name:"auth0-spa-js",version:"2.1.3"},kE=()=>Date.now();class mt extends Error{constructor(t,n){super(n),this.error=t,this.error_description=n,Object.setPrototypeOf(this,mt.prototype)}static fromPayload({error:t,error_description:n}){return new mt(t,n)}}class um extends mt{constructor(t,n,r,i=null){super(t,n),this.state=r,this.appState=i,Object.setPrototypeOf(this,um.prototype)}}let mf=class AE extends mt{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,AE.prototype)}};class cm extends mf{constructor(t){super(),this.popup=t,Object.setPrototypeOf(this,cm.prototype)}}let ID=class CE extends mt{constructor(t){super("cancelled","Popup closed"),this.popup=t,Object.setPrototypeOf(this,CE.prototype)}};class hm extends mt{constructor(t,n,r){super(t,n),this.mfa_token=r,Object.setPrototypeOf(this,hm.prototype)}}class Sc extends mt{constructor(t,n){super("missing_refresh_token",`Missing Refresh Token (audience: '${v0(t,["default"])}', scope: '${v0(n)}')`),this.audience=t,this.scope=n,Object.setPrototypeOf(this,Sc.prototype)}}function v0(e,t=[]){return e&&!t.includes(e)?e:""}const Xl=()=>window.crypto,$h=()=>{const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let t="";return Array.from(Xl().getRandomValues(new Uint8Array(43))).forEach(n=>t+=e[n%e.length]),t},_0=e=>btoa(e),gf=e=>{var{clientId:t}=e,n=wn(e,["clientId"]);return new URLSearchParams((r=>Object.keys(r).filter(i=>r[i]!==void 0).reduce((i,o)=>Object.assign(Object.assign({},i),{[o]:r[o]}),{}))(Object.assign({client_id:t},n))).toString()},w0=e=>(t=>decodeURIComponent(atob(t).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))(e.replace(/_/g,"/").replace(/-/g,"+")),kD=async(e,t)=>{const n=await fetch(e,t);return{ok:n.ok,json:await n.json()}},AD=async(e,t,n)=>{const r=new AbortController;let i;return t.signal=r.signal,Promise.race([kD(e,t),new Promise((o,s)=>{i=setTimeout(()=>{r.abort(),s(new Error("Timeout when executing 'fetch'"))},n)})]).finally(()=>{clearTimeout(i)})},CD=async(e,t,n,r,i,o,s)=>{return a={auth:{audience:t,scope:n},timeout:i,fetchUrl:e,fetchOptions:r,useFormData:s},l=o,new Promise(function(u,c){const h=new MessageChannel;h.port1.onmessage=function(d){d.data.error?c(new Error(d.data.error)):u(d.data),h.port1.close()},l.postMessage(a,[h.port2])});var a,l},RD=async(e,t,n,r,i,o,s=1e4)=>i?CD(e,t,n,r,s,i,o):AD(e,r,s);async function PD(e,t){var{baseUrl:n,timeout:r,audience:i,scope:o,auth0Client:s,useFormData:a}=e,l=wn(e,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const u=a?gf(l):JSON.stringify(l);return await async function(c,h,d,f,g,v,w){let m,p=null;for(let k=0;k<3;k++)try{m=await RD(c,d,f,g,v,w,h),p=null;break}catch(N){p=N}if(p)throw p;const y=m.json,{error:_,error_description:E}=y,I=wn(y,["error","error_description"]),{ok:x}=m;if(!x){const k=E||`HTTP error. Unable to fetch ${c}`;throw _==="mfa_required"?new hm(_,k,I.mfa_token):_==="missing_refresh_token"?new Sc(d,f):new mt(_||"request_error",k)}return I}(`${n}/oauth/token`,r,i||"default",o,{method:"POST",body:u,headers:{"Content-Type":a?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(s||IE))}},t,a)}const Il=(...e)=>{return(t=e.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(t))).join(" ");var t};let ri=class yf{constructor(t,n="@@auth0spajs@@",r){this.prefix=n,this.suffix=r,this.clientId=t.clientId,this.scope=t.scope,this.audience=t.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(t){const[n,r,i,o]=t.split("::");return new yf({clientId:r,scope:o,audience:i},n)}static fromCacheEntry(t){const{scope:n,audience:r,client_id:i}=t;return new yf({scope:n,audience:r,clientId:i})}},ND=class{set(t,n){localStorage.setItem(t,JSON.stringify(n))}get(t){const n=window.localStorage.getItem(t);if(n)try{return JSON.parse(n)}catch{return}}remove(t){localStorage.removeItem(t)}allKeys(){return Object.keys(window.localStorage).filter(t=>t.startsWith("@@auth0spajs@@"))}},RE=class{constructor(){this.enclosedCache=function(){let t={};return{set(n,r){t[n]=r},get(n){const r=t[n];if(r)return r},remove(n){delete t[n]},allKeys:()=>Object.keys(t)}}()}},DD=class{constructor(t,n,r){this.cache=t,this.keyManifest=n,this.nowProvider=r||kE}async setIdToken(t,n,r){var i;const o=this.getIdTokenCacheKey(t);await this.cache.set(o,{id_token:n,decodedToken:r}),await((i=this.keyManifest)===null||i===void 0?void 0:i.add(o))}async getIdToken(t){const n=await this.cache.get(this.getIdTokenCacheKey(t.clientId));if(!n&&t.scope&&t.audience){const r=await this.get(t);return!r||!r.id_token||!r.decodedToken?void 0:{id_token:r.id_token,decodedToken:r.decodedToken}}if(n)return{id_token:n.id_token,decodedToken:n.decodedToken}}async get(t,n=0){var r;let i=await this.cache.get(t.toKey());if(!i){const a=await this.getCacheKeys();if(!a)return;const l=this.matchExistingCacheKey(t,a);l&&(i=await this.cache.get(l))}if(!i)return;const o=await this.nowProvider(),s=Math.floor(o/1e3);return i.expiresAt-n<s?i.body.refresh_token?(i.body={refresh_token:i.body.refresh_token},await this.cache.set(t.toKey(),i),i.body):(await this.cache.remove(t.toKey()),void await((r=this.keyManifest)===null||r===void 0?void 0:r.remove(t.toKey()))):i.body}async set(t){var n;const r=new ri({clientId:t.client_id,scope:t.scope,audience:t.audience}),i=await this.wrapCacheEntry(t);await this.cache.set(r.toKey(),i),await((n=this.keyManifest)===null||n===void 0?void 0:n.add(r.toKey()))}async clear(t){var n;const r=await this.getCacheKeys();r&&(await r.filter(i=>!t||i.includes(t)).reduce(async(i,o)=>{await i,await this.cache.remove(o)},Promise.resolve()),await((n=this.keyManifest)===null||n===void 0?void 0:n.clear()))}async wrapCacheEntry(t){const n=await this.nowProvider();return{body:t,expiresAt:Math.floor(n/1e3)+t.expires_in}}async getCacheKeys(){var t;return this.keyManifest?(t=await this.keyManifest.get())===null||t===void 0?void 0:t.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(t){return new ri({clientId:t},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(t,n){return n.filter(r=>{var i;const o=ri.fromKey(r),s=new Set(o.scope&&o.scope.split(" ")),a=((i=t.scope)===null||i===void 0?void 0:i.split(" "))||[],l=o.scope&&a.reduce((u,c)=>u&&s.has(c),!0);return o.prefix==="@@auth0spajs@@"&&o.clientId===t.clientId&&o.audience===t.audience&&l})[0]}},VD=class{constructor(t,n,r){this.storage=t,this.clientId=n,this.cookieDomain=r,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(t){this.storage.save(this.storageKey,t,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}};const ms=e=>typeof e=="number",bD=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],MD=e=>{if(!e.id_token)throw new Error("ID token is required but missing");const t=(o=>{const s=o.split("."),[a,l,u]=s;if(s.length!==3||!a||!l||!u)throw new Error("ID token could not be decoded");const c=JSON.parse(w0(l)),h={__raw:o},d={};return Object.keys(c).forEach(f=>{h[f]=c[f],bD.includes(f)||(d[f]=c[f])}),{encoded:{header:a,payload:l,signature:u},header:JSON.parse(w0(a)),claims:h,user:d}})(e.id_token);if(!t.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(t.claims.iss!==e.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${e.iss}", found "${t.claims.iss}"`);if(!t.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(t.header.alg!=="RS256")throw new Error(`Signature algorithm of "${t.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!t.claims.aud||typeof t.claims.aud!="string"&&!Array.isArray(t.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but was not one of "${t.claims.aud.join(", ")}"`);if(t.claims.aud.length>1){if(!t.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(t.claims.azp!==e.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${e.aud}", found "${t.claims.azp}"`)}}else if(t.claims.aud!==e.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${e.aud}" but found "${t.claims.aud}"`);if(e.nonce){if(!t.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(t.claims.nonce!==e.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${e.nonce}", found "${t.claims.nonce}"`)}if(e.max_age&&!ms(t.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(t.claims.exp==null||!ms(t.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!ms(t.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=e.leeway||60,r=new Date(e.now||Date.now()),i=new Date(0);if(i.setUTCSeconds(t.claims.exp+n),r>i)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${r}) is after expiration time (${i})`);if(t.claims.nbf!=null&&ms(t.claims.nbf)){const o=new Date(0);if(o.setUTCSeconds(t.claims.nbf-n),r<o)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${r}) is before ${o}`)}if(t.claims.auth_time!=null&&ms(t.claims.auth_time)){const o=new Date(0);if(o.setUTCSeconds(parseInt(t.claims.auth_time)+e.max_age+n),r>o)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${r}) is after last auth at ${o}`)}if(e.organization){const o=e.organization.trim();if(o.startsWith("org_")){const s=o;if(!t.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(s!==t.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${s}", found "${t.claims.org_id}"`)}else{const s=o.toLowerCase();if(!t.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(s!==t.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${s}", found "${t.claims.org_name}"`)}}return t};var ii=lm(function(e,t){var n=Xr&&Xr.__assign||function(){return n=Object.assign||function(l){for(var u,c=1,h=arguments.length;c<h;c++)for(var d in u=arguments[c])Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d]);return l},n.apply(this,arguments)};function r(l,u){if(!u)return"";var c="; "+l;return u===!0?c:c+"="+u}function i(l,u,c){return encodeURIComponent(l).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(u).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(h){if(typeof h.expires=="number"){var d=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*h.expires),h.expires=d}return r("Expires",h.expires?h.expires.toUTCString():"")+r("Domain",h.domain)+r("Path",h.path)+r("Secure",h.secure)+r("SameSite",h.sameSite)}(c)}function o(l){for(var u={},c=l?l.split("; "):[],h=/(%[\dA-F]{2})+/gi,d=0;d<c.length;d++){var f=c[d].split("="),g=f.slice(1).join("=");g.charAt(0)==='"'&&(g=g.slice(1,-1));try{u[f[0].replace(h,decodeURIComponent)]=g.replace(h,decodeURIComponent)}catch{}}return u}function s(){return o(document.cookie)}function a(l,u,c){document.cookie=i(l,u,n({path:"/"},c))}t.__esModule=!0,t.encode=i,t.parse=o,t.getAll=s,t.get=function(l){return s()[l]},t.set=a,t.remove=function(l,u){a(l,"",n(n({},u),{expires:-1}))}});am(ii),ii.encode,ii.parse,ii.getAll;var OD=ii.get,PE=ii.set,NE=ii.remove;const Ui={get(e){const t=OD(e);if(t!==void 0)return JSON.parse(t)},save(e,t,n){let r={};window.location.protocol==="https:"&&(r={secure:!0,sameSite:"none"}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),PE(e,JSON.stringify(t),r)},remove(e,t){let n={};t!=null&&t.cookieDomain&&(n.domain=t.cookieDomain),NE(e,n)}},$D={get(e){return Ui.get(e)||Ui.get(`_legacy_${e}`)},save(e,t,n){let r={};window.location.protocol==="https:"&&(r={secure:!0}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),PE(`_legacy_${e}`,JSON.stringify(t),r),Ui.save(e,t,n)},remove(e,t){let n={};t!=null&&t.cookieDomain&&(n.domain=t.cookieDomain),NE(e,n),Ui.remove(e,t),Ui.remove(`_legacy_${e}`,t)}},LD={get(e){if(typeof sessionStorage>"u")return;const t=sessionStorage.getItem(e);return t!=null?JSON.parse(t):void 0},save(e,t){sessionStorage.setItem(e,JSON.stringify(t))},remove(e){sessionStorage.removeItem(e)}};function FD(e,t,n){var r=t===void 0?null:t,i=function(l,u){var c=atob(l);if(u){for(var h=new Uint8Array(c.length),d=0,f=c.length;d<f;++d)h[d]=c.charCodeAt(d);return String.fromCharCode.apply(null,new Uint16Array(h.buffer))}return c}(e,n!==void 0&&n),o=i.indexOf(`
`,10)+1,s=i.substring(o)+(r?"//# sourceMappingURL="+r:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var E0,S0,T0,Lh,zD=(E0="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",S0=null,T0=!1,function(e){return Lh=Lh||FD(E0,S0,T0),new Worker(Lh,e)});const Fh={};let UD=class{constructor(t,n){this.cache=t,this.clientId=n,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(t){var n;const r=new Set(((n=await this.cache.get(this.manifestKey))===null||n===void 0?void 0:n.keys)||[]);r.add(t),await this.cache.set(this.manifestKey,{keys:[...r]})}async remove(t){const n=await this.cache.get(this.manifestKey);if(n){const r=new Set(n.keys);return r.delete(t),r.size>0?await this.cache.set(this.manifestKey,{keys:[...r]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(t){return`@@auth0spajs@@::${t}`}};const jD={memory:()=>new RE().enclosedCache,localstorage:()=>new ND},x0=e=>jD[e],I0=e=>{const{openUrl:t,onRedirect:n}=e,r=wn(e,["openUrl","onRedirect"]);return Object.assign(Object.assign({},r),{openUrl:t===!1||t?t:n})},zh=new TD;let BD=class{constructor(t){let n,r;if(this.userCache=new RE().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await zh.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),t),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),t.authorizationParams)}),typeof window<"u"&&(()=>{if(!Xl())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(Xl().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),t.cache&&t.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),t.cache)r=t.cache;else{if(n=t.cacheLocation||"memory",!x0(n))throw new Error(`Invalid cache location "${n}"`);r=x0(n)()}this.httpTimeoutMs=t.httpTimeoutInSeconds?1e3*t.httpTimeoutInSeconds:1e4,this.cookieStorage=t.legacySameSiteCookie===!1?Ui:$D,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(s=>`auth0.${s}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1;const i=t.useCookiesForTransactions?this.cookieStorage:LD;var o;this.scope=Il("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new VD(i,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||kE,this.cacheManager=new DD(r,r.allKeys?void 0:new UD(r,this.options.clientId),this.nowProvider),this.domainUrl=(o=this.options.domain,/^https?:\/\//.test(o)?o:`https://${o}`),this.tokenIssuer=((s,a)=>s?s.startsWith("https://")?s:`https://${s}/`:`${a}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&n==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new zD)}_url(t){const n=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||IE)));return`${this.domainUrl}${t}&auth0Client=${n}`}_authorizeUrl(t){return this._url(`/authorize?${gf(t)}`)}async _verifyIdToken(t,n,r){const i=await this.nowProvider();return MD({iss:this.tokenIssuer,aud:this.options.clientId,id_token:t,nonce:n,organization:r,leeway:this.options.leeway,max_age:(o=this.options.authorizationParams.max_age,typeof o!="string"?o:parseInt(o,10)||void 0),now:i});var o}_processOrgHint(t){t?this.cookieStorage.save(this.orgHintCookieName,t,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(t,n,r){const i=_0($h()),o=_0($h()),s=$h(),a=(c=>{const h=new Uint8Array(c);return(d=>{const f={"+":"-","/":"_","=":""};return d.replace(/[+/=]/g,g=>f[g])})(window.btoa(String.fromCharCode(...Array.from(h))))})(await(async c=>await Xl().subtle.digest({name:"SHA-256"},new TextEncoder().encode(c)))(s)),l=((c,h,d,f,g,v,w,m)=>Object.assign(Object.assign(Object.assign({client_id:c.clientId},c.authorizationParams),d),{scope:Il(h,d.scope),response_type:"code",response_mode:m||"query",state:f,nonce:g,redirect_uri:w||c.authorizationParams.redirect_uri,code_challenge:v,code_challenge_method:"S256"}))(this.options,this.scope,t,i,o,a,t.redirect_uri||this.options.authorizationParams.redirect_uri||r,n==null?void 0:n.response_mode),u=this._authorizeUrl(l);return{nonce:o,code_verifier:s,scope:l.scope,audience:l.audience||"default",redirect_uri:l.redirect_uri,state:i,url:u}}async loginWithPopup(t,n){var r;if(t=t||{},!(n=n||{}).popup&&(n.popup=(a=>{const l=window.screenX+(window.innerWidth-400)/2,u=window.screenY+(window.innerHeight-600)/2;return window.open(a,"auth0:authorize:popup",`left=${l},top=${u},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!n.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const i=await this._prepareAuthorizeUrl(t.authorizationParams||{},{response_mode:"web_message"},window.location.origin);n.popup.location.href=i.url;const o=await(a=>new Promise((l,u)=>{let c;const h=setInterval(()=>{a.popup&&a.popup.closed&&(clearInterval(h),clearTimeout(d),window.removeEventListener("message",c,!1),u(new ID(a.popup)))},1e3),d=setTimeout(()=>{clearInterval(h),u(new cm(a.popup)),window.removeEventListener("message",c,!1)},1e3*(a.timeoutInSeconds||60));c=function(f){if(f.data&&f.data.type==="authorization_response"){if(clearTimeout(d),clearInterval(h),window.removeEventListener("message",c,!1),a.popup.close(),f.data.response.error)return u(mt.fromPayload(f.data.response));l(f.data.response)}},window.addEventListener("message",c)}))(Object.assign(Object.assign({},n),{timeoutInSeconds:n.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(i.state!==o.state)throw new mt("state_mismatch","Invalid state");const s=((r=t.authorizationParams)===null||r===void 0?void 0:r.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:i.audience,scope:i.scope,code_verifier:i.code_verifier,grant_type:"authorization_code",code:o.code,redirect_uri:i.redirect_uri},{nonceIn:i.nonce,organization:s})}async getUser(){var t;const n=await this._getIdTokenFromCache();return(t=n==null?void 0:n.decodedToken)===null||t===void 0?void 0:t.user}async getIdTokenClaims(){var t;const n=await this._getIdTokenFromCache();return(t=n==null?void 0:n.decodedToken)===null||t===void 0?void 0:t.claims}async loginWithRedirect(t={}){var n;const r=I0(t),{openUrl:i,fragment:o,appState:s}=r,a=wn(r,["openUrl","fragment","appState"]),l=((n=a.authorizationParams)===null||n===void 0?void 0:n.organization)||this.options.authorizationParams.organization,u=await this._prepareAuthorizeUrl(a.authorizationParams||{}),{url:c}=u,h=wn(u,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},h),{appState:s}),l&&{organization:l}));const d=o?`${c}#${o}`:c;i?await i(d):window.location.assign(d)}async handleRedirectCallback(t=window.location.href){const n=t.split("?").slice(1);if(n.length===0)throw new Error("There are no query params available for parsing.");const{state:r,code:i,error:o,error_description:s}=(h=>{h.indexOf("#")>-1&&(h=h.substring(0,h.indexOf("#")));const d=new URLSearchParams(h);return{state:d.get("state"),code:d.get("code")||void 0,error:d.get("error")||void 0,error_description:d.get("error_description")||void 0}})(n.join("")),a=this.transactionManager.get();if(!a)throw new mt("missing_transaction","Invalid state");if(this.transactionManager.remove(),o)throw new um(o,s||o,r,a.appState);if(!a.code_verifier||a.state&&a.state!==r)throw new mt("state_mismatch","Invalid state");const l=a.organization,u=a.nonce,c=a.redirect_uri;return await this._requestToken(Object.assign({audience:a.audience,scope:a.scope,code_verifier:a.code_verifier,grant_type:"authorization_code",code:i},c?{redirect_uri:c}:{}),{nonceIn:u,organization:l}),{appState:a.appState}}async checkSession(t){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(t)}catch{}}async getTokenSilently(t={}){var n;const r=Object.assign(Object.assign({cacheMode:"on"},t),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),t.authorizationParams),{scope:Il(this.scope,(n=t.authorizationParams)===null||n===void 0?void 0:n.scope)})}),i=await((o,s)=>{let a=Fh[s];return a||(a=o().finally(()=>{delete Fh[s],a=null}),Fh[s]=a),a})(()=>this._getTokenSilently(r),`${this.options.clientId}::${r.authorizationParams.audience}::${r.authorizationParams.scope}`);return t.detailedResponse?i:i==null?void 0:i.access_token}async _getTokenSilently(t){const{cacheMode:n}=t,r=wn(t,["cacheMode"]);if(n!=="off"){const i=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(i)return i}if(n!=="cache-only"){if(!await(async(i,o=3)=>{for(let s=0;s<o;s++)if(await i())return!0;return!1})(()=>zh.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new mf;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),n!=="off"){const u=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(u)return u}const i=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(r):await this._getTokenFromIFrame(r),{id_token:o,access_token:s,oauthTokenScope:a,expires_in:l}=i;return Object.assign(Object.assign({id_token:o,access_token:s},a?{scope:a}:null),{expires_in:l})}finally{await zh.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(t={},n={}){var r;const i=Object.assign(Object.assign({},t),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),t.authorizationParams),{scope:Il(this.scope,(r=t.authorizationParams)===null||r===void 0?void 0:r.scope)})});return n=Object.assign(Object.assign({},xD),n),await this.loginWithPopup(i,n),(await this.cacheManager.get(new ri({scope:i.authorizationParams.scope,audience:i.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(t){t.clientId!==null?t.clientId=t.clientId||this.options.clientId:delete t.clientId;const n=t.logoutParams||{},{federated:r}=n,i=wn(n,["federated"]),o=r?"&federated":"";return this._url(`/v2/logout?${gf(Object.assign({clientId:t.clientId},i))}`)+o}async logout(t={}){const n=I0(t),{openUrl:r}=n,i=wn(n,["openUrl"]);t.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(t.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const o=this._buildLogoutUrl(i);r?await r(o):r!==!1&&window.location.assign(o)}async _getTokenFromIFrame(t){const n=Object.assign(Object.assign({},t.authorizationParams),{prompt:"none"}),r=this.cookieStorage.get(this.orgHintCookieName);r&&!n.organization&&(n.organization=r);const{url:i,state:o,nonce:s,code_verifier:a,redirect_uri:l,scope:u,audience:c}=await this._prepareAuthorizeUrl(n,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new mt("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const h=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,d=await((g,v,w=60)=>new Promise((m,p)=>{const y=window.document.createElement("iframe");y.setAttribute("width","0"),y.setAttribute("height","0"),y.style.display="none";const _=()=>{window.document.body.contains(y)&&(window.document.body.removeChild(y),window.removeEventListener("message",E,!1))};let E;const I=setTimeout(()=>{p(new mf),_()},1e3*w);E=function(x){if(x.origin!=v||!x.data||x.data.type!=="authorization_response")return;const k=x.source;k&&k.close(),x.data.response.error?p(mt.fromPayload(x.data.response)):m(x.data.response),clearTimeout(I),window.removeEventListener("message",E,!1),setTimeout(_,2e3)},window.addEventListener("message",E,!1),window.document.body.appendChild(y),y.setAttribute("src",g)}))(i,this.domainUrl,h);if(o!==d.state)throw new mt("state_mismatch","Invalid state");const f=await this._requestToken(Object.assign(Object.assign({},t.authorizationParams),{code_verifier:a,code:d.code,grant_type:"authorization_code",redirect_uri:l,timeout:t.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:s,organization:n.organization});return Object.assign(Object.assign({},f),{scope:u,oauthTokenScope:f.scope,audience:c})}catch(h){throw h.error==="login_required"&&this.logout({openUrl:!1}),h}}async _getTokenUsingRefreshToken(t){const n=await this.cacheManager.get(new ri({scope:t.authorizationParams.scope,audience:t.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(n&&n.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(t);throw new Sc(t.authorizationParams.audience||"default",t.authorizationParams.scope)}const r=t.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,i=typeof t.timeoutInSeconds=="number"?1e3*t.timeoutInSeconds:null;try{const o=await this._requestToken(Object.assign(Object.assign(Object.assign({},t.authorizationParams),{grant_type:"refresh_token",refresh_token:n&&n.refresh_token,redirect_uri:r}),i&&{timeout:i}));return Object.assign(Object.assign({},o),{scope:t.authorizationParams.scope,oauthTokenScope:o.scope,audience:t.authorizationParams.audience||"default"})}catch(o){if((o.message.indexOf("Missing Refresh Token")>-1||o.message&&o.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(t);throw o}}async _saveEntryInCache(t){const{id_token:n,decodedToken:r}=t,i=wn(t,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:n,decodedToken:r}),await this.cacheManager.setIdToken(this.options.clientId,t.id_token,t.decodedToken),await this.cacheManager.set(i)}async _getIdTokenFromCache(){const t=this.options.authorizationParams.audience||"default",n=await this.cacheManager.getIdToken(new ri({clientId:this.options.clientId,audience:t,scope:this.scope})),r=this.userCache.get("@@user@@");return n&&n.id_token===(r==null?void 0:r.id_token)?r:(this.userCache.set("@@user@@",n),n)}async _getEntryFromCache({scope:t,audience:n,clientId:r}){const i=await this.cacheManager.get(new ri({scope:t,audience:n,clientId:r}),60);if(i&&i.access_token){const{access_token:o,oauthTokenScope:s,expires_in:a}=i,l=await this._getIdTokenFromCache();return l&&Object.assign(Object.assign({id_token:l.id_token,access_token:o},s?{scope:s}:null),{expires_in:a})}}async _requestToken(t,n){const{nonceIn:r,organization:i}=n||{},o=await PD(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},t),this.worker),s=await this._verifyIdToken(o.id_token,r,i);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},o),{decodedToken:s,scope:t.scope,audience:t.audience||"default"}),o.scope?{oauthTokenScope:o.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(i||s.claims.org_id),Object.assign(Object.assign({},o),{decodedToken:s})}};var DE={isAuthenticated:!1,isLoading:!0},Ln=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},HD=Ke(Ke({},DE),{buildAuthorizeUrl:Ln,buildLogoutUrl:Ln,getAccessTokenSilently:Ln,getAccessTokenWithPopup:Ln,getIdTokenClaims:Ln,loginWithRedirect:Ln,loginWithPopup:Ln,logout:Ln,handleRedirectCallback:Ln}),VE=A.createContext(HD),k0=function(e){ED(t,e);function t(n,r){var i=e.call(this,r||n)||this;return i.error=n,i.error_description=r,Object.setPrototypeOf(i,t.prototype),i}return t}(Error),WD=/[?&]code=[^&]+/,KD=/[?&]state=[^&]+/,GD=/[?&]error=[^&]+/,qD=function(e){return e===void 0&&(e=window.location.search),(WD.test(e)||GD.test(e))&&KD.test(e)},bE=function(e){return function(t){return t instanceof Error?t:t!==null&&typeof t=="object"&&"error"in t&&typeof t.error=="string"?"error_description"in t&&typeof t.error_description=="string"?new k0(t.error,t.error_description):new k0(t.error):new Error(e)}},A0=bE("Login failed"),Uh=bE("Get access token failed"),ME=function(e){var t;e!=null&&e.redirectUri&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),e.authorizationParams=e.authorizationParams||{},e.authorizationParams.redirect_uri=e.redirectUri,delete e.redirectUri),!((t=e==null?void 0:e.authorizationParams)===null||t===void 0)&&t.redirectUri&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),e.authorizationParams.redirect_uri=e.authorizationParams.redirectUri,delete e.authorizationParams.redirectUri)},QD=function(e,t){switch(t.type){case"LOGIN_POPUP_STARTED":return Ke(Ke({},e),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return Ke(Ke({},e),{isAuthenticated:!!t.user,user:t.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return e.user===t.user?e:Ke(Ke({},e),{isAuthenticated:!!t.user,user:t.user});case"LOGOUT":return Ke(Ke({},e),{isAuthenticated:!1,user:void 0});case"ERROR":return Ke(Ke({},e),{isLoading:!1,error:t.error})}},XD=function(e){return ME(e),Ke(Ke({},e),{auth0Client:{name:"auth0-react",version:"2.2.4"}})},YD=function(e){window.history.replaceState({},document.title,(e==null?void 0:e.returnTo)||window.location.pathname)},ZD=function(e){var t=e.children,n=e.skipRedirectCallback,r=e.onRedirectCallback,i=r===void 0?YD:r,o=e.context,s=o===void 0?VE:o,a=SD(e,["children","skipRedirectCallback","onRedirectCallback","context"]),l=A.useState(function(){return new BD(XD(a))})[0],u=A.useReducer(QD,DE),c=u[0],h=u[1],d=A.useRef(!1);A.useEffect(function(){d.current||(d.current=!0,function(){return Li(void 0,void 0,void 0,function(){var E,I,x;return Fi(this,function(k){switch(k.label){case 0:return k.trys.push([0,7,,8]),E=void 0,qD()&&!n?[4,l.handleRedirectCallback()]:[3,3];case 1:return I=k.sent().appState,[4,l.getUser()];case 2:return E=k.sent(),i(I,E),[3,6];case 3:return[4,l.checkSession()];case 4:return k.sent(),[4,l.getUser()];case 5:E=k.sent(),k.label=6;case 6:return h({type:"INITIALISED",user:E}),[3,8];case 7:return x=k.sent(),h({type:"ERROR",error:A0(x)}),[3,8];case 8:return[2]}})})}())},[l,i,n]);var f=A.useCallback(function(E){return ME(E),l.loginWithRedirect(E)},[l]),g=A.useCallback(function(E,I){return Li(void 0,void 0,void 0,function(){var x,k;return Fi(this,function(N){switch(N.label){case 0:h({type:"LOGIN_POPUP_STARTED"}),N.label=1;case 1:return N.trys.push([1,3,,4]),[4,l.loginWithPopup(E,I)];case 2:return N.sent(),[3,4];case 3:return x=N.sent(),h({type:"ERROR",error:A0(x)}),[2];case 4:return[4,l.getUser()];case 5:return k=N.sent(),h({type:"LOGIN_POPUP_COMPLETE",user:k}),[2]}})})},[l]),v=A.useCallback(function(E){return E===void 0&&(E={}),Li(void 0,void 0,void 0,function(){return Fi(this,function(I){switch(I.label){case 0:return[4,l.logout(E)];case 1:return I.sent(),(E.openUrl||E.openUrl===!1)&&h({type:"LOGOUT"}),[2]}})})},[l]),w=A.useCallback(function(E){return Li(void 0,void 0,void 0,function(){var I,x,k,N;return Fi(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,3,5]),[4,l.getTokenSilently(E)];case 1:return I=M.sent(),[3,5];case 2:throw x=M.sent(),Uh(x);case 3:return k=h,N={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,l.getUser()];case 4:return k.apply(void 0,[(N.user=M.sent(),N)]),[7];case 5:return[2,I]}})})},[l]),m=A.useCallback(function(E,I){return Li(void 0,void 0,void 0,function(){var x,k,N,M;return Fi(this,function(U){switch(U.label){case 0:return U.trys.push([0,2,3,5]),[4,l.getTokenWithPopup(E,I)];case 1:return x=U.sent(),[3,5];case 2:throw k=U.sent(),Uh(k);case 3:return N=h,M={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,l.getUser()];case 4:return N.apply(void 0,[(M.user=U.sent(),M)]),[7];case 5:return[2,x]}})})},[l]),p=A.useCallback(function(){return l.getIdTokenClaims()},[l]),y=A.useCallback(function(E){return Li(void 0,void 0,void 0,function(){var I,x,k;return Fi(this,function(N){switch(N.label){case 0:return N.trys.push([0,2,3,5]),[4,l.handleRedirectCallback(E)];case 1:return[2,N.sent()];case 2:throw I=N.sent(),Uh(I);case 3:return x=h,k={type:"HANDLE_REDIRECT_COMPLETE"},[4,l.getUser()];case 4:return x.apply(void 0,[(k.user=N.sent(),k)]),[7];case 5:return[2]}})})},[l]),_=A.useMemo(function(){return Ke(Ke({},c),{getAccessTokenSilently:w,getAccessTokenWithPopup:m,getIdTokenClaims:p,loginWithRedirect:f,loginWithPopup:g,logout:v,handleRedirectCallback:y})},[c,w,m,p,f,g,v,y]);return O.createElement(s.Provider,{value:_},t)},Tc=function(e){return e===void 0&&(e=VE),A.useContext(e)};function dm({id:e,dataKey:t,className:n,defaultText:r}){var c;const i=vt(h=>h.nodes),o=vt(h=>h.updateNodeText),[s,a]=A.useState(((c=i.find(h=>h.id===e))==null?void 0:c.data[t])??r),l=A.useRef(null);A.useEffect(()=>{if(o(e,{[t]:s}),l.current){l.current.style.height="0px";const{scrollHeight:h}=l.current;l.current.style.height=`${h}px`}},[l,s]);const u=A.useCallback(h=>{a(h.target.value)},[]);return F.jsxs(F.Fragment,{children:[F.jsx("label",{htmlFor:t,style:{display:"none"},children:t}),F.jsx("textarea",{className:`nodrag ${n}`,ref:l,id:t,name:t,onChange:u,value:s})]})}function xc({id:e,dataKey:t,className:n,defaultText:r,onChange:i=()=>{}}){var h;const o=vt(d=>d.nodes),s=vt(d=>d.updateNodeText),[a,l]=A.useState(((h=o.find(d=>d.id===e))==null?void 0:h.data[t])??r),u=A.useRef(null);A.useEffect(()=>{if(s(e,{[t]:a}),u.current){u.current.style.width="0px";const{scrollWidth:d}=u.current;u.current.style.width=`${d}px`}i(a)},[u,a]);const c=A.useCallback(d=>{l(d.target.value)},[]);return F.jsxs(F.Fragment,{children:[F.jsx("label",{htmlFor:t,style:{display:"none"},children:t}),F.jsx("input",{className:` ${n}`,ref:u,id:t,name:t,onChange:c,value:a})]})}function Bo(e){const t=vt(i=>i.setNodes),n=vt(i=>i.nodes),r=i=>{const o=n.filter(s=>s.id!==i);t([...o])};return F.jsx(F.Fragment,{children:F.jsx("button",{className:"nodeButton nodrag nopan",style:{left:"-22px"},onClick:()=>{r(e.id)},children:F.jsx("div",{style:{width:"5px",height:"2.25px",backgroundColor:"lightgrey"}})})})}function Ho(e){return F.jsxs(F.Fragment,{children:[F.jsx("button",{className:"nodeButton nodrag nopan",style:{right:"-22px",backgroundColor:`${e.selected?"#87BC83":"white"}`},onClick:e.onSelect,children:F.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50px",backgroundColor:`${e.selected?"white":"lightgrey"}`}})}),F.jsx("div",{style:{height:"65%",width:"25px",right:"-20px",top:"40px",position:"absolute",cursor:"crosshair"}})]})}function JD(e){const[t,n]=A.useState(!1);return F.jsxs("div",{className:`dialogue-node nodeWrapper ${t?"selected":""}`,children:[t?F.jsx(Bo,{id:e.id}):void 0,F.jsx(Ho,{selected:t,onSelect:()=>n(!t)}),F.jsx(Ye,{className:"handle target",type:"target",position:G.Top,isConnectable:e.isConnectable}),F.jsxs("div",{children:[F.jsx("p",{className:"characterLabel",children:"Character"}),F.jsx(xc,{id:e.id,dataKey:"character",defaultText:"Mumbo Jumbo"}),F.jsx(dm,{id:e.id,dataKey:"dialogue",defaultText:"Hi! How are you today?"})]}),F.jsx(Ye,{className:"handle source",type:"source",position:G.Bottom,id:"a",isConnectable:e.isConnectable})]})}function eV(e){const[t,n]=A.useState(!1);return F.jsxs("div",{className:`response-node nodeWrapper ${t?"selected":""}`,children:[t?F.jsx(Bo,{id:e.id}):void 0,F.jsx(Ho,{selected:t,onSelect:()=>n(!t)}),F.jsx(Ye,{className:"handle target",type:"target",position:G.Top,isConnectable:e.isConnectable}),F.jsx(xc,{id:e.id,dataKey:"response",defaultText:"I'm good, thanks!"}),F.jsx(Ye,{className:"handle source",type:"source",position:G.Bottom,id:"a",isConnectable:e.isConnectable})]})}function tV(e){const[t,n]=A.useState(!1);return F.jsxs("div",{className:`exposition-node nodeWrapper ${t?"selected":""}`,children:[t?F.jsx(Bo,{id:e.id}):void 0,F.jsx(Ho,{selected:t,onSelect:()=>n(!t)}),F.jsx(Ye,{className:"handle target",type:"target",position:G.Top,isConnectable:e.isConnectable}),F.jsx(dm,{id:e.id,dataKey:"exposition",defaultText:"In world, where sea slugs ruled the land..."}),F.jsx(Ye,{className:"handle source",type:"source",position:G.Bottom,id:"a",isConnectable:e.isConnectable})]})}function nV(e){const[t,n]=A.useState(!1);return F.jsxs("div",{className:`meta-node nodeWrapper ${t?"selected":""}`,children:[t?F.jsx(Bo,{id:e.id}):void 0,F.jsx(Ho,{selected:t,onSelect:()=>n(!t)}),F.jsx(Ye,{className:"handle target",type:"target",position:G.Top,isConnectable:e.isConnectable}),F.jsx(dm,{id:e.id,dataKey:"meta",defaultText:"The character fetches 3 mushrooms, solemnly bring them back to Jumbo, the ancient sea snail."}),F.jsx(Ye,{className:"handle source",type:"source",position:G.Bottom,id:"a",isConnectable:e.isConnectable})]})}function rV(e){const[t,n]=A.useState(!1);return F.jsxs("div",{className:`signal-node nodeWrapper ${t?"selected":""}`,children:[t?F.jsx(Bo,{id:e.id}):void 0,F.jsx(Ho,{selected:t,onSelect:()=>n(!t)}),F.jsx(Ye,{className:"handle target",type:"target",position:G.Top,isConnectable:e.isConnectable}),F.jsx(xc,{id:e.id,dataKey:"signal",defaultText:"SignalKey"}),F.jsx(Ye,{className:"handle source",type:"source",position:G.Bottom,id:"a",isConnectable:e.isConnectable})]})}function iV(e){var a;const t=vt(l=>l.nodes),n=vt(l=>l.edges),[r,i]=A.useState(n.find(l=>l.target===e.id)),[o,s]=A.useState(r?t.find(l=>l.id===r.source):void 0);return A.useEffect(()=>{const l=n.find(u=>u.target===e.id);i(l),l&&s(t.find(u=>u.id===(r==null?void 0:r.source)))},[t,n]),F.jsxs("div",{className:"text-receiver-node nodeWrapper",children:[F.jsx(Ye,{type:"target",position:G.Top,isConnectable:e.isConnectable}),F.jsx("p",{children:o?(a=o.data)==null?void 0:a.text:void 0}),F.jsx(Ye,{type:"source",position:G.Bottom,id:"a",isConnectable:e.isConnectable})]})}function oV({id:e,sourceX:t,sourceY:n,targetX:r,targetY:i}){const{setEdges:o}=im(),[s,a,l]=em({sourceX:t,sourceY:n,targetX:r,targetY:i});return F.jsxs(F.Fragment,{children:[F.jsx(jo,{id:e,path:s}),F.jsx(YN,{children:F.jsx("button",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${a}px,${l}px)`,pointerEvents:"all"},className:"deleteEdgeButton nodrag nopan",onClick:()=>{o(u=>u.filter(c=>c.id!==e))},children:F.jsx("div",{style:{width:"5px",height:"2.25px",backgroundColor:"white"}})})})]})}const sV=()=>{const{loginWithRedirect:e}=Tc();return F.jsx("button",{onClick:()=>e(),children:"Log In"})},aV=()=>{const{user:e,logout:t}=Tc();return F.jsxs("button",{style:{padding:"3px 6px"},onClick:()=>t({logoutParams:{returnTo:window.location.origin}}),children:[e?F.jsx("img",{src:e.picture,style:{width:"30px",borderRadius:"50px"}}):void 0,F.jsx("p",{style:{fontSize:"16px"},children:"Log Out"})]})};var C0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},lV=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],s=e[n++],a=e[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},$E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],s=i+1<e.length,a=s?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,c=o>>2,h=(o&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,s||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(OE(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lV(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const h=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||u==null||h==null)throw new uV;const d=o<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class uV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cV=function(e){const t=OE(e);return $E.encodeByteArray(t,!0)},Vu=function(e){return cV(e).replace(/\./g,"")},hV=function(e){try{return $E.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=()=>dV().__FIREBASE_DEFAULTS__,pV=()=>{if(typeof process>"u"||typeof C0>"u")return;const e=C0.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},mV=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&hV(e[1]);return t&&JSON.parse(t)},fm=()=>{try{return fV()||pV()||mV()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},gV=e=>{var t,n;return(n=(t=fm())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},yV=e=>{const t=gV(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},LE=()=>{var e;return(e=fm())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Vu(JSON.stringify(n)),Vu(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wV(){var e;const t=(e=fm())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EV(){return!wV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FE(){try{return typeof indexedDB=="object"}catch{return!1}}function SV(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="FirebaseError";class Wo extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=TV,Object.setPrototypeOf(this,Wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zE.prototype.create)}}class zE{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?xV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Wo(i,a,r)}}function xV(e,t){return e.replace(IV,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const IV=/\{\$([^}]+)}/g;function vf(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],s=t[i];if(R0(o)&&R0(s)){if(!vf(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function R0(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(e){return e&&e._delegate?e._delegate:e}class pa{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new vV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(CV(t))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Qr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Qr){return this.instances.has(t)}getOptions(t=Qr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AV(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Qr){return this.component?this.component.multipleInstances?t:Qr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AV(e){return e===Qr?void 0:e}function CV(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new kV(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(he||(he={}));const PV={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},NV=he.INFO,DV={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},VV=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=DV[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class UE{constructor(t){this.name=t,this._logLevel=NV,this._logHandler=VV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in he))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PV[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...t),this._logHandler(this,he.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...t),this._logHandler(this,he.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,he.INFO,...t),this._logHandler(this,he.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,he.WARN,...t),this._logHandler(this,he.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...t),this._logHandler(this,he.ERROR,...t)}}const bV=(e,t)=>t.some(n=>e instanceof n);let P0,N0;function MV(){return P0||(P0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OV(){return N0||(N0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,_f=new WeakMap,BE=new WeakMap,jh=new WeakMap,pm=new WeakMap;function $V(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Ar(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&jE.set(n,e)}).catch(()=>{}),pm.set(t,e),t}function LV(e){if(_f.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});_f.set(e,t)}let wf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return _f.get(e);if(t==="objectStoreNames")return e.objectStoreNames||BE.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function FV(e){wf=e(wf)}function zV(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Bh(this),t,...n);return BE.set(r,t.sort?t.sort():[t]),Ar(r)}:OV().includes(e)?function(...t){return e.apply(Bh(this),t),Ar(jE.get(this))}:function(...t){return Ar(e.apply(Bh(this),t))}}function UV(e){return typeof e=="function"?zV(e):(e instanceof IDBTransaction&&LV(e),bV(e,MV())?new Proxy(e,wf):e)}function Ar(e){if(e instanceof IDBRequest)return $V(e);if(jh.has(e))return jh.get(e);const t=UV(e);return t!==e&&(jh.set(e,t),pm.set(t,e)),t}const Bh=e=>pm.get(e);function jV(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=Ar(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Ar(s.result),l.oldVersion,l.newVersion,Ar(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const BV=["get","getKey","getAll","getAllKeys","count"],HV=["put","add","delete","clear"],Hh=new Map;function D0(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Hh.get(t))return Hh.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=HV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BV.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Hh.set(t,o),o}FV(e=>({...e,get:(t,n,r)=>D0(t,n)||e.get(t,n,r),has:(t,n)=>!!D0(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KV(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ef="@firebase/app",V0="0.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new UE("@firebase/app"),GV="@firebase/app-compat",qV="@firebase/analytics-compat",QV="@firebase/analytics",XV="@firebase/app-check-compat",YV="@firebase/app-check",ZV="@firebase/auth",JV="@firebase/auth-compat",eb="@firebase/database",tb="@firebase/database-compat",nb="@firebase/functions",rb="@firebase/functions-compat",ib="@firebase/installations",ob="@firebase/installations-compat",sb="@firebase/messaging",ab="@firebase/messaging-compat",lb="@firebase/performance",ub="@firebase/performance-compat",cb="@firebase/remote-config",hb="@firebase/remote-config-compat",db="@firebase/storage",fb="@firebase/storage-compat",pb="@firebase/firestore",mb="@firebase/firestore-compat",gb="firebase",yb="10.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="[DEFAULT]",vb={[Ef]:"fire-core",[GV]:"fire-core-compat",[QV]:"fire-analytics",[qV]:"fire-analytics-compat",[YV]:"fire-app-check",[XV]:"fire-app-check-compat",[ZV]:"fire-auth",[JV]:"fire-auth-compat",[eb]:"fire-rtdb",[tb]:"fire-rtdb-compat",[nb]:"fire-fn",[rb]:"fire-fn-compat",[ib]:"fire-iid",[ob]:"fire-iid-compat",[sb]:"fire-fcm",[ab]:"fire-fcm-compat",[lb]:"fire-perf",[ub]:"fire-perf-compat",[cb]:"fire-rc",[hb]:"fire-rc-compat",[db]:"fire-gcs",[fb]:"fire-gcs-compat",[pb]:"fire-fst",[mb]:"fire-fst-compat","fire-js":"fire-js",[gb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=new Map,_b=new Map,Tf=new Map;function b0(e,t){try{e.container.addComponent(t)}catch(n){Ei.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $u(e){const t=e.name;if(Tf.has(t))return Ei.debug(`There were multiple attempts to register component ${t}.`),!1;Tf.set(t,e);for(const n of Ou.values())b0(n,e);for(const n of _b.values())b0(n,e);return!0}function wb(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new zE("app","Firebase",Eb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=yb;function HE(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Sf,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Cr.create("bad-app-name",{appName:String(i)});if(n||(n=LE()),!n)throw Cr.create("no-options");const o=Ou.get(i);if(o){if(vf(n,o.options)&&vf(r,o.config))return o;throw Cr.create("duplicate-app",{appName:i})}const s=new RV(i);for(const l of Tf.values())s.addComponent(l);const a=new Sb(n,r,s);return Ou.set(i,a),a}function xb(e=Sf){const t=Ou.get(e);if(!t&&e===Sf&&LE())return HE();if(!t)throw Cr.create("no-app",{appName:e});return t}function mo(e,t,n){var r;let i=(r=vb[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ei.warn(a.join(" "));return}$u(new pa(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firebase-heartbeat-database",kb=1,ma="firebase-heartbeat-store";let Wh=null;function WE(){return Wh||(Wh=jV(Ib,kb,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ma)}catch(n){console.warn(n)}}}}).catch(e=>{throw Cr.create("idb-open",{originalErrorMessage:e.message})})),Wh}async function Ab(e){try{const n=(await WE()).transaction(ma),r=await n.objectStore(ma).get(KE(e));return await n.done,r}catch(t){if(t instanceof Wo)Ei.warn(t.message);else{const n=Cr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ei.warn(n.message)}}}async function M0(e,t){try{const r=(await WE()).transaction(ma,"readwrite");await r.objectStore(ma).put(t,KE(e)),await r.done}catch(n){if(n instanceof Wo)Ei.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ei.warn(r.message)}}}function KE(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=1024,Rb=30*24*60*60*1e3;class Pb{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Db(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=O0();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=Rb}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=O0(),{heartbeatsToSend:r,unsentEntries:i}=Nb(this._heartbeatsCache.heartbeats),o=Vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function O0(){return new Date().toISOString().substring(0,10)}function Nb(e,t=Cb){const n=[];let r=e.slice();for(const i of e){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),$0(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$0(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Db{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FE()?SV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ab(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return M0(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return M0(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function $0(e){return Vu(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(e){$u(new pa("platform-logger",t=>new WV(t),"PRIVATE")),$u(new pa("heartbeat",t=>new Pb(t),"PRIVATE")),mo(Ef,V0,e),mo(Ef,V0,"esm2017"),mo("fire-js","")}Vb("");var bb="firebase",Mb="10.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mo(bb,Mb,"app");var Ob=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K,mm=mm||{},ne=Ob||self;function Ic(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Fa(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function $b(e){return Object.prototype.hasOwnProperty.call(e,Kh)&&e[Kh]||(e[Kh]=++Lb)}var Kh="closure_uid_"+(1e9*Math.random()>>>0),Lb=0;function Fb(e,t,n){return e.call.apply(e.bind,arguments)}function zb(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function _t(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_t=Fb:_t=zb,_t.apply(null,arguments)}function kl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function et(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[i].apply(r,s)}}function $r(){this.s=this.s,this.o=this.o}var Ub=0;$r.prototype.s=!1;$r.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Ub!=0)&&$b(this)};$r.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const GE=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function gm(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function L0(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ic(r)){const i=e.length||0,o=r.length||0;e.length=i+o;for(let s=0;s<o;s++)e[i+s]=r[s]}else e.push(r)}}function wt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var jb=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};ne.addEventListener("test",n,t),ne.removeEventListener("test",n,t)}catch{}return e}();function ga(e){return/^[\s\xa0]*$/.test(e)}function kc(){var e=ne.navigator;return e&&(e=e.userAgent)?e:""}function Sn(e){return kc().indexOf(e)!=-1}function ym(e){return ym[" "](e),e}ym[" "]=function(){};function Bb(e,t){var n=MM;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var Hb=Sn("Opera"),No=Sn("Trident")||Sn("MSIE"),qE=Sn("Edge"),xf=qE||No,QE=Sn("Gecko")&&!(kc().toLowerCase().indexOf("webkit")!=-1&&!Sn("Edge"))&&!(Sn("Trident")||Sn("MSIE"))&&!Sn("Edge"),Wb=kc().toLowerCase().indexOf("webkit")!=-1&&!Sn("Edge");function XE(){var e=ne.document;return e?e.documentMode:void 0}var If;e:{var Gh="",qh=function(){var e=kc();if(QE)return/rv:([^\);]+)(\)|;)/.exec(e);if(qE)return/Edge\/([\d\.]+)/.exec(e);if(No)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Wb)return/WebKit\/(\S+)/.exec(e);if(Hb)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(qh&&(Gh=qh?qh[1]:""),No){var Qh=XE();if(Qh!=null&&Qh>parseFloat(Gh)){If=String(Qh);break e}}If=Gh}var kf;if(ne.document&&No){var F0=XE();kf=F0||parseInt(If,10)||void 0}else kf=void 0;var Kb=kf;function ya(e,t){if(wt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(QE){e:{try{ym(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Gb[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ya.$.h.call(this)}}et(ya,wt);var Gb={2:"touch",3:"pen",4:"mouse"};ya.prototype.h=function(){ya.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var za="closure_listenable_"+(1e6*Math.random()|0),qb=0;function Qb(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++qb,this.fa=this.ia=!1}function Ac(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function vm(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Xb(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function YE(e){const t={};for(const n in e)t[n]=e[n];return t}const z0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ZE(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let o=0;o<z0.length;o++)n=z0[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Cc(e){this.src=e,this.g={},this.h=0}Cc.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var s=Cf(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):(t=new Qb(t,this.src,o,!!r,i),t.ia=n,e.push(t)),t};function Af(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=GE(r,t),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Ac(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Cf(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}var _m="closure_lm_"+(1e6*Math.random()|0),Xh={};function JE(e,t,n,r,i){if(r&&r.once)return tS(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)JE(e,t[o],n,r,i);return null}return n=Sm(n),e&&e[za]?e.O(t,n,Fa(r)?!!r.capture:!!r,i):eS(e,t,n,!1,r,i)}function eS(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Fa(i)?!!i.capture:!!i,a=Em(e);if(a||(e[_m]=a=new Cc(e)),n=a.add(t,n,r,s,o),n.proxy)return n;if(r=Yb(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)jb||(i=s),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(rS(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Yb(){function e(n){return t.call(e.src,e.listener,n)}const t=Zb;return e}function tS(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)tS(e,t[o],n,r,i);return null}return n=Sm(n),e&&e[za]?e.P(t,n,Fa(r)?!!r.capture:!!r,i):eS(e,t,n,!0,r,i)}function nS(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)nS(e,t[o],n,r,i);else r=Fa(r)?!!r.capture:!!r,n=Sm(n),e&&e[za]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=Cf(o,n,r,i),-1<n&&(Ac(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete e.g[t],e.h--)))):e&&(e=Em(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Cf(t,n,r,i)),(n=-1<e?t[e]:null)&&wm(n))}function wm(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[za])Af(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(rS(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Em(t))?(Af(n,e),n.h==0&&(n.src=null,t[_m]=null)):Ac(e)}}}function rS(e){return e in Xh?Xh[e]:Xh[e]="on"+e}function Zb(e,t){if(e.fa)e=!0;else{t=new ya(t,this);var n=e.listener,r=e.la||e.src;e.ia&&wm(e),e=n.call(r,t)}return e}function Em(e){return e=e[_m],e instanceof Cc?e:null}var Yh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sm(e){return typeof e=="function"?e:(e[Yh]||(e[Yh]=function(t){return e.handleEvent(t)}),e[Yh])}function Ze(){$r.call(this),this.i=new Cc(this),this.S=this,this.J=null}et(Ze,$r);Ze.prototype[za]=!0;Ze.prototype.removeEventListener=function(e,t,n,r){nS(this,e,t,n,r)};function at(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new wt(t,e);else if(t instanceof wt)t.target=t.target||e;else{var i=t;t=new wt(r,e),ZE(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Al(s,r,!0,t)&&i}if(s=t.g=e,i=Al(s,r,!0,t)&&i,i=Al(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=Al(s,r,!1,t)&&i}Ze.prototype.N=function(){if(Ze.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ac(n[r]);delete e.g[t],e.h--}}this.J=null};Ze.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Ze.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Al(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&Af(e.i,s),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Tm=ne.JSON.stringify;class Jb{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function eM(){var e=xm;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class tM{constructor(){this.h=this.g=null}add(t,n){const r=iS.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var iS=new Jb(()=>new nM,e=>e.reset());class nM{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function rM(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function iM(e){ne.setTimeout(()=>{throw e},0)}let va,_a=!1,xm=new tM,oS=()=>{const e=ne.Promise.resolve(void 0);va=()=>{e.then(oM)}};var oM=()=>{for(var e;e=eM();){try{e.h.call(e.g)}catch(n){iM(n)}var t=iS;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_a=!1};function Rc(e,t){Ze.call(this),this.h=e||1,this.g=t||ne,this.j=_t(this.qb,this),this.l=Date.now()}et(Rc,Ze);K=Rc.prototype;K.ga=!1;K.T=null;K.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),at(this,"tick"),this.ga&&(Im(this),this.start()))}};K.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Im(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}K.N=function(){Rc.$.N.call(this),Im(this),delete this.g};function km(e,t,n){if(typeof e=="function")n&&(e=_t(e,n));else if(e&&typeof e.handleEvent=="function")e=_t(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:ne.setTimeout(e,t||0)}function sS(e){e.g=km(()=>{e.g=null,e.i&&(e.i=!1,sS(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class sM extends $r{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:sS(this)}N(){super.N(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(e){$r.call(this),this.h=e,this.g={}}et(wa,$r);var U0=[];function aS(e,t,n,r){Array.isArray(n)||(n&&(U0[0]=n.toString()),n=U0);for(var i=0;i<n.length;i++){var o=JE(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function lS(e){vm(e.g,function(t,n){this.g.hasOwnProperty(n)&&wm(t)},e),e.g={}}wa.prototype.N=function(){wa.$.N.call(this),lS(this)};wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Pc(){this.g=!0}Pc.prototype.Ea=function(){this.g=!1};function aM(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");s=2<=h.length&&h[1]=="type"?s+(c+"="+u+"&"):s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+s})}function lM(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+o+" "+s})}function io(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+cM(e,n)+(r?" "+r:"")})}function uM(e,t){e.info(function(){return"TIMEOUT: "+t})}Pc.prototype.info=function(){};function cM(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Tm(n)}catch{return t}}var Ai={},j0=null;function Nc(){return j0=j0||new Ze}Ai.Ta="serverreachability";function uS(e){wt.call(this,Ai.Ta,e)}et(uS,wt);function Ea(e){const t=Nc();at(t,new uS(t))}Ai.STAT_EVENT="statevent";function cS(e,t){wt.call(this,Ai.STAT_EVENT,e),this.stat=t}et(cS,wt);function xt(e){const t=Nc();at(t,new cS(t,e))}Ai.Ua="timingevent";function hS(e,t){wt.call(this,Ai.Ua,e),this.size=t}et(hS,wt);function Ua(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){e()},t)}var Dc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},dS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Am(){}Am.prototype.h=null;function B0(e){return e.h||(e.h=e.i())}function fS(){}var ja={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Cm(){wt.call(this,"d")}et(Cm,wt);function Rm(){wt.call(this,"c")}et(Rm,wt);var Rf;function Vc(){}et(Vc,Am);Vc.prototype.g=function(){return new XMLHttpRequest};Vc.prototype.i=function(){return{}};Rf=new Vc;function Ba(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new wa(this),this.P=hM,e=xf?125:void 0,this.V=new Rc(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pS}function pS(){this.i=null,this.g="",this.h=!1}var hM=45e3,mS={},Pf={};K=Ba.prototype;K.setTimeout=function(e){this.P=e};function Nf(e,t,n){e.L=1,e.A=Mc(tr(t)),e.u=n,e.S=!0,gS(e,null)}function gS(e,t){e.G=Date.now(),Ha(e),e.B=tr(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),xS(n.i,"t",r),e.o=0,n=e.l.J,e.h=new pS,e.g=WS(e.l,n?t:null,!e.u),0<e.O&&(e.M=new sM(_t(e.Pa,e,e.g),e.O)),aS(e.U,e.g,"readystatechange",e.nb),t=e.I?YE(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ea(),aM(e.j,e.v,e.B,e.m,e.W,e.u)}K.nb=function(e){e=e.target;const t=this.M;t&&Tn(e)==3?t.l():this.Pa(e)};K.Pa=function(e){try{if(e==this.g)e:{const c=Tn(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||xf||this.g&&(this.h.h||this.g.ja()||G0(this.g)))){this.J||c!=4||t==7||(t==8||0>=h?Ea(3):Ea(2)),bc(this);var n=this.g.da();this.ca=n;t:if(yS(this)){var r=G0(this.g);e="";var i=r.length,o=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),Ls(this);var s="";break t}this.h.i=new ne.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,lM(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ga(a)){var u=a;break t}}u=null}if(n=u)io(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Df(this,n);else{this.i=!1,this.s=3,xt(12),oi(this),Ls(this);break e}}this.S?(vS(this,c,s),xf&&this.i&&c==3&&(aS(this.U,this.V,"tick",this.mb),this.V.start())):(io(this.j,this.m,s,null),Df(this,s)),c==4&&oi(this),this.i&&!this.J&&(c==4?US(this.l,this):(this.i=!1,Ha(this)))}else DM(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),oi(this),Ls(this)}}}catch{}finally{}};function yS(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function vS(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=dM(e,n),i==Pf){t==4&&(e.s=4,xt(14),r=!1),io(e.j,e.m,null,"[Incomplete Response]");break}else if(i==mS){e.s=4,xt(15),io(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else io(e.j,e.m,i,null),Df(e,i);yS(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,xt(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mm(t),t.M=!0,xt(11))):(io(e.j,e.m,n,"[Invalid Chunked Response]"),oi(e),Ls(e))}K.mb=function(){if(this.g){var e=Tn(this.g),t=this.g.ja();this.o<t.length&&(bc(this),vS(this,e,t),this.i&&e!=4&&Ha(this))}};function dM(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?Pf:(n=Number(t.substring(n,r)),isNaN(n)?mS:(r+=1,r+n>t.length?Pf:(t=t.slice(r,r+n),e.o=r+n,t)))}K.cancel=function(){this.J=!0,oi(this)};function Ha(e){e.Y=Date.now()+e.P,_S(e,e.P)}function _S(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Ua(_t(e.lb,e),t)}function bc(e){e.C&&(ne.clearTimeout(e.C),e.C=null)}K.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(uM(this.j,this.B),this.L!=2&&(Ea(),xt(17)),oi(this),this.s=2,Ls(this)):_S(this,this.Y-e)};function Ls(e){e.l.H==0||e.J||US(e.l,e)}function oi(e){bc(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Im(e.V),lS(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Df(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Vf(n.i,e))){if(!e.K&&Vf(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)zu(n),Fc(n);else break e;bm(n),xt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ua(_t(n.ib,n),6e3));if(1>=AS(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else si(n,11)}else if((e.K||n.g==e)&&zu(n),!ga(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=e.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var o=r.i;o.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Pm(o,o.h),o.h=null))}if(r.F){const v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,xe(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=e;if(r.wa=HS(r,r.J?r.pa:null,r.Y),s.K){CS(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(bc(a),Ha(a)),r.g=s}else FS(r);0<n.j.length&&zc(n)}else u[0]!="stop"&&u[0]!="close"||si(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?si(n,7):Vm(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Ea(4)}catch{}}function fM(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Ic(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function pM(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Ic(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function wS(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Ic(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=pM(e),r=fM(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}var ES=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mM(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function fi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof fi){this.h=e.h,Lu(this,e.j),this.s=e.s,this.g=e.g,Fu(this,e.m),this.l=e.l;var t=e.i,n=new Sa;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),H0(this,n),this.o=e.o}else e&&(t=String(e).match(ES))?(this.h=!1,Lu(this,t[1]||"",!0),this.s=Is(t[2]||""),this.g=Is(t[3]||"",!0),Fu(this,t[4]),this.l=Is(t[5]||"",!0),H0(this,t[6]||"",!0),this.o=Is(t[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}fi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ks(t,W0,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(ks(t,W0,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(ks(n,n.charAt(0)=="/"?vM:yM,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ks(n,wM)),e.join("")};function tr(e){return new fi(e)}function Lu(e,t,n){e.j=n?Is(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Fu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function H0(e,t,n){t instanceof Sa?(e.i=t,EM(e.i,e.h)):(n||(t=ks(t,_M)),e.i=new Sa(t,e.h))}function xe(e,t,n){e.i.set(t,n)}function Mc(e){return xe(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Is(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ks(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,gM),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gM(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var W0=/[#\/\?@]/g,yM=/[#\?:]/g,vM=/[#\?]/g,_M=/[#\?@]/g,wM=/#/g;function Sa(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lr(e){e.g||(e.g=new Map,e.h=0,e.i&&mM(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}K=Sa.prototype;K.add=function(e,t){Lr(this),this.i=null,e=Ko(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function SS(e,t){Lr(e),t=Ko(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function TS(e,t){return Lr(e),t=Ko(e,t),e.g.has(t)}K.forEach=function(e,t){Lr(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};K.ta=function(){Lr(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let o=0;o<i.length;o++)n.push(t[r])}return n};K.Z=function(e){Lr(this);let t=[];if(typeof e=="string")TS(this,e)&&(t=t.concat(this.g.get(Ko(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};K.set=function(e,t){return Lr(this),this.i=null,e=Ko(this,e),TS(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};K.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function xS(e,t,n){SS(e,t),0<n.length&&(e.i=null,e.g.set(Ko(e,t),gm(n)),e.h+=n.length)}K.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};function Ko(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function EM(e,t){t&&!e.j&&(Lr(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(SS(this,r),xS(this,i,n))},e)),e.j=t}var SM=class{constructor(e,t){this.g=e,this.map=t}};function IS(e){this.l=e||TM,ne.PerformanceNavigationTiming?(e=ne.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(ne.g&&ne.g.Ka&&ne.g.Ka()&&ne.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var TM=10;function kS(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function AS(e){return e.h?1:e.g?e.g.size:0}function Vf(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Pm(e,t){e.g?e.g.add(t):e.h=t}function CS(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}IS.prototype.cancel=function(){if(this.i=RS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function RS(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return gm(e.i)}var xM=class{stringify(e){return ne.JSON.stringify(e,void 0)}parse(e){return ne.JSON.parse(e,void 0)}};function IM(){this.g=new xM}function kM(e,t,n){const r=n||"";try{wS(e,function(i,o){let s=i;Fa(i)&&(s=Tm(i)),t.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function AM(e,t){const n=new Pc;if(ne.Image){const r=new Image;r.onload=kl(Cl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=kl(Cl,n,r,"TestLoadImage: error",!1,t),r.onabort=kl(Cl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=kl(Cl,n,r,"TestLoadImage: timeout",!1,t),ne.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Cl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Oc(e){this.l=e.ec||null,this.j=e.ob||!1}et(Oc,Am);Oc.prototype.g=function(){return new $c(this.l,this.j)};Oc.prototype.i=function(e){return function(){return e}}({});function $c(e,t){Ze.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}et($c,Ze);var Nm=0;K=$c.prototype;K.open=function(e,t){if(this.readyState!=Nm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ta(this)};K.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ne).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};K.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=Nm};K.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;PS(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function PS(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}K.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wa(this):Ta(this),this.readyState==3&&PS(this)}};K.Za=function(e){this.g&&(this.response=this.responseText=e,Wa(this))};K.Ya=function(e){this.g&&(this.response=e,Wa(this))};K.ka=function(){this.g&&Wa(this)};function Wa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ta(e)}K.setRequestHeader=function(e,t){this.v.append(e,t)};K.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};K.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Ta(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty($c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var CM=ne.JSON.parse;function be(e){Ze.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=NS,this.L=this.M=!1}et(be,Ze);var NS="",RM=/^https?$/i,PM=["POST","PUT"];K=be.prototype;K.Oa=function(e){this.M=e};K.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Rf.g(),this.C=this.u?B0(this.u):B0(Rf),this.g.onreadystatechange=_t(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){K0(this,o);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=ne.FormData&&e instanceof ne.FormData,!(0<=GE(PM,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{bS(this),0<this.B&&((this.L=NM(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_t(this.ua,this)):this.A=km(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){K0(this,o)}};function NM(e){return No&&typeof e.timeout=="number"&&e.ontimeout!==void 0}K.ua=function(){typeof mm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,at(this,"timeout"),this.abort(8))};function K0(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,DS(e),Lc(e)}function DS(e){e.F||(e.F=!0,at(e,"complete"),at(e,"error"))}K.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,at(this,"complete"),at(this,"abort"),Lc(this))};K.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lc(this,!0)),be.$.N.call(this)};K.La=function(){this.s||(this.G||this.v||this.l?VS(this):this.kb())};K.kb=function(){VS(this)};function VS(e){if(e.h&&typeof mm<"u"&&(!e.C[1]||Tn(e)!=4||e.da()!=2)){if(e.v&&Tn(e)==4)km(e.La,0,e);else if(at(e,"readystatechange"),Tn(e)==4){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=s===0){var i=String(e.I).match(ES)[1]||null;!i&&ne.self&&ne.self.location&&(i=ne.self.location.protocol.slice(0,-1)),r=!RM.test(i?i.toLowerCase():"")}n=r}if(n)at(e,"complete"),at(e,"success");else{e.m=6;try{var o=2<Tn(e)?e.g.statusText:""}catch{o=""}e.j=o+" ["+e.da()+"]",DS(e)}}finally{Lc(e)}}}}function Lc(e,t){if(e.g){bS(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||at(e,"ready");try{n.onreadystatechange=r}catch{}}}function bS(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ne.clearTimeout(e.A),e.A=null)}K.isActive=function(){return!!this.g};function Tn(e){return e.g?e.g.readyState:0}K.da=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}};K.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};K.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),CM(t)}};function G0(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case NS:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function DM(e){const t={};e=(e.g&&2<=Tn(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(ga(e[r]))continue;var n=rM(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}Xb(t,function(r){return r.join(", ")})}K.Ia=function(){return this.m};K.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function MS(e){let t="";return vm(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Dm(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=MS(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):xe(e,t,n))}function gs(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function OS(e){this.Ga=0,this.j=[],this.l=new Pc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=gs("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=gs("baseRetryDelayMs",5e3,e),this.hb=gs("retryDelaySeedMs",1e4,e),this.eb=gs("forwardChannelMaxRetries",2,e),this.xa=gs("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new IS(e&&e.concurrentRequestLimit),this.Ja=new IM,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}K=OS.prototype;K.ra=8;K.H=1;function Vm(e){if($S(e),e.H==3){var t=e.W++,n=tr(e.I);if(xe(n,"SID",e.K),xe(n,"RID",t),xe(n,"TYPE","terminate"),Ka(e,n),t=new Ba(e,e.l,t),t.L=2,t.A=Mc(tr(n)),n=!1,ne.navigator&&ne.navigator.sendBeacon)try{n=ne.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&ne.Image&&(new Image().src=t.A,n=!0),n||(t.g=WS(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Ha(t)}BS(e)}function Fc(e){e.g&&(Mm(e),e.g.cancel(),e.g=null)}function $S(e){Fc(e),e.u&&(ne.clearTimeout(e.u),e.u=null),zu(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&ne.clearTimeout(e.m),e.m=null)}function zc(e){if(!kS(e.i)&&!e.m){e.m=!0;var t=e.Na;va||oS(),_a||(va(),_a=!0),xm.add(t,e),e.C=0}}function VM(e,t){return AS(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Ua(_t(e.Na,e,t),jS(e,e.C)),e.C++,!0)}K.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Ba(this,this.l,e);let o=this.s;if(this.U&&(o?(o=YE(o),ZE(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break e}if(t===4096||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=LS(this,i,t),n=tr(this.I),xe(n,"RID",e),xe(n,"CVER",22),this.F&&xe(n,"X-HTTP-Session-Id",this.F),Ka(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(MS(o)))+"&"+t:this.o&&Dm(n,this.o,o)),Pm(this.i,i),this.bb&&xe(n,"TYPE","init"),this.P?(xe(n,"$req",t),xe(n,"SID","null"),i.aa=!0,Nf(i,n,null)):Nf(i,n,t),this.H=2}}else this.H==3&&(e?q0(this,e):this.j.length==0||kS(this.i)||q0(this))};function q0(e,t){var n;t?n=t.m:n=e.W++;const r=tr(e.I);xe(r,"SID",e.K),xe(r,"RID",n),xe(r,"AID",e.V),Ka(e,r),e.o&&e.s&&Dm(r,e.o,e.s),n=new Ba(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=LS(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Pm(e.i,n),Nf(n,r,t)}function Ka(e,t){e.na&&vm(e.na,function(n,r){xe(t,r,n)}),e.h&&wS({},function(n,r){xe(t,r,n)})}function LS(e,t,n){n=Math.min(e.j.length,n);var r=e.h?_t(e.h.Va,e.h,e):null;e:{var i=e.j;let o=-1;for(;;){const s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=o,0>u)o=Math.max(0,i[l].g-100),a=!1;else try{kM(c,s,"req"+u+"_")}catch{r&&r(c)}}if(a){r=s.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function FS(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;va||oS(),_a||(va(),_a=!0),xm.add(t,e),e.A=0}}function bm(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Ua(_t(e.Ma,e),jS(e,e.A)),e.A++,!0)}K.Ma=function(){if(this.u=null,zS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ua(_t(this.jb,this),e)}};K.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xt(10),Fc(this),zS(this))};function Mm(e){e.B!=null&&(ne.clearTimeout(e.B),e.B=null)}function zS(e){e.g=new Ba(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=tr(e.wa);xe(t,"RID","rpc"),xe(t,"SID",e.K),xe(t,"AID",e.V),xe(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&xe(t,"TO",e.qa),xe(t,"TYPE","xmlhttp"),Ka(e,t),e.o&&e.s&&Dm(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Mc(tr(t)),n.u=null,n.S=!0,gS(n,e)}K.ib=function(){this.v!=null&&(this.v=null,Fc(this),bm(this),xt(19))};function zu(e){e.v!=null&&(ne.clearTimeout(e.v),e.v=null)}function US(e,t){var n=null;if(e.g==t){zu(e),Mm(e),e.g=null;var r=2}else if(Vf(e.i,t))n=t.F,CS(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=Nc(),at(r,new hS(r,n)),zc(e)}else FS(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&VM(e,t)||r==2&&bm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:si(e,5);break;case 4:si(e,10);break;case 3:si(e,6);break;default:si(e,2)}}}function jS(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function si(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=_t(e.pb,e);n||(n=new fi("//www.google.com/images/cleardot.gif"),ne.location&&ne.location.protocol=="http"||Lu(n,"https"),Mc(n)),AM(n.toString(),r)}else xt(2);e.H=0,e.h&&e.h.za(t),BS(e),$S(e)}K.pb=function(e){e?(this.l.info("Successfully pinged google.com"),xt(2)):(this.l.info("Failed to ping google.com"),xt(1))};function BS(e){if(e.H=0,e.ma=[],e.h){const t=RS(e.i);(t.length!=0||e.j.length!=0)&&(L0(e.ma,t),L0(e.ma,e.j),e.i.i.length=0,gm(e.j),e.j.length=0),e.h.ya()}}function HS(e,t,n){var r=n instanceof fi?tr(n):new fi(n);if(r.g!="")t&&(r.g=t+"."+r.g),Fu(r,r.m);else{var i=ne.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new fi(null);r&&Lu(o,r),t&&(o.g=t),i&&Fu(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&xe(r,n,t),xe(r,"VER",e.ra),Ka(e,r),r}function WS(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new be(new Oc({ob:n})):new be(e.va),t.Oa(e.J),t}K.isActive=function(){return!!this.h&&this.h.isActive(this)};function KS(){}K=KS.prototype;K.Ba=function(){};K.Aa=function(){};K.za=function(){};K.ya=function(){};K.isActive=function(){return!0};K.Va=function(){};function Uu(){if(No&&!(10<=Number(Kb)))throw Error("Environmental error: no available transport.")}Uu.prototype.g=function(e,t){return new jt(e,t)};function jt(e,t){Ze.call(this),this.g=new OS(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ga(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ga(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Go(this)}et(jt,Ze);jt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;xt(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=HS(e,null,e.Y),zc(e)};jt.prototype.close=function(){Vm(this.g)};jt.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Tm(e),e=n);t.j.push(new SM(t.fb++,e)),t.H==3&&zc(t)};jt.prototype.N=function(){this.g.h=null,delete this.j,Vm(this.g),delete this.g,jt.$.N.call(this)};function GS(e){Cm.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}et(GS,Cm);function qS(){Rm.call(this),this.status=1}et(qS,Rm);function Go(e){this.g=e}et(Go,KS);Go.prototype.Ba=function(){at(this.g,"a")};Go.prototype.Aa=function(e){at(this.g,new GS(e))};Go.prototype.za=function(e){at(this.g,new qS)};Go.prototype.ya=function(){at(this.g,"b")};function bM(){this.blockSize=-1}function mn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}et(mn,bM);mn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Zh(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;t=n+(s<<7&4294967295|s>>>25),s=o+(i^t&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(t^i&(o^t))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=t+(o^n&(i^o))+r[4]+4118548399&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(i^t&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(t^i&(o^t))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=t+(o^n&(i^o))+r[8]+1770035416&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(i^t&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(t^i&(o^t))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=t+(o^n&(i^o))+r[12]+1804603682&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(i^t&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(t^i&(o^t))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=t+(i^o&(n^i))+r[1]+4129170786&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(t^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=t+(i^o&(n^i))+r[5]+3593408605&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(t^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=t+(i^o&(n^i))+r[9]+568446438&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(t^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=t+(i^o&(n^i))+r[13]+2850285829&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(t^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=t+(n^i^o)+r[5]+4294588738&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^t)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=t+(n^i^o)+r[1]+2763975236&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^t)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=t+(n^i^o)+r[13]+681279174&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^t)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=t+(n^i^o)+r[9]+3654602809&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^t)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=t+(i^(n|~o))+r[0]+4096336452&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~t))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=t+(i^(n|~o))+r[12]+1700485571&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~t))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=t+(i^(n|~o))+r[8]+1873313359&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~t))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=t+(i^(n|~o))+r[4]+4149444226&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}mn.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(i==0)for(;o<=n;)Zh(this,e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Zh(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Zh(this,r),i=0;break}}this.h=i,this.i+=t};mn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function ve(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=e[i]|0;r&&o==t||(n[i]=o,r=!1)}this.g=n}var MM={};function Om(e){return-128<=e&&128>e?Bb(e,function(t){return new ve([t|0],0>t?-1:0)}):new ve([e|0],0>e?-1:0)}function xn(e){if(isNaN(e)||!isFinite(e))return go;if(0>e)return it(xn(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=bf;return new ve(t,0)}function QS(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return it(QS(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=xn(Math.pow(t,8)),r=go,i=0;i<e.length;i+=8){var o=Math.min(8,e.length-i),s=parseInt(e.substring(i,i+o),t);8>o?(o=xn(Math.pow(t,o)),r=r.R(o).add(xn(s))):(r=r.R(n),r=r.add(xn(s)))}return r}var bf=4294967296,go=Om(0),Mf=Om(1),Q0=Om(16777216);K=ve.prototype;K.ea=function(){if(Qt(this))return-it(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:bf+r)*t,t*=bf}return e};K.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Hn(this))return"0";if(Qt(this))return"-"+it(this).toString(e);for(var t=xn(Math.pow(e,6)),n=this,r="";;){var i=Bu(n,t).g;n=ju(n,i.R(t));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,Hn(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};K.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Hn(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Qt(e){return e.h==-1}K.X=function(e){return e=ju(this,e),Qt(e)?-1:Hn(e)?0:1};function it(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ve(n,~e.h).add(Mf)}K.abs=function(){return Qt(this)?it(this):this};K.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(this.D(i)&65535)+(e.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ve(n,n[n.length-1]&-2147483648?-1:0)};function ju(e,t){return e.add(it(t))}K.R=function(e){if(Hn(this)||Hn(e))return go;if(Qt(this))return Qt(e)?it(this).R(it(e)):it(it(this).R(e));if(Qt(e))return it(this.R(it(e)));if(0>this.X(Q0)&&0>e.X(Q0))return xn(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=e.D(i)>>>16,l=e.D(i)&65535;n[2*r+2*i]+=s*l,Rl(n,2*r+2*i),n[2*r+2*i+1]+=o*l,Rl(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Rl(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Rl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ve(n,0)};function Rl(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ys(e,t){this.g=e,this.h=t}function Bu(e,t){if(Hn(t))throw Error("division by zero");if(Hn(e))return new ys(go,go);if(Qt(e))return t=Bu(it(e),t),new ys(it(t.g),it(t.h));if(Qt(t))return t=Bu(e,it(t)),new ys(it(t.g),t.h);if(30<e.g.length){if(Qt(e)||Qt(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Mf,r=t;0>=r.X(e);)n=X0(n),r=X0(r);var i=zi(n,1),o=zi(r,1);for(r=zi(r,2),n=zi(n,2);!Hn(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=zi(r,1),n=zi(n,1)}return t=ju(e,i.R(t)),new ys(i,t)}for(i=go;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=xn(n),s=o.R(t);Qt(s)||0<s.X(e);)n-=r,o=xn(n),s=o.R(t);Hn(o)&&(o=Mf),i=i.add(o),e=ju(e,s)}return new ys(i,e)}K.gb=function(e){return Bu(this,e).h};K.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ve(n,this.h&e.h)};K.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ve(n,this.h|e.h)};K.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ve(n,this.h^e.h)};function X0(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ve(n,e.h)}function zi(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new ve(i,e.h)}Uu.prototype.createWebChannel=Uu.prototype.g;jt.prototype.send=jt.prototype.u;jt.prototype.open=jt.prototype.m;jt.prototype.close=jt.prototype.close;Dc.NO_ERROR=0;Dc.TIMEOUT=8;Dc.HTTP_ERROR=6;dS.COMPLETE="complete";fS.EventType=ja;ja.OPEN="a";ja.CLOSE="b";ja.ERROR="c";ja.MESSAGE="d";Ze.prototype.listen=Ze.prototype.O;be.prototype.listenOnce=be.prototype.P;be.prototype.getLastError=be.prototype.Sa;be.prototype.getLastErrorCode=be.prototype.Ia;be.prototype.getStatus=be.prototype.da;be.prototype.getResponseJson=be.prototype.Wa;be.prototype.getResponseText=be.prototype.ja;be.prototype.send=be.prototype.ha;be.prototype.setWithCredentials=be.prototype.Oa;mn.prototype.digest=mn.prototype.l;mn.prototype.reset=mn.prototype.reset;mn.prototype.update=mn.prototype.j;ve.prototype.add=ve.prototype.add;ve.prototype.multiply=ve.prototype.R;ve.prototype.modulo=ve.prototype.gb;ve.prototype.compare=ve.prototype.X;ve.prototype.toNumber=ve.prototype.ea;ve.prototype.toString=ve.prototype.toString;ve.prototype.getBits=ve.prototype.D;ve.fromNumber=xn;ve.fromString=QS;var OM=function(){return new Uu},$M=function(){return Nc()},Jh=Dc,LM=dS,FM=Ai,Y0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Pl=fS,zM=be,UM=mn,yo=ve;const Z0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="10.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new UE("@firebase/firestore");function vs(){return Si.logLevel}function W(e,...t){if(Si.logLevel<=he.DEBUG){const n=t.map($m);Si.debug(`Firestore (${qo}): ${e}`,...n)}}function Pn(e,...t){if(Si.logLevel<=he.ERROR){const n=t.map($m);Si.error(`Firestore (${qo}): ${e}`,...n)}}function Do(e,...t){if(Si.logLevel<=he.WARN){const n=t.map($m);Si.warn(`Firestore (${qo}): ${e}`,...n)}}function $m(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e="Unexpected state"){const t=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+e;throw Pn(t),new Error(t)}function Ee(e,t){e||re()}function oe(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Wo{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class BM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HM{constructor(t){this.t=t,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gn,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gn)}},0),s()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new XS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ee(t===null||typeof t=="string"),new pt(t)}}class WM{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KM{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new WM(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GM{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qM{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new GM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=QM(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length))}return r}}function me(e,t){return e<t?-1:e>t?1:0}function Vo(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return He.fromMillis(Date.now())}static fromDate(t){return He.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?me(this.nanoseconds,t.nanoseconds):me(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ie(t)}static min(){return new ie(new He(0,0))}static max(){return new ie(new He(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(t,n,r){n===void 0?n=0:n>t.length&&re(),r===void 0?r=t.length-n:r>t.length-n&&re(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return xa.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xa?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const o=t.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Ve extends xa{construct(t,n,r){return new Ve(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const XM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends xa{construct(t,n,r){return new ot(t,n,r)}static isValidIdentifier(t){return XM.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.path=t}static fromPath(t){return new ee(Ve.fromString(t))}static fromName(t){return new ee(Ve.fromString(t).popFirst(5))}static empty(){return new ee(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ve.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ve.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ee(new Ve(t.slice()))}}function YM(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new Nr(i,ee.empty(),t)}function ZM(e){return new Nr(e.readTime,e.key,-1)}class Nr{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(ie.min(),ee.empty(),-1)}static max(){return new Nr(ie.max(),ee.empty(),-1)}}function JM(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ee.comparator(e.documentKey,t.documentKey),n!==0?n:me(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(e){if(e.code!==j.FAILED_PRECONDITION||e.message!==eO)throw e;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new L((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):L.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):L.reject(n)}static resolve(t){return new L((n,r)=>{n(t)})}static reject(t){return new L((n,r)=>{r(t)})}static waitFor(t){return new L((n,r)=>{let i=0,o=0,s=!1;t.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(t){let n=L.resolve(!1);for(const r of t)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(t,n){return new L((r,i)=>{const o=t.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;n(t[u]).next(c=>{s[u]=c,++a,a===o&&r(s)},c=>i(c))}})}static doWhile(t,n){return new L((r,i)=>{const o=()=>{t()===!0?n().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Gn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Fs(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Fm(r.target.error);this.V.reject(new Fs(t,i))}}static open(t,n,r,i){try{return new Lm(n,t.transaction(i,r))}catch(o){throw new Fs(n,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(W("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new rO(n)}}class ai{constructor(t,n,r){this.name=t,this.version=n,this.p=r,ai.S(bu())===12.2&&Pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return W("SimpleDb","Removing database:",t),Yr(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!FE())return!1;if(ai.C())return!0;const t=bu(),n=ai.S(t),r=0<n&&n<10,i=ai.v(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){const n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(t){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new Fs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new Y(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Y(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Fs(t,s))},i.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(t){this.L=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.O(t);const a=Lm.open(this.db,t,o?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&s<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class nO{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Yr(this.k.delete())}}class Fs extends Y{constructor(t,n){super(j.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function qa(e){return e.name==="IndexedDbTransactionError"}class rO{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(W("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Yr(r)}add(t){return W("SimpleDb","ADD",this.store.name,t,t),Yr(this.store.add(t))}get(t){return Yr(this.store.get(t)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return W("SimpleDb","DELETE",this.store.name,t),Yr(this.store.delete(t))}count(){return W("SimpleDb","COUNT",this.store.name),Yr(this.store.count())}W(t,n){const r=this.options(t,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new L((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,l)=>{s.push(l)}).next(()=>s)}}j(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new L((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(t,n){W("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);const i=this.cursor(r);return this.G(i,n)}Z(t){const n=this.cursor({});return new L((r,i)=>{n.onerror=o=>{const s=Fm(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(t,n){const r=[];return new L((i,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const l=new nO(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const c=u.catch(h=>(l.done(),L.reject(h)));r.push(c)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>L.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function Yr(e){return new L((t,n)=>{e.onsuccess=r=>{const i=r.target.result;t(i)},e.onerror=r=>{const i=Fm(r.target.error);n(i)}})}let J0=!1;function Fm(e){const t=ai.S(bu());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return J0||(J0=!0,setTimeout(()=>{throw r},0)),r}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}zm._e=-1;function Uc(e){return e==null}function Hu(e){return e===0&&1/e==-1/0}function iO(e){return typeof e=="number"&&Number.isInteger(e)&&!Hu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ZS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t,n){this.comparator=t,this.root=n||rt.EMPTY}insert(t,n){return new Ne(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(t){return new Ne(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Nl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Nl(this.root,t,this.comparator,!0)}}class Nl{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class rt{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??rt.RED,this.left=i??rt.EMPTY,this.right=o??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,o){return new rt(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const t=this.left.check();if(t!==this.right.check())throw re();return t+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(t,n,r,i,o){return this}insert(t,n,r){return new rt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(t){this.comparator=t,this.data=new Ne(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new tv(this.data.getIterator())}getIteratorFrom(t){return new tv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof lt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new lt(this.comparator);return n.data=t,n}}class tv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.fields=t,t.sort(ot.comparator)}static empty(){return new cn([])}unionWith(t){let n=new lt(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new cn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Vo(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JS("Invalid base64 string: "+o):o}}(t);return new St(n)}static fromUint8Array(t){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(t);return new St(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return me(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}St.EMPTY_BYTE_STRING=new St("");const oO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(e){if(Ee(!!e),typeof e=="string"){let t=0;const n=oO.exec(e);if(Ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Le(e.seconds),nanos:Le(e.nanos)}}function Le(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ti(e){return typeof e=="string"?St.fromBase64String(e):St.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jm(e){const t=e.mapValue.fields.__previous_value__;return Um(t)?jm(t):t}function Ia(e){const t=Dr(e.mapValue.fields.__local_write_time__.timestampValue);return new He(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(t,n,r,i,o,s,a,l,u){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ka{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof ka&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Um(e)?4:aO(e)?9007199254740991:10:re()}function Nn(e,t){if(e===t)return!0;const n=xi(e);if(n!==xi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ia(e).isEqual(Ia(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Dr(i.timestampValue),a=Dr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return Ti(i.bytesValue).isEqual(Ti(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return Le(i.geoPointValue.latitude)===Le(o.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Le(i.integerValue)===Le(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Le(i.doubleValue),a=Le(o.doubleValue);return s===a?Hu(s)===Hu(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return Vo(e.arrayValue.values||[],t.arrayValue.values||[],Nn);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ev(s)!==ev(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Nn(s[l],a[l])))return!1;return!0}(e,t);default:return re()}}function Aa(e,t){return(e.values||[]).find(n=>Nn(n,t))!==void 0}function bo(e,t){if(e===t)return 0;const n=xi(e),r=xi(t);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(e.booleanValue,t.booleanValue);case 2:return function(o,s){const a=Le(o.integerValue||o.doubleValue),l=Le(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return nv(e.timestampValue,t.timestampValue);case 4:return nv(Ia(e),Ia(t));case 5:return me(e.stringValue,t.stringValue);case 6:return function(o,s){const a=Ti(o),l=Ti(s);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=me(a[u],l[u]);if(c!==0)return c}return me(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){const a=me(Le(o.latitude),Le(s.latitude));return a!==0?a:me(Le(o.longitude),Le(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,s){const a=o.values||[],l=s.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=bo(a[u],l[u]);if(c)return c}return me(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,s){if(o===Dl.mapValue&&s===Dl.mapValue)return 0;if(o===Dl.mapValue)return 1;if(s===Dl.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=s.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=me(l[h],c[h]);if(d!==0)return d;const f=bo(a[l[h]],u[c[h]]);if(f!==0)return f}return me(l.length,c.length)}(e.mapValue,t.mapValue);default:throw re()}}function nv(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return me(e,t);const n=Dr(e),r=Dr(t),i=me(n.seconds,r.seconds);return i!==0?i:me(n.nanos,r.nanos)}function Mo(e){return Of(e)}function Of(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Dr(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Ti(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ee.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Of(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Of(n.fields[s])}`;return i+"}"}(e.mapValue):re()}function $f(e){return!!e&&"integerValue"in e}function Bm(e){return!!e&&"arrayValue"in e}function rv(e){return!!e&&"nullValue"in e}function iv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Yl(e){return!!e&&"mapValue"in e}function zs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Qo(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=zs(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zs(e.arrayValue.values[n]);return t}return Object.assign({},e)}function aO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t){this.value=t}static empty(){return new Xt({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Yl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=zs(n)}setAll(t){let n=ot.emptyPath(),r={},i=[];t.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=zs(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(t){const n=this.field(t.popLast());Yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Nn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Yl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Qo(n,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new Xt(zs(this.value))}}function eT(e){const t=[];return Qo(e.fields,(n,r)=>{const i=new ot([n]);if(Yl(r)){const o=eT(r.mapValue).fields;if(o.length===0)t.push(i);else for(const s of o)t.push(i.child(s))}else t.push(i)}),new cn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t,n,r,i,o,s,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new yt(t,0,ie.min(),ie.min(),ie.min(),Xt.empty(),0)}static newFoundDocument(t,n,r,i){return new yt(t,1,n,ie.min(),r,i,0)}static newNoDocument(t,n){return new yt(t,2,n,ie.min(),ie.min(),Xt.empty(),0)}static newUnknownDocument(t,n){return new yt(t,3,n,ie.min(),ie.min(),Xt.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof yt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(t,n){this.position=t,this.inclusive=n}}function ov(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),n.key):r=bo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sv(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Nn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,n="asc"){this.field=t,this.dir=n}}function lO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{}class je extends tT{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new cO(t,n,r):n==="array-contains"?new fO(t,r):n==="in"?new pO(t,r):n==="not-in"?new mO(t,r):n==="array-contains-any"?new gO(t,r):new je(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new hO(t,r):new dO(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(bo(n,this.value)):n!==null&&xi(this.value)===xi(n)&&this.matchesComparison(bo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends tT{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new Dn(t,n)}matches(t){return nT(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function nT(e){return e.op==="and"}function rT(e){return uO(e)&&nT(e)}function uO(e){for(const t of e.filters)if(t instanceof Dn)return!1;return!0}function Lf(e){if(e instanceof je)return e.field.canonicalString()+e.op.toString()+Mo(e.value);if(rT(e))return e.filters.map(t=>Lf(t)).join(",");{const t=e.filters.map(n=>Lf(n)).join(",");return`${e.op}(${t})`}}function iT(e,t){return e instanceof je?function(r,i){return i instanceof je&&r.op===i.op&&r.field.isEqual(i.field)&&Nn(r.value,i.value)}(e,t):e instanceof Dn?function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&iT(s,i.filters[a]),!0):!1}(e,t):void re()}function oT(e){return e instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(e):e instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(oT).join(" ,")+"}"}(e):"Filter"}class cO extends je{constructor(t,n,r){super(t,n,r),this.key=ee.fromName(r.referenceValue)}matches(t){const n=ee.comparator(t.key,this.key);return this.matchesComparison(n)}}class hO extends je{constructor(t,n){super(t,"in",n),this.keys=sT("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class dO extends je{constructor(t,n){super(t,"not-in",n),this.keys=sT("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function sT(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class fO extends je{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Bm(n)&&Aa(n.arrayValue,this.value)}}class pO extends je{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}}class mO extends je{constructor(t,n){super(t,"not-in",n)}matches(t){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Aa(this.value.arrayValue,n)}}class gO extends je{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(t,n=null,r=[],i=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function av(e,t=null,n=[],r=[],i=null,o=null,s=null){return new yO(e,t,n,r,i,o,s)}function Hm(e){const t=oe(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Lf(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Uc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Mo(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Mo(r)).join(",")),t.ce=n}return t.ce}function Wm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!iT(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sv(e.startAt,t.startAt)&&sv(e.endAt,t.endAt)}function Ff(e){return ee.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function vO(e,t,n,r,i,o,s,a){return new jc(e,t,n,r,i,o,s,a)}function Km(e){return new jc(e)}function lv(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function _O(e){return e.collectionGroup!==null}function Us(e){const t=oe(e);if(t.le===null){t.le=[];const n=new Set;for(const o of t.explicitOrderBy)t.le.push(o),n.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new lt(ot.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.le.push(new Ku(o,r))}),n.has(ot.keyField().canonicalString())||t.le.push(new Ku(ot.keyField(),r))}return t.le}function Cn(e){const t=oe(e);return t.he||(t.he=wO(t,Us(e))),t.he}function wO(e,t){if(e.limitType==="F")return av(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ku(i.field,o)});const n=e.endAt?new Wu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Wu(e.startAt.position,e.startAt.inclusive):null;return av(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zf(e,t,n){return new jc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bc(e,t){return Wm(Cn(e),Cn(t))&&e.limitType===t.limitType}function aT(e){return`${Hm(Cn(e))}|lt:${e.limitType}`}function ji(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oT(i)).join(", ")}]`),Uc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mo(i)).join(",")),`Target(${r})`}(Cn(e))}; limitType=${e.limitType})`}function Hc(e,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(const o of Us(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(s,a,l){const u=ov(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Us(r),i)||r.endAt&&!function(s,a,l){const u=ov(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Us(r),i))}(e,t)}function EO(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lT(e){return(t,n)=>{let r=!1;for(const i of Us(e)){const o=SO(i,t,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function SO(e,t,n){const r=e.field.isKeyField()?ee.comparator(t.key,n.key):function(o,s,a){const l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?bo(l,u):re()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Qo(this.inner,(n,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return ZS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new Ne(ee.comparator);function nr(){return TO}const uT=new Ne(ee.comparator);function As(...e){let t=uT;for(const n of e)t=t.insert(n.key,n);return t}function cT(e){let t=uT;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function li(){return js()}function hT(){return js()}function js(){return new Xo(e=>e.toString(),(e,t)=>e.isEqual(t))}const xO=new Ne(ee.comparator),IO=new lt(ee.comparator);function le(...e){let t=IO;for(const n of e)t=t.add(n);return t}const kO=new lt(me);function AO(){return kO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(t)?"-0":t}}function fT(e){return{integerValue:""+e}}function CO(e,t){return iO(t)?fT(t):dT(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this._=void 0}}function RO(e,t,n){return e instanceof Gu?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Um(o)&&(o=jm(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,t):e instanceof Ca?mT(e,t):e instanceof Ra?gT(e,t):function(i,o){const s=pT(i,o),a=uv(s)+uv(i.Ie);return $f(s)&&$f(i.Ie)?fT(a):dT(i.serializer,a)}(e,t)}function PO(e,t,n){return e instanceof Ca?mT(e,t):e instanceof Ra?gT(e,t):n}function pT(e,t){return e instanceof qu?function(r){return $f(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class Gu extends Wc{}class Ca extends Wc{constructor(t){super(),this.elements=t}}function mT(e,t){const n=yT(t);for(const r of e.elements)n.some(i=>Nn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ra extends Wc{constructor(t){super(),this.elements=t}}function gT(e,t){let n=yT(t);for(const r of e.elements)n=n.filter(i=>!Nn(i,r));return{arrayValue:{values:n}}}class qu extends Wc{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function uv(e){return Le(e.integerValue||e.doubleValue)}function yT(e){return Bm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function NO(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof Ca&&i instanceof Ca||r instanceof Ra&&i instanceof Ra?Vo(r.elements,i.elements,Nn):r instanceof qu&&i instanceof qu?Nn(r.Ie,i.Ie):r instanceof Gu&&i instanceof Gu}(e.transform,t.transform)}class DO{constructor(t,n){this.version=t,this.transformResults=n}}class qn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qn}static exists(t){return new qn(void 0,t)}static updateTime(t){return new qn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Zl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Kc{}function vT(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new wT(e.key,qn.none()):new Qa(e.key,e.data,qn.none());{const n=e.data,r=Xt.empty();let i=new lt(ot.comparator);for(let o of t.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ci(e.key,r,new cn(i.toArray()),qn.none())}}function VO(e,t,n){e instanceof Qa?function(i,o,s){const a=i.value.clone(),l=hv(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Ci?function(i,o,s){if(!Zl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=hv(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(_T(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(e,t,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function Bs(e,t,n,r){return e instanceof Qa?function(o,s,a,l){if(!Zl(o.precondition,s))return a;const u=o.value.clone(),c=dv(o.fieldTransforms,l,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ci?function(o,s,a,l){if(!Zl(o.precondition,s))return a;const u=dv(o.fieldTransforms,l,s),c=s.data;return c.setAll(_T(o)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(o,s,a){return Zl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(e,t,n)}function bO(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),o=pT(r.transform,i||null);o!=null&&(n===null&&(n=Xt.empty()),n.set(r.field,o))}return n||null}function cv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(o,s)=>NO(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qa extends Kc{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ci extends Kc{constructor(t,n,r,i,o=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function _T(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function hv(e,t,n){const r=new Map;Ee(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,PO(s,a,n[i]))}return r}function dv(e,t,n){const r=new Map;for(const i of e){const o=i.transform,s=n.data.field(i.field);r.set(i.field,RO(o,s,t))}return r}class wT extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MO extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&VO(o,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Bs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Bs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=hT();return this.mutations.forEach(i=>{const o=t.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=vT(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),le())}isEqual(t){return this.batchId===t.batchId&&Vo(this.mutations,t.mutations,(n,r)=>cv(n,r))&&Vo(this.baseMutations,t.baseMutations,(n,r)=>cv(n,r))}}class Gm{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Ee(t.mutations.length===r.length);let i=function(){return xO}();const o=t.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Gm(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ce;function FO(e){switch(e){default:return re();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function ET(e){if(e===void 0)return Pn("GRPC error has no .code"),j.UNKNOWN;switch(e){case $e.OK:return j.OK;case $e.CANCELLED:return j.CANCELLED;case $e.UNKNOWN:return j.UNKNOWN;case $e.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case $e.INTERNAL:return j.INTERNAL;case $e.UNAVAILABLE:return j.UNAVAILABLE;case $e.UNAUTHENTICATED:return j.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case $e.NOT_FOUND:return j.NOT_FOUND;case $e.ALREADY_EXISTS:return j.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return j.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case $e.ABORTED:return j.ABORTED;case $e.OUT_OF_RANGE:return j.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return j.UNIMPLEMENTED;case $e.DATA_LOSS:return j.DATA_LOSS;default:return re()}}(ce=$e||($e={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=new yo([4294967295,4294967295],0);function fv(e){const t=zO().encode(e),n=new UM;return n.update(t),new Uint8Array(n.digest())}function pv(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new yo([n,r],0),new yo([i,o],0)]}class qm{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cs(`Invalid padding: ${n}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=yo.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(yo.fromNumber(r)));return i.compare(UO)===1&&(i=new yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=fv(t),[r,i]=pv(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new qm(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(t){if(this.Te===0)return;const n=fv(t),[r,i]=pv(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Cs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Xa.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Gc(ie.min(),i,new Ne(me),nr(),le())}}class Xa{constructor(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Xa(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}}class ST{constructor(t,n){this.targetId=t,this.fe=n}}class TT{constructor(t,n,r=St.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class mv{constructor(){this.ge=0,this.pe=yv(),this.ye=St.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=le(),n=le(),r=le();return this.pe.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new Xa(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=yv()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ee(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class jO{constructor(t){this.Be=t,this.ke=new Map,this.qe=nr(),this.Qe=gv(),this.Ke=new Ne(me)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:re()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Ff(o))if(r===0){const s=new ee(o.path);this.We(n,s,yt.newNoDocument(s,ie.min()))}else Ee(r===1);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(t),l=a?this.et(a,t,s):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Ti(r).toUint8Array()}catch(l){if(l instanceof JS)return Do("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new qm(s,i,o)}catch(l){return Do(l instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.We(n,o,null),i++)}),i}it(t){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Ff(a.target)){const l=new ee(a.target.path);this.qe.get(l)!==null||this.st(s,l)||this.We(s,l,yt.newNoDocument(l,t))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=le();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(t));const i=new Gc(t,n,this.Ke,this.qe,r);return this.qe=nr(),this.Qe=gv(),this.Ke=new Ne(me),i}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new mv,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new lt(me),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||W("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Be._t(t)}He(t){this.ke.set(t,new mv),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function gv(){return new Ne(ee.comparator)}function yv(){return new Ne(ee.comparator)}const BO={asc:"ASCENDING",desc:"DESCENDING"},HO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WO={and:"AND",or:"OR"};class KO{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Uf(e,t){return e.useProto3Json||Uc(t)?t:{value:t}}function Qu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xT(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function GO(e,t){return Qu(e,t.toTimestamp())}function Rn(e){return Ee(!!e),ie.fromTimestamp(function(n){const r=Dr(n);return new He(r.seconds,r.nanos)}(e))}function Qm(e,t){return jf(e,t).canonicalString()}function jf(e,t){const n=function(i){return new Ve(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function IT(e){const t=Ve.fromString(e);return Ee(PT(t)),t}function Bf(e,t){return Qm(e.databaseId,t.path)}function ed(e,t){const n=IT(t);if(n.get(1)!==e.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ee(AT(n))}function kT(e,t){return Qm(e.databaseId,t)}function qO(e){const t=IT(e);return t.length===4?Ve.emptyPath():AT(t)}function Hf(e){return new Ve(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function AT(e){return Ee(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function vv(e,t,n){return{name:Bf(e,t),fields:n.value.mapValue.fields}}function QO(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(u,c){return u.useProto3Json?(Ee(c===void 0||typeof c=="string"),St.fromBase64String(c||"")):(Ee(c===void 0||c instanceof Uint8Array),St.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(u){const c=u.code===void 0?j.UNKNOWN:ET(u.code);return new Y(c,u.message||"")}(s);n=new TT(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ed(e,r.document.name),o=Rn(r.document.updateTime),s=r.document.createTime?Rn(r.document.createTime):ie.min(),a=new Xt({mapValue:{fields:r.document.fields}}),l=yt.newFoundDocument(i,o,s,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Jl(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ed(e,r.document),o=r.readTime?Rn(r.readTime):ie.min(),s=yt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Jl([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ed(e,r.document),o=r.removedTargetIds||[];n=new Jl([],o,i,null)}else{if(!("filter"in t))return re();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new LO(i,o),a=r.targetId;n=new ST(a,s)}}return n}function XO(e,t){let n;if(t instanceof Qa)n={update:vv(e,t.key,t.value)};else if(t instanceof wT)n={delete:Bf(e,t.key)};else if(t instanceof Ci)n={update:vv(e,t.key,t.data),updateMask:o$(t.fieldMask)};else{if(!(t instanceof MO))return re();n={verify:Bf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Gu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ca)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ra)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qu)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw re()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:GO(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:re()}(e,t.precondition)),n}function YO(e,t){return e&&e.length>0?(Ee(t!==void 0),e.map(n=>function(i,o){let s=i.updateTime?Rn(i.updateTime):Rn(o);return s.isEqual(ie.min())&&(s=Rn(o)),new DO(s,i.transformResults||[])}(n,t))):[]}function ZO(e,t){return{documents:[kT(e,t.path)]}}function JO(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kT(e,i);const o=function(u){if(u.length!==0)return RT(Dn.create(u,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:Bi(d.field),direction:n$(d.dir)}}(c))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Uf(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ut:n,parent:i}}function e$(e){let t=qO(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ee(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let o=[];n.where&&(o=function(h){const d=CT(h);return d instanceof Dn&&rT(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(d=>function(g){return new Ku(Hi(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Uc(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Wu(f,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new Wu(f,d)}(n.endAt)),vO(t,i,s,o,a,"F",l,u)}function t$(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function CT(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hi(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hi(n.unaryFilter.field);return je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Hi(n.unaryFilter.field);return je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Hi(n.unaryFilter.field);return je.create(s,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(e):e.fieldFilter!==void 0?function(n){return je.create(Hi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>CT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(e):re()}function n$(e){return BO[e]}function r$(e){return HO[e]}function i$(e){return WO[e]}function Bi(e){return{fieldPath:e.canonicalString()}}function Hi(e){return ot.fromServerFormat(e.fieldPath)}function RT(e){return e instanceof je?function(n){if(n.op==="=="){if(iv(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NAN"}};if(rv(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iv(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NAN"}};if(rv(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(n.field),op:r$(n.op),value:n.value}}}(e):e instanceof Dn?function(n){const r=n.getFilters().map(i=>RT(i));return r.length===1?r[0]:{compositeFilter:{op:i$(n.op),filters:r}}}(e):re()}function o$(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function PT(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t,n,r,i,o=ie.min(),s=ie.min(),a=St.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new yr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(t){this.ct=t}}function a$(e){const t=e$({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?zf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(){this._n=new u$}addToCollectionParentIndex(t,n){return this._n.add(n),L.resolve()}getCollectionParents(t,n){return L.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return L.resolve()}deleteFieldIndex(t,n){return L.resolve()}deleteAllFieldIndexes(t){return L.resolve()}createTargetIndexes(t,n){return L.resolve()}getDocumentsMatchingTarget(t,n){return L.resolve(null)}getIndexType(t,n){return L.resolve(0)}getFieldIndexes(t,n){return L.resolve([])}getNextCollectionGroupToUpdate(t){return L.resolve(null)}getMinOffset(t,n){return L.resolve(Nr.min())}getMinOffsetFromCollectionGroup(t,n){return L.resolve(Nr.min())}updateCollectionGroup(t,n,r){return L.resolve()}updateIndexEntries(t,n){return L.resolve()}}class u${constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new lt(Ve.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new lt(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Oo(0)}static Ln(){return new Oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(){this.changes=new Xo(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,yt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Bs(r.mutation,i,cn.empty(),He.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,le()).next(()=>r))}getLocalViewOfDocuments(t,n,r=le()){const i=li();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(o=>{let s=As();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,n){const r=li();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,le()))}populateOverlays(t,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(t,n,r,i){let o=nr();const s=js(),a=function(){return js()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Ci)?o=o.insert(u.key,u):c!==void 0?(s.set(u.key,c.mutation.getFieldMask()),Bs(c.mutation,u,c.mutation.getFieldMask(),He.now())):s.set(u.key,cn.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((u,c)=>s.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new h$(c,(h=s.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=js();let i=new Ne((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||cn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||le()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=hT();c.forEach(d=>{if(!o.has(d)){const f=vT(n.get(d),r.get(d));f!==null&&h.set(d,f),o=o.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(t,u,h))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):_O(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-o.size):L.resolve(li());let a=-1,l=o;return s.next(u=>L.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(c)?L.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,l,u,le())).next(c=>({batchId:a,changes:cT(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ee(n)).next(r=>{let i=As();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const o=n.collectionGroup;let s=As();return this.indexManager.getCollectionParents(t,o).next(a=>L.forEach(a,l=>{const u=function(h,d){return new jc(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,r,i).next(c=>{c.forEach((h,d)=>{s=s.insert(h,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,o,i))).next(s=>{o.forEach((l,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,yt.newInvalidDocument(c)))});let a=As();return s.forEach((l,u)=>{const c=o.get(l);c!==void 0&&Bs(c.mutation,u,cn.empty(),He.now()),Hc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return L.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(n)),L.resolve()}getNamedQuery(t,n){return L.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:a$(i.bundledQuery),readTime:Rn(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(){this.overlays=new Ne(ee.comparator),this.hr=new Map}getOverlay(t,n){return L.resolve(this.overlays.get(n))}getOverlays(t,n){const r=li();return L.forEach(n,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,o)=>{this.ht(t,n,o)}),L.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),L.resolve()}getOverlaysForCollection(t,n,r){const i=li(),o=n.length+1,s=new ee(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let o=new Ne((u,c)=>u-c);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=o.get(u.largestBatchId);c===null&&(c=li(),o=o.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=li(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return L.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new $O(n,r));let o=this.hr.get(n);o===void 0&&(o=le(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Pr=new lt(Ge.Ir),this.Tr=new lt(Ge.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ge(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ge(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new ee(new Ve([])),r=new Ge(n,t),i=new Ge(n,t+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new ee(new Ve([])),r=new Ge(n,t),i=new Ge(n,t+1);let o=le();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(t){const n=new Ge(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return ee.comparator(t.key,n.key)||me(t.pr,n.pr)}static Er(t,n){return me(t.pr,n.pr)||ee.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new lt(Ge.Ir)}checkEmpty(t){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new OO(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Ge(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(t,n){return L.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new lt(me);return n.forEach(i=>{const o=new Ge(i,0),s=new Ge(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),L.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let o=r;ee.isDocumentKey(o)||(o=o.child(""));const s=new Ge(new ee(o),0);let a=new lt(me);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},s),L.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Ee(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return L.forEach(n.mutations,i=>{const o=new Ge(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ge(n,0),i=this.wr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,L.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(t){this.vr=t,this.docs=function(){return new Ne(ee.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(t,n){let r=nr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():yt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let o=nr();const s=n.path,a=new ee(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||JM(ZM(c),r)<=0||(i.has(c.key)||Hc(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(t,n,r,i){re()}Fr(t,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new y$(this)}getSize(t){return L.resolve(this.size)}}class y$ extends c${constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),L.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(t){this.persistence=t,this.Mr=new Xo(n=>Hm(n),Wm),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Xm,this.targetCount=0,this.Lr=Oo.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(t){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return L.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),L.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Oo(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,L.resolve()}updateTargetData(t,n){return this.qn(n),L.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(t,n,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(t){return L.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return L.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),L.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(t,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),L.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return L.resolve(r)}containsKey(t,n){return L.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(t,n){this.Br={},this.overlays={},this.kr=new zm(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new v$(this),this.indexManager=new l$,this.remoteDocumentCache=function(i){return new g$(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new s$(n),this.$r=new f$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new p$,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new m$(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){W("MemoryPersistence","Starting transaction:",t);const i=new w$(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(t,n){return L.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class w$ extends tO{constructor(t){super(),this.currentSequenceNumber=t}}class Ym{constructor(t){this.persistence=t,this.zr=new Xm,this.jr=null}static Hr(t){return new Ym(t)}get Jr(){if(this.jr)return this.jr;throw re()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),L.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),L.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Jr,r=>{const i=ee.fromPath(r);return this.Yr(t,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return L.or([()=>L.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=le(),i=le();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Zm(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return EV()?8:ai.v(bu())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const o={result:null};return this.ji(t,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(t,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new E$;return this.Ji(t,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(t,n,s,a.size)})}).next(()=>o.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(vs()<=he.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ji(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),L.resolve()):(vs()<=he.DEBUG&&W("QueryEngine","Query:",ji(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(vs()<=he.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ji(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Cn(n))):L.resolve())}ji(t,n){if(lv(n))return L.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=zf(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const s=le(...o);return this.zi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,s,l.readTime)?this.ji(t,zf(n,null,"F")):this.es(t,u,n,l)}))})))}Hi(t,n,r,i){return lv(n)||i.isEqual(ie.min())?L.resolve(null):this.zi.getDocuments(t,r).next(o=>{const s=this.Zi(n,o);return this.Xi(n,s,r,i)?L.resolve(null):(vs()<=he.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ji(n)),this.es(t,s,n,YM(i,-1)).next(a=>a))})}Zi(t,n){let r=new lt(lT(t));return n.forEach((i,o)=>{Hc(t,o)&&(r=r.add(o))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(t,n,r){return vs()<=he.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ji(n)),this.zi.getDocumentsMatchingQuery(t,n,Nr.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Ne(me),this.rs=new Xo(o=>Hm(o),Wm),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new d$(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function x$(e,t,n,r){return new T$(e,t,n,r)}async function NT(e,t){const n=oe(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=le();for(const u of i){s.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of o){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})}function I$(e,t){const n=oe(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,d=h.keys();let f=L.resolve();return d.forEach(g=>{f=f.next(()=>c.getEntry(l,g)).next(v=>{const w=u.docVersions.get(g);Ee(w!==null),v.version.compareTo(w)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,t,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function DT(e){const t=oe(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function k$(e,t){const n=oe(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(o,c.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(o,c.addedDocuments,h)));let f=d.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(h)!==null?f=f.withResumeToken(St.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(h,f),function(v,w,m){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(d,f,c)&&a.push(n.Qr.updateTargetData(o,f))});let l=nr(),u=le();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(A$(o,s,t.documentUpdates).next(c=>{l=c.cs,u=c.ls})),!r.isEqual(ie.min())){const c=n.Qr.getLastRemoteSnapshotVersion(o).next(h=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(c)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.ns=i,o))}function A$(e,t,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),t.getEntries(e,r).next(o=>{let s=nr();return n.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ie.min())?(t.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),s=s.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:s,ls:i}})}function C$(e,t){const n=oe(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function R$(e,t){const n=oe(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(o=>o?(i=o,L.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new yr(t,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Wf(e,t,n){const r=oe(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!qa(s))throw s;W("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function _v(e,t,n){const r=oe(e);let i=ie.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,c){const h=oe(l),d=h.rs.get(c);return d!==void 0?L.resolve(h.ns.get(d)):h.Qr.getTargetData(u,c)}(r,s,Cn(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ts.getDocumentsMatchingQuery(s,t,n?i:ie.min(),n?o:le())).next(a=>(P$(r,EO(t),a),{documents:a,hs:o})))}function P$(e,t,n){let r=e.ss.get(t)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),e.ss.set(t,r)}class wv{constructor(){this.activeTargetIds=AO()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class N${constructor(){this.no=new wv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new wv,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl=null;function td(){return Vl===null?Vl=function(){return 268435456+Math.round(2147483648*Math.random())}():Vl++,"0x"+Vl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class M$ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){const a=td(),l=this.bo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,s),this.Co(n,l,u,i).then(c=>(W("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Do("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){const i=V$[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,i){const o=td();return new Promise((s,a)=>{const l=new zM;l.setWithCredentials(!0),l.listenOnce(LM.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Jh.NO_ERROR:const c=l.getResponseJson();W(ft,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(c)),s(c);break;case Jh.TIMEOUT:W(ft,`RPC '${t}' ${o} timed out`),a(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:const h=l.getStatus();if(W(ft,`RPC '${t}' ${o} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(w){const m=w.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(m)>=0?m:j.UNKNOWN}(f.status);a(new Y(g,f.message))}else a(new Y(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(j.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{W(ft,`RPC '${t}' ${o} completed.`)}});const u=JSON.stringify(i);W(ft,`RPC '${t}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}Fo(t,n,r){const i=td(),o=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=OM(),a=$M(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=o.join("");W(ft,`Creating RPC '${t}' stream ${i}: ${c}`,l);const h=s.createWebChannel(c,l);let d=!1,f=!1;const g=new b$({lo:w=>{f?W(ft,`Not sending because RPC '${t}' stream ${i} is closed:`,w):(d||(W(ft,`Opening RPC '${t}' stream ${i} transport.`),h.open(),d=!0),W(ft,`RPC '${t}' stream ${i} sending:`,w),h.send(w))},ho:()=>h.close()}),v=(w,m,p)=>{w.listen(m,y=>{try{p(y)}catch(_){setTimeout(()=>{throw _},0)}})};return v(h,Pl.EventType.OPEN,()=>{f||W(ft,`RPC '${t}' stream ${i} transport opened.`)}),v(h,Pl.EventType.CLOSE,()=>{f||(f=!0,W(ft,`RPC '${t}' stream ${i} transport closed`),g.Vo())}),v(h,Pl.EventType.ERROR,w=>{f||(f=!0,Do(ft,`RPC '${t}' stream ${i} transport errored:`,w),g.Vo(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),v(h,Pl.EventType.MESSAGE,w=>{var m;if(!f){const p=w.data[0];Ee(!!p);const y=p,_=y.error||((m=y[0])===null||m===void 0?void 0:m.error);if(_){W(ft,`RPC '${t}' stream ${i} received error:`,_);const E=_.status;let I=function(N){const M=$e[N];if(M!==void 0)return ET(M)}(E),x=_.message;I===void 0&&(I=j.INTERNAL,x="Unknown error status: "+E+" with message "+_.message),f=!0,g.Vo(new Y(I,x)),h.close()}else W(ft,`RPC '${t}' stream ${i} received:`,p),g.mo(p)}}),v(a,FM.STAT_EVENT,w=>{w.stat===Y0.PROXY?W(ft,`RPC '${t}' stream ${i} detected buffering proxy`):w.stat===Y0.NOPROXY&&W(ft,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}}function nd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(e){return new KO(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(t,n,r=1e3,i=1.5,o=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(t,n,r,i,o,s,a,l){this.oi=t,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new VT(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Pn(n.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{t(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return W("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O$ extends bT{constructor(t,n,r,i,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=QO(this.serializer,t),r=function(o){if(!("targetChange"in o))return ie.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?Rn(s.readTime):ie.min()}(t);return this.listener.u_(n,r)}c_(t){const n={};n.database=Hf(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=Ff(l)?{documents:ZO(o,l)}:{query:JO(o,l).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=xT(o,s.resumeToken);const u=Uf(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Qu(o,s.snapshotVersion.toTimestamp());const u=Uf(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);const r=t$(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){const n={};n.database=Hf(this.serializer),n.removeTarget=t,this.t_(n)}}class $$ extends bT{constructor(t,n,r,i,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(Ee(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const n=YO(t.writeResults,t.commitTime),r=Rn(t.commitTime);return this.listener.T_(r,n)}return Ee(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Hf(this.serializer),this.t_(t)}I_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>XO(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L$ extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(t,jf(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}vo(t,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(t,jf(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class F${constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Pn(n),this.g_=!1):W("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(t,n,r,i,o){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(async()=>{Ri(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=oe(l);u.v_.add(4),await Ya(u),u.x_.set("Unknown"),u.v_.delete(4),await Qc(u)}(this))})}),this.x_=new F$(r,i)}}async function Qc(e){if(Ri(e))for(const t of e.F_)await t(!0)}async function Ya(e){for(const t of e.F_)await t(!1)}function MT(e,t){const n=oe(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),ng(n)?tg(n):Yo(n).Jo()&&eg(n,t))}function Jm(e,t){const n=oe(e),r=Yo(n);n.C_.delete(t),r.Jo()&&OT(n,t),n.C_.size===0&&(r.Jo()?r.Xo():Ri(n)&&n.x_.set("Unknown"))}function eg(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ie.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Yo(e).c_(t)}function OT(e,t){e.O_.Oe(t),Yo(e).l_(t)}function tg(e){e.O_=new jO({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Yo(e).start(),e.x_.p_()}function ng(e){return Ri(e)&&!Yo(e).Ho()&&e.C_.size>0}function Ri(e){return oe(e).v_.size===0}function $T(e){e.O_=void 0}async function U$(e){e.C_.forEach((t,n)=>{eg(e,t)})}async function j$(e,t){$T(e),ng(e)?(e.x_.S_(t),tg(e)):e.x_.set("Unknown")}async function B$(e,t,n){if(e.x_.set("Online"),t instanceof TT&&t.state===2&&t.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))}(e,t)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Xu(e,r)}else if(t instanceof Jl?e.O_.$e(t):t instanceof ST?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(ie.min()))try{const r=await DT(e.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=o.C_.get(u);c&&o.C_.set(u,c.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const c=o.C_.get(l);if(!c)return;o.C_.set(l,c.withResumeToken(St.EMPTY_BYTE_STRING,c.snapshotVersion)),OT(o,l);const h=new yr(c.target,l,u,c.sequenceNumber);eg(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Xu(e,r)}}async function Xu(e,t,n){if(!qa(t))throw t;e.v_.add(1),await Ya(e),e.x_.set("Offline"),n||(n=()=>DT(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Qc(e)})}function LT(e,t){return t().catch(n=>Xu(e,n,t))}async function Xc(e){const t=oe(e),n=Vr(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;H$(t);)try{const i=await C$(t.localStore,r);if(i===null){t.D_.length===0&&n.Xo();break}r=i.batchId,W$(t,i)}catch(i){await Xu(t,i)}FT(t)&&zT(t)}function H$(e){return Ri(e)&&e.D_.length<10}function W$(e,t){e.D_.push(t);const n=Vr(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function FT(e){return Ri(e)&&!Vr(e).Ho()&&e.D_.length>0}function zT(e){Vr(e).start()}async function K$(e){Vr(e).d_()}async function G$(e){const t=Vr(e);for(const n of e.D_)t.I_(n.mutations)}async function q$(e,t,n){const r=e.D_.shift(),i=Gm.from(r,t,n);await LT(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Xc(e)}async function Q$(e,t){t&&Vr(e).P_&&await async function(r,i){if(function(s){return FO(s)&&s!==j.ABORTED}(i.code)){const o=r.D_.shift();Vr(r).Zo(),await LT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Xc(r)}}(e,t),FT(e)&&zT(e)}async function Sv(e,t){const n=oe(e);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Ri(n);n.v_.add(3),await Ya(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Qc(n)}async function X$(e,t){const n=oe(e);t?(n.v_.delete(2),await Qc(n)):t||(n.v_.add(2),await Ya(n),n.x_.set("Unknown"))}function Yo(e){return e.N_||(e.N_=function(n,r,i){const o=oe(n);return o.R_(),new O$(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Po:U$.bind(null,e),To:j$.bind(null,e),u_:B$.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),ng(e)?tg(e):e.x_.set("Unknown")):(await e.N_.stop(),$T(e))})),e.N_}function Vr(e){return e.L_||(e.L_=function(n,r,i){const o=oe(n);return o.R_(),new $$(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Po:K$.bind(null,e),To:Q$.bind(null,e),E_:G$.bind(null,e),T_:q$.bind(null,e)}),e.F_.push(async t=>{t?(e.L_.Zo(),await Xc(e)):(await e.L_.stop(),e.D_.length>0&&(W("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))})),e.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,o){const s=Date.now()+r,a=new rg(t,n,s,i,o);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(e,t){if(Pn("AsyncQueue",`${t}: ${e}`),qa(e))return new Y(j.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t){this.comparator=t?(n,r)=>t(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=As(),this.sortedSet=new Ne(this.comparator)}static emptySet(t){return new vo(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof vo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new vo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.B_=new Ne(ee.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):re():this.B_=this.B_.insert(n,t)}k_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class $o{constructor(t,n,r,i,o,s,a,l,u){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new $o(t,n,vo.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}}class Z${constructor(){this.queries=new Xo(t=>aT(t),Bc),this.onlineState="Unknown",this.W_=new Set}}async function J$(e,t){const n=oe(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.K_()&&t.U_()&&(r=2):(o=new Y$,r=t.U_()?0:1);try{switch(r){case 0:o.q_=await n.onListen(i,!0);break;case 1:o.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=ig(s,`Initialization of query '${ji(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,o),o.Q_.push(t),t.G_(n.onlineState),o.q_&&t.z_(o.q_)&&og(n)}async function e4(e,t){const n=oe(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Q_.indexOf(t);s>=0&&(o.Q_.splice(s,1),o.Q_.length===0?i=t.U_()?0:1:!o.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function t4(e,t){const n=oe(e);let r=!1;for(const i of t){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.Q_)a.z_(i)&&(r=!0);s.q_=i}}r&&og(n)}function n4(e,t,n){const r=oe(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function og(e){e.W_.forEach(t=>{t.next()})}var Kf,xv;(xv=Kf||(Kf={})).j_="default",xv.Cache="cache";class r4{constructor(t,n,r){this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new $o(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),n=!0):this.X_(t,this.onlineState)&&(this.ea(t),n=!0),this.Y_=t,n}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),n=!0),n}X_(t,n){if(!t.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(t){t=$o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==Kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(t){this.key=t}}class jT{constructor(t){this.key=t}}class i4{constructor(t,n){this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=le(),this.mutatedKeys=le(),this.ha=lT(t),this.Pa=new vo(this.ha)}get Ia(){return this.ua}Ta(t,n){const r=n?n.Ea:new Tv,i=n?n.Pa:this.Pa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,h)=>{const d=i.get(c),f=Hc(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?g!==v&&(r.track({type:3,doc:f}),w=!0):this.da(d,f)||(r.track({type:2,doc:f}),w=!0,(l&&this.ha(f,l)>0||u&&this.ha(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),w=!0):d&&!f&&(r.track({type:1,doc:d}),w=!0,(l||u)&&(a=!0)),w&&(f?(s=s.add(f),o=v?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{Pa:s,Ea:r,Xi:a,mutatedKeys:o}}da(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const o=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;const s=t.Ea.k_();s.sort((c,h)=>function(f,g){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return v(f)-v(g)}(c.type,h.type)||this.ha(c.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,u=l!==this.ca;return this.ca=l,s.length!==0||u?{snapshot:new $o(this.query,t.Pa,o,s,t.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Tv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=t.current)}Ra(){if(!this.current)return[];const t=this.la;this.la=le(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return t.forEach(r=>{this.la.has(r)||n.push(new jT(r))}),this.la.forEach(r=>{t.has(r)||n.push(new UT(r))}),n}fa(t){this.ua=t.hs,this.la=le();const n=this.Ta(t.documents);return this.applyChanges(n,!0)}ga(){return $o.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class o4{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class s4{constructor(t){this.key=t,this.pa=!1}}class a4{constructor(t,n,r,i,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Xo(a=>aT(a),Bc),this.Sa=new Map,this.ba=new Set,this.Da=new Ne(ee.comparator),this.Ca=new Map,this.va=new Xm,this.Fa={},this.Ma=new Map,this.xa=Oo.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function l4(e,t,n=!0){const r=qT(e);let i;const o=r.wa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=await BT(r,t,n,!0),i}async function u4(e,t){const n=qT(e);await BT(n,t,!0,!1)}async function BT(e,t,n,r){const i=await R$(e.localStore,Cn(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await c4(e,t,o,s==="current",i.resumeToken)),e.isPrimaryClient&&n&&MT(e.remoteStore,i),a}async function c4(e,t,n,r,i){e.Na=(h,d,f)=>async function(v,w,m,p){let y=w.view.Ta(m);y.Xi&&(y=await _v(v.localStore,w.query,!1).then(({documents:x})=>w.view.Ta(x,y)));const _=p&&p.targetChanges.get(w.targetId),E=p&&p.targetMismatches.get(w.targetId)!=null,I=w.view.applyChanges(y,v.isPrimaryClient,_,E);return kv(v,w.targetId,I.Va),I.snapshot}(e,h,d,f);const o=await _v(e.localStore,t,!0),s=new i4(t,o.hs),a=s.Ta(o.documents),l=Xa.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),u=s.applyChanges(a,e.isPrimaryClient,l);kv(e,n,u.Va);const c=new o4(t,n,s);return e.wa.set(t,c),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),u.snapshot}async function h4(e,t,n){const r=oe(e),i=r.wa.get(t),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter(s=>!Bc(s,t))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Wf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Jm(r.remoteStore,i.targetId),Gf(r,i.targetId)}).catch(Ga)):(Gf(r,i.targetId),await Wf(r.localStore,i.targetId,!0))}async function d4(e,t){const n=oe(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(n.remoteStore,r.targetId))}async function f4(e,t,n){const r=w4(e);try{const i=await function(s,a){const l=oe(s),u=He.now(),c=a.reduce((f,g)=>f.add(g.key),le());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=nr(),v=le();return l.os.getEntries(f,c).next(w=>{g=w,g.forEach((m,p)=>{p.isValidDocument()||(v=v.add(m))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,g)).next(w=>{h=w;const m=[];for(const p of a){const y=bO(p,h.get(p.key).overlayedDocument);y!=null&&m.push(new Ci(p.key,y,eT(y.value.mapValue),qn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,m,a)}).next(w=>{d=w;const m=w.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(f,w.batchId,m)})}).then(()=>({batchId:d.batchId,changes:cT(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Fa[s.currentUser.toKey()];u||(u=new Ne(me)),u=u.insert(a,l),s.Fa[s.currentUser.toKey()]=u}(r,i.batchId,n),await Za(r,i.changes),await Xc(r.remoteStore)}catch(i){const o=ig(i,"Failed to persist write");n.reject(o)}}async function HT(e,t){const n=oe(e);try{const r=await k$(n.localStore,t);t.targetChanges.forEach((i,o)=>{const s=n.Ca.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.pa=!0:i.modifiedDocuments.size>0?Ee(s.pa):i.removedDocuments.size>0&&(Ee(s.pa),s.pa=!1))}),await Za(n,r,t)}catch(r){await Ga(r)}}function Iv(e,t,n){const r=oe(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((o,s)=>{const a=s.view.G_(t);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=oe(s);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.Q_)d.G_(a)&&(u=!0)}),u&&og(l)}(r.eventManager,t),i.length&&r.ya.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function p4(e,t,n){const r=oe(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),o=i&&i.key;if(o){let s=new Ne(ee.comparator);s=s.insert(o,yt.newNoDocument(o,ie.min()));const a=le().add(o),l=new Gc(ie.min(),new Map,new Ne(me),s,a);await HT(r,l),r.Da=r.Da.remove(o),r.Ca.delete(t),sg(r)}else await Wf(r.localStore,t,!1).then(()=>Gf(r,t,n)).catch(Ga)}async function m4(e,t){const n=oe(e),r=t.batch.batchId;try{const i=await I$(n.localStore,t);KT(n,r,null),WT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Za(n,i)}catch(i){await Ga(i)}}async function g4(e,t,n){const r=oe(e);try{const i=await function(s,a){const l=oe(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Ee(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,t);KT(r,t,n),WT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Za(r,i)}catch(i){await Ga(i)}}function WT(e,t){(e.Ma.get(t)||[]).forEach(n=>{n.resolve()}),e.Ma.delete(t)}function KT(e,t,n){const r=oe(e);let i=r.Fa[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function Gf(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach(r=>{e.va.containsKey(r)||GT(e,r)})}function GT(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);n!==null&&(Jm(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),sg(e))}function kv(e,t,n){for(const r of n)r instanceof UT?(e.va.addReference(r.key,t),y4(e,r)):r instanceof jT?(W("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||GT(e,r.key)):re()}function y4(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(W("SyncEngine","New document in limbo: "+n),e.ba.add(r),sg(e))}function sg(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new ee(Ve.fromString(t)),r=e.xa.next();e.Ca.set(r,new s4(n)),e.Da=e.Da.insert(n,r),MT(e.remoteStore,new yr(Cn(Km(n.path)),r,"TargetPurposeLimboResolution",zm._e))}}async function Za(e,t,n){const r=oe(e),i=[],o=[],s=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{s.push(r.Na(l,t,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=Zm.Ki(l.targetId,u);o.push(c)}}))}),await Promise.all(s),r.ya.u_(i),await async function(l,u){const c=oe(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(u,d=>L.forEach(d.qi,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>L.forEach(d.Qi,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!qa(h))throw h;W("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=c.ns.get(d),g=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(g);c.ns=c.ns.insert(d,v)}}}(r.localStore,o))}async function v4(e,t){const n=oe(e);if(!n.currentUser.isEqual(t)){W("SyncEngine","User change. New user:",t.toKey());const r=await NT(n.localStore,t);n.currentUser=t,function(o,s){o.Ma.forEach(a=>{a.forEach(l=>{l.reject(new Y(j.CANCELLED,s))})}),o.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Za(n,r.us)}}function _4(e,t){const n=oe(e),r=n.Ca.get(t);if(r&&r.pa)return le().add(r.key);{let i=le();const o=n.Sa.get(t);if(!o)return i;for(const s of o){const a=n.wa.get(s);i=i.unionWith(a.view.Ia)}return i}}function qT(e){const t=oe(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_4.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=p4.bind(null,t),t.ya.u_=t4.bind(null,t.eventManager),t.ya.La=n4.bind(null,t.eventManager),t}function w4(e){const t=oe(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=m4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=g4.bind(null,t),t}class Av{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=qc(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return x$(this.persistence,new S$,t.initialUser,this.serializer)}createPersistence(t){return new _$(Ym.Hr,this.serializer)}createSharedClientState(t){return new N$}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class E4{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Iv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=v4.bind(null,this.syncEngine),await X$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Z$}()}createDatastore(t){const n=qc(t.databaseInfo.databaseId),r=function(o){return new M$(o)}(t.databaseInfo);return function(o,s,a,l){return new L$(o,s,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,o,s,a){return new z$(r,i,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Iv(this.syncEngine,n,0),function(){return Ev.D()?new Ev:new D$}())}createSyncEngine(t,n){return function(i,o,s,a,l,u,c){const h=new a4(i,o,s,a,l,u);return c&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=oe(r);W("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Ya(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):Pn("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=YS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=ig(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function rd(e,t){e.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await NT(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Cv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await I4(e);W("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Sv(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Sv(t.remoteStore,i)),e._onlineComponents=t}function x4(e){return e.name==="FirebaseError"?e.code===j.FAILED_PRECONDITION||e.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function I4(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await rd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!x4(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await rd(e,new Av)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await rd(e,new Av);return e._offlineComponents}async function QT(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Cv(e,e._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Cv(e,new E4))),e._onlineComponents}function k4(e){return QT(e).then(t=>t.syncEngine)}async function A4(e){const t=await QT(e),n=t.eventManager;return n.onListen=l4.bind(null,t.syncEngine),n.onUnlisten=h4.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=u4.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=d4.bind(null,t.syncEngine),n}function C4(e,t,n={}){const r=new Gn;return e.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const c=new S4({next:d=>{s.enqueueAndForget(()=>e4(o,h));const f=d.docs.has(a);!f&&d.fromCache?u.reject(new Y(j.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?u.reject(new Y(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new r4(Km(a.path),c,{includeMetadataChanges:!0,ta:!0});return J$(o,h)}(await A4(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(e,t,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function P4(e,t,n,r){if(t===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Pv(e){if(!ee.isDocumentKey(e))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ag(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":re()}function Pa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ag(e);throw new Y(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}P4("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class lg{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nv(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jM;switch(r.type){case"firstParty":return new KM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Rv.get(n);r&&(W("ComponentProvider","Removing Datastore"),Rv.delete(n),r.terminate())}(this),Promise.resolve()}}function N4(e,t,n,r={}){var i;const o=(e=Pa(e,lg))._getSettings(),s=`${t}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=pt.MOCK_USER;else{a=_V(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(u)}e._authCredentials=new BM(new XS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ug(this.firestore,t,this._query)}}class en{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new en(this.firestore,t,this._key)}}class Na extends ug{constructor(t,n,r){super(t,n,Km(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new en(this.firestore,null,new ee(t))}withConverter(t){return new Na(this.firestore,t,this._path)}}function Dv(e,t,...n){if(e=Mu(e),arguments.length===1&&(t=YS.newId()),R4("doc","path",t),e instanceof lg){const r=Ve.fromString(t,...n);return Pv(r),new en(e,null,new ee(r))}{if(!(e instanceof en||e instanceof Na))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ve.fromString(t,...n));return Pv(r),new en(e.firestore,e instanceof Na?e.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new VT(this,"async_queue_retry"),this.cu=()=>{const n=nd();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=nd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;const n=nd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Gn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!qa(t))throw t;W("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(t){const n=this.nu.then(()=>(this._u=!0,t().catch(r=>{this.ou=r,this._u=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Pn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(t,n,r){this.lu(),this.uu.indexOf(t)>-1&&(n=0);const i=rg.createAndSchedule(this,t,n,r,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&re()}verifyOperationInProgress(){}async Tu(){let t;do t=this.nu,await t;while(t!==this.nu)}Eu(t){for(const n of this.su)if(n.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){const n=this.su.indexOf(t);this.su.splice(n,1)}}class cg extends lg{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new D4}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZT(this),this._firestoreClient.terminate()}}function V4(e,t){const n=typeof e=="object"?e:xb(),r=typeof e=="string"?e:t||"(default)",i=wb(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=yV("firestore");o&&N4(i,...o)}return i}function YT(e){return e._firestoreClient||ZT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ZT(e){var t,n,r;const i=e._freezeSettings(),o=function(a,l,u,c){return new sO(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,XT(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new T4(e._authCredentials,e._appCheckCredentials,e._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Lo(St.fromBase64String(t))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Lo(St.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return me(this._lat,t._lat)||me(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=/^__.*__$/;class M4{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ci(t,this.data,this.fieldMask,n,this.fieldTransforms):new Qa(t,this.data,n,this.fieldTransforms)}}function ex(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class fg{constructor(t,n,r,i,o,s){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new fg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.mu({path:r,gu:!1});return i.pu(t),i}yu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return Yu(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if(ex(this.Vu)&&b4.test(t))throw this.Su('Document fields cannot begin and end with "__"')}}class O4{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||qc(t)}Cu(t,n,r,i=!1){return new fg({Vu:t,methodName:n,Du:r,path:ot.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $4(e){const t=e._freezeSettings(),n=qc(e._databaseId);return new O4(e._databaseId,!!t.ignoreUndefinedProperties,n)}function L4(e,t,n,r,i,o={}){const s=e.Cu(o.merge||o.mergeFields?2:0,t,n,i);ix("Data must be an object, but it was:",s,r);const a=nx(r,s);let l,u;if(o.merge)l=new cn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const h of o.mergeFields){const d=F4(t,h,n);if(!s.contains(d))throw new Y(j.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);U4(c,d)||c.push(d)}l=new cn(c),u=s.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=s.fieldTransforms;return new M4(new Xt(a),l,u)}function tx(e,t){if(rx(e=Mu(e)))return ix("Unsupported field value:",t,e),nx(e,t);if(e instanceof JT)return function(r,i){if(!ex(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=tx(a,i.wu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=Mu(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=He.fromDate(r);return{timestampValue:Qu(i.serializer,o)}}if(r instanceof He){const o=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qu(i.serializer,o)}}if(r instanceof dg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lo)return{bytesValue:xT(i.serializer,r._byteString)};if(r instanceof en){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Qm(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${ag(r)}`)}(e,t)}function nx(e,t){const n={};return ZS(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qo(e,(r,i)=>{const o=tx(i,t.fu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function rx(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof He||e instanceof dg||e instanceof Lo||e instanceof en||e instanceof JT)}function ix(e,t,n){if(!rx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ag(n);throw r==="an object"?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function F4(e,t,n){if((t=Mu(t))instanceof hg)return t._internalPath;if(typeof t=="string")return ox(e,t);throw Yu("Field path arguments must be of type string or ",e,!1,void 0,n)}const z4=new RegExp("[~\\*/\\[\\]]");function ox(e,t,n){if(t.search(z4)>=0)throw Yu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new hg(...t.split("."))._internalPath}catch{throw Yu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Yu(e,t,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Y(j.INVALID_ARGUMENT,a+e+l)}function U4(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new j4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(ax("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class j4 extends sx{data(){return super.data()}}function ax(e,t){return typeof t=="string"?ox(e,t):t instanceof hg?t._internalPath:t._delegate._internalPath}class B4{convertValue(t,n="none"){switch(xi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Le(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ti(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw re()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Qo(t,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(t){return new dg(Le(t.latitude),Le(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=jm(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ia(t));default:return null}}convertTimestamp(t){const n=Dr(t);return new He(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ve.fromString(t);Ee(PT(r));const i=new ka(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(n)||Pn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class lx extends sx{constructor(t,n,r,i,o,s){super(t,n,r,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new K4(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(ax("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class K4 extends lx{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(e){e=Pa(e,en);const t=Pa(e.firestore,cg);return C4(YT(t),e._key).then(n=>Y4(t,e,n))}class q4 extends B4{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lo(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new en(this.firestore,null,n)}}function Q4(e,t,n){e=Pa(e,en);const r=Pa(e.firestore,cg),i=H4(e.converter,t,n);return X4(r,[L4($4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,qn.none())])}function X4(e,t){return function(r,i){const o=new Gn;return r.asyncQueue.enqueueAndForget(async()=>f4(await k4(r),i,o)),o.promise}(YT(e),t)}function Y4(e,t,n){const r=n.docs.get(t._key),i=new q4(e);return new lx(e,i,t._key,r,new W4(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){qo=i})(Tb),$u(new pa("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new cg(new HM(r.getProvider("auth-internal")),new qM(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(u.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),mo(Z0,"4.5.1",t),mo(Z0,"4.5.1","esm2017")})();const Z4={apiKey:"AIzaSyAQOWLW33YmcldSc_tpJgpcH9Nl-jXF5Ec",authDomain:"winged-precinct-418901.firebaseapp.com",projectId:"winged-precinct-418901",storageBucket:"winged-precinct-418901.appspot.com",messagingSenderId:"908912265044",appId:"1:908912265044:web:350310428d15ffc2b56ac1",measurementId:"G-3NF1PZKCYX"},J4=HE(Z4),Vv=V4(J4);function eL(){const e=vt(l=>l.nodes),t=vt(l=>l.edges),n=vt(l=>l.setNodes),r=vt(l=>l.setEdges),i=Tc(),[o,s]=A.useState();A.useEffect(()=>{var l;if(i.user&&i.isAuthenticated){console.log("user",i.user);const u=(l=i.user.sub)==null?void 0:l.split("|")[1];s(u);const c=Dv(Vv,`flow-users/${u}`);G4(c).then(h=>{h.exists()?(console.log("Document data:",h.data()),n([...h.data().nodes]),r([...h.data().edges])):console.log("No such document!")}).catch(h=>{console.error("Error getting document:",h)})}},[i]);const a=()=>{if(!o){alert("You must be logged in to use the Cloud Save feature.");return}const l=Dv(Vv,`flow-users/${o}`);Q4(l,{nodes:[...e],edges:[...t]},{merge:!0}).then(()=>{console.log("data written to database",{nodes:[...e],edges:[...t]})}).catch(u=>{console.error("Error setting document:",u)})};return F.jsxs(F.Fragment,{children:[i.isAuthenticated?void 0:F.jsx("img",{style:{pointerEvents:"none",width:"50px"},src:"https://gifdb.com/images/high/animated-stars-loading-icon-38ccjfav8iijnqrb.gif"}),F.jsx("button",{onClick:a,children:F.jsx("span",{className:"material-symbols-outlined",children:"save"})})]})}function tL(e){const t=vt(d=>d.edges),n=vt(d=>d.nodes),[r,i]=A.useState(!1),[o,s]=A.useState(void 0),[a,l]=A.useState(!1),[u,c]=A.useState(!1);A.useEffect(()=>{t.find(d=>d.source===e.id)?s(!0):t.find(d=>d.target===e.id)?s(!1):s(void 0)},[t]),A.useEffect(()=>{const d=n.find(f=>f.id===e.id);if(d!=null&&d.data.token){const f=n.find(g=>g.data.token===d.data.token&&g.id!==e.id);l(!!f)}},[u]);const h=()=>{c(!u)};return F.jsxs("div",{className:`token-node nodeWrapper ${r?"selected":""}`,children:[r?F.jsx(Bo,{id:e.id}):void 0,F.jsx(Ho,{selected:r,onSelect:()=>i(!r)}),o?void 0:F.jsx(Ye,{className:"handle target",type:"target",position:G.Top,isConnectable:e.isConnectable}),a?F.jsx("span",{style:{color:"white",paddingRight:"5px"},className:"material-symbols-outlined",children:"kid_star"}):void 0,F.jsx(xc,{id:e.id,dataKey:"token",defaultText:"TokenKey",onChange:h}),o||o===void 0?F.jsx(Ye,{className:"handle source",type:"source",position:G.Bottom,isConnectable:e.isConnectable}):void 0]})}const nL=e=>({nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect}),rL={dialogue:JD,textReceiver:iV,response:eV,exposition:tV,meta:nV,signal:rV,token:tL},iL={customEdge:oV};function oL(){const{nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onConnect:i}=vt(nL,Xe),o=vt(p=>p.setNodes),[s,a]=A.useState(null),[l,u]=A.useState(e.length+1),[c,h]=A.useState(!1),d=Tc();A.useEffect(()=>{const p=()=>{h(window.innerWidth<770)};return p(),window.addEventListener("resize",p),window.addEventListener("touchstart",function(y){y.preventDefault()}),()=>{window.removeEventListener("resize",p)}},[]),A.useEffect(()=>{o([...e])},[s]),A.useEffect(()=>{const p=l+1;u(p),localStorage.setItem("nodes",JSON.stringify(e)),localStorage.setItem("edges",JSON.stringify(t))},[e,t]);const f=()=>{console.log(e)},g=(p,y=0,_=100)=>{o([...e,{id:`${l}`,position:{x:y,y:_},data:{},type:p}])},v=(p,y)=>{p.dataTransfer.setData("application/reactflow",y),p.dataTransfer.effectAllowed="move"},w=A.useCallback(p=>{p.preventDefault(),p.dataTransfer.dropEffect="move"},[]),m=A.useCallback(p=>{p.preventDefault();const y=p.dataTransfer.getData("application/reactflow");if(!(typeof y>"u"||!y))if(s){const _=s.screenToFlowPosition({x:p.clientX-100,y:p.clientY});g(y,_.x,_.y)}else g(y)},[e]);return F.jsx(sm,{children:F.jsxs("div",{style:{width:"100svw",height:"100svh"},children:[F.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px",position:"absolute",right:"10px",top:"10px",zIndex:1},children:d.isAuthenticated?F.jsxs(F.Fragment,{children:[F.jsx(aV,{}),F.jsx(eL,{})]}):F.jsx(sV,{})}),F.jsxs(wE,{onInit:a,nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onConnect:i,onDrop:m,onDragOver:w,selectionMode:Po.Partial,nodeTypes:rL,edgeTypes:iL,minZoom:.25,maxZoom:2,fitView:!0,children:[c?void 0:F.jsx(aD,{zoomable:!0,pannable:!0}),F.jsx(fD,{gap:12,size:1}),F.jsxs(qp,{position:"top-left",style:{display:"flex",gap:"8px",flexDirection:"column"},children:[c?void 0:F.jsx("button",{onClick:f,children:"Print State"}),F.jsxs("button",{onClick:()=>{g("dialogue")},onDragStart:p=>v(p,"dialogue"),draggable:!0,children:[F.jsx("span",{className:"material-symbols-outlined",children:"maps_ugc "})," ",c?void 0:"Add Dialogue"]}),F.jsxs("button",{onClick:()=>{g("response")},onDragStart:p=>v(p,"response"),draggable:!0,children:[F.jsx("span",{className:"material-symbols-outlined",children:"comic_bubble"}),c?void 0:"Add Response"]}),F.jsxs("button",{onClick:()=>{g("exposition")},onDragStart:p=>v(p,"exposition"),draggable:!0,children:[F.jsx("span",{className:"material-symbols-outlined",children:"local_library"}),c?void 0:"Add Exposition"]}),F.jsxs("button",{onClick:()=>{g("meta")},onDragStart:p=>v(p,"meta"),draggable:!0,children:[F.jsx("span",{className:"material-symbols-outlined",children:"select_all"}),c?void 0:"Add Meta Node"]}),F.jsxs("button",{onClick:()=>{g("signal")},onDragStart:p=>v(p,"signal"),draggable:!0,children:[F.jsx("span",{className:"material-symbols-outlined",children:"sensors"}),c?void 0:"Add Signal"]}),F.jsxs("button",{onClick:()=>{g("token")},onDragStart:p=>v(p,"token"),draggable:!0,children:[F.jsxs("span",{className:"material-symbols-outlined",children:[" "," key_vertical"]}),c?void 0:"Add Token"]})]})]})]})})}id.createRoot(document.getElementById("root")).render(F.jsx(O.StrictMode,{children:F.jsx(ZD,{domain:"dev-k7eu453201ptp0k4.us.auth0.com",clientId:"4k6jPszthGusV3fd3cFwd7aML9g3h1cc",authorizationParams:{redirect_uri:window.location.origin.includes("aaron")?"https://aaron.greider.org/flow-app/dist/index.html":window.location.origin},children:F.jsx(oL,{})})}));
