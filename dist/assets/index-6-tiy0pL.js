function cx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function O_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L_={exports:{}},Gc={},F_={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=Symbol.for("react.element"),hx=Symbol.for("react.portal"),dx=Symbol.for("react.fragment"),fx=Symbol.for("react.strict_mode"),px=Symbol.for("react.profiler"),mx=Symbol.for("react.provider"),gx=Symbol.for("react.context"),yx=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),_x=Symbol.for("react.memo"),wx=Symbol.for("react.lazy"),_y=Symbol.iterator;function Ex(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var U_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$_=Object.assign,z_={};function Eo(t,e,n){this.props=t,this.context=e,this.refs=z_,this.updater=n||U_}Eo.prototype.isReactComponent={};Eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function j_(){}j_.prototype=Eo.prototype;function Np(t,e,n){this.props=t,this.context=e,this.refs=z_,this.updater=n||U_}var Dp=Np.prototype=new j_;Dp.constructor=Np;$_(Dp,Eo.prototype);Dp.isPureReactComponent=!0;var wy=Array.isArray,B_=Object.prototype.hasOwnProperty,bp={current:null},H_={key:!0,ref:!0,__self:!0,__source:!0};function W_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)B_.call(e,r)&&!H_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:dl,type:t,key:s,ref:o,props:i,_owner:bp.current}}function Tx(t,e){return{$$typeof:dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mp(t){return typeof t=="object"&&t!==null&&t.$$typeof===dl}function Sx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ey=/\/+/g;function Jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sx(""+t.key):e.toString(36)}function Au(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dl:case hx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Jh(o,0):r,wy(i)?(n="",t!=null&&(n=t.replace(Ey,"$&/")+"/"),Au(i,e,n,"",function(c){return c})):i!=null&&(Mp(i)&&(i=Tx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ey,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wy(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Jh(s,a);o+=Au(s,e,n,u,i)}else if(u=Ex(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Jh(s,a++),o+=Au(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ql(t,e,n){if(t==null)return t;var r=[],i=0;return Au(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ix(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Cu={transition:null},xx={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Cu,ReactCurrentOwner:bp};ge.Children={map:Ql,forEach:function(t,e,n){Ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ql(t,function(){e++}),e},toArray:function(t){return Ql(t,function(e){return e})||[]},only:function(t){if(!Mp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Eo;ge.Fragment=dx;ge.Profiler=px;ge.PureComponent=Np;ge.StrictMode=fx;ge.Suspense=vx;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xx;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)B_.call(e,u)&&!H_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:dl,type:t.type,key:i,ref:s,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:gx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mx,_context:t},t.Consumer=t};ge.createElement=W_;ge.createFactory=function(t){var e=W_.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:yx,render:t}};ge.isValidElement=Mp;ge.lazy=function(t){return{$$typeof:wx,_payload:{_status:-1,_result:t},_init:Ix}};ge.memo=function(t,e){return{$$typeof:_x,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Cu.transition;Cu.transition={};try{t()}finally{Cu.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ge.useContext=function(t){return Mt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ge.useId=function(){return Mt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ge.useRef=function(t){return Mt.current.useRef(t)};ge.useState=function(t){return Mt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Mt.current.useTransition()};ge.version="18.2.0";F_.exports=ge;var D=F_.exports;const K=O_(D),Ax=cx({__proto__:null,default:K},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx=D,Rx=Symbol.for("react.element"),Px=Symbol.for("react.fragment"),kx=Object.prototype.hasOwnProperty,Nx=Cx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dx={key:!0,ref:!0,__self:!0,__source:!0};function q_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kx.call(e,r)&&!Dx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Rx,type:t,key:s,ref:o,props:i,_owner:Nx.current}}Gc.Fragment=Px;Gc.jsx=q_;Gc.jsxs=q_;L_.exports=Gc;var U=L_.exports,Kd={},K_={exports:{}},tn={},G_={exports:{}},Q_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,V){var z=L.length;L.push(V);e:for(;0<z;){var H=z-1>>>1,q=L[H];if(0<i(q,V))L[H]=V,L[z]=q,z=H;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var V=L[0],z=L.pop();if(z!==V){L[0]=z;e:for(var H=0,q=L.length,Y=q>>>1;H<Y;){var ee=2*(H+1)-1,oe=L[ee],he=ee+1,de=L[he];if(0>i(oe,z))he<q&&0>i(de,oe)?(L[H]=de,L[he]=z,H=he):(L[H]=oe,L[ee]=z,H=ee);else if(he<q&&0>i(de,z))L[H]=de,L[he]=z,H=he;else break e}}return V}function i(L,V){var z=L.sortIndex-V.sortIndex;return z!==0?z:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,d=null,p=3,y=!1,T=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(L){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=L)r(c),V.sortIndex=V.expirationTime,e(u,V);else break;V=n(c)}}function k(L){if(x=!1,E(L),!T)if(n(u)!==null)T=!0,$(M);else{var V=n(c);V!==null&&W(k,V.startTime-L)}}function M(L,V){T=!1,x&&(x=!1,g(_),_=-1),y=!0;var z=p;try{for(E(V),d=n(u);d!==null&&(!(d.expirationTime>V)||L&&!C());){var H=d.callback;if(typeof H=="function"){d.callback=null,p=d.priorityLevel;var q=H(d.expirationTime<=V);V=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(u)&&r(u),E(V)}else r(u);d=n(u)}if(d!==null)var Y=!0;else{var ee=n(c);ee!==null&&W(k,ee.startTime-V),Y=!1}return Y}finally{d=null,p=z,y=!1}}var O=!1,I=null,_=-1,S=5,R=-1;function C(){return!(t.unstable_now()-R<S)}function N(){if(I!==null){var L=t.unstable_now();R=L;var V=!0;try{V=I(!0,L)}finally{V?w():(O=!1,I=null)}}else O=!1}var w;if(typeof v=="function")w=function(){v(N)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,j=b.port2;b.port1.onmessage=N,w=function(){j.postMessage(null)}}else w=function(){P(N,0)};function $(L){I=L,O||(O=!0,w())}function W(L,V){_=P(function(){L(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){T||y||(T=!0,$(M))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var z=p;p=V;try{return L()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=p;p=L;try{return V()}finally{p=z}},t.unstable_scheduleCallback=function(L,V,z){var H=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,L){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=z+q,L={id:h++,callback:V,priorityLevel:L,startTime:z,expirationTime:q,sortIndex:-1},z>H?(L.sortIndex=z,e(c,L),n(u)===null&&L===n(c)&&(x?(g(_),_=-1):x=!0,W(k,z-H))):(L.sortIndex=q,e(u,L),T||y||(T=!0,$(M))),L},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(L){var V=p;return function(){var z=p;p=V;try{return L.apply(this,arguments)}finally{p=z}}}})(Q_);G_.exports=Q_;var bx=G_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_=D,Zt=bx;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y_=new Set,Da={};function ss(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(Da[t]=e,t=0;t<e.length;t++)Y_.add(e[t])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gd=Object.prototype.hasOwnProperty,Mx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ty={},Sy={};function Vx(t){return Gd.call(Sy,t)?!0:Gd.call(Ty,t)?!1:Mx.test(t)?Sy[t]=!0:(Ty[t]=!0,!1)}function Ox(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lx(t,e,n,r){if(e===null||typeof e>"u"||Ox(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Op(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vp,Op);pt[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vp,Op);pt[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vp,Op);pt[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lp(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lx(e,n,i,r)&&(n=null),r||i===null?Vx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xr=X_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xl=Symbol.for("react.element"),As=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),Fp=Symbol.for("react.strict_mode"),Qd=Symbol.for("react.profiler"),J_=Symbol.for("react.provider"),Z_=Symbol.for("react.context"),Up=Symbol.for("react.forward_ref"),Xd=Symbol.for("react.suspense"),Yd=Symbol.for("react.suspense_list"),$p=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),ew=Symbol.for("react.offscreen"),Iy=Symbol.iterator;function Go(t){return t===null||typeof t!="object"?null:(t=Iy&&t[Iy]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Zh;function la(t){if(Zh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zh=e&&e[1]||""}return`
`+Zh+t}var ed=!1;function td(t,e){if(!t||ed)return"";ed=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{ed=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?la(t):""}function Fx(t){switch(t.tag){case 5:return la(t.type);case 16:return la("Lazy");case 13:return la("Suspense");case 19:return la("SuspenseList");case 0:case 2:case 15:return t=td(t.type,!1),t;case 11:return t=td(t.type.render,!1),t;case 1:return t=td(t.type,!0),t;default:return""}}function Jd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case As:return"Portal";case Qd:return"Profiler";case Fp:return"StrictMode";case Xd:return"Suspense";case Yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Z_:return(t.displayName||"Context")+".Consumer";case J_:return(t._context.displayName||"Context")+".Provider";case Up:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $p:return e=t.displayName||null,e!==null?e:Jd(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return Jd(t(e))}catch{}}return null}function Ux(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jd(e);case 8:return e===Fp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $x(t){var e=tw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yl(t){t._valueTracker||(t._valueTracker=$x(t))}function nw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zd(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rw(t,e){e=e.checked,e!=null&&Lp(t,"checked",e,!1)}function ef(t,e){rw(t,e);var n=hi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tf(t,e.type,n):e.hasOwnProperty("defaultValue")&&tf(t,e.type,hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ay(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tf(t,e,n){(e!=="number"||Yu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ua=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(ua(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hi(n)}}function iw(t,e){var n=hi(e.value),r=hi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ry(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jl,ow=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jl=Jl||document.createElement("div"),Jl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zx=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(t){zx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ya[e]=ya[t]})});function aw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ya.hasOwnProperty(t)&&ya[t]?(""+e).trim():e+"px"}function lw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=aw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var jx=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sf(t,e){if(e){if(jx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function of(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var af=null;function zp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lf=null,$s=null,zs=null;function Py(t){if(t=ml(t)){if(typeof lf!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Zc(e),lf(t.stateNode,t.type,e))}}function uw(t){$s?zs?zs.push(t):zs=[t]:$s=t}function cw(){if($s){var t=$s,e=zs;if(zs=$s=null,Py(t),e)for(t=0;t<e.length;t++)Py(e[t])}}function hw(t,e){return t(e)}function dw(){}var nd=!1;function fw(t,e,n){if(nd)return t(e,n);nd=!0;try{return hw(t,e,n)}finally{nd=!1,($s!==null||zs!==null)&&(dw(),cw())}}function Ma(t,e){var n=t.stateNode;if(n===null)return null;var r=Zc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var uf=!1;if(mr)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){uf=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{uf=!1}function Bx(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var va=!1,Ju=null,Zu=!1,cf=null,Hx={onError:function(t){va=!0,Ju=t}};function Wx(t,e,n,r,i,s,o,a,u){va=!1,Ju=null,Bx.apply(Hx,arguments)}function qx(t,e,n,r,i,s,o,a,u){if(Wx.apply(this,arguments),va){if(va){var c=Ju;va=!1,Ju=null}else throw Error(X(198));Zu||(Zu=!0,cf=c)}}function os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ky(t){if(os(t)!==t)throw Error(X(188))}function Kx(t){var e=t.alternate;if(!e){if(e=os(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ky(i),t;if(s===r)return ky(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function mw(t){return t=Kx(t),t!==null?gw(t):null}function gw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gw(t);if(e!==null)return e;t=t.sibling}return null}var yw=Zt.unstable_scheduleCallback,Ny=Zt.unstable_cancelCallback,Gx=Zt.unstable_shouldYield,Qx=Zt.unstable_requestPaint,qe=Zt.unstable_now,Xx=Zt.unstable_getCurrentPriorityLevel,jp=Zt.unstable_ImmediatePriority,vw=Zt.unstable_UserBlockingPriority,ec=Zt.unstable_NormalPriority,Yx=Zt.unstable_LowPriority,_w=Zt.unstable_IdlePriority,Qc=null,Un=null;function Jx(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(Qc,t,void 0,(t.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:tA,Zx=Math.log,eA=Math.LN2;function tA(t){return t>>>=0,t===0?32:31-(Zx(t)/eA|0)|0}var Zl=64,eu=4194304;function ca(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ca(a):(s&=o,s!==0&&(r=ca(s)))}else o=n&~i,o!==0?r=ca(o):s!==0&&(r=ca(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-In(e),i=1<<n,r|=t[n],e&=~i;return r}function nA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-In(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=nA(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function hf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ww(){var t=Zl;return Zl<<=1,!(Zl&4194240)&&(Zl=64),t}function rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-In(e),t[e]=n}function iA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-In(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Bp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-In(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Se=0;function Ew(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tw,Hp,Sw,Iw,xw,df=!1,tu=[],Xr=null,Yr=null,Jr=null,Va=new Map,Oa=new Map,$r=[],sA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dy(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oa.delete(e.pointerId)}}function Xo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ml(e),e!==null&&Hp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function oA(t,e,n,r,i){switch(e){case"focusin":return Xr=Xo(Xr,t,e,n,r,i),!0;case"dragenter":return Yr=Xo(Yr,t,e,n,r,i),!0;case"mouseover":return Jr=Xo(Jr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Va.set(s,Xo(Va.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Oa.set(s,Xo(Oa.get(s)||null,t,e,n,r,i)),!0}return!1}function Aw(t){var e=Mi(t.target);if(e!==null){var n=os(e);if(n!==null){if(e=n.tag,e===13){if(e=pw(n),e!==null){t.blockedOn=e,xw(t.priority,function(){Sw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ff(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);af=r,n.target.dispatchEvent(r),af=null}else return e=ml(n),e!==null&&Hp(e),t.blockedOn=n,!1;e.shift()}return!0}function by(t,e,n){Ru(t)&&n.delete(e)}function aA(){df=!1,Xr!==null&&Ru(Xr)&&(Xr=null),Yr!==null&&Ru(Yr)&&(Yr=null),Jr!==null&&Ru(Jr)&&(Jr=null),Va.forEach(by),Oa.forEach(by)}function Yo(t,e){t.blockedOn===e&&(t.blockedOn=null,df||(df=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,aA)))}function La(t){function e(i){return Yo(i,t)}if(0<tu.length){Yo(tu[0],t);for(var n=1;n<tu.length;n++){var r=tu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xr!==null&&Yo(Xr,t),Yr!==null&&Yo(Yr,t),Jr!==null&&Yo(Jr,t),Va.forEach(e),Oa.forEach(e),n=0;n<$r.length;n++)r=$r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$r.length&&(n=$r[0],n.blockedOn===null);)Aw(n),n.blockedOn===null&&$r.shift()}var js=xr.ReactCurrentBatchConfig,nc=!0;function lA(t,e,n,r){var i=Se,s=js.transition;js.transition=null;try{Se=1,Wp(t,e,n,r)}finally{Se=i,js.transition=s}}function uA(t,e,n,r){var i=Se,s=js.transition;js.transition=null;try{Se=4,Wp(t,e,n,r)}finally{Se=i,js.transition=s}}function Wp(t,e,n,r){if(nc){var i=ff(t,e,n,r);if(i===null)fd(t,e,r,rc,n),Dy(t,r);else if(oA(i,t,e,n,r))r.stopPropagation();else if(Dy(t,r),e&4&&-1<sA.indexOf(t)){for(;i!==null;){var s=ml(i);if(s!==null&&Tw(s),s=ff(t,e,n,r),s===null&&fd(t,e,r,rc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fd(t,e,r,null,n)}}var rc=null;function ff(t,e,n,r){if(rc=null,t=zp(r),t=Mi(t),t!==null)if(e=os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rc=t,null}function Cw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xx()){case jp:return 1;case vw:return 4;case ec:case Yx:return 16;case _w:return 536870912;default:return 16}default:return 16}}var qr=null,qp=null,Pu=null;function Rw(){if(Pu)return Pu;var t,e=qp,n=e.length,r,i="value"in qr?qr.value:qr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Pu=i.slice(t,1<r?1-r:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nu(){return!0}function My(){return!1}function nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nu:My,this.isPropagationStopped=My,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),e}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kp=nn(To),pl=Ue({},To,{view:0,detail:0}),cA=nn(pl),id,sd,Jo,Xc=Ue({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(id=t.screenX-Jo.screenX,sd=t.screenY-Jo.screenY):sd=id=0,Jo=t),id)},movementY:function(t){return"movementY"in t?t.movementY:sd}}),Vy=nn(Xc),hA=Ue({},Xc,{dataTransfer:0}),dA=nn(hA),fA=Ue({},pl,{relatedTarget:0}),od=nn(fA),pA=Ue({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),mA=nn(pA),gA=Ue({},To,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yA=nn(gA),vA=Ue({},To,{data:0}),Oy=nn(vA),_A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EA[t])?!!e[t]:!1}function Gp(){return TA}var SA=Ue({},pl,{key:function(t){if(t.key){var e=_A[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gp,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IA=nn(SA),xA=Ue({},Xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=nn(xA),AA=Ue({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gp}),CA=nn(AA),RA=Ue({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),PA=nn(RA),kA=Ue({},Xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NA=nn(kA),DA=[9,13,27,32],Qp=mr&&"CompositionEvent"in window,_a=null;mr&&"documentMode"in document&&(_a=document.documentMode);var bA=mr&&"TextEvent"in window&&!_a,Pw=mr&&(!Qp||_a&&8<_a&&11>=_a),Fy=" ",Uy=!1;function kw(t,e){switch(t){case"keyup":return DA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rs=!1;function MA(t,e){switch(t){case"compositionend":return Nw(e);case"keypress":return e.which!==32?null:(Uy=!0,Fy);case"textInput":return t=e.data,t===Fy&&Uy?null:t;default:return null}}function VA(t,e){if(Rs)return t==="compositionend"||!Qp&&kw(t,e)?(t=Rw(),Pu=qp=qr=null,Rs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pw&&e.locale!=="ko"?null:e.data;default:return null}}var OA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OA[t.type]:e==="textarea"}function Dw(t,e,n,r){uw(r),e=ic(e,"onChange"),0<e.length&&(n=new Kp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wa=null,Fa=null;function LA(t){Bw(t,0)}function Yc(t){var e=Ns(t);if(nw(e))return t}function FA(t,e){if(t==="change")return e}var bw=!1;if(mr){var ad;if(mr){var ld="oninput"in document;if(!ld){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),ld=typeof zy.oninput=="function"}ad=ld}else ad=!1;bw=ad&&(!document.documentMode||9<document.documentMode)}function jy(){wa&&(wa.detachEvent("onpropertychange",Mw),Fa=wa=null)}function Mw(t){if(t.propertyName==="value"&&Yc(Fa)){var e=[];Dw(e,Fa,t,zp(t)),fw(LA,e)}}function UA(t,e,n){t==="focusin"?(jy(),wa=e,Fa=n,wa.attachEvent("onpropertychange",Mw)):t==="focusout"&&jy()}function $A(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yc(Fa)}function zA(t,e){if(t==="click")return Yc(e)}function jA(t,e){if(t==="input"||t==="change")return Yc(e)}function BA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:BA;function Ua(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gd.call(e,i)||!Rn(t[i],e[i]))return!1}return!0}function By(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hy(t,e){var n=By(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=By(n)}}function Vw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ow(){for(var t=window,e=Yu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yu(t.document)}return e}function Xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HA(t){var e=Ow(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vw(n.ownerDocument.documentElement,n)){if(r!==null&&Xp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Hy(n,s);var o=Hy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WA=mr&&"documentMode"in document&&11>=document.documentMode,Ps=null,pf=null,Ea=null,mf=!1;function Wy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mf||Ps==null||Ps!==Yu(r)||(r=Ps,"selectionStart"in r&&Xp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ea&&Ua(Ea,r)||(Ea=r,r=ic(pf,"onSelect"),0<r.length&&(e=new Kp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ps)))}function ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},ud={},Lw={};mr&&(Lw=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Jc(t){if(ud[t])return ud[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lw)return ud[t]=e[n];return t}var Fw=Jc("animationend"),Uw=Jc("animationiteration"),$w=Jc("animationstart"),zw=Jc("transitionend"),jw=new Map,qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(t,e){jw.set(t,e),ss(e,[t])}for(var cd=0;cd<qy.length;cd++){var hd=qy[cd],qA=hd.toLowerCase(),KA=hd[0].toUpperCase()+hd.slice(1);gi(qA,"on"+KA)}gi(Fw,"onAnimationEnd");gi(Uw,"onAnimationIteration");gi($w,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(zw,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GA=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function Ky(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qx(r,e,void 0,t),t.currentTarget=null}function Bw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Ky(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Ky(i,a,c),s=u}}}if(Zu)throw t=cf,Zu=!1,cf=null,t}function De(t,e){var n=e[wf];n===void 0&&(n=e[wf]=new Set);var r=t+"__bubble";n.has(r)||(Hw(e,t,2,!1),n.add(r))}function dd(t,e,n){var r=0;e&&(r|=4),Hw(n,t,r,e)}var iu="_reactListening"+Math.random().toString(36).slice(2);function $a(t){if(!t[iu]){t[iu]=!0,Y_.forEach(function(n){n!=="selectionchange"&&(GA.has(n)||dd(n,!1,t),dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[iu]||(e[iu]=!0,dd("selectionchange",!1,e))}}function Hw(t,e,n,r){switch(Cw(e)){case 1:var i=lA;break;case 4:i=uA;break;default:i=Wp}n=i.bind(null,e,n,t),i=void 0,!uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Mi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}fw(function(){var c=s,h=zp(n),d=[];e:{var p=jw.get(t);if(p!==void 0){var y=Kp,T=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":y=IA;break;case"focusin":T="focus",y=od;break;case"focusout":T="blur",y=od;break;case"beforeblur":case"afterblur":y=od;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=dA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=CA;break;case Fw:case Uw:case $w:y=mA;break;case zw:y=PA;break;case"scroll":y=cA;break;case"wheel":y=NA;break;case"copy":case"cut":case"paste":y=yA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ly}var x=(e&4)!==0,P=!x&&t==="scroll",g=x?p!==null?p+"Capture":null:p;x=[];for(var v=c,E;v!==null;){E=v;var k=E.stateNode;if(E.tag===5&&k!==null&&(E=k,g!==null&&(k=Ma(v,g),k!=null&&x.push(za(v,k,E)))),P)break;v=v.return}0<x.length&&(p=new y(p,T,null,n,h),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==af&&(T=n.relatedTarget||n.fromElement)&&(Mi(T)||T[gr]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(T=n.relatedTarget||n.toElement,y=c,T=T?Mi(T):null,T!==null&&(P=os(T),T!==P||T.tag!==5&&T.tag!==6)&&(T=null)):(y=null,T=c),y!==T)){if(x=Vy,k="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ly,k="onPointerLeave",g="onPointerEnter",v="pointer"),P=y==null?p:Ns(y),E=T==null?p:Ns(T),p=new x(k,v+"leave",y,n,h),p.target=P,p.relatedTarget=E,k=null,Mi(h)===c&&(x=new x(g,v+"enter",T,n,h),x.target=E,x.relatedTarget=P,k=x),P=k,y&&T)t:{for(x=y,g=T,v=0,E=x;E;E=vs(E))v++;for(E=0,k=g;k;k=vs(k))E++;for(;0<v-E;)x=vs(x),v--;for(;0<E-v;)g=vs(g),E--;for(;v--;){if(x===g||g!==null&&x===g.alternate)break t;x=vs(x),g=vs(g)}x=null}else x=null;y!==null&&Gy(d,p,y,x,!1),T!==null&&P!==null&&Gy(d,P,T,x,!0)}}e:{if(p=c?Ns(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var M=FA;else if($y(p))if(bw)M=jA;else{M=$A;var O=UA}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=zA);if(M&&(M=M(t,c))){Dw(d,M,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&tf(p,"number",p.value)}switch(O=c?Ns(c):window,t){case"focusin":($y(O)||O.contentEditable==="true")&&(Ps=O,pf=c,Ea=null);break;case"focusout":Ea=pf=Ps=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,Wy(d,n,h);break;case"selectionchange":if(WA)break;case"keydown":case"keyup":Wy(d,n,h)}var I;if(Qp)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Rs?kw(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Pw&&n.locale!=="ko"&&(Rs||_!=="onCompositionStart"?_==="onCompositionEnd"&&Rs&&(I=Rw()):(qr=h,qp="value"in qr?qr.value:qr.textContent,Rs=!0)),O=ic(c,_),0<O.length&&(_=new Oy(_,t,null,n,h),d.push({event:_,listeners:O}),I?_.data=I:(I=Nw(n),I!==null&&(_.data=I)))),(I=bA?MA(t,n):VA(t,n))&&(c=ic(c,"onBeforeInput"),0<c.length&&(h=new Oy("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}Bw(d,e)})}function za(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ma(t,n),s!=null&&r.unshift(za(t,s,i)),s=Ma(t,e),s!=null&&r.push(za(t,s,i))),t=t.return}return r}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Ma(n,s),u!=null&&o.unshift(za(n,u,a))):i||(u=Ma(n,s),u!=null&&o.push(za(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var QA=/\r\n?/g,XA=/\u0000|\uFFFD/g;function Qy(t){return(typeof t=="string"?t:""+t).replace(QA,`
`).replace(XA,"")}function su(t,e,n){if(e=Qy(e),Qy(t)!==e&&n)throw Error(X(425))}function sc(){}var gf=null,yf=null;function vf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _f=typeof setTimeout=="function"?setTimeout:void 0,YA=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,JA=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(t){return Xy.resolve(null).then(t).catch(ZA)}:_f;function ZA(t){setTimeout(function(){throw t})}function pd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),La(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);La(e)}function Zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var So=Math.random().toString(36).slice(2),Fn="__reactFiber$"+So,ja="__reactProps$"+So,gr="__reactContainer$"+So,wf="__reactEvents$"+So,eC="__reactListeners$"+So,tC="__reactHandles$"+So;function Mi(t){var e=t[Fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gr]||n[Fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yy(t);t!==null;){if(n=t[Fn])return n;t=Yy(t)}return e}t=n,n=t.parentNode}return null}function ml(t){return t=t[Fn]||t[gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Zc(t){return t[ja]||null}var Ef=[],Ds=-1;function yi(t){return{current:t}}function be(t){0>Ds||(t.current=Ef[Ds],Ef[Ds]=null,Ds--)}function Re(t,e){Ds++,Ef[Ds]=t.current,t.current=e}var di={},At=yi(di),jt=yi(!1),qi=di;function eo(t,e){var n=t.type.contextTypes;if(!n)return di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Bt(t){return t=t.childContextTypes,t!=null}function oc(){be(jt),be(At)}function Jy(t,e,n){if(At.current!==di)throw Error(X(168));Re(At,e),Re(jt,n)}function Ww(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,Ux(t)||"Unknown",i));return Ue({},n,r)}function ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,qi=At.current,Re(At,t),Re(jt,jt.current),!0}function Zy(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=Ww(t,e,qi),r.__reactInternalMemoizedMergedChildContext=t,be(jt),be(At),Re(At,t)):be(jt),Re(jt,n)}var sr=null,eh=!1,md=!1;function qw(t){sr===null?sr=[t]:sr.push(t)}function nC(t){eh=!0,qw(t)}function vi(){if(!md&&sr!==null){md=!0;var t=0,e=Se;try{var n=sr;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sr=null,eh=!1}catch(i){throw sr!==null&&(sr=sr.slice(t+1)),yw(jp,vi),i}finally{Se=e,md=!1}}return null}var bs=[],Ms=0,lc=null,uc=0,an=[],ln=0,Ki=null,ar=1,lr="";function ki(t,e){bs[Ms++]=uc,bs[Ms++]=lc,lc=t,uc=e}function Kw(t,e,n){an[ln++]=ar,an[ln++]=lr,an[ln++]=Ki,Ki=t;var r=ar;t=lr;var i=32-In(r)-1;r&=~(1<<i),n+=1;var s=32-In(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ar=1<<32-In(e)+i|n<<i|r,lr=s+t}else ar=1<<s|n<<i|r,lr=t}function Yp(t){t.return!==null&&(ki(t,1),Kw(t,1,0))}function Jp(t){for(;t===lc;)lc=bs[--Ms],bs[Ms]=null,uc=bs[--Ms],bs[Ms]=null;for(;t===Ki;)Ki=an[--ln],an[ln]=null,lr=an[--ln],an[ln]=null,ar=an[--ln],an[ln]=null}var Yt=null,Qt=null,Me=!1,En=null;function Gw(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ev(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,Qt=Zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ki!==null?{id:ar,overflow:lr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yt=t,Qt=null,!0):!1;default:return!1}}function Tf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sf(t){if(Me){var e=Qt;if(e){var n=e;if(!ev(t,e)){if(Tf(t))throw Error(X(418));e=Zr(n.nextSibling);var r=Yt;e&&ev(t,e)?Gw(r,n):(t.flags=t.flags&-4097|2,Me=!1,Yt=t)}}else{if(Tf(t))throw Error(X(418));t.flags=t.flags&-4097|2,Me=!1,Yt=t}}}function tv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function ou(t){if(t!==Yt)return!1;if(!Me)return tv(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vf(t.type,t.memoizedProps)),e&&(e=Qt)){if(Tf(t))throw Qw(),Error(X(418));for(;e;)Gw(t,e),e=Zr(e.nextSibling)}if(tv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=Zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Yt?Zr(t.stateNode.nextSibling):null;return!0}function Qw(){for(var t=Qt;t;)t=Zr(t.nextSibling)}function to(){Qt=Yt=null,Me=!1}function Zp(t){En===null?En=[t]:En.push(t)}var rC=xr.ReactCurrentBatchConfig;function _n(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var cc=yi(null),hc=null,Vs=null,em=null;function tm(){em=Vs=hc=null}function nm(t){var e=cc.current;be(cc),t._currentValue=e}function If(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){hc=t,em=Vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function dn(t){var e=t._currentValue;if(em!==t)if(t={context:t,memoizedValue:e,next:null},Vs===null){if(hc===null)throw Error(X(308));Vs=t,hc.dependencies={lanes:0,firstContext:t}}else Vs=Vs.next=t;return e}var Vi=null;function rm(t){Vi===null?Vi=[t]:Vi.push(t)}function Xw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,rm(e)):(n.next=i.next,i.next=n),e.interleaved=n,yr(t,r)}function yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lr=!1;function im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,yr(t,n)}return i=r.interleaved,i===null?(e.next=e,rm(r)):(e.next=i.next,i.next=e),r.interleaved=e,yr(t,n)}function Nu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bp(t,n)}}function nv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dc(t,e,n,r){var i=t.updateQueue;Lr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var d=i.baseState;o=0,h=c=u=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,x=a;switch(p=e,y=n,x.tag){case 1:if(T=x.payload,typeof T=="function"){d=T.call(y,d,p);break e}d=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=x.payload,p=typeof T=="function"?T.call(y,d,p):T,p==null)break e;d=Ue({},d,p);break e;case 2:Lr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=d):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qi|=o,t.lanes=o,t.memoizedState=d}}function rv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Jw=new X_.Component().refs;function xf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var th={isMounted:function(t){return(t=t._reactInternals)?os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=ni(t),s=pr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ei(t,s,i),e!==null&&(xn(e,t,i,r),Nu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=ni(t),s=pr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ei(t,s,i),e!==null&&(xn(e,t,i,r),Nu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=ni(t),i=pr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ei(t,i,r),e!==null&&(xn(e,t,r,n),Nu(e,t,r))}};function iv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ua(n,r)||!Ua(i,s):!0}function Zw(t,e,n){var r=!1,i=di,s=e.contextType;return typeof s=="object"&&s!==null?s=dn(s):(i=Bt(e)?qi:At.current,r=e.contextTypes,s=(r=r!=null)?eo(t,i):di),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=th,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&th.enqueueReplaceState(e,e.state,null)}function Af(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Jw,im(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dn(s):(s=Bt(e)?qi:At.current,i.context=eo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&th.enqueueReplaceState(i,i.state,null),dc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Jw&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function au(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ov(t){var e=t._init;return e(t._payload)}function eE(t){function e(g,v){if(t){var E=g.deletions;E===null?(g.deletions=[v],g.flags|=16):E.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=ri(g,v),g.index=0,g.sibling=null,g}function s(g,v,E){return g.index=E,t?(E=g.alternate,E!==null?(E=E.index,E<v?(g.flags|=2,v):E):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,E,k){return v===null||v.tag!==6?(v=Td(E,g.mode,k),v.return=g,v):(v=i(v,E),v.return=g,v)}function u(g,v,E,k){var M=E.type;return M===Cs?h(g,v,E.props.children,k,E.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Or&&ov(M)===v.type)?(k=i(v,E.props),k.ref=Zo(g,v,E),k.return=g,k):(k=Lu(E.type,E.key,E.props,null,g.mode,k),k.ref=Zo(g,v,E),k.return=g,k)}function c(g,v,E,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=Sd(E,g.mode,k),v.return=g,v):(v=i(v,E.children||[]),v.return=g,v)}function h(g,v,E,k,M){return v===null||v.tag!==7?(v=ji(E,g.mode,k,M),v.return=g,v):(v=i(v,E),v.return=g,v)}function d(g,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Td(""+v,g.mode,E),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xl:return E=Lu(v.type,v.key,v.props,null,g.mode,E),E.ref=Zo(g,null,v),E.return=g,E;case As:return v=Sd(v,g.mode,E),v.return=g,v;case Or:var k=v._init;return d(g,k(v._payload),E)}if(ua(v)||Go(v))return v=ji(v,g.mode,E,null),v.return=g,v;au(g,v)}return null}function p(g,v,E,k){var M=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:a(g,v,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Xl:return E.key===M?u(g,v,E,k):null;case As:return E.key===M?c(g,v,E,k):null;case Or:return M=E._init,p(g,v,M(E._payload),k)}if(ua(E)||Go(E))return M!==null?null:h(g,v,E,k,null);au(g,E)}return null}function y(g,v,E,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(E)||null,a(v,g,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Xl:return g=g.get(k.key===null?E:k.key)||null,u(v,g,k,M);case As:return g=g.get(k.key===null?E:k.key)||null,c(v,g,k,M);case Or:var O=k._init;return y(g,v,E,O(k._payload),M)}if(ua(k)||Go(k))return g=g.get(E)||null,h(v,g,k,M,null);au(v,k)}return null}function T(g,v,E,k){for(var M=null,O=null,I=v,_=v=0,S=null;I!==null&&_<E.length;_++){I.index>_?(S=I,I=null):S=I.sibling;var R=p(g,I,E[_],k);if(R===null){I===null&&(I=S);break}t&&I&&R.alternate===null&&e(g,I),v=s(R,v,_),O===null?M=R:O.sibling=R,O=R,I=S}if(_===E.length)return n(g,I),Me&&ki(g,_),M;if(I===null){for(;_<E.length;_++)I=d(g,E[_],k),I!==null&&(v=s(I,v,_),O===null?M=I:O.sibling=I,O=I);return Me&&ki(g,_),M}for(I=r(g,I);_<E.length;_++)S=y(I,g,_,E[_],k),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?_:S.key),v=s(S,v,_),O===null?M=S:O.sibling=S,O=S);return t&&I.forEach(function(C){return e(g,C)}),Me&&ki(g,_),M}function x(g,v,E,k){var M=Go(E);if(typeof M!="function")throw Error(X(150));if(E=M.call(E),E==null)throw Error(X(151));for(var O=M=null,I=v,_=v=0,S=null,R=E.next();I!==null&&!R.done;_++,R=E.next()){I.index>_?(S=I,I=null):S=I.sibling;var C=p(g,I,R.value,k);if(C===null){I===null&&(I=S);break}t&&I&&C.alternate===null&&e(g,I),v=s(C,v,_),O===null?M=C:O.sibling=C,O=C,I=S}if(R.done)return n(g,I),Me&&ki(g,_),M;if(I===null){for(;!R.done;_++,R=E.next())R=d(g,R.value,k),R!==null&&(v=s(R,v,_),O===null?M=R:O.sibling=R,O=R);return Me&&ki(g,_),M}for(I=r(g,I);!R.done;_++,R=E.next())R=y(I,g,_,R.value,k),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?_:R.key),v=s(R,v,_),O===null?M=R:O.sibling=R,O=R);return t&&I.forEach(function(N){return e(g,N)}),Me&&ki(g,_),M}function P(g,v,E,k){if(typeof E=="object"&&E!==null&&E.type===Cs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Xl:e:{for(var M=E.key,O=v;O!==null;){if(O.key===M){if(M=E.type,M===Cs){if(O.tag===7){n(g,O.sibling),v=i(O,E.props.children),v.return=g,g=v;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Or&&ov(M)===O.type){n(g,O.sibling),v=i(O,E.props),v.ref=Zo(g,O,E),v.return=g,g=v;break e}n(g,O);break}else e(g,O);O=O.sibling}E.type===Cs?(v=ji(E.props.children,g.mode,k,E.key),v.return=g,g=v):(k=Lu(E.type,E.key,E.props,null,g.mode,k),k.ref=Zo(g,v,E),k.return=g,g=k)}return o(g);case As:e:{for(O=E.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(g,v.sibling),v=i(v,E.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=Sd(E,g.mode,k),v.return=g,g=v}return o(g);case Or:return O=E._init,P(g,v,O(E._payload),k)}if(ua(E))return T(g,v,E,k);if(Go(E))return x(g,v,E,k);au(g,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,E),v.return=g,g=v):(n(g,v),v=Td(E,g.mode,k),v.return=g,g=v),o(g)):n(g,v)}return P}var no=eE(!0),tE=eE(!1),gl={},$n=yi(gl),Ba=yi(gl),Ha=yi(gl);function Oi(t){if(t===gl)throw Error(X(174));return t}function sm(t,e){switch(Re(Ha,e),Re(Ba,t),Re($n,gl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rf(e,t)}be($n),Re($n,e)}function ro(){be($n),be(Ba),be(Ha)}function nE(t){Oi(Ha.current);var e=Oi($n.current),n=rf(e,t.type);e!==n&&(Re(Ba,t),Re($n,n))}function om(t){Ba.current===t&&(be($n),be(Ba))}var Le=yi(0);function fc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gd=[];function am(){for(var t=0;t<gd.length;t++)gd[t]._workInProgressVersionPrimary=null;gd.length=0}var Du=xr.ReactCurrentDispatcher,yd=xr.ReactCurrentBatchConfig,Gi=0,Fe=null,Ze=null,it=null,pc=!1,Ta=!1,Wa=0,iC=0;function wt(){throw Error(X(321))}function lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function um(t,e,n,r,i,s){if(Gi=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Du.current=t===null||t.memoizedState===null?lC:uC,t=n(r,i),Ta){s=0;do{if(Ta=!1,Wa=0,25<=s)throw Error(X(301));s+=1,it=Ze=null,e.updateQueue=null,Du.current=cC,t=n(r,i)}while(Ta)}if(Du.current=mc,e=Ze!==null&&Ze.next!==null,Gi=0,it=Ze=Fe=null,pc=!1,e)throw Error(X(300));return t}function cm(){var t=Wa!==0;return Wa=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Fe.memoizedState=it=t:it=it.next=t,it}function fn(){if(Ze===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=it===null?Fe.memoizedState:it.next;if(e!==null)it=e,Ze=t;else{if(t===null)throw Error(X(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},it===null?Fe.memoizedState=it=t:it=it.next=t}return it}function qa(t,e){return typeof e=="function"?e(t):e}function vd(t){var e=fn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Gi&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,Fe.lanes|=h,Qi|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Rn(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Fe.lanes|=s,Qi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _d(t){var e=fn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rn(s,e.memoizedState)||($t=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rE(){}function iE(t,e){var n=Fe,r=fn(),i=e(),s=!Rn(r.memoizedState,i);if(s&&(r.memoizedState=i,$t=!0),r=r.queue,hm(aE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Ka(9,oE.bind(null,n,r,i,e),void 0,null),st===null)throw Error(X(349));Gi&30||sE(n,e,i)}return i}function sE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oE(t,e,n,r){e.value=n,e.getSnapshot=r,lE(e)&&uE(t)}function aE(t,e,n){return n(function(){lE(e)&&uE(t)})}function lE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function uE(t){var e=yr(t,1);e!==null&&xn(e,t,1,-1)}function av(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:t},e.queue=t,t=t.dispatch=aC.bind(null,Fe,t),[e.memoizedState,t]}function Ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cE(){return fn().memoizedState}function bu(t,e,n,r){var i=On();Fe.flags|=t,i.memoizedState=Ka(1|e,n,void 0,r===void 0?null:r)}function nh(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,r!==null&&lm(r,o.deps)){i.memoizedState=Ka(e,n,s,r);return}}Fe.flags|=t,i.memoizedState=Ka(1|e,n,s,r)}function lv(t,e){return bu(8390656,8,t,e)}function hm(t,e){return nh(2048,8,t,e)}function hE(t,e){return nh(4,2,t,e)}function dE(t,e){return nh(4,4,t,e)}function fE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pE(t,e,n){return n=n!=null?n.concat([t]):null,nh(4,4,fE.bind(null,e,t),n)}function dm(){}function mE(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gE(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yE(t,e,n){return Gi&21?(Rn(n,e)||(n=ww(),Fe.lanes|=n,Qi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function sC(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=yd.transition;yd.transition={};try{t(!1),e()}finally{Se=n,yd.transition=r}}function vE(){return fn().memoizedState}function oC(t,e,n){var r=ni(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_E(t))wE(e,n);else if(n=Xw(t,e,n,r),n!==null){var i=Dt();xn(n,t,r,i),EE(n,e,r)}}function aC(t,e,n){var r=ni(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_E(t))wE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Rn(a,o)){var u=e.interleaved;u===null?(i.next=i,rm(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Xw(t,e,i,r),n!==null&&(i=Dt(),xn(n,t,r,i),EE(n,e,r))}}function _E(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function wE(t,e){Ta=pc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bp(t,n)}}var mc={readContext:dn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},lC={readContext:dn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:dn,useEffect:lv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bu(4194308,4,fE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bu(4194308,4,t,e)},useInsertionEffect:function(t,e){return bu(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=On();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oC.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:av,useDebugValue:dm,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=av(!1),e=t[0];return t=sC.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,i=On();if(Me){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),st===null)throw Error(X(349));Gi&30||sE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,lv(aE.bind(null,r,s,t),[t]),r.flags|=2048,Ka(9,oE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=On(),e=st.identifierPrefix;if(Me){var n=lr,r=ar;n=(r&~(1<<32-In(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uC={readContext:dn,useCallback:mE,useContext:dn,useEffect:hm,useImperativeHandle:pE,useInsertionEffect:hE,useLayoutEffect:dE,useMemo:gE,useReducer:vd,useRef:cE,useState:function(){return vd(qa)},useDebugValue:dm,useDeferredValue:function(t){var e=fn();return yE(e,Ze.memoizedState,t)},useTransition:function(){var t=vd(qa)[0],e=fn().memoizedState;return[t,e]},useMutableSource:rE,useSyncExternalStore:iE,useId:vE,unstable_isNewReconciler:!1},cC={readContext:dn,useCallback:mE,useContext:dn,useEffect:hm,useImperativeHandle:pE,useInsertionEffect:hE,useLayoutEffect:dE,useMemo:gE,useReducer:_d,useRef:cE,useState:function(){return _d(qa)},useDebugValue:dm,useDeferredValue:function(t){var e=fn();return Ze===null?e.memoizedState=t:yE(e,Ze.memoizedState,t)},useTransition:function(){var t=_d(qa)[0],e=fn().memoizedState;return[t,e]},useMutableSource:rE,useSyncExternalStore:iE,useId:vE,unstable_isNewReconciler:!1};function io(t,e){try{var n="",r=e;do n+=Fx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hC=typeof WeakMap=="function"?WeakMap:Map;function TE(t,e,n){n=pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yc||(yc=!0,Lf=r),Cf(t,e)},n}function SE(t,e,n){n=pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Cf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Cf(t,e),typeof r!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xC.bind(null,t,e,n),e.then(t,t))}function cv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pr(-1,1),e.tag=2,ei(n,e,1))),n.lanes|=1),t)}var dC=xr.ReactCurrentOwner,$t=!1;function Nt(t,e,n,r){e.child=t===null?tE(e,null,n,r):no(e,t.child,n,r)}function dv(t,e,n,r,i){n=n.render;var s=e.ref;return Bs(e,i),r=um(t,e,n,r,s,i),n=cm(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vr(t,e,i)):(Me&&n&&Yp(e),e.flags|=1,Nt(t,e,r,i),e.child)}function fv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!wm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,IE(t,e,s,r,i)):(t=Lu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ua,n(o,r)&&t.ref===e.ref)return vr(t,e,i)}return e.flags|=1,t=ri(s,r),t.ref=e.ref,t.return=e,e.child=t}function IE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ua(s,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,vr(t,e,i)}return Rf(t,e,n,r,i)}function xE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Ls,Gt),Gt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Ls,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Re(Ls,Gt),Gt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Re(Ls,Gt),Gt|=r;return Nt(t,e,i,n),e.child}function AE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rf(t,e,n,r,i){var s=Bt(n)?qi:At.current;return s=eo(e,s),Bs(e,i),n=um(t,e,n,r,s,i),r=cm(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vr(t,e,i)):(Me&&r&&Yp(e),e.flags|=1,Nt(t,e,n,i),e.child)}function pv(t,e,n,r,i){if(Bt(n)){var s=!0;ac(e)}else s=!1;if(Bs(e,i),e.stateNode===null)Mu(t,e),Zw(e,n,r),Af(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=dn(c):(c=Bt(n)?qi:At.current,c=eo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&sv(e,o,r,c),Lr=!1;var p=e.memoizedState;o.state=p,dc(e,r,o,i),u=e.memoizedState,a!==r||p!==u||jt.current||Lr?(typeof h=="function"&&(xf(e,n,h,r),u=e.memoizedState),(a=Lr||iv(e,n,a,r,p,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Yw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_n(e.type,a),o.props=c,d=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=dn(u):(u=Bt(n)?qi:At.current,u=eo(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==u)&&sv(e,o,r,u),Lr=!1,p=e.memoizedState,o.state=p,dc(e,r,o,i);var T=e.memoizedState;a!==d||p!==T||jt.current||Lr?(typeof y=="function"&&(xf(e,n,y,r),T=e.memoizedState),(c=Lr||iv(e,n,c,r,p,T,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Pf(t,e,n,r,s,i)}function Pf(t,e,n,r,i,s){AE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zy(e,n,!1),vr(t,e,s);r=e.stateNode,dC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=no(e,t.child,null,s),e.child=no(e,null,a,s)):Nt(t,e,a,s),e.memoizedState=r.state,i&&Zy(e,n,!0),e.child}function CE(t){var e=t.stateNode;e.pendingContext?Jy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jy(t,e.context,!1),sm(t,e.containerInfo)}function mv(t,e,n,r,i){return to(),Zp(i),e.flags|=256,Nt(t,e,n,r),e.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function Nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function RE(t,e,n){var r=e.pendingProps,i=Le.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Re(Le,i&1),t===null)return Sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sh(o,r,0,null),t=ji(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Nf(n),e.memoizedState=kf,t):fm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return fC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ri(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ri(a,s):(s=ji(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Nf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=kf,r}return s=t.child,t=s.sibling,r=ri(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fm(t,e){return e=sh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lu(t,e,n,r){return r!==null&&Zp(r),no(e,t.child,null,n),t=fm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wd(Error(X(422))),lu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=sh({mode:"visible",children:r.children},i,0,null),s=ji(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&no(e,t.child,null,o),e.child.memoizedState=Nf(o),e.memoizedState=kf,s);if(!(e.mode&1))return lu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(X(419)),r=wd(s,r,void 0),lu(t,e,o,r)}if(a=(o&t.childLanes)!==0,$t||a){if(r=st,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,yr(t,i),xn(r,t,i,-1))}return _m(),r=wd(Error(X(421))),lu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qt=Zr(i.nextSibling),Yt=e,Me=!0,En=null,t!==null&&(an[ln++]=ar,an[ln++]=lr,an[ln++]=Ki,ar=t.id,lr=t.overflow,Ki=e),e=fm(e,r.children),e.flags|=4096,e)}function gv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),If(t.return,e,n)}function Ed(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function PE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Nt(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gv(t,n,e);else if(t.tag===19)gv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(Le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ed(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ed(e,!0,n,null,s);break;case"together":Ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pC(t,e,n){switch(e.tag){case 3:CE(e),to();break;case 5:nE(e);break;case 1:Bt(e.type)&&ac(e);break;case 4:sm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Re(cc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?RE(t,e,n):(Re(Le,Le.current&1),t=vr(t,e,n),t!==null?t.sibling:null);Re(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return PE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,xE(t,e,n)}return vr(t,e,n)}var kE,Df,NE,DE;kE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Df=function(){};NE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Oi($n.current);var s=null;switch(n){case"input":i=Zd(t,i),r=Zd(t,r),s=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),s=[];break;case"textarea":i=nf(t,i),r=nf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sc)}sf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Da.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Da.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&De("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};DE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ea(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mC(t,e,n){var r=e.pendingProps;switch(Jp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Bt(e.type)&&oc(),Et(e),null;case 3:return r=e.stateNode,ro(),be(jt),be(At),am(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ou(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&($f(En),En=null))),Df(t,e),Et(e),null;case 5:om(e);var i=Oi(Ha.current);if(n=e.type,t!==null&&e.stateNode!=null)NE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Et(e),null}if(t=Oi($n.current),ou(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Fn]=e,r[ja]=s,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(i=0;i<ha.length;i++)De(ha[i],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":xy(r,s),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},De("invalid",r);break;case"textarea":Cy(r,s),De("invalid",r)}sf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&su(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&su(r.textContent,a,t),i=["children",""+a]):Da.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":Yl(r),Ay(r,s,!0);break;case"textarea":Yl(r),Ry(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Fn]=e,t[ja]=r,kE(t,e,!1,!1),e.stateNode=t;e:{switch(o=of(n,r),n){case"dialog":De("cancel",t),De("close",t),i=r;break;case"iframe":case"object":case"embed":De("load",t),i=r;break;case"video":case"audio":for(i=0;i<ha.length;i++)De(ha[i],t);i=r;break;case"source":De("error",t),i=r;break;case"img":case"image":case"link":De("error",t),De("load",t),i=r;break;case"details":De("toggle",t),i=r;break;case"input":xy(t,r),i=Zd(t,r),De("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),De("invalid",t);break;case"textarea":Cy(t,r),i=nf(t,r),De("invalid",t);break;default:i=r}sf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?lw(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ow(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ba(t,u):typeof u=="number"&&ba(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Da.hasOwnProperty(s)?u!=null&&s==="onScroll"&&De("scroll",t):u!=null&&Lp(t,s,u,o))}switch(n){case"input":Yl(t),Ay(t,r,!1);break;case"textarea":Yl(t),Ry(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Us(t,!!r.multiple,s,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)DE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Oi(Ha.current),Oi($n.current),ou(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fn]=e,(s=r.nodeValue!==n)&&(t=Yt,t!==null))switch(t.tag){case 3:su(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&su(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fn]=e,e.stateNode=r}return Et(e),null;case 13:if(be(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Qt!==null&&e.mode&1&&!(e.flags&128))Qw(),to(),e.flags|=98560,s=!1;else if(s=ou(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Fn]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else En!==null&&($f(En),En=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?tt===0&&(tt=3):_m())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return ro(),Df(t,e),t===null&&$a(e.stateNode.containerInfo),Et(e),null;case 10:return nm(e.type._context),Et(e),null;case 17:return Bt(e.type)&&oc(),Et(e),null;case 19:if(be(Le),s=e.memoizedState,s===null)return Et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ea(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fc(t),o!==null){for(e.flags|=128,ea(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(Le,Le.current&1|2),e.child}t=t.sibling}s.tail!==null&&qe()>so&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304)}else{if(!r)if(t=fc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return Et(e),null}else 2*qe()-s.renderingStartTime>so&&n!==1073741824&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qe(),e.sibling=null,n=Le.current,Re(Le,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return vm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function gC(t,e){switch(Jp(e),e.tag){case 1:return Bt(e.type)&&oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),be(jt),be(At),am(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return om(e),null;case 13:if(be(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Le),null;case 4:return ro(),null;case 10:return nm(e.type._context),null;case 22:case 23:return vm(),null;case 24:return null;default:return null}}var uu=!1,It=!1,yC=typeof WeakSet=="function"?WeakSet:Set,te=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function bf(t,e,n){try{n()}catch(r){Be(t,e,r)}}var yv=!1;function vC(t,e){if(gf=nc,t=Ow(),Xp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)p=d,d=y;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(u=o),(y=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yf={focusedElem:t,selectionRange:n},nc=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var x=T.memoizedProps,P=T.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:_n(e.type,x),P);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(k){Be(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return T=yv,yv=!1,T}function Sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bf(e,n,s)}i=i.next}while(i!==r)}}function rh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bE(t){var e=t.alternate;e!==null&&(t.alternate=null,bE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fn],delete e[ja],delete e[wf],delete e[eC],delete e[tC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ME(t){return t.tag===5||t.tag===3||t.tag===4}function vv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ME(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sc));else if(r!==4&&(t=t.child,t!==null))for(Vf(t,e,n),t=t.sibling;t!==null;)Vf(t,e,n),t=t.sibling}function Of(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Of(t,e,n),t=t.sibling;t!==null;)Of(t,e,n),t=t.sibling}var ut=null,wn=!1;function br(t,e,n){for(n=n.child;n!==null;)VE(t,e,n),n=n.sibling}function VE(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(Qc,n)}catch{}switch(n.tag){case 5:It||Os(n,e);case 6:var r=ut,i=wn;ut=null,br(t,e,n),ut=r,wn=i,ut!==null&&(wn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(wn?(t=ut,n=n.stateNode,t.nodeType===8?pd(t.parentNode,n):t.nodeType===1&&pd(t,n),La(t)):pd(ut,n.stateNode));break;case 4:r=ut,i=wn,ut=n.stateNode.containerInfo,wn=!0,br(t,e,n),ut=r,wn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bf(n,e,o),i=i.next}while(i!==r)}br(t,e,n);break;case 1:if(!It&&(Os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Be(n,e,a)}br(t,e,n);break;case 21:br(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,br(t,e,n),It=r):br(t,e,n);break;default:br(t,e,n)}}function _v(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yC),e.forEach(function(r){var i=CC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,wn=!1;break e;case 3:ut=a.stateNode.containerInfo,wn=!0;break e;case 4:ut=a.stateNode.containerInfo,wn=!0;break e}a=a.return}if(ut===null)throw Error(X(160));VE(s,o,i),ut=null,wn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OE(e,t),e=e.sibling}function OE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Vn(t),r&4){try{Sa(3,t,t.return),rh(3,t)}catch(x){Be(t,t.return,x)}try{Sa(5,t,t.return)}catch(x){Be(t,t.return,x)}}break;case 1:vn(e,t),Vn(t),r&512&&n!==null&&Os(n,n.return);break;case 5:if(vn(e,t),Vn(t),r&512&&n!==null&&Os(n,n.return),t.flags&32){var i=t.stateNode;try{ba(i,"")}catch(x){Be(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&rw(i,s),of(a,o);var c=of(a,s);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];h==="style"?lw(i,d):h==="dangerouslySetInnerHTML"?ow(i,d):h==="children"?ba(i,d):Lp(i,h,d,c)}switch(a){case"input":ef(i,s);break;case"textarea":iw(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Us(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?Us(i,!!s.multiple,s.defaultValue,!0):Us(i,!!s.multiple,s.multiple?[]:"",!1))}i[ja]=s}catch(x){Be(t,t.return,x)}}break;case 6:if(vn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Be(t,t.return,x)}}break;case 3:if(vn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(e.containerInfo)}catch(x){Be(t,t.return,x)}break;case 4:vn(e,t),Vn(t);break;case 13:vn(e,t),Vn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gm=qe())),r&4&&_v(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(It=(c=It)||h,vn(e,t),It=c):vn(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(te=t,h=t.child;h!==null;){for(d=te=h;te!==null;){switch(p=te,y=p.child,p.tag){case 0:case 11:case 14:case 15:Sa(4,p,p.return);break;case 1:Os(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(x){Be(r,n,x)}}break;case 5:Os(p,p.return);break;case 22:if(p.memoizedState!==null){Ev(d);continue}}y!==null?(y.return=p,te=y):Ev(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=aw("display",o))}catch(x){Be(t,t.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Be(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vn(e,t),Vn(t),r&4&&_v(t);break;case 21:break;default:vn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ME(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ba(i,""),r.flags&=-33);var s=vv(t);Of(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vv(t);Vf(t,a,o);break;default:throw Error(X(161))}}catch(u){Be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _C(t,e,n){te=t,LE(t)}function LE(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||uu;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||It;a=uu;var c=It;if(uu=o,(It=u)&&!c)for(te=i;te!==null;)o=te,u=o.child,o.tag===22&&o.memoizedState!==null?Tv(i):u!==null?(u.return=o,te=u):Tv(i);for(;s!==null;)te=s,LE(s),s=s.sibling;te=i,uu=a,It=c}wv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):wv(t)}}function wv(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||rh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&La(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}It||e.flags&512&&Mf(e)}catch(p){Be(e,e.return,p)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function Ev(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function Tv(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rh(4,e)}catch(u){Be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Be(e,i,u)}}var s=e.return;try{Mf(e)}catch(u){Be(e,s,u)}break;case 5:var o=e.return;try{Mf(e)}catch(u){Be(e,o,u)}}}catch(u){Be(e,e.return,u)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var wC=Math.ceil,gc=xr.ReactCurrentDispatcher,pm=xr.ReactCurrentOwner,hn=xr.ReactCurrentBatchConfig,_e=0,st=null,Ge=null,dt=0,Gt=0,Ls=yi(0),tt=0,Ga=null,Qi=0,ih=0,mm=0,Ia=null,Ft=null,gm=0,so=1/0,ir=null,yc=!1,Lf=null,ti=null,cu=!1,Kr=null,vc=0,xa=0,Ff=null,Vu=-1,Ou=0;function Dt(){return _e&6?qe():Vu!==-1?Vu:Vu=qe()}function ni(t){return t.mode&1?_e&2&&dt!==0?dt&-dt:rC.transition!==null?(Ou===0&&(Ou=ww()),Ou):(t=Se,t!==0||(t=window.event,t=t===void 0?16:Cw(t.type)),t):1}function xn(t,e,n,r){if(50<xa)throw xa=0,Ff=null,Error(X(185));fl(t,n,r),(!(_e&2)||t!==st)&&(t===st&&(!(_e&2)&&(ih|=n),tt===4&&zr(t,dt)),Ht(t,r),n===1&&_e===0&&!(e.mode&1)&&(so=qe()+500,eh&&vi()))}function Ht(t,e){var n=t.callbackNode;rA(t,e);var r=tc(t,t===st?dt:0);if(r===0)n!==null&&Ny(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ny(n),e===1)t.tag===0?nC(Sv.bind(null,t)):qw(Sv.bind(null,t)),JA(function(){!(_e&6)&&vi()}),n=null;else{switch(Ew(r)){case 1:n=jp;break;case 4:n=vw;break;case 16:n=ec;break;case 536870912:n=_w;break;default:n=ec}n=WE(n,FE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FE(t,e){if(Vu=-1,Ou=0,_e&6)throw Error(X(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var r=tc(t,t===st?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_c(t,r);else{e=r;var i=_e;_e|=2;var s=$E();(st!==t||dt!==e)&&(ir=null,so=qe()+500,zi(t,e));do try{SC();break}catch(a){UE(t,a)}while(!0);tm(),gc.current=s,_e=i,Ge!==null?e=0:(st=null,dt=0,e=tt)}if(e!==0){if(e===2&&(i=hf(t),i!==0&&(r=i,e=Uf(t,i))),e===1)throw n=Ga,zi(t,0),zr(t,r),Ht(t,qe()),n;if(e===6)zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!EC(i)&&(e=_c(t,r),e===2&&(s=hf(t),s!==0&&(r=s,e=Uf(t,s))),e===1))throw n=Ga,zi(t,0),zr(t,r),Ht(t,qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Ni(t,Ft,ir);break;case 3:if(zr(t,r),(r&130023424)===r&&(e=gm+500-qe(),10<e)){if(tc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_f(Ni.bind(null,t,Ft,ir),e);break}Ni(t,Ft,ir);break;case 4:if(zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-In(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wC(r/1960))-r,10<r){t.timeoutHandle=_f(Ni.bind(null,t,Ft,ir),r);break}Ni(t,Ft,ir);break;case 5:Ni(t,Ft,ir);break;default:throw Error(X(329))}}}return Ht(t,qe()),t.callbackNode===n?FE.bind(null,t):null}function Uf(t,e){var n=Ia;return t.current.memoizedState.isDehydrated&&(zi(t,e).flags|=256),t=_c(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&$f(e)),t}function $f(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function EC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(t,e){for(e&=~mm,e&=~ih,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-In(e),r=1<<n;t[n]=-1,e&=~r}}function Sv(t){if(_e&6)throw Error(X(327));Hs();var e=tc(t,0);if(!(e&1))return Ht(t,qe()),null;var n=_c(t,e);if(t.tag!==0&&n===2){var r=hf(t);r!==0&&(e=r,n=Uf(t,r))}if(n===1)throw n=Ga,zi(t,0),zr(t,e),Ht(t,qe()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,Ft,ir),Ht(t,qe()),null}function ym(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(so=qe()+500,eh&&vi())}}function Xi(t){Kr!==null&&Kr.tag===0&&!(_e&6)&&Hs();var e=_e;_e|=1;var n=hn.transition,r=Se;try{if(hn.transition=null,Se=1,t)return t()}finally{Se=r,hn.transition=n,_e=e,!(_e&6)&&vi()}}function vm(){Gt=Ls.current,be(Ls)}function zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YA(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(Jp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oc();break;case 3:ro(),be(jt),be(At),am();break;case 5:om(r);break;case 4:ro();break;case 13:be(Le);break;case 19:be(Le);break;case 10:nm(r.type._context);break;case 22:case 23:vm()}n=n.return}if(st=t,Ge=t=ri(t.current,null),dt=Gt=e,tt=0,Ga=null,mm=ih=Qi=0,Ft=Ia=null,Vi!==null){for(e=0;e<Vi.length;e++)if(n=Vi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vi=null}return t}function UE(t,e){do{var n=Ge;try{if(tm(),Du.current=mc,pc){for(var r=Fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pc=!1}if(Gi=0,it=Ze=Fe=null,Ta=!1,Wa=0,pm.current=null,n===null||n.return===null){tt=1,Ga=e,Ge=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=dt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=cv(o);if(y!==null){y.flags&=-257,hv(y,o,a,s,e),y.mode&1&&uv(s,c,e),e=y,u=c;var T=e.updateQueue;if(T===null){var x=new Set;x.add(u),e.updateQueue=x}else T.add(u);break e}else{if(!(e&1)){uv(s,c,e),_m();break e}u=Error(X(426))}}else if(Me&&a.mode&1){var P=cv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),hv(P,o,a,s,e),Zp(io(u,a));break e}}s=u=io(u,a),tt!==4&&(tt=2),Ia===null?Ia=[s]:Ia.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=TE(s,u,e);nv(s,g);break e;case 1:a=u;var v=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ti===null||!ti.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=SE(s,a,e);nv(s,k);break e}}s=s.return}while(s!==null)}jE(n)}catch(M){e=M,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function $E(){var t=gc.current;return gc.current=mc,t===null?mc:t}function _m(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!(Qi&268435455)&&!(ih&268435455)||zr(st,dt)}function _c(t,e){var n=_e;_e|=2;var r=$E();(st!==t||dt!==e)&&(ir=null,zi(t,e));do try{TC();break}catch(i){UE(t,i)}while(!0);if(tm(),_e=n,gc.current=r,Ge!==null)throw Error(X(261));return st=null,dt=0,tt}function TC(){for(;Ge!==null;)zE(Ge)}function SC(){for(;Ge!==null&&!Gx();)zE(Ge)}function zE(t){var e=HE(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?jE(t):Ge=e,pm.current=null}function jE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gC(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ge=null;return}}else if(n=mC(n,e,Gt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);tt===0&&(tt=5)}function Ni(t,e,n){var r=Se,i=hn.transition;try{hn.transition=null,Se=1,IC(t,e,n,r)}finally{hn.transition=i,Se=r}return null}function IC(t,e,n,r){do Hs();while(Kr!==null);if(_e&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iA(t,s),t===st&&(Ge=st=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cu||(cu=!0,WE(ec,function(){return Hs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hn.transition,hn.transition=null;var o=Se;Se=1;var a=_e;_e|=4,pm.current=null,vC(t,n),OE(n,t),HA(yf),nc=!!gf,yf=gf=null,t.current=n,_C(n),Qx(),_e=a,Se=o,hn.transition=s}else t.current=n;if(cu&&(cu=!1,Kr=t,vc=i),s=t.pendingLanes,s===0&&(ti=null),Jx(n.stateNode),Ht(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yc)throw yc=!1,t=Lf,Lf=null,t;return vc&1&&t.tag!==0&&Hs(),s=t.pendingLanes,s&1?t===Ff?xa++:(xa=0,Ff=t):xa=0,vi(),null}function Hs(){if(Kr!==null){var t=Ew(vc),e=hn.transition,n=Se;try{if(hn.transition=null,Se=16>t?16:t,Kr===null)var r=!1;else{if(t=Kr,Kr=null,vc=0,_e&6)throw Error(X(331));var i=_e;for(_e|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(te=c;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:Sa(8,h,s)}var d=h.child;if(d!==null)d.return=h,te=d;else for(;te!==null;){h=te;var p=h.sibling,y=h.return;if(bE(h),h===c){te=null;break}if(p!==null){p.return=y,te=p;break}te=y}}}var T=s.alternate;if(T!==null){var x=T.child;if(x!==null){T.child=null;do{var P=x.sibling;x.sibling=null,x=P}while(x!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sa(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,te=g;break e}te=s.return}}var v=t.current;for(te=v;te!==null;){o=te;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,te=E;else e:for(o=v;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:rh(9,a)}}catch(M){Be(a,a.return,M)}if(a===o){te=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,te=k;break e}te=a.return}}if(_e=i,vi(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(Qc,t)}catch{}r=!0}return r}finally{Se=n,hn.transition=e}}return!1}function Iv(t,e,n){e=io(n,e),e=TE(t,e,1),t=ei(t,e,1),e=Dt(),t!==null&&(fl(t,1,e),Ht(t,e))}function Be(t,e,n){if(t.tag===3)Iv(t,t,n);else for(;e!==null;){if(e.tag===3){Iv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ti===null||!ti.has(r))){t=io(n,t),t=SE(e,t,1),e=ei(e,t,1),t=Dt(),e!==null&&(fl(e,1,t),Ht(e,t));break}}e=e.return}}function xC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(dt&n)===n&&(tt===4||tt===3&&(dt&130023424)===dt&&500>qe()-gm?zi(t,0):mm|=n),Ht(t,e)}function BE(t,e){e===0&&(t.mode&1?(e=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):e=1);var n=Dt();t=yr(t,e),t!==null&&(fl(t,e,n),Ht(t,n))}function AC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BE(t,n)}function CC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),BE(t,n)}var HE;HE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,pC(t,e,n);$t=!!(t.flags&131072)}else $t=!1,Me&&e.flags&1048576&&Kw(e,uc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mu(t,e),t=e.pendingProps;var i=eo(e,At.current);Bs(e,n),i=um(null,e,r,t,i,n);var s=cm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bt(r)?(s=!0,ac(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,im(e),i.updater=th,e.stateNode=i,i._reactInternals=e,Af(e,r,t,n),e=Pf(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&Yp(e),Nt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=PC(r),t=_n(r,t),i){case 0:e=Rf(null,e,r,t,n);break e;case 1:e=pv(null,e,r,t,n);break e;case 11:e=dv(null,e,r,t,n);break e;case 14:e=fv(null,e,r,_n(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Rf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),pv(t,e,r,i,n);case 3:e:{if(CE(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Yw(t,e),dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=io(Error(X(423)),e),e=mv(t,e,r,n,i);break e}else if(r!==i){i=io(Error(X(424)),e),e=mv(t,e,r,n,i);break e}else for(Qt=Zr(e.stateNode.containerInfo.firstChild),Yt=e,Me=!0,En=null,n=tE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===i){e=vr(t,e,n);break e}Nt(t,e,r,n)}e=e.child}return e;case 5:return nE(e),t===null&&Sf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vf(r,i)?o=null:s!==null&&vf(r,s)&&(e.flags|=32),AE(t,e),Nt(t,e,o,n),e.child;case 6:return t===null&&Sf(e),null;case 13:return RE(t,e,n);case 4:return sm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),dv(t,e,r,i,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Re(cc,r._currentValue),r._currentValue=o,s!==null)if(Rn(s.value,o)){if(s.children===i.children&&!jt.current){e=vr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=pr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),If(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),If(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bs(e,n),i=dn(i),r=r(i),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),fv(t,e,r,i,n);case 15:return IE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Mu(t,e),e.tag=1,Bt(r)?(t=!0,ac(e)):t=!1,Bs(e,n),Zw(e,r,i),Af(e,r,i,n),Pf(null,e,r,!0,t,n);case 19:return PE(t,e,n);case 22:return xE(t,e,n)}throw Error(X(156,e.tag))};function WE(t,e){return yw(t,e)}function RC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new RC(t,e,n,r)}function wm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PC(t){if(typeof t=="function")return wm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Up)return 11;if(t===$p)return 14}return 2}function ri(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")wm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cs:return ji(n.children,i,s,e);case Fp:o=8,i|=8;break;case Qd:return t=un(12,n,e,i|2),t.elementType=Qd,t.lanes=s,t;case Xd:return t=un(13,n,e,i),t.elementType=Xd,t.lanes=s,t;case Yd:return t=un(19,n,e,i),t.elementType=Yd,t.lanes=s,t;case ew:return sh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J_:o=10;break e;case Z_:o=9;break e;case Up:o=11;break e;case $p:o=14;break e;case Or:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=un(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ji(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function sh(t,e,n,r){return t=un(22,t,r,e),t.elementType=ew,t.lanes=n,t.stateNode={isHidden:!1},t}function Td(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function Sd(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Em(t,e,n,r,i,s,o,a,u){return t=new kC(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},im(s),t}function NC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qE(t){if(!t)return di;t=t._reactInternals;e:{if(os(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Bt(n))return Ww(t,n,e)}return e}function KE(t,e,n,r,i,s,o,a,u){return t=Em(n,r,!0,t,i,s,o,a,u),t.context=qE(null),n=t.current,r=Dt(),i=ni(n),s=pr(r,i),s.callback=e??null,ei(n,s,i),t.current.lanes=i,fl(t,i,r),Ht(t,r),t}function oh(t,e,n,r){var i=e.current,s=Dt(),o=ni(i);return n=qE(n),e.context===null?e.context=n:e.pendingContext=n,e=pr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ei(i,e,o),t!==null&&(xn(t,i,o,s),Nu(t,i,o)),o}function wc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tm(t,e){xv(t,e),(t=t.alternate)&&xv(t,e)}function DC(){return null}var GE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sm(t){this._internalRoot=t}ah.prototype.render=Sm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));oh(t,e,null,null)};ah.prototype.unmount=Sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xi(function(){oh(null,t,null,null)}),e[gr]=null}};function ah(t){this._internalRoot=t}ah.prototype.unstable_scheduleHydration=function(t){if(t){var e=Iw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$r.length&&e!==0&&e<$r[n].priority;n++);$r.splice(n,0,t),n===0&&Aw(t)}};function Im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Av(){}function bC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=wc(o);s.call(c)}}var o=KE(e,r,t,0,null,!1,!1,"",Av);return t._reactRootContainer=o,t[gr]=o.current,$a(t.nodeType===8?t.parentNode:t),Xi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=wc(u);a.call(c)}}var u=Em(t,0,!1,null,null,!1,!1,"",Av);return t._reactRootContainer=u,t[gr]=u.current,$a(t.nodeType===8?t.parentNode:t),Xi(function(){oh(e,u,n,r)}),u}function uh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=wc(o);a.call(u)}}oh(e,o,t,i)}else o=bC(n,e,t,i,r);return wc(o)}Tw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ca(e.pendingLanes);n!==0&&(Bp(e,n|1),Ht(e,qe()),!(_e&6)&&(so=qe()+500,vi()))}break;case 13:Xi(function(){var r=yr(t,1);if(r!==null){var i=Dt();xn(r,t,1,i)}}),Tm(t,1)}};Hp=function(t){if(t.tag===13){var e=yr(t,134217728);if(e!==null){var n=Dt();xn(e,t,134217728,n)}Tm(t,134217728)}};Sw=function(t){if(t.tag===13){var e=ni(t),n=yr(t,e);if(n!==null){var r=Dt();xn(n,t,e,r)}Tm(t,e)}};Iw=function(){return Se};xw=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};lf=function(t,e,n){switch(e){case"input":if(ef(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Zc(r);if(!i)throw Error(X(90));nw(r),ef(r,i)}}}break;case"textarea":iw(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};hw=ym;dw=Xi;var MC={usingClientEntryPoint:!1,Events:[ml,Ns,Zc,uw,cw,ym]},ta={findFiberByHostInstance:Mi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},VC={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mw(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||DC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Qc=hu.inject(VC),Un=hu}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MC;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Im(e))throw Error(X(200));return NC(t,e,null,n)};tn.createRoot=function(t,e){if(!Im(t))throw Error(X(299));var n=!1,r="",i=GE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Em(t,1,!1,null,null,n,!1,r,i),t[gr]=e.current,$a(t.nodeType===8?t.parentNode:t),new Sm(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=mw(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return Xi(t)};tn.hydrate=function(t,e,n){if(!lh(e))throw Error(X(200));return uh(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!Im(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=GE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=KE(e,null,t,1,n??null,i,!1,s,o),t[gr]=e.current,$a(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ah(e)};tn.render=function(t,e,n){if(!lh(e))throw Error(X(200));return uh(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!lh(t))throw Error(X(40));return t._reactRootContainer?(Xi(function(){uh(null,null,t,!1,function(){t._reactRootContainer=null,t[gr]=null})}),!0):!1};tn.unstable_batchedUpdates=ym;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lh(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return uh(t,e,n,!1,r)};tn.version="18.2.0-next-9e3b772b8-20220608";function QE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QE)}catch(t){console.error(t)}}QE(),K_.exports=tn;var XE=K_.exports,Cv=XE;Kd.createRoot=Cv.createRoot,Kd.hydrateRoot=Cv.hydrateRoot;function rn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=rn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var YE={exports:{}},JE={},ZE={exports:{}},e1={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo=D;function OC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var LC=typeof Object.is=="function"?Object.is:OC,FC=oo.useState,UC=oo.useEffect,$C=oo.useLayoutEffect,zC=oo.useDebugValue;function jC(t,e){var n=e(),r=FC({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return $C(function(){i.value=n,i.getSnapshot=e,Id(i)&&s({inst:i})},[t,n,e]),UC(function(){return Id(i)&&s({inst:i}),t(function(){Id(i)&&s({inst:i})})},[t]),zC(n),n}function Id(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!LC(t,n)}catch{return!0}}function BC(t,e){return e()}var HC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BC:jC;e1.useSyncExternalStore=oo.useSyncExternalStore!==void 0?oo.useSyncExternalStore:HC;ZE.exports=e1;var WC=ZE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch=D,qC=WC;function KC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var GC=typeof Object.is=="function"?Object.is:KC,QC=qC.useSyncExternalStore,XC=ch.useRef,YC=ch.useEffect,JC=ch.useMemo,ZC=ch.useDebugValue;JE.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=XC(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=JC(function(){function u(y){if(!c){if(c=!0,h=y,y=r(y),i!==void 0&&o.hasValue){var T=o.value;if(i(T,y))return d=T}return d=y}if(T=d,GC(h,y))return T;var x=r(y);return i!==void 0&&i(T,x)?T:(h=y,d=x)}var c=!1,h,d,p=n===void 0?null:n;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,n,r,i]);var a=QC(t,s[0],s[1]);return YC(function(){o.hasValue=!0,o.value=a},[a]),ZC(a),a};YE.exports=JE;var eR=YE.exports;const t1=O_(eR),tR={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Rv=t=>{let e;const n=new Set,r=(h,d)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const y=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(T=>T(e,y))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(tR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,u);return u},n1=t=>t?Rv(t):Rv,{useDebugValue:nR}=K,{useSyncExternalStoreWithSelector:rR}=t1,iR=t=>t;function r1(t,e=iR,n){const r=rR(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return nR(r),r}const Pv=(t,e)=>{const n=n1(t),r=(i,s=e)=>r1(n,i,s);return Object.assign(r,n),r},sR=(t,e)=>t?Pv(t,e):Pv;function Ct(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var oR={value:()=>{}};function hh(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Fu(n)}function Fu(t){this._=t}function aR(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Fu.prototype=hh.prototype={constructor:Fu,on:function(t,e){var n=this._,r=aR(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=lR(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=kv(n[i],t.name,e);else if(e==null)for(i in n)n[i]=kv(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Fu(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function lR(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function kv(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=oR,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var zf="http://www.w3.org/1999/xhtml";const Nv={svg:"http://www.w3.org/2000/svg",xhtml:zf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dh(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Nv.hasOwnProperty(e)?{space:Nv[e],local:t}:t}function uR(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===zf&&e.documentElement.namespaceURI===zf?e.createElement(t):e.createElementNS(n,t)}}function cR(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function i1(t){var e=dh(t);return(e.local?cR:uR)(e)}function hR(){}function xm(t){return t==null?hR:function(){return this.querySelector(t)}}function dR(t){typeof t!="function"&&(t=xm(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),u,c,h=0;h<o;++h)(u=s[h])&&(c=t.call(u,u.__data__,h,s))&&("__data__"in u&&(c.__data__=u.__data__),a[h]=c);return new en(r,this._parents)}function fR(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function pR(){return[]}function s1(t){return t==null?pR:function(){return this.querySelectorAll(t)}}function mR(t){return function(){return fR(t.apply(this,arguments))}}function gR(t){typeof t=="function"?t=mR(t):t=s1(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,u,c=0;c<a;++c)(u=o[c])&&(r.push(t.call(u,u.__data__,c,o)),i.push(u));return new en(r,i)}function o1(t){return function(){return this.matches(t)}}function a1(t){return function(e){return e.matches(t)}}var yR=Array.prototype.find;function vR(t){return function(){return yR.call(this.children,t)}}function _R(){return this.firstElementChild}function wR(t){return this.select(t==null?_R:vR(typeof t=="function"?t:a1(t)))}var ER=Array.prototype.filter;function TR(){return Array.from(this.children)}function SR(t){return function(){return ER.call(this.children,t)}}function IR(t){return this.selectAll(t==null?TR:SR(typeof t=="function"?t:a1(t)))}function xR(t){typeof t!="function"&&(t=o1(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,c=0;c<o;++c)(u=s[c])&&t.call(u,u.__data__,c,s)&&a.push(u);return new en(r,this._parents)}function l1(t){return new Array(t.length)}function AR(){return new en(this._enter||this._groups.map(l1),this._parents)}function Ec(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ec.prototype={constructor:Ec,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function CR(t){return function(){return t}}function RR(t,e,n,r,i,s){for(var o=0,a,u=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new Ec(t,s[o]);for(;o<u;++o)(a=e[o])&&(i[o]=a)}function PR(t,e,n,r,i,s,o){var a,u,c=new Map,h=e.length,d=s.length,p=new Array(h),y;for(a=0;a<h;++a)(u=e[a])&&(p[a]=y=o.call(u,u.__data__,a,e)+"",c.has(y)?i[a]=u:c.set(y,u));for(a=0;a<d;++a)y=o.call(t,s[a],a,s)+"",(u=c.get(y))?(r[a]=u,u.__data__=s[a],c.delete(y)):n[a]=new Ec(t,s[a]);for(a=0;a<h;++a)(u=e[a])&&c.get(p[a])===u&&(i[a]=u)}function kR(t){return t.__data__}function NR(t,e){if(!arguments.length)return Array.from(this,kR);var n=e?PR:RR,r=this._parents,i=this._groups;typeof t!="function"&&(t=CR(t));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),c=0;c<s;++c){var h=r[c],d=i[c],p=d.length,y=DR(t.call(h,h&&h.__data__,c,r)),T=y.length,x=a[c]=new Array(T),P=o[c]=new Array(T),g=u[c]=new Array(p);n(h,d,x,P,g,y,e);for(var v=0,E=0,k,M;v<T;++v)if(k=x[v]){for(v>=E&&(E=v+1);!(M=P[E])&&++E<T;);k._next=M||null}}return o=new en(o,r),o._enter=a,o._exit=u,o}function DR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bR(){return new en(this._exit||this._groups.map(l1),this._parents)}function MR(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function VR(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var c=n[u],h=r[u],d=c.length,p=a[u]=new Array(d),y,T=0;T<d;++T)(y=c[T]||h[T])&&(p[T]=y);for(;u<i;++u)a[u]=n[u];return new en(a,this._parents)}function OR(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function LR(t){t||(t=FR);function e(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),c,h=0;h<a;++h)(c=o[h])&&(u[h]=c);u.sort(e)}return new en(i,this._parents).order()}function FR(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function UR(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function $R(){return Array.from(this)}function zR(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function jR(){let t=0;for(const e of this)++t;return t}function BR(){return!this.node()}function HR(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function WR(t){return function(){this.removeAttribute(t)}}function qR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function KR(t,e){return function(){this.setAttribute(t,e)}}function GR(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function QR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function XR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function YR(t,e){var n=dh(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?qR:WR:typeof e=="function"?n.local?XR:QR:n.local?GR:KR)(n,e))}function u1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function JR(t){return function(){this.style.removeProperty(t)}}function ZR(t,e,n){return function(){this.style.setProperty(t,e,n)}}function eP(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function tP(t,e,n){return arguments.length>1?this.each((e==null?JR:typeof e=="function"?eP:ZR)(t,e,n??"")):ao(this.node(),t)}function ao(t,e){return t.style.getPropertyValue(e)||u1(t).getComputedStyle(t,null).getPropertyValue(e)}function nP(t){return function(){delete this[t]}}function rP(t,e){return function(){this[t]=e}}function iP(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function sP(t,e){return arguments.length>1?this.each((e==null?nP:typeof e=="function"?iP:rP)(t,e)):this.node()[t]}function c1(t){return t.trim().split(/^|\s+/)}function Am(t){return t.classList||new h1(t)}function h1(t){this._node=t,this._names=c1(t.getAttribute("class")||"")}h1.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function d1(t,e){for(var n=Am(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function f1(t,e){for(var n=Am(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function oP(t){return function(){d1(this,t)}}function aP(t){return function(){f1(this,t)}}function lP(t,e){return function(){(e.apply(this,arguments)?d1:f1)(this,t)}}function uP(t,e){var n=c1(t+"");if(arguments.length<2){for(var r=Am(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?lP:e?oP:aP)(n,e))}function cP(){this.textContent=""}function hP(t){return function(){this.textContent=t}}function dP(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function fP(t){return arguments.length?this.each(t==null?cP:(typeof t=="function"?dP:hP)(t)):this.node().textContent}function pP(){this.innerHTML=""}function mP(t){return function(){this.innerHTML=t}}function gP(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function yP(t){return arguments.length?this.each(t==null?pP:(typeof t=="function"?gP:mP)(t)):this.node().innerHTML}function vP(){this.nextSibling&&this.parentNode.appendChild(this)}function _P(){return this.each(vP)}function wP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function EP(){return this.each(wP)}function TP(t){var e=typeof t=="function"?t:i1(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function SP(){return null}function IP(t,e){var n=typeof t=="function"?t:i1(t),r=e==null?SP:typeof e=="function"?e:xm(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xP(){var t=this.parentNode;t&&t.removeChild(this)}function AP(){return this.each(xP)}function CP(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function RP(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function PP(t){return this.select(t?RP:CP)}function kP(t){return arguments.length?this.property("__data__",t):this.node().__data__}function NP(t){return function(e){t.call(this,e,this.__data__)}}function DP(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function bP(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function MP(t,e,n){return function(){var r=this.__on,i,s=NP(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function VP(t,e,n){var r=DP(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,h;u<c;++u)for(i=0,h=a[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(a=e?MP:bP,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function p1(t,e,n){var r=u1(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function OP(t,e){return function(){return p1(this,t,e)}}function LP(t,e){return function(){return p1(this,t,e.apply(this,arguments))}}function FP(t,e){return this.each((typeof e=="function"?LP:OP)(t,e))}function*UP(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var m1=[null];function en(t,e){this._groups=t,this._parents=e}function yl(){return new en([[document.documentElement]],m1)}function $P(){return this}en.prototype=yl.prototype={constructor:en,select:dR,selectAll:gR,selectChild:wR,selectChildren:IR,filter:xR,data:NR,enter:AR,exit:bR,join:MR,merge:VR,selection:$P,order:OR,sort:LR,call:UR,nodes:$R,node:zR,size:jR,empty:BR,each:HR,attr:YR,style:tP,property:sP,classed:uP,text:fP,html:yP,raise:_P,lower:EP,append:TP,insert:IP,remove:AP,clone:PP,datum:kP,on:VP,dispatch:FP,[Symbol.iterator]:UP};function Tn(t){return typeof t=="string"?new en([[document.querySelector(t)]],[document.documentElement]):new en([[t]],m1)}function zP(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ln(t,e){if(t=zP(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const jP={passive:!1},Qa={capture:!0,passive:!1};function xd(t){t.stopImmediatePropagation()}function Ws(t){t.preventDefault(),t.stopImmediatePropagation()}function g1(t){var e=t.document.documentElement,n=Tn(t).on("dragstart.drag",Ws,Qa);"onselectstart"in e?n.on("selectstart.drag",Ws,Qa):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function y1(t,e){var n=t.document.documentElement,r=Tn(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ws,Qa),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const du=t=>()=>t;function jf(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:u,dy:c,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}jf.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function BP(t){return!t.ctrlKey&&!t.button}function HP(){return this.parentNode}function WP(t,e){return e??{x:t.x,y:t.y}}function qP(){return navigator.maxTouchPoints||"ontouchstart"in this}function KP(){var t=BP,e=HP,n=WP,r=qP,i={},s=hh("start","drag","end"),o=0,a,u,c,h,d=0;function p(k){k.on("mousedown.drag",y).filter(r).on("touchstart.drag",P).on("touchmove.drag",g,jP).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(k,M){if(!(h||!t.call(this,k,M))){var O=E(this,e.call(this,k,M),k,M,"mouse");O&&(Tn(k.view).on("mousemove.drag",T,Qa).on("mouseup.drag",x,Qa),g1(k.view),xd(k),c=!1,a=k.clientX,u=k.clientY,O("start",k))}}function T(k){if(Ws(k),!c){var M=k.clientX-a,O=k.clientY-u;c=M*M+O*O>d}i.mouse("drag",k)}function x(k){Tn(k.view).on("mousemove.drag mouseup.drag",null),y1(k.view,c),Ws(k),i.mouse("end",k)}function P(k,M){if(t.call(this,k,M)){var O=k.changedTouches,I=e.call(this,k,M),_=O.length,S,R;for(S=0;S<_;++S)(R=E(this,I,k,M,O[S].identifier,O[S]))&&(xd(k),R("start",k,O[S]))}}function g(k){var M=k.changedTouches,O=M.length,I,_;for(I=0;I<O;++I)(_=i[M[I].identifier])&&(Ws(k),_("drag",k,M[I]))}function v(k){var M=k.changedTouches,O=M.length,I,_;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),I=0;I<O;++I)(_=i[M[I].identifier])&&(xd(k),_("end",k,M[I]))}function E(k,M,O,I,_,S){var R=s.copy(),C=Ln(S||O,M),N,w,b;if((b=n.call(k,new jf("beforestart",{sourceEvent:O,target:p,identifier:_,active:o,x:C[0],y:C[1],dx:0,dy:0,dispatch:R}),I))!=null)return N=b.x-C[0]||0,w=b.y-C[1]||0,function j($,W,L){var V=C,z;switch($){case"start":i[_]=j,z=o++;break;case"end":delete i[_],--o;case"drag":C=Ln(L||W,M),z=o;break}R.call($,k,new jf($,{sourceEvent:W,subject:b,target:p,identifier:_,active:z,x:C[0]+N,y:C[1]+w,dx:C[0]-V[0],dy:C[1]-V[1],dispatch:R}),I)}}return p.filter=function(k){return arguments.length?(t=typeof k=="function"?k:du(!!k),p):t},p.container=function(k){return arguments.length?(e=typeof k=="function"?k:du(k),p):e},p.subject=function(k){return arguments.length?(n=typeof k=="function"?k:du(k),p):n},p.touchable=function(k){return arguments.length?(r=typeof k=="function"?k:du(!!k),p):r},p.on=function(){var k=s.on.apply(s,arguments);return k===s?p:k},p.clickDistance=function(k){return arguments.length?(d=(k=+k)*k,p):Math.sqrt(d)},p}function Cm(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function v1(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function vl(){}var Xa=.7,Tc=1/Xa,qs="\\s*([+-]?\\d+)\\s*",Ya="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GP=/^#([0-9a-f]{3,8})$/,QP=new RegExp(`^rgb\\(${qs},${qs},${qs}\\)$`),XP=new RegExp(`^rgb\\(${zn},${zn},${zn}\\)$`),YP=new RegExp(`^rgba\\(${qs},${qs},${qs},${Ya}\\)$`),JP=new RegExp(`^rgba\\(${zn},${zn},${zn},${Ya}\\)$`),ZP=new RegExp(`^hsl\\(${Ya},${zn},${zn}\\)$`),ek=new RegExp(`^hsla\\(${Ya},${zn},${zn},${Ya}\\)$`),Dv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cm(vl,Ja,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bv,formatHex:bv,formatHex8:tk,formatHsl:nk,formatRgb:Mv,toString:Mv});function bv(){return this.rgb().formatHex()}function tk(){return this.rgb().formatHex8()}function nk(){return _1(this).formatHsl()}function Mv(){return this.rgb().formatRgb()}function Ja(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=GP.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Vv(e):n===3?new zt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=QP.exec(t))?new zt(e[1],e[2],e[3],1):(e=XP.exec(t))?new zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=YP.exec(t))?fu(e[1],e[2],e[3],e[4]):(e=JP.exec(t))?fu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ZP.exec(t))?Fv(e[1],e[2]/100,e[3]/100,1):(e=ek.exec(t))?Fv(e[1],e[2]/100,e[3]/100,e[4]):Dv.hasOwnProperty(t)?Vv(Dv[t]):t==="transparent"?new zt(NaN,NaN,NaN,0):null}function Vv(t){return new zt(t>>16&255,t>>8&255,t&255,1)}function fu(t,e,n,r){return r<=0&&(t=e=n=NaN),new zt(t,e,n,r)}function rk(t){return t instanceof vl||(t=Ja(t)),t?(t=t.rgb(),new zt(t.r,t.g,t.b,t.opacity)):new zt}function Bf(t,e,n,r){return arguments.length===1?rk(t):new zt(t,e,n,r??1)}function zt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Cm(zt,Bf,v1(vl,{brighter(t){return t=t==null?Tc:Math.pow(Tc,t),new zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xa:Math.pow(Xa,t),new zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zt(Bi(this.r),Bi(this.g),Bi(this.b),Sc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ov,formatHex:Ov,formatHex8:ik,formatRgb:Lv,toString:Lv}));function Ov(){return`#${Li(this.r)}${Li(this.g)}${Li(this.b)}`}function ik(){return`#${Li(this.r)}${Li(this.g)}${Li(this.b)}${Li((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lv(){const t=Sc(this.opacity);return`${t===1?"rgb(":"rgba("}${Bi(this.r)}, ${Bi(this.g)}, ${Bi(this.b)}${t===1?")":`, ${t})`}`}function Sc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Bi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Li(t){return t=Bi(t),(t<16?"0":"")+t.toString(16)}function Fv(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Sn(t,e,n,r)}function _1(t){if(t instanceof Sn)return new Sn(t.h,t.s,t.l,t.opacity);if(t instanceof vl||(t=Ja(t)),!t)return new Sn;if(t instanceof Sn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Sn(o,a,u,t.opacity)}function sk(t,e,n,r){return arguments.length===1?_1(t):new Sn(t,e,n,r??1)}function Sn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Cm(Sn,sk,v1(vl,{brighter(t){return t=t==null?Tc:Math.pow(Tc,t),new Sn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xa:Math.pow(Xa,t),new Sn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new zt(Ad(t>=240?t-240:t+120,i,r),Ad(t,i,r),Ad(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Sn(Uv(this.h),pu(this.s),pu(this.l),Sc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Sc(this.opacity);return`${t===1?"hsl(":"hsla("}${Uv(this.h)}, ${pu(this.s)*100}%, ${pu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Uv(t){return t=(t||0)%360,t<0?t+360:t}function pu(t){return Math.max(0,Math.min(1,t||0))}function Ad(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const w1=t=>()=>t;function ok(t,e){return function(n){return t+n*e}}function ak(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function lk(t){return(t=+t)==1?E1:function(e,n){return n-e?ak(e,n,t):w1(isNaN(e)?n:e)}}function E1(t,e){var n=e-t;return n?ok(t,n):w1(isNaN(t)?e:t)}const $v=function t(e){var n=lk(e);function r(i,s){var o=n((i=Bf(i)).r,(s=Bf(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),c=E1(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=a(h),i.b=u(h),i.opacity=c(h),i+""}}return r.gamma=t,r}(1);function Fr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Hf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cd=new RegExp(Hf.source,"g");function uk(t){return function(){return t}}function ck(t){return function(e){return t(e)+""}}function hk(t,e){var n=Hf.lastIndex=Cd.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(t=t+"",e=e+"";(r=Hf.exec(t))&&(i=Cd.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Fr(r,i)})),n=Cd.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?ck(u[0].x):uk(e):(e=u.length,function(c){for(var h=0,d;h<e;++h)a[(d=u[h]).i]=d.x(c);return a.join("")})}var zv=180/Math.PI,Wf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function T1(t,e,n,r,i,s){var o,a,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*zv,skewX:Math.atan(u)*zv,scaleX:o,scaleY:a}}var mu;function dk(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Wf:T1(e.a,e.b,e.c,e.d,e.e,e.f)}function fk(t){return t==null||(mu||(mu=document.createElementNS("http://www.w3.org/2000/svg","g")),mu.setAttribute("transform",t),!(t=mu.transform.baseVal.consolidate()))?Wf:(t=t.matrix,T1(t.a,t.b,t.c,t.d,t.e,t.f))}function S1(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,h,d,p,y,T){if(c!==d||h!==p){var x=y.push("translate(",null,e,null,n);T.push({i:x-4,x:Fr(c,d)},{i:x-2,x:Fr(h,p)})}else(d||p)&&y.push("translate("+d+e+p+n)}function o(c,h,d,p){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Fr(c,h)})):h&&d.push(i(d)+"rotate("+h+r)}function a(c,h,d,p){c!==h?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Fr(c,h)}):h&&d.push(i(d)+"skewX("+h+r)}function u(c,h,d,p,y,T){if(c!==d||h!==p){var x=y.push(i(y)+"scale(",null,",",null,")");T.push({i:x-4,x:Fr(c,d)},{i:x-2,x:Fr(h,p)})}else(d!==1||p!==1)&&y.push(i(y)+"scale("+d+","+p+")")}return function(c,h){var d=[],p=[];return c=t(c),h=t(h),s(c.translateX,c.translateY,h.translateX,h.translateY,d,p),o(c.rotate,h.rotate,d,p),a(c.skewX,h.skewX,d,p),u(c.scaleX,c.scaleY,h.scaleX,h.scaleY,d,p),c=h=null,function(y){for(var T=-1,x=p.length,P;++T<x;)d[(P=p[T]).i]=P.x(y);return d.join("")}}}var pk=S1(dk,"px, ","px)","deg)"),mk=S1(fk,", ",")",")"),gk=1e-12;function jv(t){return((t=Math.exp(t))+1/t)/2}function yk(t){return((t=Math.exp(t))-1/t)/2}function vk(t){return((t=Math.exp(2*t))-1)/(t+1)}const _k=function t(e,n,r){function i(s,o){var a=s[0],u=s[1],c=s[2],h=o[0],d=o[1],p=o[2],y=h-a,T=d-u,x=y*y+T*T,P,g;if(x<gk)g=Math.log(p/c)/e,P=function(I){return[a+I*y,u+I*T,c*Math.exp(e*I*g)]};else{var v=Math.sqrt(x),E=(p*p-c*c+r*x)/(2*c*n*v),k=(p*p-c*c-r*x)/(2*p*n*v),M=Math.log(Math.sqrt(E*E+1)-E),O=Math.log(Math.sqrt(k*k+1)-k);g=(O-M)/e,P=function(I){var _=I*g,S=jv(M),R=c/(n*v)*(S*vk(e*_+M)-yk(M));return[a+R*y,u+R*T,c*S/jv(e*_+M)]}}return P.duration=g*1e3*e/Math.SQRT2,P}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return t(o,a,u)},i}(Math.SQRT2,2,4);var lo=0,da=0,na=0,I1=1e3,Ic,fa,xc=0,Yi=0,fh=0,Za=typeof performance=="object"&&performance.now?performance:Date,x1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Rm(){return Yi||(x1(wk),Yi=Za.now()+fh)}function wk(){Yi=0}function Ac(){this._call=this._time=this._next=null}Ac.prototype=A1.prototype={constructor:Ac,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Rm():+n)+(e==null?0:+e),!this._next&&fa!==this&&(fa?fa._next=this:Ic=this,fa=this),this._call=t,this._time=n,qf()},stop:function(){this._call&&(this._call=null,this._time=1/0,qf())}};function A1(t,e,n){var r=new Ac;return r.restart(t,e,n),r}function Ek(){Rm(),++lo;for(var t=Ic,e;t;)(e=Yi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--lo}function Bv(){Yi=(xc=Za.now())+fh,lo=da=0;try{Ek()}finally{lo=0,Sk(),Yi=0}}function Tk(){var t=Za.now(),e=t-xc;e>I1&&(fh-=e,xc=t)}function Sk(){for(var t,e=Ic,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ic=n);fa=t,qf(r)}function qf(t){if(!lo){da&&(da=clearTimeout(da));var e=t-Yi;e>24?(t<1/0&&(da=setTimeout(Bv,t-Za.now()-fh)),na&&(na=clearInterval(na))):(na||(xc=Za.now(),na=setInterval(Tk,I1)),lo=1,x1(Bv))}}function Hv(t,e,n){var r=new Ac;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Ik=hh("start","end","cancel","interrupt"),xk=[],C1=0,Wv=1,Kf=2,Uu=3,qv=4,Gf=5,$u=6;function ph(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Ak(t,n,{name:e,index:r,group:i,on:Ik,tween:xk,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:C1})}function Pm(t,e){var n=Pn(t,e);if(n.state>C1)throw new Error("too late; already scheduled");return n}function Qn(t,e){var n=Pn(t,e);if(n.state>Uu)throw new Error("too late; already running");return n}function Pn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ak(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=A1(s,0,n.time);function s(c){n.state=Wv,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var h,d,p,y;if(n.state!==Wv)return u();for(h in r)if(y=r[h],y.name===n.name){if(y.state===Uu)return Hv(o);y.state===qv?(y.state=$u,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete r[h]):+h<e&&(y.state=$u,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete r[h])}if(Hv(function(){n.state===Uu&&(n.state=qv,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Kf,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Kf){for(n.state=Uu,i=new Array(p=n.tween.length),h=0,d=-1;h<p;++h)(y=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=y);i.length=d+1}}function a(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Gf,1),d=-1,p=i.length;++d<p;)i[d].call(t,h);n.state===Gf&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=$u,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function zu(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Kf&&r.state<Gf,r.state=$u,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Ck(t){return this.each(function(){zu(this,t)})}function Rk(t,e){var n,r;return function(){var i=Qn(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Pk(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Qn(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=a;break}u===c&&i.push(a)}s.tween=i}}function kk(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Pn(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Rk:Pk)(n,t,e))}function km(t,e,n){var r=t._id;return t.each(function(){var i=Qn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Pn(i,r).value[e]}}function R1(t,e){var n;return(typeof e=="number"?Fr:e instanceof Ja?$v:(n=Ja(e))?(e=n,$v):hk)(t,e)}function Nk(t){return function(){this.removeAttribute(t)}}function Dk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bk(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function Mk(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function Vk(t,e,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function Ok(t,e,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function Lk(t,e){var n=dh(t),r=n==="transform"?mk:R1;return this.attrTween(t,typeof e=="function"?(n.local?Ok:Vk)(n,r,km(this,"attr."+t,e)):e==null?(n.local?Dk:Nk)(n):(n.local?Mk:bk)(n,r,e))}function Fk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Uk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function $k(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Uk(t,s)),n}return i._value=e,i}function zk(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Fk(t,s)),n}return i._value=e,i}function jk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=dh(t);return this.tween(n,(r.local?$k:zk)(r,e))}function Bk(t,e){return function(){Pm(this,t).delay=+e.apply(this,arguments)}}function Hk(t,e){return e=+e,function(){Pm(this,t).delay=e}}function Wk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Bk:Hk)(e,t)):Pn(this.node(),e).delay}function qk(t,e){return function(){Qn(this,t).duration=+e.apply(this,arguments)}}function Kk(t,e){return e=+e,function(){Qn(this,t).duration=e}}function Gk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qk:Kk)(e,t)):Pn(this.node(),e).duration}function Qk(t,e){if(typeof e!="function")throw new Error;return function(){Qn(this,t).ease=e}}function Xk(t){var e=this._id;return arguments.length?this.each(Qk(e,t)):Pn(this.node(),e).ease}function Yk(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Qn(this,t).ease=n}}function Jk(t){if(typeof t!="function")throw new Error;return this.each(Yk(this._id,t))}function Zk(t){typeof t!="function"&&(t=o1(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,c=0;c<o;++c)(u=s[c])&&t.call(u,u.__data__,c,s)&&a.push(u);return new _r(r,this._parents,this._name,this._id)}function eN(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=e[a],c=n[a],h=u.length,d=o[a]=new Array(h),p,y=0;y<h;++y)(p=u[y]||c[y])&&(d[y]=p);for(;a<r;++a)o[a]=e[a];return new _r(o,this._parents,this._name,this._id)}function tN(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function nN(t,e,n){var r,i,s=tN(e)?Pm:Qn;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function rN(t,e){var n=this._id;return arguments.length<2?Pn(this.node(),n).on.on(t):this.each(nN(n,t,e))}function iN(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function sN(){return this.on("end.remove",iN(this._id))}function oN(t){var e=this._name,n=this._id;typeof t!="function"&&(t=xm(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,c=s[o]=new Array(u),h,d,p=0;p<u;++p)(h=a[p])&&(d=t.call(h,h.__data__,p,a))&&("__data__"in h&&(d.__data__=h.__data__),c[p]=d,ph(c[p],e,n,p,c,Pn(h,n)));return new _r(s,this._parents,e,n)}function aN(t){var e=this._name,n=this._id;typeof t!="function"&&(t=s1(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],c=u.length,h,d=0;d<c;++d)if(h=u[d]){for(var p=t.call(h,h.__data__,d,u),y,T=Pn(h,n),x=0,P=p.length;x<P;++x)(y=p[x])&&ph(y,e,n,x,p,T);s.push(p),o.push(h)}return new _r(s,o,e,n)}var lN=yl.prototype.constructor;function uN(){return new lN(this._groups,this._parents)}function cN(t,e){var n,r,i;return function(){var s=ao(this,t),o=(this.style.removeProperty(t),ao(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function P1(t){return function(){this.style.removeProperty(t)}}function hN(t,e,n){var r,i=n+"",s;return function(){var o=ao(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function dN(t,e,n){var r,i,s;return function(){var o=ao(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),ao(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a))}}function fN(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var u=Qn(this,t),c=u.on,h=u.value[s]==null?a||(a=P1(e)):void 0;(c!==n||i!==h)&&(r=(n=c).copy()).on(o,i=h),u.on=r}}function pN(t,e,n){var r=(t+="")=="transform"?pk:R1;return e==null?this.styleTween(t,cN(t,r)).on("end.style."+t,P1(t)):typeof e=="function"?this.styleTween(t,dN(t,r,km(this,"style."+t,e))).each(fN(this._id,t)):this.styleTween(t,hN(t,r,e),n).on("end.style."+t,null)}function mN(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function gN(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&mN(t,o,n)),r}return s._value=e,s}function yN(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,gN(t,e,n??""))}function vN(t){return function(){this.textContent=t}}function _N(t){return function(){var e=t(this);this.textContent=e??""}}function wN(t){return this.tween("text",typeof t=="function"?_N(km(this,"text",t)):vN(t==null?"":t+""))}function EN(t){return function(e){this.textContent=t.call(this,e)}}function TN(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&EN(i)),e}return r._value=t,r}function SN(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,TN(t))}function IN(){for(var t=this._name,e=this._id,n=k1(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,c=0;c<a;++c)if(u=o[c]){var h=Pn(u,e);ph(u,t,n,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new _r(r,this._parents,t,n)}function xN(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var c=Qn(this,r),h=c.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),c.on=e}),i===0&&s()})}var AN=0;function _r(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function k1(){return++AN}var rr=yl.prototype;_r.prototype={constructor:_r,select:oN,selectAll:aN,selectChild:rr.selectChild,selectChildren:rr.selectChildren,filter:Zk,merge:eN,selection:uN,transition:IN,call:rr.call,nodes:rr.nodes,node:rr.node,size:rr.size,empty:rr.empty,each:rr.each,on:rN,attr:Lk,attrTween:jk,style:pN,styleTween:yN,text:wN,textTween:SN,remove:sN,tween:kk,delay:Wk,duration:Gk,ease:Xk,easeVarying:Jk,end:xN,[Symbol.iterator]:rr[Symbol.iterator]};function CN(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var RN={time:null,delay:0,duration:250,ease:CN};function PN(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function kN(t){var e,n;t instanceof _r?(e=t._id,t=t._name):(e=k1(),(n=RN).time=Rm(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,c=0;c<a;++c)(u=o[c])&&ph(u,t,e,c,o,n||PN(u,e));return new _r(r,this._parents,t,e)}yl.prototype.interrupt=Ck;yl.prototype.transition=kN;const gu=t=>()=>t;function NN(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ur(t,e,n){this.k=t,this.x=e,this.y=n}ur.prototype={constructor:ur,scale:function(t){return t===1?this:new ur(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ur(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ii=new ur(1,0,0);ur.prototype;function Rd(t){t.stopImmediatePropagation()}function ra(t){t.preventDefault(),t.stopImmediatePropagation()}function DN(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function bN(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Kv(){return this.__zoom||ii}function MN(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function VN(){return navigator.maxTouchPoints||"ontouchstart"in this}function ON(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function LN(){var t=DN,e=bN,n=ON,r=MN,i=VN,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,u=_k,c=hh("start","zoom","end"),h,d,p,y=500,T=150,x=0,P=10;function g(b){b.property("__zoom",Kv).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",R).filter(i).on("touchstart.zoom",C).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",w).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(b,j,$,W){var L=b.selection?b.selection():b;L.property("__zoom",Kv),b!==L?M(b,j,$,W):L.interrupt().each(function(){O(this,arguments).event(W).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},g.scaleBy=function(b,j,$,W){g.scaleTo(b,function(){var L=this.__zoom.k,V=typeof j=="function"?j.apply(this,arguments):j;return L*V},$,W)},g.scaleTo=function(b,j,$,W){g.transform(b,function(){var L=e.apply(this,arguments),V=this.__zoom,z=$==null?k(L):typeof $=="function"?$.apply(this,arguments):$,H=V.invert(z),q=typeof j=="function"?j.apply(this,arguments):j;return n(E(v(V,q),z,H),L,o)},$,W)},g.translateBy=function(b,j,$,W){g.transform(b,function(){return n(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof $=="function"?$.apply(this,arguments):$),e.apply(this,arguments),o)},null,W)},g.translateTo=function(b,j,$,W,L){g.transform(b,function(){var V=e.apply(this,arguments),z=this.__zoom,H=W==null?k(V):typeof W=="function"?W.apply(this,arguments):W;return n(ii.translate(H[0],H[1]).scale(z.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof $=="function"?-$.apply(this,arguments):-$),V,o)},W,L)};function v(b,j){return j=Math.max(s[0],Math.min(s[1],j)),j===b.k?b:new ur(j,b.x,b.y)}function E(b,j,$){var W=j[0]-$[0]*b.k,L=j[1]-$[1]*b.k;return W===b.x&&L===b.y?b:new ur(b.k,W,L)}function k(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function M(b,j,$,W){b.on("start.zoom",function(){O(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(W).end()}).tween("zoom",function(){var L=this,V=arguments,z=O(L,V).event(W),H=e.apply(L,V),q=$==null?k(H):typeof $=="function"?$.apply(L,V):$,Y=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),ee=L.__zoom,oe=typeof j=="function"?j.apply(L,V):j,he=u(ee.invert(q).concat(Y/ee.k),oe.invert(q).concat(Y/oe.k));return function(de){if(de===1)de=oe;else{var Te=he(de),Pe=Y/Te[2];de=new ur(Pe,q[0]-Te[0]*Pe,q[1]-Te[1]*Pe)}z.zoom(null,de)}})}function O(b,j,$){return!$&&b.__zooming||new I(b,j)}function I(b,j){this.that=b,this.args=j,this.active=0,this.sourceEvent=null,this.extent=e.apply(b,j),this.taps=0}I.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,j){return this.mouse&&b!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var j=Tn(this.that).datum();c.call(b,this.that,new NN(b,{sourceEvent:this.sourceEvent,target:g,type:b,transform:this.that.__zoom,dispatch:c}),j)}};function _(b,...j){if(!t.apply(this,arguments))return;var $=O(this,j).event(b),W=this.__zoom,L=Math.max(s[0],Math.min(s[1],W.k*Math.pow(2,r.apply(this,arguments)))),V=Ln(b);if($.wheel)($.mouse[0][0]!==V[0]||$.mouse[0][1]!==V[1])&&($.mouse[1]=W.invert($.mouse[0]=V)),clearTimeout($.wheel);else{if(W.k===L)return;$.mouse=[V,W.invert(V)],zu(this),$.start()}ra(b),$.wheel=setTimeout(z,T),$.zoom("mouse",n(E(v(W,L),$.mouse[0],$.mouse[1]),$.extent,o));function z(){$.wheel=null,$.end()}}function S(b,...j){if(p||!t.apply(this,arguments))return;var $=b.currentTarget,W=O(this,j,!0).event(b),L=Tn(b.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",Y,!0),V=Ln(b,$),z=b.clientX,H=b.clientY;g1(b.view),Rd(b),W.mouse=[V,this.__zoom.invert(V)],zu(this),W.start();function q(ee){if(ra(ee),!W.moved){var oe=ee.clientX-z,he=ee.clientY-H;W.moved=oe*oe+he*he>x}W.event(ee).zoom("mouse",n(E(W.that.__zoom,W.mouse[0]=Ln(ee,$),W.mouse[1]),W.extent,o))}function Y(ee){L.on("mousemove.zoom mouseup.zoom",null),y1(ee.view,W.moved),ra(ee),W.event(ee).end()}}function R(b,...j){if(t.apply(this,arguments)){var $=this.__zoom,W=Ln(b.changedTouches?b.changedTouches[0]:b,this),L=$.invert(W),V=$.k*(b.shiftKey?.5:2),z=n(E(v($,V),W,L),e.apply(this,j),o);ra(b),a>0?Tn(this).transition().duration(a).call(M,z,W,b):Tn(this).call(g.transform,z,W,b)}}function C(b,...j){if(t.apply(this,arguments)){var $=b.touches,W=$.length,L=O(this,j,b.changedTouches.length===W).event(b),V,z,H,q;for(Rd(b),z=0;z<W;++z)H=$[z],q=Ln(H,this),q=[q,this.__zoom.invert(q),H.identifier],L.touch0?!L.touch1&&L.touch0[2]!==q[2]&&(L.touch1=q,L.taps=0):(L.touch0=q,V=!0,L.taps=1+!!h);h&&(h=clearTimeout(h)),V&&(L.taps<2&&(d=q[0],h=setTimeout(function(){h=null},y)),zu(this),L.start())}}function N(b,...j){if(this.__zooming){var $=O(this,j).event(b),W=b.changedTouches,L=W.length,V,z,H,q;for(ra(b),V=0;V<L;++V)z=W[V],H=Ln(z,this),$.touch0&&$.touch0[2]===z.identifier?$.touch0[0]=H:$.touch1&&$.touch1[2]===z.identifier&&($.touch1[0]=H);if(z=$.that.__zoom,$.touch1){var Y=$.touch0[0],ee=$.touch0[1],oe=$.touch1[0],he=$.touch1[1],de=(de=oe[0]-Y[0])*de+(de=oe[1]-Y[1])*de,Te=(Te=he[0]-ee[0])*Te+(Te=he[1]-ee[1])*Te;z=v(z,Math.sqrt(de/Te)),H=[(Y[0]+oe[0])/2,(Y[1]+oe[1])/2],q=[(ee[0]+he[0])/2,(ee[1]+he[1])/2]}else if($.touch0)H=$.touch0[0],q=$.touch0[1];else return;$.zoom("touch",n(E(z,H,q),$.extent,o))}}function w(b,...j){if(this.__zooming){var $=O(this,j).event(b),W=b.changedTouches,L=W.length,V,z;for(Rd(b),p&&clearTimeout(p),p=setTimeout(function(){p=null},y),V=0;V<L;++V)z=W[V],$.touch0&&$.touch0[2]===z.identifier?delete $.touch0:$.touch1&&$.touch1[2]===z.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(z=Ln(z,this),Math.hypot(d[0]-z[0],d[1]-z[1])<P)){var H=Tn(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return g.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:gu(+b),g):r},g.filter=function(b){return arguments.length?(t=typeof b=="function"?b:gu(!!b),g):t},g.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:gu(!!b),g):i},g.extent=function(b){return arguments.length?(e=typeof b=="function"?b:gu([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),g):e},g.scaleExtent=function(b){return arguments.length?(s[0]=+b[0],s[1]=+b[1],g):[s[0],s[1]]},g.translateExtent=function(b){return arguments.length?(o[0][0]=+b[0][0],o[1][0]=+b[1][0],o[0][1]=+b[0][1],o[1][1]=+b[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(b){return arguments.length?(n=b,g):n},g.duration=function(b){return arguments.length?(a=+b,g):a},g.interpolate=function(b){return arguments.length?(u=b,g):u},g.on=function(){var b=c.on.apply(c,arguments);return b===c?g:b},g.clickDistance=function(b){return arguments.length?(x=(b=+b)*b,g):Math.sqrt(x)},g.tapDistance=function(b){return arguments.length?(P=+b,g):P},g}const mh=D.createContext(null),FN=mh.Provider,wr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},N1=wr.error001();function $e(t,e){const n=D.useContext(mh);if(n===null)throw new Error(N1);return r1(n,t,e)}const gt=()=>{const t=D.useContext(mh);if(t===null)throw new Error(N1);return D.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},UN=t=>t.userSelectionActive?"none":"all";function Qf({position:t,children:e,className:n,style:r,...i}){const s=$e(UN),o=`${t}`.split("-");return K.createElement("div",{className:rn(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},e)}function $N({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:K.createElement(Qf,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},K.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const zN=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:u,className:c,...h})=>{const d=D.useRef(null),[p,y]=D.useState({x:0,y:0,width:0,height:0}),T=rn(["react-flow__edge-textwrapper",c]);return D.useEffect(()=>{if(d.current){const x=d.current.getBBox();y({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:K.createElement("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:T,visibility:p.width?"visible":"hidden",...h},i&&K.createElement("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),K.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:d,style:r},n),u)};var jN=D.memo(zN);const Nm=t=>({width:t.offsetWidth,height:t.offsetHeight}),uo=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Dm=(t={x:0,y:0},e)=>({x:uo(t.x,e[0][0],e[1][0]),y:uo(t.y,e[0][1],e[1][1])}),Gv=(t,e,n)=>t<e?uo(Math.abs(t-e),1,50)/50:t>n?-uo(Math.abs(t-n),1,50)/50:0,D1=(t,e)=>{const n=Gv(t.x,35,e.width-35)*20,r=Gv(t.y,35,e.height-35)*20;return[n,r]},b1=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},BN=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),bm=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),HN=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Qv=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Xf=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},WN=t=>cn(t.width)&&cn(t.height)&&cn(t.x)&&cn(t.y),cn=t=>!isNaN(t)&&isFinite(t),Qe=Symbol.for("internals"),M1=["Enter"," ","Escape"],qN=(t,e)=>{},KN=t=>"nativeEvent"in t;function Yf(t){var i,s;const e=KN(t)?t.nativeEvent:t,n=((s=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const V1=t=>"clientX"in t,si=(t,e)=>{var s,o;const n=V1(t),r=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,i=n?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},Cc=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Io=({id:t,path:e,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:d,markerStart:p,interactionWidth:y=20})=>K.createElement(K.Fragment,null,K.createElement("path",{id:t,style:h,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:p}),y&&K.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),i&&cn(n)&&cn(r)?K.createElement(jN,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c}):null);Io.displayName="BaseEdge";function ia(t,e,n){return n===void 0?n:r=>{const i=e().edges.find(s=>s.id===t);i&&n(r,{...i})}}function O1({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function L1({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const u=t*.125+i*.375+o*.375+n*.125,c=e*.125+s*.375+a*.375+r*.125,h=Math.abs(u-t),d=Math.abs(c-e);return[u,c,h,d]}var Ji;(function(t){t.Strict="strict",t.Loose="loose"})(Ji||(Ji={}));var Fi;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Fi||(Fi={}));var co;(function(t){t.Partial="partial",t.Full="full"})(co||(co={}));var jr;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(jr||(jr={}));var Rc;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Rc||(Rc={}));var Z;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Z||(Z={}));function Xv({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Z.Left||t===Z.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function F1({sourceX:t,sourceY:e,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:s=Z.Top}){const[o,a]=Xv({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,c]=Xv({pos:s,x1:r,y1:i,x2:t,y2:e}),[h,d,p,y]=L1({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${t},${e} C${o},${a} ${u},${c} ${r},${i}`,h,d,p,y]}const Mm=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=Z.Bottom,targetPosition:s=Z.Top,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:x})=>{const[P,g,v]=F1({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return K.createElement(Io,{path:P,labelX:g,labelY:v,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:x})});Mm.displayName="SimpleBezierEdge";const Yv={[Z.Left]:{x:-1,y:0},[Z.Right]:{x:1,y:0},[Z.Top]:{x:0,y:-1},[Z.Bottom]:{x:0,y:1}},GN=({source:t,sourcePosition:e=Z.Bottom,target:n})=>e===Z.Left||e===Z.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Jv=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function QN({source:t,sourcePosition:e=Z.Bottom,target:n,targetPosition:r=Z.Top,center:i,offset:s}){const o=Yv[e],a=Yv[r],u={x:t.x+o.x*s,y:t.y+o.y*s},c={x:n.x+a.x*s,y:n.y+a.y*s},h=GN({source:u,sourcePosition:e,target:c}),d=h.x!==0?"x":"y",p=h[d];let y=[],T,x;const P={x:0,y:0},g={x:0,y:0},[v,E,k,M]=O1({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[d]*a[d]===-1){T=i.x||v,x=i.y||E;const I=[{x:T,y:u.y},{x:T,y:c.y}],_=[{x:u.x,y:x},{x:c.x,y:x}];o[d]===p?y=d==="x"?I:_:y=d==="x"?_:I}else{const I=[{x:u.x,y:c.y}],_=[{x:c.x,y:u.y}];if(d==="x"?y=o.x===p?_:I:y=o.y===p?I:_,e===r){const w=Math.abs(t[d]-n[d]);if(w<=s){const b=Math.min(s-1,s-w);o[d]===p?P[d]=(u[d]>t[d]?-1:1)*b:g[d]=(c[d]>n[d]?-1:1)*b}}if(e!==r){const w=d==="x"?"y":"x",b=o[d]===a[w],j=u[w]>c[w],$=u[w]<c[w];(o[d]===1&&(!b&&j||b&&$)||o[d]!==1&&(!b&&$||b&&j))&&(y=d==="x"?I:_)}const S={x:u.x+P.x,y:u.y+P.y},R={x:c.x+g.x,y:c.y+g.y},C=Math.max(Math.abs(S.x-y[0].x),Math.abs(R.x-y[0].x)),N=Math.max(Math.abs(S.y-y[0].y),Math.abs(R.y-y[0].y));C>=N?(T=(S.x+R.x)/2,x=y[0].y):(T=y[0].x,x=(S.y+R.y)/2)}return[[t,{x:u.x+P.x,y:u.y+P.y},...y,{x:c.x+g.x,y:c.y+g.y},n],T,x,k,M]}function XN(t,e,n,r){const i=Math.min(Jv(t,e)/2,Jv(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const c=t.x<n.x?-1:1,h=t.y<n.y?1:-1;return`L ${s+i*c},${o}Q ${s},${o} ${s},${o+i*h}`}const a=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*a},${o}`}function Jf({sourceX:t,sourceY:e,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:s=Z.Top,borderRadius:o=5,centerX:a,centerY:u,offset:c=20}){const[h,d,p,y,T]=QN({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:u},offset:c});return[h.reduce((P,g,v)=>{let E="";return v>0&&v<h.length-1?E=XN(h[v-1],g,h[v+1],o):E=`${v===0?"M":"L"}${g.x} ${g.y}`,P+=E,P},""),d,p,y,T]}const gh=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:h,sourcePosition:d=Z.Bottom,targetPosition:p=Z.Top,markerEnd:y,markerStart:T,pathOptions:x,interactionWidth:P})=>{const[g,v,E]=Jf({sourceX:t,sourceY:e,sourcePosition:d,targetX:n,targetY:r,targetPosition:p,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return K.createElement(Io,{path:g,labelX:v,labelY:E,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:y,markerStart:T,interactionWidth:P})});gh.displayName="SmoothStepEdge";const Vm=D.memo(t=>{var e;return K.createElement(gh,{...t,pathOptions:D.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});Vm.displayName="StepEdge";function YN({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,a]=O1({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,a]}const Om=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:d,markerStart:p,interactionWidth:y})=>{const[T,x,P]=YN({sourceX:t,sourceY:e,targetX:n,targetY:r});return K.createElement(Io,{path:T,labelX:x,labelY:P,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:d,markerStart:p,interactionWidth:y})});Om.displayName="StraightEdge";function yu(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Zv({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Z.Left:return[e-yu(e-r,s),n];case Z.Right:return[e+yu(r-e,s),n];case Z.Top:return[e,n-yu(n-i,s)];case Z.Bottom:return[e,n+yu(i-n,s)]}}function Lm({sourceX:t,sourceY:e,sourcePosition:n=Z.Bottom,targetX:r,targetY:i,targetPosition:s=Z.Top,curvature:o=.25}){const[a,u]=Zv({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[c,h]=Zv({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[d,p,y,T]=L1({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:h});return[`M${t},${e} C${a},${u} ${c},${h} ${r},${i}`,d,p,y,T]}const Pc=D.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:i=Z.Bottom,targetPosition:s=Z.Top,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,pathOptions:x,interactionWidth:P})=>{const[g,v,E]=Lm({sourceX:t,sourceY:e,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:x==null?void 0:x.curvature});return K.createElement(Io,{path:g,labelX:v,labelY:E,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:P})});Pc.displayName="BezierEdge";const Fm=D.createContext(null),JN=Fm.Provider;Fm.Consumer;const ZN=()=>D.useContext(Fm),e2=t=>"id"in t&&"source"in t&&"target"in t,t2=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Zf=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,n2=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),U1=(t,e)=>{if(!t.source||!t.target)return e;let n;return e2(t)?n={...t}:n={...t,id:t2(t)},n2(n,e)?e:e.concat(n)},ep=({x:t,y:e},[n,r,i],s,[o,a])=>{const u={x:(t-n)/i,y:(e-r)/i};return s?{x:o*Math.round(u.x/o),y:a*Math.round(u.y/a)}:u},$1=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),Ks=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],i={x:t.position.x-n,y:t.position.y-r};return{...i,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:i}},Um=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const{x:s,y:o}=Ks(i,e).positionAbsolute;return BN(r,bm({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return HN(n)},z1=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const u={x:(e.x-n)/i,y:(e.y-r)/i,width:e.width/i,height:e.height/i},c=[];return t.forEach(h=>{const{width:d,height:p,selectable:y=!0,hidden:T=!1}=h;if(o&&!y||T)return!1;const{positionAbsolute:x}=Ks(h,a),P={x:x.x,y:x.y,width:d||0,height:p||0},g=Xf(u,P),v=typeof d>"u"||typeof p>"u"||d===null||p===null,E=s&&g>0,k=(d||0)*(p||0);(v||E||g>=k||h.dragging)&&c.push(h)}),c},j1=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},B1=(t,e,n,r,i,s=.1)=>{const o=e/(t.width*(1+s)),a=n/(t.height*(1+s)),u=Math.min(o,a),c=uo(u,r,i),h=t.x+t.width/2,d=t.y+t.height/2,p=e/2-h*c,y=n/2-d*c;return{x:p,y,zoom:c}},Di=(t,e=0)=>t.transition().duration(e);function e0(t,e,n,r){return(e[n]||[]).reduce((i,s)=>{var o,a;return`${t.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:t.id,x:(((o=t.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function r2(t,e,n,r,i,s){const{x:o,y:a}=si(t),c=e.elementsFromPoint(o,a).find(T=>T.classList.contains("react-flow__handle"));if(c){const T=c.getAttribute("data-nodeid");if(T){const x=$m(void 0,c),P=c.getAttribute("data-handleid"),g=s({nodeId:T,id:P,type:x});if(g){const v=i.find(E=>E.nodeId===T&&E.type===x&&E.id===P);return{handle:{id:P,type:x,nodeId:T,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:g}}}}let h=[],d=1/0;if(i.forEach(T=>{const x=Math.sqrt((T.x-n.x)**2+(T.y-n.y)**2);if(x<=r){const P=s(T);x<=d&&(x<d?h=[{handle:T,validHandleResult:P}]:x===d&&h.push({handle:T,validHandleResult:P}),d=x)}}),!h.length)return{handle:null,validHandleResult:H1()};if(h.length===1)return h[0];const p=h.some(({validHandleResult:T})=>T.isValid),y=h.some(({handle:T})=>T.type==="target");return h.find(({handle:T,validHandleResult:x})=>y?T.type==="target":p?x.isValid:!0)||h[0]}const i2={source:null,target:null,sourceHandle:null,targetHandle:null},H1=()=>({handleDomNode:null,isValid:!1,connection:i2,endHandle:null});function W1(t,e,n,r,i,s,o){const a=i==="target",u=o.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...H1(),handleDomNode:u};if(u){const h=$m(void 0,u),d=u.getAttribute("data-nodeid"),p=u.getAttribute("data-handleid"),y=u.classList.contains("connectable"),T=u.classList.contains("connectableend"),x={source:a?d:n,sourceHandle:a?p:r,target:a?n:d,targetHandle:a?r:p};c.connection=x,y&&T&&(e===Ji.Strict?a&&h==="source"||!a&&h==="target":d!==n||p!==r)&&(c.endHandle={nodeId:d,handleId:p,type:h},c.isValid=s(x))}return c}function s2({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((i,s)=>{if(s[Qe]){const{handleBounds:o}=s[Qe];let a=[],u=[];o&&(a=e0(s,o,"source",`${e}-${n}-${r}`),u=e0(s,o,"target",`${e}-${n}-${r}`)),i.push(...a,...u)}return i},[])}function $m(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Pd(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function o2(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function q1({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:u,onEdgeUpdateEnd:c}){const h=b1(t.target),{connectionMode:d,domNode:p,autoPanOnConnect:y,connectionRadius:T,onConnectStart:x,panBy:P,getNodes:g,cancelConnection:v}=s();let E=0,k;const{x:M,y:O}=si(t),I=h==null?void 0:h.elementFromPoint(M,O),_=$m(u,I),S=p==null?void 0:p.getBoundingClientRect();if(!S||!_)return;let R,C=si(t,S),N=!1,w=null,b=!1,j=null;const $=s2({nodes:g(),nodeId:n,handleId:e,handleType:_}),W=()=>{if(!y)return;const[z,H]=D1(C,S);P({x:z,y:H}),E=requestAnimationFrame(W)};o({connectionPosition:C,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:_,connectionStartHandle:{nodeId:n,handleId:e,type:_},connectionEndHandle:null}),x==null||x(t,{nodeId:n,handleId:e,handleType:_});function L(z){const{transform:H}=s();C=si(z,S);const{handle:q,validHandleResult:Y}=r2(z,h,ep(C,H,!1,[1,1]),T,$,ee=>W1(ee,d,n,e,i?"target":"source",a,h));if(k=q,N||(W(),N=!0),j=Y.handleDomNode,w=Y.connection,b=Y.isValid,o({connectionPosition:k&&b?$1({x:k.x,y:k.y},H):C,connectionStatus:o2(!!k,b),connectionEndHandle:Y.endHandle}),!k&&!b&&!j)return Pd(R);w.source!==w.target&&j&&(Pd(R),R=j,j.classList.add("connecting","react-flow__handle-connecting"),j.classList.toggle("valid",b),j.classList.toggle("react-flow__handle-valid",b))}function V(z){var H,q;(k||j)&&w&&b&&(r==null||r(w)),(q=(H=s()).onConnectEnd)==null||q.call(H,z),u&&(c==null||c(z)),Pd(R),v(),cancelAnimationFrame(E),N=!1,b=!1,w=null,j=null,h.removeEventListener("mousemove",L),h.removeEventListener("mouseup",V),h.removeEventListener("touchmove",L),h.removeEventListener("touchend",V)}h.addEventListener("mousemove",L),h.addEventListener("mouseup",V),h.addEventListener("touchmove",L),h.addEventListener("touchend",V)}const t0=()=>!0,a2=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),l2=(t,e,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===n}},K1=D.forwardRef(({type:t="source",position:e=Z.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:u,className:c,onMouseDown:h,onTouchStart:d,...p},y)=>{var S,R;const T=o||null,x=t==="target",P=gt(),g=ZN(),{connectOnClick:v,noPanClassName:E}=$e(a2,Ct),{connecting:k,clickConnecting:M}=$e(l2(g,T,t),Ct);g||(R=(S=P.getState()).onError)==null||R.call(S,"010",wr.error010());const O=C=>{const{defaultEdgeOptions:N,onConnect:w,hasDefaultEdges:b}=P.getState(),j={...N,...C};if(b){const{edges:$,setEdges:W}=P.getState();W(U1(j,$))}w==null||w(j),a==null||a(j)},I=C=>{if(!g)return;const N=V1(C);i&&(N&&C.button===0||!N)&&q1({event:C,handleId:T,nodeId:g,onConnect:O,isTarget:x,getState:P.getState,setState:P.setState,isValidConnection:n||P.getState().isValidConnection||t0}),N?h==null||h(C):d==null||d(C)},_=C=>{const{onClickConnectStart:N,onClickConnectEnd:w,connectionClickStartHandle:b,connectionMode:j,isValidConnection:$}=P.getState();if(!g||!b&&!i)return;if(!b){N==null||N(C,{nodeId:g,handleId:T,handleType:t}),P.setState({connectionClickStartHandle:{nodeId:g,type:t,handleId:T}});return}const W=b1(C.target),L=n||$||t0,{connection:V,isValid:z}=W1({nodeId:g,id:T,type:t},j,b.nodeId,b.handleId||null,b.type,L,W);z&&O(V),w==null||w(C),P.setState({connectionClickStartHandle:null})};return K.createElement("div",{"data-handleid":T,"data-nodeid":g,"data-handlepos":e,"data-id":`${g}-${T}-${t}`,className:rn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,c,{source:!x,target:x,connectable:r,connectablestart:i,connectableend:s,connecting:M,connectionindicator:r&&(i&&!k||s&&k)}]),onMouseDown:I,onTouchStart:I,onClick:v?_:void 0,ref:y,...p},u)});K1.displayName="Handle";var ot=D.memo(K1);const G1=({data:t,isConnectable:e,targetPosition:n=Z.Top,sourcePosition:r=Z.Bottom})=>K.createElement(K.Fragment,null,K.createElement(ot,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,K.createElement(ot,{type:"source",position:r,isConnectable:e}));G1.displayName="DefaultNode";var tp=D.memo(G1);const Q1=({data:t,isConnectable:e,sourcePosition:n=Z.Bottom})=>K.createElement(K.Fragment,null,t==null?void 0:t.label,K.createElement(ot,{type:"source",position:n,isConnectable:e}));Q1.displayName="InputNode";var X1=D.memo(Q1);const Y1=({data:t,isConnectable:e,targetPosition:n=Z.Top})=>K.createElement(K.Fragment,null,K.createElement(ot,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);Y1.displayName="OutputNode";var J1=D.memo(Y1);const zm=()=>null;zm.displayName="GroupNode";const u2=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),vu=t=>t.id;function c2(t,e){return Ct(t.selectedNodes.map(vu),e.selectedNodes.map(vu))&&Ct(t.selectedEdges.map(vu),e.selectedEdges.map(vu))}const Z1=D.memo(({onSelectionChange:t})=>{const e=gt(),{selectedNodes:n,selectedEdges:r}=$e(u2,c2);return D.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChange.forEach(s=>s(i))},[n,r,t]),null});Z1.displayName="SelectionListener";const h2=t=>!!t.onSelectionChange;function d2({onSelectionChange:t}){const e=$e(h2);return t||e?K.createElement(Z1,{onSelectionChange:t}):null}const f2=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function _s(t,e){D.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function fe(t,e,n){D.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const p2=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:h,nodesFocusable:d,edgesFocusable:p,edgesUpdatable:y,elevateNodesOnSelect:T,minZoom:x,maxZoom:P,nodeExtent:g,onNodesChange:v,onEdgesChange:E,elementsSelectable:k,connectionMode:M,snapGrid:O,snapToGrid:I,translateExtent:_,connectOnClick:S,defaultEdgeOptions:R,fitView:C,fitViewOptions:N,onNodesDelete:w,onEdgesDelete:b,onNodeDrag:j,onNodeDragStart:$,onNodeDragStop:W,onSelectionDrag:L,onSelectionDragStart:V,onSelectionDragStop:z,noPanClassName:H,nodeOrigin:q,rfId:Y,autoPanOnConnect:ee,autoPanOnNodeDrag:oe,onError:he,connectionRadius:de,isValidConnection:Te,nodeDragThreshold:Pe})=>{const{setNodes:Ie,setEdges:Ye,setDefaultNodesAndEdges:Pt,setMinZoom:Ot,setMaxZoom:Ve,setTranslateExtent:Lt,setNodeExtent:xe,reset:yt}=$e(f2,Ct),re=gt();return D.useEffect(()=>{const kn=r==null?void 0:r.map(pn=>({...pn,...R}));return Pt(n,kn),()=>{yt()}},[]),fe("defaultEdgeOptions",R,re.setState),fe("connectionMode",M,re.setState),fe("onConnect",i,re.setState),fe("onConnectStart",s,re.setState),fe("onConnectEnd",o,re.setState),fe("onClickConnectStart",a,re.setState),fe("onClickConnectEnd",u,re.setState),fe("nodesDraggable",c,re.setState),fe("nodesConnectable",h,re.setState),fe("nodesFocusable",d,re.setState),fe("edgesFocusable",p,re.setState),fe("edgesUpdatable",y,re.setState),fe("elementsSelectable",k,re.setState),fe("elevateNodesOnSelect",T,re.setState),fe("snapToGrid",I,re.setState),fe("snapGrid",O,re.setState),fe("onNodesChange",v,re.setState),fe("onEdgesChange",E,re.setState),fe("connectOnClick",S,re.setState),fe("fitViewOnInit",C,re.setState),fe("fitViewOnInitOptions",N,re.setState),fe("onNodesDelete",w,re.setState),fe("onEdgesDelete",b,re.setState),fe("onNodeDrag",j,re.setState),fe("onNodeDragStart",$,re.setState),fe("onNodeDragStop",W,re.setState),fe("onSelectionDrag",L,re.setState),fe("onSelectionDragStart",V,re.setState),fe("onSelectionDragStop",z,re.setState),fe("noPanClassName",H,re.setState),fe("nodeOrigin",q,re.setState),fe("rfId",Y,re.setState),fe("autoPanOnConnect",ee,re.setState),fe("autoPanOnNodeDrag",oe,re.setState),fe("onError",he,re.setState),fe("connectionRadius",de,re.setState),fe("isValidConnection",Te,re.setState),fe("nodeDragThreshold",Pe,re.setState),_s(t,Ie),_s(e,Ye),_s(x,Ot),_s(P,Ve),_s(_,Lt),_s(g,xe),null},n0={display:"none"},m2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},eT="react-flow__node-desc",tT="react-flow__edge-desc",g2="react-flow__aria-live",y2=t=>t.ariaLiveMessage;function v2({rfId:t}){const e=$e(y2);return K.createElement("div",{id:`${g2}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:m2},e)}function _2({rfId:t,disableKeyboardA11y:e}){return K.createElement(K.Fragment,null,K.createElement("div",{id:`${eT}-${t}`,style:n0},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),K.createElement("div",{id:`${tT}-${t}`,style:n0},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&K.createElement(v2,{rfId:t}))}var el=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=D.useState(!1),i=D.useRef(!1),s=D.useRef(new Set([])),[o,a]=D.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(d=>typeof d=="string").map(d=>d.split("+")),h=c.reduce((d,p)=>d.concat(...p),[]);return[c,h]}return[[],[]]},[t]);return D.useEffect(()=>{const u=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||u;if(t!==null){const h=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&Yf(y))return!1;const x=i0(y.code,a);s.current.add(y[x]),r0(o,s.current,!1)&&(y.preventDefault(),r(!0))},d=y=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&Yf(y))return!1;const x=i0(y.code,a);r0(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[x]),y.key==="Meta"&&s.current.clear(),i.current=!1},p=()=>{s.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",h),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",p),()=>{c==null||c.removeEventListener("keydown",h),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",p)}}},[t,r]),n};function r0(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function i0(t,e){return e.includes(t)?"code":"key"}function nT(t,e,n,r){var o,a;if(!t.parentNode)return n;const i=e.get(t.parentNode),s=Ks(i,r);return nT(i,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((o=i[Qe])==null?void 0:o.z)??0)>(n.z??0)?((a=i[Qe])==null?void 0:a.z)??0:n.z??0},r)}function rT(t,e,n){t.forEach(r=>{var i;if(r.parentNode&&!t.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:s,y:o,z:a}=nT(r,t,{...r.position,z:((i=r[Qe])==null?void 0:i.z)??0},e);r.positionAbsolute={x:s,y:o},r[Qe].z=a,n!=null&&n[r.id]&&(r[Qe].isParent=!0)}})}function kd(t,e,n,r){const i=new Map,s={},o=r?1e3:0;return t.forEach(a=>{var p;const u=(cn(a.zIndex)?a.zIndex:0)+(a.selected?o:0),c=e.get(a.id),h={...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(s[a.parentNode]=!0);const d=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==a.type;Object.defineProperty(h,Qe,{enumerable:!1,value:{handleBounds:d||(p=c==null?void 0:c[Qe])==null?void 0:p.handleBounds,z:u}}),i.set(a.id,h)}),rT(i,n,s),i}function iT(t,e={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:u,fitViewOnInitDone:c,fitViewOnInit:h,nodeOrigin:d}=t(),p=e.initial&&!c&&h;if(a&&u&&(p||!e.initial)){const T=n().filter(P=>{var v;const g=e.includeHiddenNodes?P.width&&P.height:!P.hidden;return(v=e.nodes)!=null&&v.length?g&&e.nodes.some(E=>E.id===P.id):g}),x=T.every(P=>P.width&&P.height);if(T.length>0&&x){const P=Um(T,d),{x:g,y:v,zoom:E}=B1(P,r,i,e.minZoom??s,e.maxZoom??o,e.padding??.1),k=ii.translate(g,v).scale(E);return typeof e.duration=="number"&&e.duration>0?a.transform(Di(u,e.duration),k):a.transform(u,k),!0}}return!1}function w2(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Qe]:r[Qe],selected:n.selected})}),new Map(e)}function E2(t,e){return e.map(n=>{const r=t.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function _u({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:u,hasDefaultEdges:c}=n();t!=null&&t.length&&(u&&r({nodeInternals:w2(t,i)}),o==null||o(t)),e!=null&&e.length&&(c&&r({edges:E2(e,s)}),a==null||a(e))}const ws=()=>{},T2={zoomIn:ws,zoomOut:ws,zoomTo:ws,getZoom:()=>1,setViewport:ws,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ws,fitBounds:ws,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},S2=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),I2=()=>{const t=gt(),{d3Zoom:e,d3Selection:n}=$e(S2,Ct);return D.useMemo(()=>n&&e?{zoomIn:i=>e.scaleBy(Di(n,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(Di(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>e.scaleTo(Di(n,s==null?void 0:s.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,s)=>{const[o,a,u]=t.getState().transform,c=ii.translate(i.x??o,i.y??a).scale(i.zoom??u);e.transform(Di(n,s==null?void 0:s.duration),c)},getViewport:()=>{const[i,s,o]=t.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>iT(t.getState,i),setCenter:(i,s,o)=>{const{width:a,height:u,maxZoom:c}=t.getState(),h=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,d=a/2-i*h,p=u/2-s*h,y=ii.translate(d,p).scale(h);e.transform(Di(n,o==null?void 0:o.duration),y)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:u,maxZoom:c}=t.getState(),{x:h,y:d,zoom:p}=B1(i,o,a,u,c,(s==null?void 0:s.padding)??.1),y=ii.translate(h,d).scale(p);e.transform(Di(n,s==null?void 0:s.duration),y)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ep(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:u}=t.getState();if(!u)return i;const{x:c,y:h}=u.getBoundingClientRect(),d={x:i.x-c,y:i.y-h};return ep(d,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=t.getState();if(!o)return i;const{x:a,y:u}=o.getBoundingClientRect(),c=$1(i,s);return{x:c.x+a,y:c.y+u}},viewportInitialized:!0}:T2,[e,n])};function jm(){const t=I2(),e=gt(),n=D.useCallback(()=>e.getState().getNodes().map(x=>({...x})),[]),r=D.useCallback(x=>e.getState().nodeInternals.get(x),[]),i=D.useCallback(()=>{const{edges:x=[]}=e.getState();return x.map(P=>({...P}))},[]),s=D.useCallback(x=>{const{edges:P=[]}=e.getState();return P.find(g=>g.id===x)},[]),o=D.useCallback(x=>{const{getNodes:P,setNodes:g,hasDefaultNodes:v,onNodesChange:E}=e.getState(),k=P(),M=typeof x=="function"?x(k):x;if(v)g(M);else if(E){const O=M.length===0?k.map(I=>({type:"remove",id:I.id})):M.map(I=>({item:I,type:"reset"}));E(O)}},[]),a=D.useCallback(x=>{const{edges:P=[],setEdges:g,hasDefaultEdges:v,onEdgesChange:E}=e.getState(),k=typeof x=="function"?x(P):x;if(v)g(k);else if(E){const M=k.length===0?P.map(O=>({type:"remove",id:O.id})):k.map(O=>({item:O,type:"reset"}));E(M)}},[]),u=D.useCallback(x=>{const P=Array.isArray(x)?x:[x],{getNodes:g,setNodes:v,hasDefaultNodes:E,onNodesChange:k}=e.getState();if(E){const O=[...g(),...P];v(O)}else if(k){const M=P.map(O=>({item:O,type:"add"}));k(M)}},[]),c=D.useCallback(x=>{const P=Array.isArray(x)?x:[x],{edges:g=[],setEdges:v,hasDefaultEdges:E,onEdgesChange:k}=e.getState();if(E)v([...g,...P]);else if(k){const M=P.map(O=>({item:O,type:"add"}));k(M)}},[]),h=D.useCallback(()=>{const{getNodes:x,edges:P=[],transform:g}=e.getState(),[v,E,k]=g;return{nodes:x().map(M=>({...M})),edges:P.map(M=>({...M})),viewport:{x:v,y:E,zoom:k}}},[]),d=D.useCallback(({nodes:x,edges:P})=>{const{nodeInternals:g,getNodes:v,edges:E,hasDefaultNodes:k,hasDefaultEdges:M,onNodesDelete:O,onEdgesDelete:I,onNodesChange:_,onEdgesChange:S}=e.getState(),R=(x||[]).map(j=>j.id),C=(P||[]).map(j=>j.id),N=v().reduce((j,$)=>{const W=!R.includes($.id)&&$.parentNode&&j.find(V=>V.id===$.parentNode);return(typeof $.deletable=="boolean"?$.deletable:!0)&&(R.includes($.id)||W)&&j.push($),j},[]),w=E.filter(j=>typeof j.deletable=="boolean"?j.deletable:!0),b=w.filter(j=>C.includes(j.id));if(N||b){const j=j1(N,w),$=[...b,...j],W=$.reduce((L,V)=>(L.includes(V.id)||L.push(V.id),L),[]);if((M||k)&&(M&&e.setState({edges:E.filter(L=>!W.includes(L.id))}),k&&(N.forEach(L=>{g.delete(L.id)}),e.setState({nodeInternals:new Map(g)}))),W.length>0&&(I==null||I($),S&&S(W.map(L=>({id:L,type:"remove"})))),N.length>0&&(O==null||O(N),_)){const L=N.map(V=>({id:V.id,type:"remove"}));_(L)}}},[]),p=D.useCallback(x=>{const P=WN(x),g=P?null:e.getState().nodeInternals.get(x.id);return!P&&!g?[null,null,P]:[P?x:Qv(g),g,P]},[]),y=D.useCallback((x,P=!0,g)=>{const[v,E,k]=p(x);return v?(g||e.getState().getNodes()).filter(M=>{if(!k&&(M.id===E.id||!M.positionAbsolute))return!1;const O=Qv(M),I=Xf(O,v);return P&&I>0||I>=v.width*v.height}):[]},[]),T=D.useCallback((x,P,g=!0)=>{const[v]=p(x);if(!v)return!1;const E=Xf(v,P);return g&&E>0||E>=v.width*v.height},[]);return D.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:u,addEdges:c,toObject:h,deleteElements:d,getIntersectingNodes:y,isNodeIntersecting:T}),[t,n,r,i,s,o,a,u,c,h,d,y,T])}const x2={actInsideInputWithModifier:!1};var A2=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=gt(),{deleteElements:r}=jm(),i=el(t,x2),s=el(e);D.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),u=a().filter(h=>h.selected),c=o.filter(h=>h.selected);r({nodes:u,edges:c}),n.setState({nodesSelectionActive:!1})}},[i]),D.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function C2(t){const e=gt();D.useEffect(()=>{let n;const r=()=>{var s,o;if(!t.current)return;const i=Nm(t.current);(i.height===0||i.width===0)&&((o=(s=e.getState()).onError)==null||o.call(s,"004",wr.error004())),e.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Bm={position:"absolute",width:"100%",height:"100%",top:0,left:0},R2=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,wu=t=>({x:t.x,y:t.y,zoom:t.k}),Es=(t,e)=>t.target.closest(`.${e}`),s0=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),o0=t=>{const e=t.ctrlKey&&Cc()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},P2=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),k2=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:u=Fi.Free,zoomOnDoubleClick:c=!0,elementsSelectable:h,panOnDrag:d=!0,defaultViewport:p,translateExtent:y,minZoom:T,maxZoom:x,zoomActivationKeyCode:P,preventScrolling:g=!0,children:v,noWheelClassName:E,noPanClassName:k})=>{const M=D.useRef(),O=gt(),I=D.useRef(!1),_=D.useRef(!1),S=D.useRef(null),R=D.useRef({x:0,y:0,zoom:0}),{d3Zoom:C,d3Selection:N,d3ZoomHandler:w,userSelectionActive:b}=$e(P2,Ct),j=el(P),$=D.useRef(0),W=D.useRef(!1),L=D.useRef();return C2(S),D.useEffect(()=>{if(S.current){const V=S.current.getBoundingClientRect(),z=LN().scaleExtent([T,x]).translateExtent(y),H=Tn(S.current).call(z),q=ii.translate(p.x,p.y).scale(uo(p.zoom,T,x)),Y=[[0,0],[V.width,V.height]],ee=z.constrain()(q,Y,y);z.transform(H,ee),z.wheelDelta(o0),O.setState({d3Zoom:z,d3Selection:H,d3ZoomHandler:H.on("wheel.zoom"),transform:[ee.x,ee.y,ee.k],domNode:S.current.closest(".react-flow")})}},[]),D.useEffect(()=>{N&&C&&(o&&!j&&!b?N.on("wheel.zoom",V=>{if(Es(V,E))return!1;V.preventDefault(),V.stopImmediatePropagation();const z=N.property("__zoom").k||1,H=Cc();if(V.ctrlKey&&s&&H){const Pe=Ln(V),Ie=o0(V),Ye=z*Math.pow(2,Ie);C.scaleTo(N,Ye,Pe,V);return}const q=V.deltaMode===1?20:1;let Y=u===Fi.Vertical?0:V.deltaX*q,ee=u===Fi.Horizontal?0:V.deltaY*q;!H&&V.shiftKey&&u!==Fi.Vertical&&(Y=V.deltaY*q,ee=0),C.translateBy(N,-(Y/z)*a,-(ee/z)*a,{internal:!0});const oe=wu(N.property("__zoom")),{onViewportChangeStart:he,onViewportChange:de,onViewportChangeEnd:Te}=O.getState();clearTimeout(L.current),W.current||(W.current=!0,e==null||e(V,oe),he==null||he(oe)),W.current&&(t==null||t(V,oe),de==null||de(oe),L.current=setTimeout(()=>{n==null||n(V,oe),Te==null||Te(oe),W.current=!1},150))},{passive:!1}):typeof w<"u"&&N.on("wheel.zoom",function(V,z){if(!g||Es(V,E))return null;V.preventDefault(),w.call(this,V,z)},{passive:!1}))},[b,o,u,N,C,w,j,s,g,E,e,t,n]),D.useEffect(()=>{C&&C.on("start",V=>{var q,Y;if(!V.sourceEvent||V.sourceEvent.internal)return null;$.current=(q=V.sourceEvent)==null?void 0:q.button;const{onViewportChangeStart:z}=O.getState(),H=wu(V.transform);I.current=!0,R.current=H,((Y=V.sourceEvent)==null?void 0:Y.type)==="mousedown"&&O.setState({paneDragging:!0}),z==null||z(H),e==null||e(V.sourceEvent,H)})},[C,e]),D.useEffect(()=>{C&&(b&&!I.current?C.on("zoom",null):b||C.on("zoom",V=>{var H;const{onViewportChange:z}=O.getState();if(O.setState({transform:[V.transform.x,V.transform.y,V.transform.k]}),_.current=!!(r&&s0(d,$.current??0)),(t||z)&&!((H=V.sourceEvent)!=null&&H.internal)){const q=wu(V.transform);z==null||z(q),t==null||t(V.sourceEvent,q)}}))},[b,C,t,d,r]),D.useEffect(()=>{C&&C.on("end",V=>{if(!V.sourceEvent||V.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=O.getState();if(I.current=!1,O.setState({paneDragging:!1}),r&&s0(d,$.current??0)&&!_.current&&r(V.sourceEvent),_.current=!1,(n||z)&&R2(R.current,V.transform)){const H=wu(V.transform);R.current=H,clearTimeout(M.current),M.current=setTimeout(()=>{z==null||z(H),n==null||n(V.sourceEvent,H)},o?150:0)}})},[C,o,d,n,r]),D.useEffect(()=>{C&&C.filter(V=>{const z=j||i,H=s&&V.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&V.button===1&&V.type==="mousedown"&&(Es(V,"react-flow__node")||Es(V,"react-flow__edge")))return!0;if(!d&&!z&&!o&&!c&&!s||b||!c&&V.type==="dblclick"||Es(V,E)&&V.type==="wheel"||Es(V,k)&&(V.type!=="wheel"||o&&V.type==="wheel"&&!j)||!s&&V.ctrlKey&&V.type==="wheel"||!z&&!o&&!H&&V.type==="wheel"||!d&&(V.type==="mousedown"||V.type==="touchstart")||Array.isArray(d)&&!d.includes(V.button)&&(V.type==="mousedown"||V.type==="touchstart"))return!1;const q=Array.isArray(d)&&d.includes(V.button)||!V.button||V.button<=1;return(!V.ctrlKey||V.type==="wheel")&&q})},[b,C,i,s,o,c,d,h,j]),K.createElement("div",{className:"react-flow__renderer",ref:S,style:Bm},v)},N2=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function D2(){const{userSelectionActive:t,userSelectionRect:e}=$e(N2,Ct);return t&&e?K.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function a0(t,e){const n=t.find(r=>r.id===e.parentNode);if(n){const r=e.position.x+e.width-n.width,i=e.position.y+e.height-n.height;if(r>0||i>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),e.position.x<0){const s=Math.abs(e.position.x);n.position.x=n.position.x-s,n.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);n.position.y=n.position.y-s,n.style.height+=s,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function sT(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,i)=>{const s=t.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&a0(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&a0(r,o);break}case"remove":return r}return r.push(o),r},n)}function oT(t,e){return sT(t,e)}function b2(t,e){return sT(t,e)}const Ur=(t,e)=>({id:t,type:"select",selected:e});function Fs(t,e){return t.reduce((n,r)=>{const i=e.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Ur(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Ur(r.id,!1))),n},[])}const Nd=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},M2=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),aT=D.memo(({isSelecting:t,selectionMode:e=co.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:u,onPaneMouseMove:c,onPaneMouseLeave:h,children:d})=>{const p=D.useRef(null),y=gt(),T=D.useRef(0),x=D.useRef(0),P=D.useRef(),{userSelectionActive:g,elementsSelectable:v,dragging:E}=$e(M2,Ct),k=()=>{y.setState({userSelectionActive:!1,userSelectionRect:null}),T.current=0,x.current=0},M=w=>{s==null||s(w),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},O=w=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){w.preventDefault();return}o==null||o(w)},I=a?w=>a(w):void 0,_=w=>{const{resetSelectedElements:b,domNode:j}=y.getState();if(P.current=j==null?void 0:j.getBoundingClientRect(),!v||!t||w.button!==0||w.target!==p.current||!P.current)return;const{x:$,y:W}=si(w,P.current);b(),y.setState({userSelectionRect:{width:0,height:0,startX:$,startY:W,x:$,y:W}}),r==null||r(w)},S=w=>{const{userSelectionRect:b,nodeInternals:j,edges:$,transform:W,onNodesChange:L,onEdgesChange:V,nodeOrigin:z,getNodes:H}=y.getState();if(!t||!P.current||!b)return;y.setState({userSelectionActive:!0,nodesSelectionActive:!1});const q=si(w,P.current),Y=b.startX??0,ee=b.startY??0,oe={...b,x:q.x<Y?q.x:Y,y:q.y<ee?q.y:ee,width:Math.abs(q.x-Y),height:Math.abs(q.y-ee)},he=H(),de=z1(j,oe,W,e===co.Partial,!0,z),Te=j1(de,$).map(Ie=>Ie.id),Pe=de.map(Ie=>Ie.id);if(T.current!==Pe.length){T.current=Pe.length;const Ie=Fs(he,Pe);Ie.length&&(L==null||L(Ie))}if(x.current!==Te.length){x.current=Te.length;const Ie=Fs($,Te);Ie.length&&(V==null||V(Ie))}y.setState({userSelectionRect:oe})},R=w=>{if(w.button!==0)return;const{userSelectionRect:b}=y.getState();!g&&b&&w.target===p.current&&(M==null||M(w)),y.setState({nodesSelectionActive:T.current>0}),k(),i==null||i(w)},C=w=>{g&&(y.setState({nodesSelectionActive:T.current>0}),i==null||i(w)),k()},N=v&&(t||g);return K.createElement("div",{className:rn(["react-flow__pane",{dragging:E,selection:t}]),onClick:N?void 0:Nd(M,p),onContextMenu:Nd(O,p),onWheel:Nd(I,p),onMouseEnter:N?void 0:u,onMouseDown:N?_:void 0,onMouseMove:N?S:c,onMouseUp:N?R:void 0,onMouseLeave:N?C:h,ref:p,style:Bm},d,K.createElement(D2,null))});aT.displayName="Pane";function lT(t,e){if(!t.parentNode)return!1;const n=e.get(t.parentNode);return n?n.selected?!0:lT(n,e):!1}function l0(t,e,n){let r=t;do{if(r!=null&&r.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function V2(t,e,n,r){return Array.from(t.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!lT(i,t))&&(i.draggable||e&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height,expandParent:i.expandParent}})}function O2(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function uT(t,e,n,r,i=[0,0],s){const o=O2(t,t.extent||r);let a=o;if(t.extent==="parent"&&!t.expandParent)if(t.parentNode&&t.width&&t.height){const h=n.get(t.parentNode),{x:d,y:p}=Ks(h,i).positionAbsolute;a=h&&cn(d)&&cn(p)&&cn(h.width)&&cn(h.height)?[[d+t.width*i[0],p+t.height*i[1]],[d+h.width-t.width+t.width*i[0],p+h.height-t.height+t.height*i[1]]]:a}else s==null||s("005",wr.error005()),a=o;else if(t.extent&&t.parentNode&&t.extent!=="parent"){const h=n.get(t.parentNode),{x:d,y:p}=Ks(h,i).positionAbsolute;a=[[t.extent[0][0]+d,t.extent[0][1]+p],[t.extent[1][0]+d,t.extent[1][1]+p]]}let u={x:0,y:0};if(t.parentNode){const h=n.get(t.parentNode);u=Ks(h,i).positionAbsolute}const c=a&&a!=="parent"?Dm(e,a):e;return{position:{x:c.x-u.x,y:c.y-u.y},positionAbsolute:c}}function Dd({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[t?r.find(i=>i.id===t):r[0],r]}const u0=(t,e,n,r)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const s=Array.from(i),o=e.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(c.left-o.left-a.x)/n,y:(c.top-o.top-a.y)/n,...Nm(u)}})};function sa(t,e,n){return n===void 0?n:r=>{const i=e().nodeInternals.get(t);i&&n(r,{...i})}}function np({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:u}=e.getState(),c=a.get(t);if(!c){u==null||u("012",wr.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&o)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var h;return(h=r==null?void 0:r.current)==null?void 0:h.blur()})):i([t])}function L2(){const t=gt();return D.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=t.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,u={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:s?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function bd(t){return(e,n,r)=>t==null?void 0:t(e,r)}function cT({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=gt(),[u,c]=D.useState(!1),h=D.useRef([]),d=D.useRef({x:null,y:null}),p=D.useRef(0),y=D.useRef(null),T=D.useRef({x:0,y:0}),x=D.useRef(null),P=D.useRef(!1),g=D.useRef(!1),v=L2();return D.useEffect(()=>{if(t!=null&&t.current){const E=Tn(t.current),k=({x:I,y:_})=>{const{nodeInternals:S,onNodeDrag:R,onSelectionDrag:C,updateNodePositions:N,nodeExtent:w,snapGrid:b,snapToGrid:j,nodeOrigin:$,onError:W}=a.getState();d.current={x:I,y:_};let L=!1,V={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&w){const H=Um(h.current,$);V=bm(H)}if(h.current=h.current.map(H=>{const q={x:I-H.distance.x,y:_-H.distance.y};j&&(q.x=b[0]*Math.round(q.x/b[0]),q.y=b[1]*Math.round(q.y/b[1]));const Y=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];h.current.length>1&&w&&!H.extent&&(Y[0][0]=H.positionAbsolute.x-V.x+w[0][0],Y[1][0]=H.positionAbsolute.x+(H.width??0)-V.x2+w[1][0],Y[0][1]=H.positionAbsolute.y-V.y+w[0][1],Y[1][1]=H.positionAbsolute.y+(H.height??0)-V.y2+w[1][1]);const ee=uT(H,q,S,Y,$,W);return L=L||H.position.x!==ee.position.x||H.position.y!==ee.position.y,H.position=ee.position,H.positionAbsolute=ee.positionAbsolute,H}),!L)return;N(h.current,!0,!0),c(!0);const z=i?R:bd(C);if(z&&x.current){const[H,q]=Dd({nodeId:i,dragItems:h.current,nodeInternals:S});z(x.current,H,q)}},M=()=>{if(!y.current)return;const[I,_]=D1(T.current,y.current);if(I!==0||_!==0){const{transform:S,panBy:R}=a.getState();d.current.x=(d.current.x??0)-I/S[2],d.current.y=(d.current.y??0)-_/S[2],R({x:I,y:_})&&k(d.current)}p.current=requestAnimationFrame(M)},O=I=>{var $;const{nodeInternals:_,multiSelectionActive:S,nodesDraggable:R,unselectNodesAndEdges:C,onNodeDragStart:N,onSelectionDragStart:w}=a.getState();g.current=!0;const b=i?N:bd(w);(!o||!s)&&!S&&i&&(($=_.get(i))!=null&&$.selected||C()),i&&s&&o&&np({id:i,store:a,nodeRef:t});const j=v(I);if(d.current=j,h.current=V2(_,R,j,i),b&&h.current){const[W,L]=Dd({nodeId:i,dragItems:h.current,nodeInternals:_});b(I.sourceEvent,W,L)}};if(e)E.on(".drag",null);else{const I=KP().on("start",_=>{const{domNode:S,nodeDragThreshold:R}=a.getState();R===0&&O(_);const C=v(_);d.current=C,y.current=(S==null?void 0:S.getBoundingClientRect())||null,T.current=si(_.sourceEvent,y.current)}).on("drag",_=>{var N,w;const S=v(_),{autoPanOnNodeDrag:R,nodeDragThreshold:C}=a.getState();if(!P.current&&g.current&&R&&(P.current=!0,M()),!g.current){const b=S.xSnapped-(((N=d==null?void 0:d.current)==null?void 0:N.x)??0),j=S.ySnapped-(((w=d==null?void 0:d.current)==null?void 0:w.y)??0);Math.sqrt(b*b+j*j)>C&&O(_)}(d.current.x!==S.xSnapped||d.current.y!==S.ySnapped)&&h.current&&g.current&&(x.current=_.sourceEvent,T.current=si(_.sourceEvent,y.current),k(S))}).on("end",_=>{if(g.current&&(c(!1),P.current=!1,g.current=!1,cancelAnimationFrame(p.current),h.current)){const{updateNodePositions:S,nodeInternals:R,onNodeDragStop:C,onSelectionDragStop:N}=a.getState(),w=i?C:bd(N);if(S(h.current,!1,!1),w){const[b,j]=Dd({nodeId:i,dragItems:h.current,nodeInternals:R});w(_.sourceEvent,b,j)}}}).filter(_=>{const S=_.target;return!_.button&&(!n||!l0(S,`.${n}`,t))&&(!r||l0(S,r,t))});return E.call(I),()=>{E.on(".drag",null)}}}},[t,e,n,r,s,a,i,o,v]),u}function hT(){const t=gt();return D.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:u,onError:c,nodesDraggable:h}=t.getState(),d=o().filter(v=>v.selected&&(v.draggable||h&&typeof v.draggable>"u")),p=a?u[0]:5,y=a?u[1]:5,T=n.isShiftPressed?4:1,x=n.x*p*T,P=n.y*y*T,g=d.map(v=>{if(v.positionAbsolute){const E={x:v.positionAbsolute.x+x,y:v.positionAbsolute.y+P};a&&(E.x=u[0]*Math.round(E.x/u[0]),E.y=u[1]*Math.round(E.y/u[1]));const{positionAbsolute:k,position:M}=uT(v,E,r,i,void 0,c);v.position=M,v.positionAbsolute=k}return v});s(g,!0,!1)},[])}const Gs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var oa=t=>{const e=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:u,selected:c,onClick:h,onMouseEnter:d,onMouseMove:p,onMouseLeave:y,onContextMenu:T,onDoubleClick:x,style:P,className:g,isDraggable:v,isSelectable:E,isConnectable:k,isFocusable:M,selectNodesOnDrag:O,sourcePosition:I,targetPosition:_,hidden:S,resizeObserver:R,dragHandle:C,zIndex:N,isParent:w,noDragClassName:b,noPanClassName:j,initialized:$,disableKeyboardA11y:W,ariaLabel:L,rfId:V,hasHandleBounds:z})=>{const H=gt(),q=D.useRef(null),Y=D.useRef(I),ee=D.useRef(_),oe=D.useRef(r),he=E||v||h||d||p||y,de=hT(),Te=sa(n,H.getState,d),Pe=sa(n,H.getState,p),Ie=sa(n,H.getState,y),Ye=sa(n,H.getState,T),Pt=sa(n,H.getState,x),Ot=xe=>{const{nodeDragThreshold:yt}=H.getState();if(E&&(!O||!v||yt>0)&&np({id:n,store:H,nodeRef:q}),h){const re=H.getState().nodeInternals.get(n);re&&h(xe,{...re})}},Ve=xe=>{if(!Yf(xe))if(M1.includes(xe.key)&&E){const yt=xe.key==="Escape";np({id:n,store:H,unselect:yt,nodeRef:q})}else!W&&v&&c&&Object.prototype.hasOwnProperty.call(Gs,xe.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${xe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),de({x:Gs[xe.key].x,y:Gs[xe.key].y,isShiftPressed:xe.shiftKey}))};D.useEffect(()=>()=>{q.current&&(R==null||R.unobserve(q.current))},[]),D.useEffect(()=>{if(q.current&&!S){const xe=q.current;(!$||!z)&&(R==null||R.unobserve(xe),R==null||R.observe(xe))}},[S,$,z]),D.useEffect(()=>{const xe=oe.current!==r,yt=Y.current!==I,re=ee.current!==_;q.current&&(xe||yt||re)&&(xe&&(oe.current=r),yt&&(Y.current=I),re&&(ee.current=_),H.getState().updateNodeDimensions([{id:n,nodeElement:q.current,forceUpdate:!0}]))},[n,r,I,_]);const Lt=cT({nodeRef:q,disabled:S||!v,noDragClassName:b,handleSelector:C,nodeId:n,isSelectable:E,selectNodesOnDrag:O});return S?null:K.createElement("div",{className:rn(["react-flow__node",`react-flow__node-${r}`,{[j]:v},g,{selected:c,selectable:E,parent:w,dragging:Lt}]),ref:q,style:{zIndex:N,transform:`translate(${a}px,${u}px)`,pointerEvents:he?"all":"none",visibility:$?"visible":"hidden",...P},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Te,onMouseMove:Pe,onMouseLeave:Ie,onContextMenu:Ye,onClick:Ot,onDoubleClick:Pt,onKeyDown:M?Ve:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":W?void 0:`${eT}-${V}`,"aria-label":L},K.createElement(JN,{value:n},K.createElement(t,{id:n,data:i,type:r,xPos:s,yPos:o,selected:c,isConnectable:k,sourcePosition:I,targetPosition:_,dragging:Lt,dragHandle:C,zIndex:N})))};return e.displayName="NodeWrapper",D.memo(e)};const F2=t=>{const e=t.getNodes().filter(n=>n.selected);return{...Um(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function U2({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=gt(),{width:i,height:s,x:o,y:a,transformString:u,userSelectionActive:c}=$e(F2,Ct),h=hT(),d=D.useRef(null);if(D.useEffect(()=>{var T;n||(T=d.current)==null||T.focus({preventScroll:!0})},[n]),cT({nodeRef:d}),c||!i||!s)return null;const p=t?T=>{const x=r.getState().getNodes().filter(P=>P.selected);t(T,x)}:void 0,y=T=>{Object.prototype.hasOwnProperty.call(Gs,T.key)&&h({x:Gs[T.key].x,y:Gs[T.key].y,isShiftPressed:T.shiftKey})};return K.createElement("div",{className:rn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:u}},K.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:y,style:{width:i,height:s,top:a,left:o}}))}var $2=D.memo(U2);const z2=t=>t.nodesSelectionActive,dT=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:u,onMoveStart:c,onMoveEnd:h,selectionKeyCode:d,selectionOnDrag:p,selectionMode:y,onSelectionStart:T,onSelectionEnd:x,multiSelectionKeyCode:P,panActivationKeyCode:g,zoomActivationKeyCode:v,elementsSelectable:E,zoomOnScroll:k,zoomOnPinch:M,panOnScroll:O,panOnScrollSpeed:I,panOnScrollMode:_,zoomOnDoubleClick:S,panOnDrag:R,defaultViewport:C,translateExtent:N,minZoom:w,maxZoom:b,preventScrolling:j,onSelectionContextMenu:$,noWheelClassName:W,noPanClassName:L,disableKeyboardA11y:V})=>{const z=$e(z2),H=el(d),q=el(g),Y=q||R,ee=q||O,oe=H||p&&Y!==!0;return A2({deleteKeyCode:a,multiSelectionKeyCode:P}),K.createElement(k2,{onMove:u,onMoveStart:c,onMoveEnd:h,onPaneContextMenu:s,elementsSelectable:E,zoomOnScroll:k,zoomOnPinch:M,panOnScroll:ee,panOnScrollSpeed:I,panOnScrollMode:_,zoomOnDoubleClick:S,panOnDrag:!H&&Y,defaultViewport:C,translateExtent:N,minZoom:w,maxZoom:b,zoomActivationKeyCode:v,preventScrolling:j,noWheelClassName:W,noPanClassName:L},K.createElement(aT,{onSelectionStart:T,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:Y,isSelecting:!!oe,selectionMode:y},t,z&&K.createElement($2,{onSelectionContextMenu:$,noPanClassName:L,disableKeyboardA11y:V})))};dT.displayName="FlowRenderer";var j2=D.memo(dT);function B2(t){return $e(D.useCallback(n=>t?z1(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function H2(t){const e={input:oa(t.input||X1),default:oa(t.default||tp),output:oa(t.output||J1),group:oa(t.group||zm)},n={},r=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=oa(t[s]||tp),i),n);return{...e,...r}}const W2=({x:t,y:e,width:n,height:r,origin:i})=>!n||!r?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-n*i[0],y:e-r*i[1]},q2=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),fT=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=$e(q2,Ct),a=B2(t.onlyRenderVisibleElements),u=D.useRef(),c=D.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(d=>{const p=d.map(y=>({id:y.target.getAttribute("data-id"),nodeElement:y.target,forceUpdate:!0}));s(p)});return u.current=h,h},[]);return D.useEffect(()=>()=>{var h;(h=u==null?void 0:u.current)==null||h.disconnect()},[]),K.createElement("div",{className:"react-flow__nodes",style:Bm},a.map(h=>{var M,O,I;let d=h.type||"default";t.nodeTypes[d]||(o==null||o("003",wr.error003(d)),d="default");const p=t.nodeTypes[d]||t.nodeTypes.default,y=!!(h.draggable||e&&typeof h.draggable>"u"),T=!!(h.selectable||i&&typeof h.selectable>"u"),x=!!(h.connectable||n&&typeof h.connectable>"u"),P=!!(h.focusable||r&&typeof h.focusable>"u"),g=t.nodeExtent?Dm(h.positionAbsolute,t.nodeExtent):h.positionAbsolute,v=(g==null?void 0:g.x)??0,E=(g==null?void 0:g.y)??0,k=W2({x:v,y:E,width:h.width??0,height:h.height??0,origin:t.nodeOrigin});return K.createElement(p,{key:h.id,id:h.id,className:h.className,style:h.style,type:d,data:h.data,sourcePosition:h.sourcePosition||Z.Bottom,targetPosition:h.targetPosition||Z.Top,hidden:h.hidden,xPos:v,yPos:E,xPosOrigin:k.x,yPosOrigin:k.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!h.selected,isDraggable:y,isSelectable:T,isConnectable:x,isFocusable:P,resizeObserver:c,dragHandle:h.dragHandle,zIndex:((M=h[Qe])==null?void 0:M.z)??0,isParent:!!((O=h[Qe])!=null&&O.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!h.width&&!!h.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((I=h[Qe])!=null&&I.handleBounds)})}))};fT.displayName="NodeRenderer";var K2=D.memo(fT);const G2=(t,e,n)=>n===Z.Left?t-e:n===Z.Right?t+e:t,Q2=(t,e,n)=>n===Z.Top?t-e:n===Z.Bottom?t+e:t,c0="react-flow__edgeupdater",h0=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>K.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:rn([c0,`${c0}-${a}`]),cx:G2(e,r,t),cy:Q2(n,r,t),r,stroke:"transparent",fill:"transparent"}),X2=()=>!0;var Ts=t=>{const e=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:u,animated:c,label:h,labelStyle:d,labelShowBg:p,labelBgStyle:y,labelBgPadding:T,labelBgBorderRadius:x,style:P,source:g,target:v,sourceX:E,sourceY:k,targetX:M,targetY:O,sourcePosition:I,targetPosition:_,elementsSelectable:S,hidden:R,sourceHandleId:C,targetHandleId:N,onContextMenu:w,onMouseEnter:b,onMouseMove:j,onMouseLeave:$,edgeUpdaterRadius:W,onEdgeUpdate:L,onEdgeUpdateStart:V,onEdgeUpdateEnd:z,markerEnd:H,markerStart:q,rfId:Y,ariaLabel:ee,isFocusable:oe,isUpdatable:he,pathOptions:de,interactionWidth:Te})=>{const Pe=D.useRef(null),[Ie,Ye]=D.useState(!1),[Pt,Ot]=D.useState(!1),Ve=gt(),Lt=D.useMemo(()=>`url('#${Zf(q,Y)}')`,[q,Y]),xe=D.useMemo(()=>`url('#${Zf(H,Y)}')`,[H,Y]);if(R)return null;const yt=Je=>{var on;const{edges:kt,addSelectedEdges:Wt,unselectNodesAndEdges:Dn,multiSelectionActive:bn}=Ve.getState(),qt=kt.find(Ei=>Ei.id===n);qt&&(S&&(Ve.setState({nodesSelectionActive:!1}),qt.selected&&bn?(Dn({nodes:[],edges:[qt]}),(on=Pe.current)==null||on.blur()):Wt([n])),o&&o(Je,qt))},re=ia(n,Ve.getState,a),kn=ia(n,Ve.getState,w),pn=ia(n,Ve.getState,b),Cr=ia(n,Ve.getState,j),Rr=ia(n,Ve.getState,$),mn=(Je,kt)=>{if(Je.button!==0)return;const{edges:Wt,isValidConnection:Dn}=Ve.getState(),bn=kt?v:g,qt=(kt?N:C)||null,on=kt?"target":"source",Ei=Dn||X2,Ti=kt,Pr=Wt.find(gn=>gn.id===n);Ot(!0),V==null||V(Je,Pr,on);const cs=gn=>{Ot(!1),z==null||z(gn,Pr,on)};q1({event:Je,handleId:qt,nodeId:bn,onConnect:gn=>L==null?void 0:L(Pr,gn),isTarget:Ti,getState:Ve.getState,setState:Ve.setState,isValidConnection:Ei,edgeUpdaterType:on,onEdgeUpdateEnd:cs})},sn=Je=>mn(Je,!0),Xn=Je=>mn(Je,!1),ke=()=>Ye(!0),Oe=()=>Ye(!1),Nn=!S&&!o,Yn=Je=>{var kt;if(M1.includes(Je.key)&&S){const{unselectNodesAndEdges:Wt,addSelectedEdges:Dn,edges:bn}=Ve.getState();Je.key==="Escape"?((kt=Pe.current)==null||kt.blur(),Wt({edges:[bn.find(on=>on.id===n)]})):Dn([n])}};return K.createElement("g",{className:rn(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:u,animated:c,inactive:Nn,updating:Ie}]),onClick:yt,onDoubleClick:re,onContextMenu:kn,onMouseEnter:pn,onMouseMove:Cr,onMouseLeave:Rr,onKeyDown:oe?Yn:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ee===null?void 0:ee||`Edge from ${g} to ${v}`,"aria-describedby":oe?`${tT}-${Y}`:void 0,ref:Pe},!Pt&&K.createElement(t,{id:n,source:g,target:v,selected:u,animated:c,label:h,labelStyle:d,labelShowBg:p,labelBgStyle:y,labelBgPadding:T,labelBgBorderRadius:x,data:s,style:P,sourceX:E,sourceY:k,targetX:M,targetY:O,sourcePosition:I,targetPosition:_,sourceHandleId:C,targetHandleId:N,markerStart:Lt,markerEnd:xe,pathOptions:de,interactionWidth:Te}),he&&K.createElement(K.Fragment,null,(he==="source"||he===!0)&&K.createElement(h0,{position:I,centerX:E,centerY:k,radius:W,onMouseDown:sn,onMouseEnter:ke,onMouseOut:Oe,type:"source"}),(he==="target"||he===!0)&&K.createElement(h0,{position:_,centerX:M,centerY:O,radius:W,onMouseDown:Xn,onMouseEnter:ke,onMouseOut:Oe,type:"target"})))};return e.displayName="EdgeWrapper",D.memo(e)};function Y2(t){const e={default:Ts(t.default||Pc),straight:Ts(t.bezier||Om),step:Ts(t.step||Vm),smoothstep:Ts(t.step||gh),simplebezier:Ts(t.simplebezier||Mm)},n={},r=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=Ts(t[s]||Pc),i),n);return{...e,...r}}function d0(t,e,n=null){const r=((n==null?void 0:n.x)||0)+e.x,i=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,o=(n==null?void 0:n.height)||e.height;switch(t){case Z.Top:return{x:r+s/2,y:i};case Z.Right:return{x:r+s,y:i+o/2};case Z.Bottom:return{x:r+s/2,y:i+o};case Z.Left:return{x:r,y:i+o/2}}}function f0(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const J2=(t,e,n,r,i,s)=>{const o=d0(n,t,e),a=d0(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function Z2({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:u}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+i),y2:Math.max(t.y+r,e.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const h=bm({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:o/u[2],height:a/u[2]}),d=Math.max(0,Math.min(h.x2,c.x2)-Math.max(h.x,c.x)),p=Math.max(0,Math.min(h.y2,c.y2)-Math.max(h.y,c.y));return Math.ceil(d*p)>0}function p0(t){var r,i,s,o,a;const e=((r=t==null?void 0:t[Qe])==null?void 0:r.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const eD=[{level:0,isMaxLevel:!0,edges:[]}];function tD(t,e,n=!1){let r=-1;const i=t.reduce((o,a)=>{var h,d;const u=cn(a.zIndex);let c=u?a.zIndex:0;if(n){const p=e.get(a.target),y=e.get(a.source),T=a.selected||(p==null?void 0:p.selected)||(y==null?void 0:y.selected),x=Math.max(((h=y==null?void 0:y[Qe])==null?void 0:h.z)||0,((d=p==null?void 0:p[Qe])==null?void 0:d.z)||0,1e3);c=(u?a.zIndex:0)+(T?x:0)}return o[c]?o[c].push(a):o[c]=[a],r=c>r?c:r,o},{}),s=Object.entries(i).map(([o,a])=>{const u=+o;return{edges:a,level:u,isMaxLevel:u===r}});return s.length===0?eD:s}function nD(t,e,n){const r=$e(D.useCallback(i=>t?i.edges.filter(s=>{const o=e.get(s.source),a=e.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Z2({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return tD(r,e,n)}const rD=({color:t="none",strokeWidth:e=1})=>K.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),iD=({color:t="none",strokeWidth:e=1})=>K.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),m0={[Rc.Arrow]:rD,[Rc.ArrowClosed]:iD};function sD(t){const e=gt();return D.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(m0,t)?m0[t]:((s=(i=e.getState()).onError)==null||s.call(i,"009",wr.error009(t)),null)},[t])}const oD=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const u=sD(e);return u?K.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},K.createElement(u,{color:n,strokeWidth:o})):null},aD=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Zf(o,e);r.includes(a)||(i.push({id:a,color:o.color||t,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},pT=({defaultColor:t,rfId:e})=>{const n=$e(D.useCallback(aD({defaultColor:t,rfId:e}),[t,e]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return K.createElement("defs",null,n.map(r=>K.createElement(oD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};pT.displayName="MarkerDefinitions";var lD=D.memo(pT);const uD=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),mT=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeUpdate:o,onEdgeContextMenu:a,onEdgeMouseEnter:u,onEdgeMouseMove:c,onEdgeMouseLeave:h,onEdgeClick:d,edgeUpdaterRadius:p,onEdgeDoubleClick:y,onEdgeUpdateStart:T,onEdgeUpdateEnd:x,children:P})=>{const{edgesFocusable:g,edgesUpdatable:v,elementsSelectable:E,width:k,height:M,connectionMode:O,nodeInternals:I,onError:_}=$e(uD,Ct),S=nD(e,I,n);return k?K.createElement(K.Fragment,null,S.map(({level:R,edges:C,isMaxLevel:N})=>K.createElement("svg",{key:R,style:{zIndex:R},width:k,height:M,className:"react-flow__edges react-flow__container"},N&&K.createElement(lD,{defaultColor:t,rfId:r}),K.createElement("g",null,C.map(w=>{const[b,j,$]=p0(I.get(w.source)),[W,L,V]=p0(I.get(w.target));if(!$||!V)return null;let z=w.type||"default";i[z]||(_==null||_("011",wr.error011(z)),z="default");const H=i[z]||i.default,q=O===Ji.Strict?L.target:(L.target??[]).concat(L.source??[]),Y=f0(j.source,w.sourceHandle),ee=f0(q,w.targetHandle),oe=(Y==null?void 0:Y.position)||Z.Bottom,he=(ee==null?void 0:ee.position)||Z.Top,de=!!(w.focusable||g&&typeof w.focusable>"u"),Te=typeof o<"u"&&(w.updatable||v&&typeof w.updatable>"u");if(!Y||!ee)return _==null||_("008",wr.error008(Y,w)),null;const{sourceX:Pe,sourceY:Ie,targetX:Ye,targetY:Pt}=J2(b,Y,oe,W,ee,he);return K.createElement(H,{key:w.id,id:w.id,className:rn([w.className,s]),type:z,data:w.data,selected:!!w.selected,animated:!!w.animated,hidden:!!w.hidden,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,style:w.style,source:w.source,target:w.target,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerEnd:w.markerEnd,markerStart:w.markerStart,sourceX:Pe,sourceY:Ie,targetX:Ye,targetY:Pt,sourcePosition:oe,targetPosition:he,elementsSelectable:E,onEdgeUpdate:o,onContextMenu:a,onMouseEnter:u,onMouseMove:c,onMouseLeave:h,onClick:d,edgeUpdaterRadius:p,onEdgeDoubleClick:y,onEdgeUpdateStart:T,onEdgeUpdateEnd:x,rfId:r,ariaLabel:w.ariaLabel,isFocusable:de,isUpdatable:Te,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth})})))),P):null};mT.displayName="EdgeRenderer";var cD=D.memo(mT);const hD=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function dD({children:t}){const e=$e(hD);return K.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function fD(t){const e=jm(),n=D.useRef(!1);D.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const pD={[Z.Left]:Z.Right,[Z.Right]:Z.Left,[Z.Top]:Z.Bottom,[Z.Bottom]:Z.Top},gT=({nodeId:t,handleType:e,style:n,type:r=jr.Bezier,CustomComponent:i,connectionStatus:s})=>{var O,I,_;const{fromNode:o,handleId:a,toX:u,toY:c,connectionMode:h}=$e(D.useCallback(S=>({fromNode:S.nodeInternals.get(t),handleId:S.connectionHandleId,toX:(S.connectionPosition.x-S.transform[0])/S.transform[2],toY:(S.connectionPosition.y-S.transform[1])/S.transform[2],connectionMode:S.connectionMode}),[t]),Ct),d=(O=o==null?void 0:o[Qe])==null?void 0:O.handleBounds;let p=d==null?void 0:d[e];if(h===Ji.Loose&&(p=p||(d==null?void 0:d[e==="source"?"target":"source"])),!o||!p)return null;const y=a?p.find(S=>S.id===a):p[0],T=y?y.x+y.width/2:(o.width??0)/2,x=y?y.y+y.height/2:o.height??0,P=(((I=o.positionAbsolute)==null?void 0:I.x)??0)+T,g=(((_=o.positionAbsolute)==null?void 0:_.y)??0)+x,v=y==null?void 0:y.position,E=v?pD[v]:null;if(!v||!E)return null;if(i)return K.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:y,fromX:P,fromY:g,toX:u,toY:c,fromPosition:v,toPosition:E,connectionStatus:s});let k="";const M={sourceX:P,sourceY:g,sourcePosition:v,targetX:u,targetY:c,targetPosition:E};return r===jr.Bezier?[k]=Lm(M):r===jr.Step?[k]=Jf({...M,borderRadius:0}):r===jr.SmoothStep?[k]=Jf(M):r===jr.SimpleBezier?[k]=F1(M):k=`M${P},${g} ${u},${c}`,K.createElement("path",{d:k,fill:"none",className:"react-flow__connection-path",style:n})};gT.displayName="ConnectionLine";const mD=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function gD({containerStyle:t,style:e,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:u,connectionStatus:c}=$e(mD,Ct);return!(i&&s&&a&&o)?null:K.createElement("svg",{style:t,width:a,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},K.createElement("g",{className:rn(["react-flow__connection",c])},K.createElement(gT,{nodeId:i,handleType:s,style:e,type:n,CustomComponent:r,connectionStatus:c})))}function g0(t,e){return D.useRef(null),gt(),D.useMemo(()=>e(t),[t])}const yT=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:h,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:y,onSelectionContextMenu:T,onSelectionStart:x,onSelectionEnd:P,connectionLineType:g,connectionLineStyle:v,connectionLineComponent:E,connectionLineContainerStyle:k,selectionKeyCode:M,selectionOnDrag:O,selectionMode:I,multiSelectionKeyCode:_,panActivationKeyCode:S,zoomActivationKeyCode:R,deleteKeyCode:C,onlyRenderVisibleElements:N,elementsSelectable:w,selectNodesOnDrag:b,defaultViewport:j,translateExtent:$,minZoom:W,maxZoom:L,preventScrolling:V,defaultMarkerColor:z,zoomOnScroll:H,zoomOnPinch:q,panOnScroll:Y,panOnScrollSpeed:ee,panOnScrollMode:oe,zoomOnDoubleClick:he,panOnDrag:de,onPaneClick:Te,onPaneMouseEnter:Pe,onPaneMouseMove:Ie,onPaneMouseLeave:Ye,onPaneScroll:Pt,onPaneContextMenu:Ot,onEdgeUpdate:Ve,onEdgeContextMenu:Lt,onEdgeMouseEnter:xe,onEdgeMouseMove:yt,onEdgeMouseLeave:re,edgeUpdaterRadius:kn,onEdgeUpdateStart:pn,onEdgeUpdateEnd:Cr,noDragClassName:Rr,noWheelClassName:mn,noPanClassName:sn,elevateEdgesOnSelect:Xn,disableKeyboardA11y:ke,nodeOrigin:Oe,nodeExtent:Nn,rfId:Yn})=>{const Je=g0(t,H2),kt=g0(e,Y2);return fD(s),K.createElement(j2,{onPaneClick:Te,onPaneMouseEnter:Pe,onPaneMouseMove:Ie,onPaneMouseLeave:Ye,onPaneContextMenu:Ot,onPaneScroll:Pt,deleteKeyCode:C,selectionKeyCode:M,selectionOnDrag:O,selectionMode:I,onSelectionStart:x,onSelectionEnd:P,multiSelectionKeyCode:_,panActivationKeyCode:S,zoomActivationKeyCode:R,elementsSelectable:w,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:H,zoomOnPinch:q,zoomOnDoubleClick:he,panOnScroll:Y,panOnScrollSpeed:ee,panOnScrollMode:oe,panOnDrag:de,defaultViewport:j,translateExtent:$,minZoom:W,maxZoom:L,onSelectionContextMenu:T,preventScrolling:V,noDragClassName:Rr,noWheelClassName:mn,noPanClassName:sn,disableKeyboardA11y:ke},K.createElement(dD,null,K.createElement(cD,{edgeTypes:kt,onEdgeClick:a,onEdgeDoubleClick:c,onEdgeUpdate:Ve,onlyRenderVisibleElements:N,onEdgeContextMenu:Lt,onEdgeMouseEnter:xe,onEdgeMouseMove:yt,onEdgeMouseLeave:re,onEdgeUpdateStart:pn,onEdgeUpdateEnd:Cr,edgeUpdaterRadius:kn,defaultMarkerColor:z,noPanClassName:sn,elevateEdgesOnSelect:!!Xn,disableKeyboardA11y:ke,rfId:Yn},K.createElement(gD,{style:v,type:g,component:E,containerStyle:k})),K.createElement("div",{className:"react-flow__edgelabel-renderer"}),K.createElement(K2,{nodeTypes:Je,onNodeClick:o,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:y,selectNodesOnDrag:b,onlyRenderVisibleElements:N,noPanClassName:sn,noDragClassName:Rr,disableKeyboardA11y:ke,nodeOrigin:Oe,nodeExtent:Nn,rfId:Yn})))};yT.displayName="GraphView";var yD=D.memo(yT);const rp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Mr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:rp,nodeExtent:rp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ji.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:qN,isValidConnection:void 0},vD=()=>sR((t,e)=>({...Mr,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=e();t({nodeInternals:kd(n,r,i,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?kd(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:u,nodeOrigin:c}=e(),h=u==null?void 0:u.querySelector(".react-flow__viewport");if(!h)return;const d=window.getComputedStyle(h),{m22:p}=new window.DOMMatrixReadOnly(d.transform),y=n.reduce((x,P)=>{const g=i.get(P.id);if(g){const v=Nm(P.nodeElement);!!(v.width&&v.height&&(g.width!==v.width||g.height!==v.height||P.forceUpdate))&&(i.set(g.id,{...g,[Qe]:{...g[Qe],handleBounds:{source:u0(".source",P.nodeElement,p,c),target:u0(".target",P.nodeElement,p,c)}},...v}),x.push({id:g.id,type:"dimensions",dimensions:v}))}return x},[]);rT(i,c);const T=o||s&&!o&&iT(e,{initial:!0,...a});t({nodeInternals:new Map(i),fitViewOnInitDone:T}),(y==null?void 0:y.length)>0&&(r==null||r(y))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=e(),o=n.map(a=>{const u={id:a.id,type:"position",dragging:i};return r&&(u.positionAbsolute=a.positionAbsolute,u.position=a.position),u});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:u}=e();if(n!=null&&n.length){if(s){const c=oT(n,a()),h=kd(c,i,o,u);t({nodeInternals:h})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(u=>Ur(u,!0)):(o=Fs(s(),n),a=Fs(i,[])),_u({changedNodes:o,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=e();let o,a=null;r?o=n.map(u=>Ur(u,!0)):(o=Fs(i,n),a=Fs(s(),[])),_u({changedNodes:a,changedEdges:o,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=e(),o=n||s(),a=r||i,u=o.map(h=>(h.selected=!1,Ur(h.id,!1))),c=a.map(h=>Ur(h.id,!1));_u({changedNodes:u,changedEdges:c,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=e();r==null||r.scaleExtent([n,i]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=e();r==null||r.scaleExtent([i,n]),t({maxZoom:n})},setTranslateExtent:n=>{var r;(r=e().d3Zoom)==null||r.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),s=r().filter(a=>a.selected).map(a=>Ur(a.id,!1)),o=n.filter(a=>a.selected).map(a=>Ur(a.id,!1));_u({changedNodes:s,changedEdges:o,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(i=>{i.positionAbsolute=Dm(i.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:u}=e();if(!o||!a||!n.x&&!n.y)return!1;const c=ii.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),h=[[0,0],[i,s]],d=o==null?void 0:o.constrain()(c,h,u);return o.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>t({connectionNodeId:Mr.connectionNodeId,connectionHandleId:Mr.connectionHandleId,connectionHandleType:Mr.connectionHandleType,connectionStatus:Mr.connectionStatus,connectionStartHandle:Mr.connectionStartHandle,connectionEndHandle:Mr.connectionEndHandle}),reset:()=>t({...Mr})}),Object.is),Hm=({children:t})=>{const e=D.useRef(null);return e.current||(e.current=vD()),K.createElement(FN,{value:e.current},t)};Hm.displayName="ReactFlowProvider";const vT=({children:t})=>D.useContext(mh)?K.createElement(K.Fragment,null,t):K.createElement(Hm,null,t);vT.displayName="ReactFlowWrapper";const _D={input:X1,default:tp,output:J1,group:zm},wD={default:Pc,straight:Om,step:Vm,smoothstep:gh,simplebezier:Mm},ED=[0,0],TD=[15,15],SD={x:0,y:0,zoom:1},ID={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},_T=D.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=_D,edgeTypes:o=wD,onNodeClick:a,onEdgeClick:u,onInit:c,onMove:h,onMoveStart:d,onMoveEnd:p,onConnect:y,onConnectStart:T,onConnectEnd:x,onClickConnectStart:P,onClickConnectEnd:g,onNodeMouseEnter:v,onNodeMouseMove:E,onNodeMouseLeave:k,onNodeContextMenu:M,onNodeDoubleClick:O,onNodeDragStart:I,onNodeDrag:_,onNodeDragStop:S,onNodesDelete:R,onEdgesDelete:C,onSelectionChange:N,onSelectionDragStart:w,onSelectionDrag:b,onSelectionDragStop:j,onSelectionContextMenu:$,onSelectionStart:W,onSelectionEnd:L,connectionMode:V=Ji.Strict,connectionLineType:z=jr.Bezier,connectionLineStyle:H,connectionLineComponent:q,connectionLineContainerStyle:Y,deleteKeyCode:ee="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:he=!1,selectionMode:de=co.Full,panActivationKeyCode:Te="Space",multiSelectionKeyCode:Pe=Cc()?"Meta":"Control",zoomActivationKeyCode:Ie=Cc()?"Meta":"Control",snapToGrid:Ye=!1,snapGrid:Pt=TD,onlyRenderVisibleElements:Ot=!1,selectNodesOnDrag:Ve=!0,nodesDraggable:Lt,nodesConnectable:xe,nodesFocusable:yt,nodeOrigin:re=ED,edgesFocusable:kn,edgesUpdatable:pn,elementsSelectable:Cr,defaultViewport:Rr=SD,minZoom:mn=.5,maxZoom:sn=2,translateExtent:Xn=rp,preventScrolling:ke=!0,nodeExtent:Oe,defaultMarkerColor:Nn="#b1b1b7",zoomOnScroll:Yn=!0,zoomOnPinch:Je=!0,panOnScroll:kt=!1,panOnScrollSpeed:Wt=.5,panOnScrollMode:Dn=Fi.Free,zoomOnDoubleClick:bn=!0,panOnDrag:qt=!0,onPaneClick:on,onPaneMouseEnter:Ei,onPaneMouseMove:Ti,onPaneMouseLeave:Pr,onPaneScroll:cs,onPaneContextMenu:kr,children:gn,onEdgeUpdate:bo,onEdgeContextMenu:Jn,onEdgeDoubleClick:Nl,onEdgeMouseEnter:hs,onEdgeMouseMove:Dl,onEdgeMouseLeave:Si,onEdgeUpdateStart:bl,onEdgeUpdateEnd:at,edgeUpdaterRadius:Ml=10,onNodesChange:Ii,onEdgesChange:xi,noDragClassName:$h="nodrag",noWheelClassName:zh="nowheel",noPanClassName:Zn="nopan",fitView:jh=!1,fitViewOptions:Bh,connectOnClick:ds=!0,attributionPosition:Vl,proOptions:Mo,defaultEdgeOptions:fs,elevateNodesOnSelect:Mn=!0,elevateEdgesOnSelect:Ol=!1,disableKeyboardA11y:Vo=!1,autoPanOnConnect:Oo=!0,autoPanOnNodeDrag:Lo=!0,connectionRadius:Ll=20,isValidConnection:Fl,onError:Hh,style:ps,id:Fo,nodeDragThreshold:Uo,...Ai},er)=>{const Ci=Fo||"1";return K.createElement("div",{...Ai,style:{...ps,...ID},ref:er,className:rn(["react-flow",i]),"data-testid":"rf__wrapper",id:Fo},K.createElement(vT,null,K.createElement(yD,{onInit:c,onMove:h,onMoveStart:d,onMoveEnd:p,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:v,onNodeMouseMove:E,onNodeMouseLeave:k,onNodeContextMenu:M,onNodeDoubleClick:O,nodeTypes:s,edgeTypes:o,connectionLineType:z,connectionLineStyle:H,connectionLineComponent:q,connectionLineContainerStyle:Y,selectionKeyCode:oe,selectionOnDrag:he,selectionMode:de,deleteKeyCode:ee,multiSelectionKeyCode:Pe,panActivationKeyCode:Te,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Ot,selectNodesOnDrag:Ve,defaultViewport:Rr,translateExtent:Xn,minZoom:mn,maxZoom:sn,preventScrolling:ke,zoomOnScroll:Yn,zoomOnPinch:Je,zoomOnDoubleClick:bn,panOnScroll:kt,panOnScrollSpeed:Wt,panOnScrollMode:Dn,panOnDrag:qt,onPaneClick:on,onPaneMouseEnter:Ei,onPaneMouseMove:Ti,onPaneMouseLeave:Pr,onPaneScroll:cs,onPaneContextMenu:kr,onSelectionContextMenu:$,onSelectionStart:W,onSelectionEnd:L,onEdgeUpdate:bo,onEdgeContextMenu:Jn,onEdgeDoubleClick:Nl,onEdgeMouseEnter:hs,onEdgeMouseMove:Dl,onEdgeMouseLeave:Si,onEdgeUpdateStart:bl,onEdgeUpdateEnd:at,edgeUpdaterRadius:Ml,defaultMarkerColor:Nn,noDragClassName:$h,noWheelClassName:zh,noPanClassName:Zn,elevateEdgesOnSelect:Ol,rfId:Ci,disableKeyboardA11y:Vo,nodeOrigin:re,nodeExtent:Oe}),K.createElement(p2,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:T,onConnectEnd:x,onClickConnectStart:P,onClickConnectEnd:g,nodesDraggable:Lt,nodesConnectable:xe,nodesFocusable:yt,edgesFocusable:kn,edgesUpdatable:pn,elementsSelectable:Cr,elevateNodesOnSelect:Mn,minZoom:mn,maxZoom:sn,nodeExtent:Oe,onNodesChange:Ii,onEdgesChange:xi,snapToGrid:Ye,snapGrid:Pt,connectionMode:V,translateExtent:Xn,connectOnClick:ds,defaultEdgeOptions:fs,fitView:jh,fitViewOptions:Bh,onNodesDelete:R,onEdgesDelete:C,onNodeDragStart:I,onNodeDrag:_,onNodeDragStop:S,onSelectionDrag:b,onSelectionDragStart:w,onSelectionDragStop:j,noPanClassName:Zn,nodeOrigin:re,rfId:Ci,autoPanOnConnect:Oo,autoPanOnNodeDrag:Lo,onError:Hh,connectionRadius:Ll,isValidConnection:Fl,nodeDragThreshold:Uo}),K.createElement(d2,{onSelectionChange:N}),gn,K.createElement($N,{proOptions:Mo,position:Vl}),K.createElement(_2,{rfId:Ci,disableKeyboardA11y:Vo})))});_T.displayName="ReactFlow";const xD=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function AD({children:t}){const e=$e(xD);return e?XE.createPortal(t,e):null}var An;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(An||(An={}));function CD({color:t,dimensions:e,lineWidth:n}){return K.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function RD({color:t,radius:e}){return K.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const PD={[An.Dots]:"#91919a",[An.Lines]:"#eee",[An.Cross]:"#e2e2e2"},kD={[An.Dots]:1,[An.Lines]:1,[An.Cross]:6},ND=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function wT({id:t,variant:e=An.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:u}){const c=D.useRef(null),{transform:h,patternId:d}=$e(ND,Ct),p=o||PD[e],y=r||kD[e],T=e===An.Dots,x=e===An.Cross,P=Array.isArray(n)?n:[n,n],g=[P[0]*h[2]||1,P[1]*h[2]||1],v=y*h[2],E=x?[v,v]:g,k=T?[v/s,v/s]:[E[0]/s,E[1]/s];return K.createElement("svg",{className:rn(["react-flow__background",u]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},K.createElement("pattern",{id:d+t,x:h[0]%g[0],y:h[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},T?K.createElement(RD,{color:p,radius:v/s}):K.createElement(CD,{dimensions:E,color:p,lineWidth:i})),K.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+t})`}))}wT.displayName="Background";var DD=D.memo(wT);const bD="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ip=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=bD[n[t]&63];return e};const ET={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:MD}=K,{useSyncExternalStoreWithSelector:VD}=t1;let y0=!1;const OD=t=>t;function LD(t,e=OD,n){(ET?"production":void 0)!=="production"&&n&&!y0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),y0=!0);const r=VD(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return MD(r),r}const v0=t=>{(ET?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?n1(t):t,n=(r,i)=>LD(e,r,i);return Object.assign(n,e),n},FD=t=>t?v0(t):v0,UD=[{id:"1",position:{x:10,y:0},data:{label:"1"},type:"dialogue"},{id:"2",position:{x:0,y:100},data:{label:"2"},type:"dialogue"}],$D=[{id:"e1-2",source:"1",target:"2",type:"customEdge"}],Md=(t,e)=>{const n=t.findIndex(r=>r.key===e);return console.log(`${e} project index found`,n),n},zD=(t,e,n)=>{const r=t[e].pages.findIndex(i=>i.key===n);return console.log(`${n} page index found`,r),r},pe=FD((t,e)=>({nodes:UD,edges:$D,activePath:void 0,user:null,register:[],lastChange:new Date,lastSave:new Date,onNodesChange:n=>{t({nodes:oT(n,e().nodes)})},onEdgesChange:n=>{t({edges:b2(n,e().edges)})},onConnect:n=>{t({edges:U1({...n,type:"customEdge"},e().edges)})},setNodes:n=>{t({nodes:n})},setEdges:n=>{t({edges:n})},setActivePath:n=>{t({activePath:n})},updateNodeText:(n,r)=>{t({nodes:e().nodes.map(i=>i.id===n?{...i,data:{...i.data,...r}}:i)})},updateUser:n=>{t({user:n})},setRegister:n=>{t({register:n})},updateProjectName:(n,r)=>{const i=[...e().register],s=Md(i,n);i[s].name=r,t({register:i})},updatePageName:(n,r,i)=>{const s=[...e().register],o=Md(s,n),a=zD(s,o,r);s[o].pages[a].name=i,t({register:s})},addPage:(n,r,i)=>{const s=[...e().register],o=Md(s,n),a={name:r,key:i??ip()};if(o!==-1){const u={...s[o],pages:[...s[o].pages,a]};s[o]=u,t({register:s})}else e().addProject(n,void 0,[a])},addProject:(n,r,i)=>{const s=[...e().register];s.push({name:n,key:r??ip(),pages:i??[],tokens:[]}),t({register:s})},setLastChange:n=>{t({lastChange:n})},setLastSave:n=>{t({lastSave:n})}}));function Wm({id:t,dataKey:e,className:n,defaultText:r}){var h;const i=pe(d=>d.nodes),s=pe(d=>d.updateNodeText),[o,a]=D.useState(((h=i.find(d=>d.id===t))==null?void 0:h.data[e])??r),u=D.useRef(null);D.useEffect(()=>{if(s(t,{[e]:o}),u.current){u.current.style.height="0px";const{scrollHeight:d}=u.current;u.current.style.height=`${d}px`}},[u,o]);const c=D.useCallback(d=>{a(d.target.value)},[]);return U.jsxs(U.Fragment,{children:[U.jsx("label",{htmlFor:e,style:{display:"none"},children:e}),U.jsx("textarea",{className:`nodrag ${n}`,ref:u,id:e,name:e,onChange:c,value:o})]})}function yh({id:t,dataKey:e,className:n,defaultText:r,onChange:i=()=>{}}){var d;const s=pe(p=>p.nodes),o=pe(p=>p.updateNodeText),[a,u]=D.useState(((d=s.find(p=>p.id===t))==null?void 0:d.data[e])??r),c=D.useRef(null);D.useEffect(()=>{if(o(t,{[e]:a}),c.current){c.current.style.width="0px";const{scrollWidth:p}=c.current;c.current.style.width=`${p}px`}i(a)},[c,a]);const h=D.useCallback(p=>{u(p.target.value)},[]);return U.jsxs(U.Fragment,{children:[U.jsx("label",{htmlFor:e,style:{display:"none"},children:e}),U.jsx("input",{className:` ${n}`,ref:c,id:e,name:e,onChange:h,value:a})]})}function xo(t){const e=pe(i=>i.setNodes),n=pe(i=>i.nodes),r=i=>{const s=n.filter(o=>o.id!==i);e([...s])};return U.jsx(U.Fragment,{children:U.jsx("button",{className:"nodeButton nodrag nopan",style:{left:"-22px"},onClick:()=>{r(t.id)},children:U.jsx("div",{style:{width:"5px",height:"2.25px",backgroundColor:"lightgrey"}})})})}function Ao(t){return U.jsxs(U.Fragment,{children:[U.jsx("button",{className:"nodeButton nodrag nopan",style:{right:"-22px",backgroundColor:`${t.selected?"#87BC83":"white"}`},onClick:t.onSelect,children:U.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50px",backgroundColor:`${t.selected?"white":"lightgrey"}`}})}),U.jsx("div",{style:{height:"65%",width:"25px",right:"-20px",top:"40px",position:"absolute",cursor:"crosshair"}})]})}function jD(t){const[e,n]=D.useState(!1);return U.jsxs("div",{className:`dialogue-node nodeWrapper ${e?"selected":""}`,children:[e?U.jsx(xo,{id:t.id}):void 0,U.jsx(Ao,{selected:e,onSelect:()=>n(!e)}),U.jsx(ot,{className:"handle target",type:"target",position:Z.Top,isConnectable:t.isConnectable}),U.jsxs("div",{children:[U.jsx("p",{className:"characterLabel",children:"Character"}),U.jsx(yh,{id:t.id,dataKey:"character",defaultText:"Mumbo Jumbo"}),U.jsx(Wm,{id:t.id,dataKey:"dialogue",defaultText:"Hi! How are you today?"})]}),U.jsx(ot,{className:"handle source",type:"source",position:Z.Bottom,id:"a",isConnectable:t.isConnectable})]})}function BD(t){const[e,n]=D.useState(!1);return U.jsxs("div",{className:`response-node nodeWrapper ${e?"selected":""}`,children:[e?U.jsx(xo,{id:t.id}):void 0,U.jsx(Ao,{selected:e,onSelect:()=>n(!e)}),U.jsx(ot,{className:"handle target",type:"target",position:Z.Top,isConnectable:t.isConnectable}),U.jsx(yh,{id:t.id,dataKey:"response",defaultText:"I'm good, thanks!"}),U.jsx(ot,{className:"handle source",type:"source",position:Z.Bottom,id:"a",isConnectable:t.isConnectable})]})}function HD(t){const[e,n]=D.useState(!1);return U.jsxs("div",{className:`exposition-node nodeWrapper ${e?"selected":""}`,children:[e?U.jsx(xo,{id:t.id}):void 0,U.jsx(Ao,{selected:e,onSelect:()=>n(!e)}),U.jsx(ot,{className:"handle target",type:"target",position:Z.Top,isConnectable:t.isConnectable}),U.jsx(Wm,{id:t.id,dataKey:"exposition",defaultText:"In world, where sea slugs ruled the land..."}),U.jsx(ot,{className:"handle source",type:"source",position:Z.Bottom,id:"a",isConnectable:t.isConnectable})]})}function WD(t){const[e,n]=D.useState(!1);return U.jsxs("div",{className:`meta-node nodeWrapper ${e?"selected":""}`,children:[e?U.jsx(xo,{id:t.id}):void 0,U.jsx(Ao,{selected:e,onSelect:()=>n(!e)}),U.jsx(ot,{className:"handle target",type:"target",position:Z.Top,isConnectable:t.isConnectable}),U.jsx(Wm,{id:t.id,dataKey:"meta",defaultText:"The character fetches 3 mushrooms, solemnly bring them back to Jumbo, the ancient sea snail."}),U.jsx(ot,{className:"handle source",type:"source",position:Z.Bottom,id:"a",isConnectable:t.isConnectable})]})}function qD(t){const[e,n]=D.useState(!1);return U.jsxs("div",{className:`signal-node nodeWrapper ${e?"selected":""}`,children:[e?U.jsx(xo,{id:t.id}):void 0,U.jsx(Ao,{selected:e,onSelect:()=>n(!e)}),U.jsx(ot,{className:"handle target",type:"target",position:Z.Top,isConnectable:t.isConnectable}),U.jsx(yh,{id:t.id,dataKey:"signal",defaultText:"SignalKey"}),U.jsx(ot,{className:"handle source",type:"source",position:Z.Bottom,id:"a",isConnectable:t.isConnectable})]})}function KD(t){var a;const e=pe(u=>u.nodes),n=pe(u=>u.edges),[r,i]=D.useState(n.find(u=>u.target===t.id)),[s,o]=D.useState(r?e.find(u=>u.id===r.source):void 0);return D.useEffect(()=>{const u=n.find(c=>c.target===t.id);i(u),u&&o(e.find(c=>c.id===(r==null?void 0:r.source)))},[e,n]),U.jsxs("div",{className:"text-receiver-node nodeWrapper",children:[U.jsx(ot,{type:"target",position:Z.Top,isConnectable:t.isConnectable}),U.jsx("p",{children:s?(a=s.data)==null?void 0:a.text:void 0}),U.jsx(ot,{type:"source",position:Z.Bottom,id:"a",isConnectable:t.isConnectable})]})}function GD({id:t,sourceX:e,sourceY:n,targetX:r,targetY:i}){const{setEdges:s}=jm(),[o,a,u]=Lm({sourceX:e,sourceY:n,targetX:r,targetY:i});return U.jsxs(U.Fragment,{children:[U.jsx(Io,{id:t,path:o}),U.jsx(AD,{children:U.jsx("button",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${a}px,${u}px)`,pointerEvents:"all"},className:"deleteEdgeButton nodrag nopan",onClick:()=>{s(c=>c.filter(h=>h.id!==t))},children:U.jsx("div",{style:{width:"5px",height:"2.25px",backgroundColor:"white"}})})})]})}function QD(t){const e=pe(p=>p.edges),n=pe(p=>p.nodes),[r,i]=D.useState(!1),[s,o]=D.useState(void 0),[a,u]=D.useState(!1),[c,h]=D.useState(!1);D.useEffect(()=>{e.find(p=>p.source===t.id)?o(!0):e.find(p=>p.target===t.id)?o(!1):o(void 0)},[e]),D.useEffect(()=>{const p=n.find(y=>y.id===t.id);if(p!=null&&p.data.token){const y=n.find(T=>T.data.token===p.data.token&&T.id!==t.id);u(!!y)}},[c]);const d=()=>{h(!c)};return U.jsxs("div",{className:`token-node nodeWrapper ${r?"selected":""}`,children:[r?U.jsx(xo,{id:t.id}):void 0,U.jsx(Ao,{selected:r,onSelect:()=>i(!r)}),s?void 0:U.jsx(ot,{className:"handle target",type:"target",position:Z.Top,isConnectable:t.isConnectable}),a?U.jsx("span",{style:{color:"white",paddingRight:"5px"},className:"material-symbols-outlined",children:"kid_star"}):void 0,U.jsx(yh,{id:t.id,dataKey:"token",defaultText:"TokenKey",onChange:d}),s||s===void 0?U.jsx(ot,{className:"handle source",type:"source",position:Z.Bottom,isConnectable:t.isConnectable}):void 0]})}/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tl.apply(this,arguments)}var Gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gr||(Gr={}));const _0="popstate";function XD(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return sp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:kc(i)}return JD(e,n,null,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YD(){return Math.random().toString(36).substr(2,8)}function w0(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,n,r){return n===void 0&&(n=null),tl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Co(e):e,{state:n,key:e&&e.key||r||YD()})}function kc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function JD(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Gr.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(tl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Gr.Pop;let P=h(),g=P==null?null:P-c;c=P,u&&u({action:a,location:x.location,delta:g})}function p(P,g){a=Gr.Push;let v=sp(x.location,P,g);c=h()+1;let E=w0(v,c),k=x.createHref(v);try{o.pushState(E,"",k)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(k)}s&&u&&u({action:a,location:x.location,delta:1})}function y(P,g){a=Gr.Replace;let v=sp(x.location,P,g);c=h();let E=w0(v,c),k=x.createHref(v);o.replaceState(E,"",k),s&&u&&u({action:a,location:x.location,delta:0})}function T(P){let g=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof P=="string"?P:kc(P);return v=v.replace(/ $/,"%20"),Xe(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let x={get action(){return a},get location(){return t(i,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(_0,d),u=P,()=>{i.removeEventListener(_0,d),u=null}},createHref(P){return e(i,P)},createURL:T,encodeLocation(P){let g=T(P);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:y,go(P){return o.go(P)}};return x}var E0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(E0||(E0={}));function ZD(t,e,n){return n===void 0&&(n="/"),eb(t,e,n,!1)}function eb(t,e,n,r){let i=typeof e=="string"?Co(e):e,s=qm(i.pathname||"/",n);if(s==null)return null;let o=ST(t);tb(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=db(s);a=cb(o[u],c,r)}return a}function ST(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Xe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=oi([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Xe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ST(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:lb(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of IT(s.path))i(s,o,u)}),e}function IT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=IT(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function tb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ub(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const nb=/^:[\w-]+$/,rb=3,ib=2,sb=1,ob=10,ab=-2,T0=t=>t==="*";function lb(t,e){let n=t.split("/"),r=n.length;return n.some(T0)&&(r+=ab),e&&(r+=ib),n.filter(i=>!T0(i)).reduce((i,s)=>i+(nb.test(s)?rb:s===""?sb:ob),r)}function ub(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function cb(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=S0({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=S0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:oi([s,d.pathname]),pathnameBase:gb(oi([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=oi([s,d.pathnameBase]))}return o}function S0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hb(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let x=a[d]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const T=a[d];return y&&!T?c[p]=void 0:c[p]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function hb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),TT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function db(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Co(t):t;return{pathname:n?n.startsWith("/")?n:pb(n,e):e,search:yb(r),hash:vb(i)}}function pb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xT(t,e){let n=mb(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function AT(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Co(t):(i=tl({},t),Xe(!i.pathname||!i.pathname.includes("?"),Vd("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),Vd("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),Vd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let u=fb(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const oi=t=>t.join("/").replace(/\/\/+/g,"/"),gb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _b(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CT=["post","put","patch","delete"];new Set(CT);const wb=["get",...CT];new Set(wb);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nl.apply(this,arguments)}const Km=D.createContext(null),Eb=D.createContext(null),as=D.createContext(null),vh=D.createContext(null),_i=D.createContext({outlet:null,matches:[],isDataRoute:!1}),RT=D.createContext(null);function Tb(t,e){let{relative:n}=e===void 0?{}:e;_l()||Xe(!1);let{basename:r,navigator:i}=D.useContext(as),{hash:s,pathname:o,search:a}=kT(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:oi([r,o])),i.createHref({pathname:u,search:a,hash:s})}function _l(){return D.useContext(vh)!=null}function _h(){return _l()||Xe(!1),D.useContext(vh).location}function PT(t){D.useContext(as).static||D.useLayoutEffect(t)}function Sb(){let{isDataRoute:t}=D.useContext(_i);return t?Lb():Ib()}function Ib(){_l()||Xe(!1);let t=D.useContext(Km),{basename:e,future:n,navigator:r}=D.useContext(as),{matches:i}=D.useContext(_i),{pathname:s}=_h(),o=JSON.stringify(xT(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return PT(()=>{a.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=AT(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:oi([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function xb(){let{matches:t}=D.useContext(_i),e=t[t.length-1];return e?e.params:{}}function kT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(as),{matches:i}=D.useContext(_i),{pathname:s}=_h(),o=JSON.stringify(xT(i,r.v7_relativeSplatPath));return D.useMemo(()=>AT(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Ab(t,e){return Cb(t,e)}function Cb(t,e,n,r){_l()||Xe(!1);let{navigator:i}=D.useContext(as),{matches:s}=D.useContext(_i),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=_h(),h;if(e){var d;let P=typeof e=="string"?Co(e):e;u==="/"||(d=P.pathname)!=null&&d.startsWith(u)||Xe(!1),h=P}else h=c;let p=h.pathname||"/",y=p;if(u!=="/"){let P=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(P.length).join("/")}let T=ZD(t,{pathname:y}),x=Db(T&&T.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:oi([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:oi([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&x?D.createElement(vh.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Gr.Pop}},x):x}function Rb(){let t=Ob(),e=_b(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const Pb=D.createElement(Rb,null);class kb extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(_i.Provider,{value:this.props.routeContext},D.createElement(RT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nb(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(Km);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(_i.Provider,{value:e},r)}function Db(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Xe(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:y}=n,T=d.route.loader&&p[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||T){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let y,T=!1,x=null,P=null;n&&(y=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||Pb,u&&(c<0&&p===0?(T=!0,P=null):c===p&&(T=!0,P=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),v=()=>{let E;return y?E=x:T?E=P:d.route.Component?E=D.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,D.createElement(Nb,{match:d,routeContext:{outlet:h,matches:g,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?D.createElement(kb,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var NT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NT||{}),Nc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Nc||{});function bb(t){let e=D.useContext(Km);return e||Xe(!1),e}function Mb(t){let e=D.useContext(Eb);return e||Xe(!1),e}function Vb(t){let e=D.useContext(_i);return e||Xe(!1),e}function DT(t){let e=Vb(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function Ob(){var t;let e=D.useContext(RT),n=Mb(Nc.UseRouteError),r=DT(Nc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Lb(){let{router:t}=bb(NT.UseNavigateStable),e=DT(Nc.UseNavigateStable),n=D.useRef(!1);return PT(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,nl({fromRouteId:e},s)))},[t,e])}function ju(t){Xe(!1)}function Fb(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Gr.Pop,navigator:s,static:o=!1,future:a}=t;_l()&&Xe(!1);let u=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:u,navigator:s,static:o,future:nl({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Co(r));let{pathname:h="/",search:d="",hash:p="",state:y=null,key:T="default"}=r,x=D.useMemo(()=>{let P=qm(h,u);return P==null?null:{location:{pathname:P,search:d,hash:p,state:y,key:T},navigationType:i}},[u,h,d,p,y,T,i]);return x==null?null:D.createElement(as.Provider,{value:c},D.createElement(vh.Provider,{children:n,value:x}))}function Ub(t){let{children:e,location:n}=t;return Ab(op(e),n)}new Promise(()=>{});function op(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,op(r.props.children,s));return}r.type!==ju&&Xe(!1),!r.props.index||!r.props.children||Xe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=op(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ap.apply(this,arguments)}function $b(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function zb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jb(t,e){return t.button===0&&(!e||e==="_self")&&!zb(t)}const Bb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Hb="6";try{window.__reactRouterVersion=Hb}catch{}const Wb="startTransition",I0=Ax[Wb];function qb(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=XD({window:i,v5Compat:!0}));let o=s.current,[a,u]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=D.useCallback(d=>{c&&I0?I0(()=>u(d)):u(d)},[u,c]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.createElement(Fb,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Kb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lp=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,p=$b(e,Bb),{basename:y}=D.useContext(as),T,x=!1;if(typeof c=="string"&&Gb.test(c)&&(T=c,Kb))try{let E=new URL(window.location.href),k=c.startsWith("//")?new URL(E.protocol+c):new URL(c),M=qm(k.pathname,y);k.origin===E.origin&&M!=null?c=M+k.search+k.hash:x=!0}catch{}let P=Tb(c,{relative:i}),g=Qb(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,unstable_viewTransition:d});function v(E){r&&r(E),E.defaultPrevented||g(E)}return D.createElement("a",ap({},p,{href:T||P,onClick:x||s?r:v,ref:n,target:u}))});var x0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(x0||(x0={}));var A0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A0||(A0={}));function Qb(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,u=Sb(),c=_h(),h=kT(t,{relative:o});return D.useCallback(d=>{if(jb(d,n)){d.preventDefault();let p=r!==void 0?r:kc(c)===kc(h);u(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,u,h,r,i,n,t,s,o,a])}function Xb({visible:t,toggleVisible:e}){return U.jsx(U.Fragment,{children:U.jsx("div",{className:"projectPopupContainer",style:{display:`${t?"flex":"none"}`},onClick:n=>{n.target===n.currentTarget&&e()},children:U.jsxs("div",{className:"projectPopup",style:{zIndex:100,position:"relative"},children:[U.jsx("button",{onClick:e,style:{zIndex:101,position:"absolute",right:"-20px",top:"-12px"},children:U.jsx("span",{className:"material-symbols-outlined",children:"close"})}),U.jsx(bT,{})]})})})}function Yb(){return U.jsx("div",{className:"projectHome",children:U.jsx(bT,{})})}function bT(){const t=pe(r=>r.register),e=pe(r=>r.addProject),n=()=>{const r=prompt("New Project Name:");r&&e(r)};return U.jsxs(U.Fragment,{children:[U.jsxs("h1",{style:{display:"flex",alignItems:"center",gap:".5em"},children:["Projects",U.jsx("span",{style:{fontSize:"1em"},className:"material-symbols-outlined toolbarButton",onClick:n,children:"add"})]}),U.jsx("ul",{children:t.map(r=>U.jsx(Jb,{project:r,pages:r.pages},r.name))})]})}function Jb({project:t,pages:e}){const n=pe(p=>p.addPage),r=pe(p=>p.updateProjectName),[i,s]=D.useState(!1),[o,a]=D.useState(!1),[u,c]=D.useState(t.name),h=()=>{const p=prompt("New Page Name:");p&&n(t.key,p)},d=p=>{r(t.key,p),c(p)};return U.jsx(U.Fragment,{children:U.jsxs("li",{className:"toggle",style:{listStyleType:`${i?"disclosure-open":"disclosure-closed"}`},onClick:p=>{p.target instanceof Element&&p.target.classList.contains("toggle")&&s(!i)},children:[U.jsxs("div",{className:"toggle",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o?U.jsx(U.Fragment,{children:U.jsx("input",{type:"text",value:u,onChange:p=>c(p.target.value),onBlur:p=>{d(p.target.value),console.log(`renaming ${u}`,p.target.value)}})}):U.jsx(U.Fragment,{children:u}),U.jsxs("div",{className:"toolbar",children:[U.jsx("span",{style:{fontSize:"1em"},className:"material-symbols-outlined toolbarButton",onClick:()=>a(!o),children:o?"check":"edit"}),U.jsx("span",{onClick:h,className:"material-symbols-outlined toolbarButton",children:"add"})]})]}),U.jsx("ul",{style:{display:`${i?"block":"none"}`},children:e.length==0?U.jsx("li",{children:U.jsx("i",{style:{fontFamily:"IvyJournal",color:"grey"},children:"No pages yet :)"})}):e.map(p=>U.jsx(Zb,{project:t,page:p},p.key))})]})})}function Zb({project:t,page:e}){const[n,r]=D.useState(!1),[i,s]=D.useState(e.name),o=pe(c=>c.setActivePath),a=pe(c=>c.updatePageName),u=c=>{a(t.key,e.key,c),s(c)};return U.jsx(U.Fragment,{children:U.jsx(lp,{to:`/editor/${t.key}/${e.key}`,children:U.jsxs("li",{onClick:c=>{c.target===c.currentTarget&&(n||o({projectKey:t.key,pageKey:e.key}))},children:[n?U.jsx(U.Fragment,{children:U.jsx("input",{type:"text",value:i,onChange:c=>s(c.target.value),onBlur:c=>{u(c.target.value),console.log(`renaming ${i}`,c.target.value)}})}):U.jsx(U.Fragment,{children:i}),U.jsx("div",{className:"toolbar",children:U.jsx("span",{style:{fontSize:"1em"},className:"material-symbols-outlined toolbarButton",onClick:()=>r(!n),children:n?"check":"edit"})})]},e.key)})})}const eM=t=>({nodes:t.nodes,edges:t.edges,onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange,onConnect:t.onConnect}),tM={dialogue:jD,textReceiver:KD,response:BD,exposition:HD,meta:WD,signal:qD,token:QD},nM={customEdge:GD};function rM(){const{nodes:t,edges:e,onNodesChange:n,onEdgesChange:r,onConnect:i}=pe(eM,Ct),s=pe(C=>C.activePath),o=pe(C=>C.lastChange),a=pe(C=>C.lastSave),u=pe(C=>C.setNodes),c=pe(C=>C.updatePageName),h=pe(C=>C.setActivePath),d=pe(C=>C.setLastChange),[p,y]=D.useState(null),[T,x]=D.useState(!1),[P,g]=D.useState(!1),{projectKey:v,pageKey:E}=xb();D.useEffect(()=>{console.log("url params:",v,E),v&&E&&h({projectKey:v,pageKey:E})},[]),D.useEffect(()=>{const C=()=>{x(window.innerWidth<770)};return C(),window.addEventListener("resize",C),window.addEventListener("touchstart",function(N){N.preventDefault()}),()=>{window.removeEventListener("resize",C)}},[]),D.useEffect(()=>{u([...t])},[p]),D.useEffect(()=>{localStorage.setItem("nodes",JSON.stringify(t)),localStorage.setItem("edges",JSON.stringify(e)),d(new Date)},[t,e]),D.useEffect(()=>{const C=N=>{o>a&&(N.preventDefault(),N.returnValue="")};return window.addEventListener("beforeunload",C),()=>{window.removeEventListener("beforeunload",C)}},[a,o]);const k=()=>{console.log(t)},M=(C,N=0,w=100)=>{u([...t,{id:ip(),position:{x:N,y:w},data:{},type:C}])},O=(C,N)=>{C.dataTransfer.setData("application/reactflow",N),C.dataTransfer.effectAllowed="move"},I=D.useCallback(C=>{C.preventDefault(),C.dataTransfer.dropEffect="move"},[]),_=D.useCallback(C=>{C.preventDefault();const N=C.dataTransfer.getData("application/reactflow");if(!(typeof N>"u"||!N))if(p){const w=p.screenToFlowPosition({x:C.clientX-100,y:C.clientY});M(N,w.x,w.y)}else M(N)},[t]),S=()=>{g(!P)},R=()=>{c("project 1","new page","page 1")};return U.jsx(Hm,{children:U.jsxs("div",{style:{width:"100svw",height:"100svh"},children:[U.jsx(Xb,{visible:P,toggleVisible:S}),U.jsx("p",{style:{position:"absolute",right:"50%",top:0,fontSize:".75em"},children:s?`${s.projectKey} / ${s.pageKey}`:"undefined"}),U.jsxs(_T,{onInit:y,nodes:t,edges:e,onNodesChange:n,onEdgesChange:r,onConnect:i,onDrop:_,onDragOver:I,selectionMode:co.Partial,nodeTypes:tM,edgeTypes:nM,minZoom:.25,maxZoom:2,children:[U.jsxs(Qf,{position:"bottom-right",style:{display:"flex",gap:"8px",flexDirection:"column",bottom:"10px"},children:[U.jsx("button",{onClick:S,style:{zIndex:101},children:U.jsx("span",{className:"material-symbols-outlined",children:"description"})}),U.jsx("button",{onClick:R,style:{zIndex:101},children:U.jsx("span",{className:"material-symbols-outlined",children:"token"})})]}),U.jsx(DD,{gap:12,size:1}),U.jsxs(Qf,{position:"top-left",style:{display:"flex",gap:"8px",flexDirection:"column"},children:[T?void 0:U.jsx("button",{onClick:k,children:"Print State"}),U.jsxs("button",{onClick:()=>{M("dialogue")},onDragStart:C=>O(C,"dialogue"),draggable:!0,children:[U.jsx("span",{className:"material-symbols-outlined",children:"maps_ugc "})," ",T?void 0:"Add Dialogue"]}),U.jsxs("button",{onClick:()=>{M("response")},onDragStart:C=>O(C,"response"),draggable:!0,children:[U.jsx("span",{className:"material-symbols-outlined",children:"comic_bubble"}),T?void 0:"Add Response"]}),U.jsxs("button",{onClick:()=>{M("exposition")},onDragStart:C=>O(C,"exposition"),draggable:!0,children:[U.jsx("span",{className:"material-symbols-outlined",children:"local_library"}),T?void 0:"Add Exposition"]}),U.jsxs("button",{onClick:()=>{M("meta")},onDragStart:C=>O(C,"meta"),draggable:!0,children:[U.jsx("span",{className:"material-symbols-outlined",children:"select_all"}),T?void 0:"Add Meta Node"]}),U.jsxs("button",{onClick:()=>{M("signal")},onDragStart:C=>O(C,"signal"),draggable:!0,children:[U.jsx("span",{className:"material-symbols-outlined",children:"sensors"}),T?void 0:"Add Signal"]}),U.jsxs("button",{onClick:()=>{M("token")},onDragStart:C=>O(C,"token"),draggable:!0,children:[U.jsxs("span",{className:"material-symbols-outlined",children:[" "," key_vertical"]}),T?void 0:"Add Token"]})]})]})]})})}var C0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},VT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(p=64)),r.push(n[h],n[d],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new sM;const p=s<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),d!==64){const T=c<<6&192|d;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oM=function(t){const e=MT(t);return VT.encodeByteArray(e,!0)},Dc=function(t){return oM(t).replace(/\./g,"")},OT=function(t){try{return VT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=()=>aM().__FIREBASE_DEFAULTS__,uM=()=>{if(typeof process>"u"||typeof C0>"u")return;const t=C0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OT(t[1]);return e&&JSON.parse(e)},wh=()=>{try{return lM()||uM()||cM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LT=t=>{var e,n;return(n=(e=wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hM=t=>{const e=LT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},FT=()=>{var t;return(t=wh())===null||t===void 0?void 0:t.config},UT=t=>{var e;return(e=wh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dc(JSON.stringify(n)),Dc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function mM(){var t;const e=(t=wh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _M(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wM(){return!mM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EM(){try{return typeof indexedDB=="object"}catch{return!1}}function TM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="FirebaseError";class Ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SM,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?IM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ar(i,a,r)}}function IM(t,e){return t.replace(xM,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xM=/\{\$([^}]+)}/g;function AM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(R0(s)&&R0(o)){if(!bc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function R0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function CM(t,e){const n=new RM(t,e);return n.subscribe.bind(n)}class RM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Od),i.error===void 0&&(i.error=Od),i.complete===void 0&&(i.complete=Od);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class Zi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DM(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NM(t){return t===bi?void 0:t}function DM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const MM={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},VM=ye.INFO,OM={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},LM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=OM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=VM,this._logHandler=LM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const FM=(t,e)=>e.some(n=>t instanceof n);let P0,k0;function UM(){return P0||(P0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $M(){return k0||(k0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $T=new WeakMap,up=new WeakMap,zT=new WeakMap,Ld=new WeakMap,Qm=new WeakMap;function zM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ai(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$T.set(n,t)}).catch(()=>{}),Qm.set(e,t),e}function jM(t){if(up.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});up.set(t,e)}let cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return up.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BM(t){cp=t(cp)}function HM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fd(this),e,...n);return zT.set(r,e.sort?e.sort():[e]),ai(r)}:$M().includes(t)?function(...e){return t.apply(Fd(this),e),ai($T.get(this))}:function(...e){return ai(t.apply(Fd(this),e))}}function WM(t){return typeof t=="function"?HM(t):(t instanceof IDBTransaction&&jM(t),FM(t,UM())?new Proxy(t,cp):t)}function ai(t){if(t instanceof IDBRequest)return zM(t);if(Ld.has(t))return Ld.get(t);const e=WM(t);return e!==t&&(Ld.set(t,e),Qm.set(e,t)),e}const Fd=t=>Qm.get(t);function qM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ai(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ai(o.result),u.oldVersion,u.newVersion,ai(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const KM=["get","getKey","getAll","getAllKeys","count"],GM=["put","add","delete","clear"],Ud=new Map;function N0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KM.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Ud.set(e,s),s}BM(t=>({...t,get:(e,n,r)=>N0(e,n)||t.get(e,n,r),has:(e,n)=>!!N0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",D0="0.10.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new Gm("@firebase/app"),YM="@firebase/app-compat",JM="@firebase/analytics-compat",ZM="@firebase/analytics",eV="@firebase/app-check-compat",tV="@firebase/app-check",nV="@firebase/auth",rV="@firebase/auth-compat",iV="@firebase/database",sV="@firebase/database-compat",oV="@firebase/functions",aV="@firebase/functions-compat",lV="@firebase/installations",uV="@firebase/installations-compat",cV="@firebase/messaging",hV="@firebase/messaging-compat",dV="@firebase/performance",fV="@firebase/performance-compat",pV="@firebase/remote-config",mV="@firebase/remote-config-compat",gV="@firebase/storage",yV="@firebase/storage-compat",vV="@firebase/firestore",_V="@firebase/vertexai-preview",wV="@firebase/firestore-compat",EV="firebase",TV="10.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",SV={[hp]:"fire-core",[YM]:"fire-core-compat",[ZM]:"fire-analytics",[JM]:"fire-analytics-compat",[tV]:"fire-app-check",[eV]:"fire-app-check-compat",[nV]:"fire-auth",[rV]:"fire-auth-compat",[iV]:"fire-rtdb",[sV]:"fire-rtdb-compat",[oV]:"fire-fn",[aV]:"fire-fn-compat",[lV]:"fire-iid",[uV]:"fire-iid-compat",[cV]:"fire-fcm",[hV]:"fire-fcm-compat",[dV]:"fire-perf",[fV]:"fire-perf-compat",[pV]:"fire-rc",[mV]:"fire-rc-compat",[gV]:"fire-gcs",[yV]:"fire-gcs-compat",[vV]:"fire-fst",[wV]:"fire-fst-compat",[_V]:"fire-vertex","fire-js":"fire-js",[EV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map,IV=new Map,fp=new Map;function b0(t,e){try{t.container.addComponent(e)}catch(n){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ho(t){const e=t.name;if(fp.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,t);for(const n of Mc.values())b0(n,t);for(const n of IV.values())b0(n,t);return!0}function Xm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new wl("app","Firebase",xV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=TV;function jT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(n||(n=FT()),!n)throw li.create("no-options");const s=Mc.get(i);if(s){if(bc(n,s.options)&&bc(r,s.config))return s;throw li.create("duplicate-app",{appName:i})}const o=new bM(i);for(const u of fp.values())o.addComponent(u);const a=new AV(n,r,o);return Mc.set(i,a),a}function BT(t=dp){const e=Mc.get(t);if(!e&&t===dp&&FT())return jT();if(!e)throw li.create("no-app",{appName:t});return e}function ui(t,e,n){var r;let i=(r=SV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(a.join(" "));return}ho(new Zi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="firebase-heartbeat-database",RV=1,rl="firebase-heartbeat-store";let $d=null;function HT(){return $d||($d=qM(CV,RV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rl)}catch(n){console.warn(n)}}}}).catch(t=>{throw li.create("idb-open",{originalErrorMessage:t.message})})),$d}async function PV(t){try{const n=(await HT()).transaction(rl),r=await n.objectStore(rl).get(WT(t));return await n.done,r}catch(e){if(e instanceof Ar)Er.warn(e.message);else{const n=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(n.message)}}}async function M0(t,e){try{const r=(await HT()).transaction(rl,"readwrite");await r.objectStore(rl).put(e,WT(t)),await r.done}catch(n){if(n instanceof Ar)Er.warn(n.message);else{const r=li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Er.warn(r.message)}}}function WT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=1024,NV=30*24*60*60*1e3;class DV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=V0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=NV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V0(),{heartbeatsToSend:r,unsentEntries:i}=bV(this._heartbeatsCache.heartbeats),s=Dc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Er.warn(n),""}}}function V0(){return new Date().toISOString().substring(0,10)}function bV(t,e=kV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),O0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),O0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EM()?TM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return M0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return M0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function O0(t){return Dc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){ho(new Zi("platform-logger",e=>new QM(e),"PRIVATE")),ho(new Zi("heartbeat",e=>new DV(e),"PRIVATE")),ui(hp,D0,t),ui(hp,D0,"esm2017"),ui("fire-js","")}VV("");var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,qT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function S(){}S.prototype=_.prototype,I.D=_.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(R,C,N){for(var w=Array(arguments.length-2),b=2;b<arguments.length;b++)w[b-2]=arguments[b];return _.prototype[C].apply(R,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,S){S||(S=0);var R=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)R[C]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(C=0;16>C;++C)R[C]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=I.g[0],S=I.g[1],C=I.g[2];var N=I.g[3],w=_+(N^S&(C^N))+R[0]+3614090360&4294967295;_=S+(w<<7&4294967295|w>>>25),w=N+(C^_&(S^C))+R[1]+3905402710&4294967295,N=_+(w<<12&4294967295|w>>>20),w=C+(S^N&(_^S))+R[2]+606105819&4294967295,C=N+(w<<17&4294967295|w>>>15),w=S+(_^C&(N^_))+R[3]+3250441966&4294967295,S=C+(w<<22&4294967295|w>>>10),w=_+(N^S&(C^N))+R[4]+4118548399&4294967295,_=S+(w<<7&4294967295|w>>>25),w=N+(C^_&(S^C))+R[5]+1200080426&4294967295,N=_+(w<<12&4294967295|w>>>20),w=C+(S^N&(_^S))+R[6]+2821735955&4294967295,C=N+(w<<17&4294967295|w>>>15),w=S+(_^C&(N^_))+R[7]+4249261313&4294967295,S=C+(w<<22&4294967295|w>>>10),w=_+(N^S&(C^N))+R[8]+1770035416&4294967295,_=S+(w<<7&4294967295|w>>>25),w=N+(C^_&(S^C))+R[9]+2336552879&4294967295,N=_+(w<<12&4294967295|w>>>20),w=C+(S^N&(_^S))+R[10]+4294925233&4294967295,C=N+(w<<17&4294967295|w>>>15),w=S+(_^C&(N^_))+R[11]+2304563134&4294967295,S=C+(w<<22&4294967295|w>>>10),w=_+(N^S&(C^N))+R[12]+1804603682&4294967295,_=S+(w<<7&4294967295|w>>>25),w=N+(C^_&(S^C))+R[13]+4254626195&4294967295,N=_+(w<<12&4294967295|w>>>20),w=C+(S^N&(_^S))+R[14]+2792965006&4294967295,C=N+(w<<17&4294967295|w>>>15),w=S+(_^C&(N^_))+R[15]+1236535329&4294967295,S=C+(w<<22&4294967295|w>>>10),w=_+(C^N&(S^C))+R[1]+4129170786&4294967295,_=S+(w<<5&4294967295|w>>>27),w=N+(S^C&(_^S))+R[6]+3225465664&4294967295,N=_+(w<<9&4294967295|w>>>23),w=C+(_^S&(N^_))+R[11]+643717713&4294967295,C=N+(w<<14&4294967295|w>>>18),w=S+(N^_&(C^N))+R[0]+3921069994&4294967295,S=C+(w<<20&4294967295|w>>>12),w=_+(C^N&(S^C))+R[5]+3593408605&4294967295,_=S+(w<<5&4294967295|w>>>27),w=N+(S^C&(_^S))+R[10]+38016083&4294967295,N=_+(w<<9&4294967295|w>>>23),w=C+(_^S&(N^_))+R[15]+3634488961&4294967295,C=N+(w<<14&4294967295|w>>>18),w=S+(N^_&(C^N))+R[4]+3889429448&4294967295,S=C+(w<<20&4294967295|w>>>12),w=_+(C^N&(S^C))+R[9]+568446438&4294967295,_=S+(w<<5&4294967295|w>>>27),w=N+(S^C&(_^S))+R[14]+3275163606&4294967295,N=_+(w<<9&4294967295|w>>>23),w=C+(_^S&(N^_))+R[3]+4107603335&4294967295,C=N+(w<<14&4294967295|w>>>18),w=S+(N^_&(C^N))+R[8]+1163531501&4294967295,S=C+(w<<20&4294967295|w>>>12),w=_+(C^N&(S^C))+R[13]+2850285829&4294967295,_=S+(w<<5&4294967295|w>>>27),w=N+(S^C&(_^S))+R[2]+4243563512&4294967295,N=_+(w<<9&4294967295|w>>>23),w=C+(_^S&(N^_))+R[7]+1735328473&4294967295,C=N+(w<<14&4294967295|w>>>18),w=S+(N^_&(C^N))+R[12]+2368359562&4294967295,S=C+(w<<20&4294967295|w>>>12),w=_+(S^C^N)+R[5]+4294588738&4294967295,_=S+(w<<4&4294967295|w>>>28),w=N+(_^S^C)+R[8]+2272392833&4294967295,N=_+(w<<11&4294967295|w>>>21),w=C+(N^_^S)+R[11]+1839030562&4294967295,C=N+(w<<16&4294967295|w>>>16),w=S+(C^N^_)+R[14]+4259657740&4294967295,S=C+(w<<23&4294967295|w>>>9),w=_+(S^C^N)+R[1]+2763975236&4294967295,_=S+(w<<4&4294967295|w>>>28),w=N+(_^S^C)+R[4]+1272893353&4294967295,N=_+(w<<11&4294967295|w>>>21),w=C+(N^_^S)+R[7]+4139469664&4294967295,C=N+(w<<16&4294967295|w>>>16),w=S+(C^N^_)+R[10]+3200236656&4294967295,S=C+(w<<23&4294967295|w>>>9),w=_+(S^C^N)+R[13]+681279174&4294967295,_=S+(w<<4&4294967295|w>>>28),w=N+(_^S^C)+R[0]+3936430074&4294967295,N=_+(w<<11&4294967295|w>>>21),w=C+(N^_^S)+R[3]+3572445317&4294967295,C=N+(w<<16&4294967295|w>>>16),w=S+(C^N^_)+R[6]+76029189&4294967295,S=C+(w<<23&4294967295|w>>>9),w=_+(S^C^N)+R[9]+3654602809&4294967295,_=S+(w<<4&4294967295|w>>>28),w=N+(_^S^C)+R[12]+3873151461&4294967295,N=_+(w<<11&4294967295|w>>>21),w=C+(N^_^S)+R[15]+530742520&4294967295,C=N+(w<<16&4294967295|w>>>16),w=S+(C^N^_)+R[2]+3299628645&4294967295,S=C+(w<<23&4294967295|w>>>9),w=_+(C^(S|~N))+R[0]+4096336452&4294967295,_=S+(w<<6&4294967295|w>>>26),w=N+(S^(_|~C))+R[7]+1126891415&4294967295,N=_+(w<<10&4294967295|w>>>22),w=C+(_^(N|~S))+R[14]+2878612391&4294967295,C=N+(w<<15&4294967295|w>>>17),w=S+(N^(C|~_))+R[5]+4237533241&4294967295,S=C+(w<<21&4294967295|w>>>11),w=_+(C^(S|~N))+R[12]+1700485571&4294967295,_=S+(w<<6&4294967295|w>>>26),w=N+(S^(_|~C))+R[3]+2399980690&4294967295,N=_+(w<<10&4294967295|w>>>22),w=C+(_^(N|~S))+R[10]+4293915773&4294967295,C=N+(w<<15&4294967295|w>>>17),w=S+(N^(C|~_))+R[1]+2240044497&4294967295,S=C+(w<<21&4294967295|w>>>11),w=_+(C^(S|~N))+R[8]+1873313359&4294967295,_=S+(w<<6&4294967295|w>>>26),w=N+(S^(_|~C))+R[15]+4264355552&4294967295,N=_+(w<<10&4294967295|w>>>22),w=C+(_^(N|~S))+R[6]+2734768916&4294967295,C=N+(w<<15&4294967295|w>>>17),w=S+(N^(C|~_))+R[13]+1309151649&4294967295,S=C+(w<<21&4294967295|w>>>11),w=_+(C^(S|~N))+R[4]+4149444226&4294967295,_=S+(w<<6&4294967295|w>>>26),w=N+(S^(_|~C))+R[11]+3174756917&4294967295,N=_+(w<<10&4294967295|w>>>22),w=C+(_^(N|~S))+R[2]+718787259&4294967295,C=N+(w<<15&4294967295|w>>>17),w=S+(N^(C|~_))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(C+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var S=_-this.blockSize,R=this.B,C=this.h,N=0;N<_;){if(C==0)for(;N<=S;)i(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<_;)if(R[C++]=I.charCodeAt(N++),C==this.blockSize){i(this,R),C=0;break}}else for(;N<_;)if(R[C++]=I[N++],C==this.blockSize){i(this,R),C=0;break}}this.h=C,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var S=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=S&255,S/=256;for(this.u(I),I=Array(16),_=S=0;4>_;++_)for(var R=0;32>R;R+=8)I[S++]=this.g[_]>>>R&255;return I};function s(I,_){var S=a;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=_(I)}function o(I,_){this.h=_;for(var S=[],R=!0,C=I.length-1;0<=C;C--){var N=I[C]|0;R&&N==_||(S[C]=N,R=!1)}this.g=S}var a={};function u(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(c(-I));for(var _=[],S=1,R=0;I>=S;R++)_[R]=I/S|0,S*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return P(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(_,8)),R=d,C=0;C<I.length;C+=8){var N=Math.min(8,I.length-C),w=parseInt(I.substring(C,C+N),_);8>N?(N=c(Math.pow(_,N)),R=R.j(N).add(c(w))):(R=R.j(S),R=R.add(c(w)))}return R}var d=u(0),p=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-P(this).m();for(var I=0,_=1,S=0;S<this.g.length;S++){var R=this.i(S);I+=(0<=R?R:4294967296+R)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(x(this))return"-"+P(this).toString(I);for(var _=c(Math.pow(I,6)),S=this,R="";;){var C=k(S,_).g;S=g(S,C.j(_));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=C,T(S))return N+R;for(;6>N.length;)N="0"+N;R=N+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=g(this,I),x(I)?-1:T(I)?0:1};function P(I){for(var _=I.g.length,S=[],R=0;R<_;R++)S[R]=~I.g[R];return new o(S,~I.h).add(p)}t.abs=function(){return x(this)?P(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],R=0,C=0;C<=_;C++){var N=R+(this.i(C)&65535)+(I.i(C)&65535),w=(N>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);R=w>>>16,N&=65535,w&=65535,S[C]=w<<16|N}return new o(S,S[S.length-1]&-2147483648?-1:0)};function g(I,_){return I.add(P(_))}t.j=function(I){if(T(this)||T(I))return d;if(x(this))return x(I)?P(this).j(P(I)):P(P(this).j(I));if(x(I))return P(this.j(P(I)));if(0>this.l(y)&&0>I.l(y))return c(this.m()*I.m());for(var _=this.g.length+I.g.length,S=[],R=0;R<2*_;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var C=0;C<I.g.length;C++){var N=this.i(R)>>>16,w=this.i(R)&65535,b=I.i(C)>>>16,j=I.i(C)&65535;S[2*R+2*C]+=w*j,v(S,2*R+2*C),S[2*R+2*C+1]+=N*j,v(S,2*R+2*C+1),S[2*R+2*C+1]+=w*b,v(S,2*R+2*C+1),S[2*R+2*C+2]+=N*b,v(S,2*R+2*C+2)}for(R=0;R<_;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=_;R<2*_;R++)S[R]=0;return new o(S,0)};function v(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function E(I,_){this.g=I,this.h=_}function k(I,_){if(T(_))throw Error("division by zero");if(T(I))return new E(d,d);if(x(I))return _=k(P(I),_),new E(P(_.g),P(_.h));if(x(_))return _=k(I,P(_)),new E(P(_.g),_.h);if(30<I.g.length){if(x(I)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var S=p,R=_;0>=R.l(I);)S=M(S),R=M(R);var C=O(S,1),N=O(R,1);for(R=O(R,2),S=O(S,2);!T(R);){var w=N.add(R);0>=w.l(I)&&(C=C.add(S),N=w),R=O(R,1),S=O(S,1)}return _=g(I,C.j(_)),new E(C,_)}for(C=d;0<=I.l(_);){for(S=Math.max(1,Math.floor(I.m()/_.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),N=c(S),w=N.j(_);x(w)||0<w.l(I);)S-=R,N=c(S),w=N.j(_);T(N)&&(N=p),C=C.add(N),I=g(I,w)}return new E(C,I)}t.A=function(I){return k(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],R=0;R<_;R++)S[R]=this.i(R)&I.i(R);return new o(S,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],R=0;R<_;R++)S[R]=this.i(R)|I.i(R);return new o(S,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],R=0;R<_;R++)S[R]=this.i(R)^I.i(R);return new o(S,this.h^I.h)};function M(I){for(var _=I.g.length+1,S=[],R=0;R<_;R++)S[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(S,I.h)}function O(I,_){var S=_>>5;_%=32;for(var R=I.g.length-S,C=[],N=0;N<R;N++)C[N]=0<_?I.i(N+S)>>>_|I.i(N+S+1)<<32-_:I.i(N+S);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Hi=o}).apply(typeof L0<"u"?L0:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KT,GT,pa,QT,Bu,pp,XT,YT,JT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var A=0;A<l.length-1;A++){var F=l[A];if(!(F in m))break e;m=m[F]}l=l[l.length-1],A=m[l],f=f(A),f!=A&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var m=0,A=!1,F={next:function(){if(!A&&m<l.length){var B=m++;return{value:f(B,l[B]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,m){return l.call.apply(l.bind,arguments)}function d(l,f,m){if(!l)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),l.apply(f,F)}}return function(){return l.apply(f,arguments)}}function p(l,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function y(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var A=m.slice();return A.push.apply(A,arguments),l.apply(this,A)}}function T(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(A,F,B){for(var J=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)J[Ae-2]=arguments[Ae];return f.prototype[F].apply(A,J)}}function x(l){const f=l.length;if(0<f){const m=Array(f);for(let A=0;A<f;A++)m[A]=l[A];return m}return[]}function P(l,f){for(let m=1;m<arguments.length;m++){const A=arguments[m];if(u(A)){const F=l.length||0,B=A.length||0;l.length=F+B;for(let J=0;J<B;J++)l[F+J]=A[J]}else l.push(A)}}class g{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(l){return/^[\s\xa0]*$/.test(l)}function E(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function k(l){return k[" "](l),l}k[" "]=function(){};var M=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(l,f,m){for(const A in l)f.call(m,l[A],A,l)}function I(l,f){for(const m in l)f.call(void 0,l[m],m,l)}function _(l){const f={};for(const m in l)f[m]=l[m];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(l,f){let m,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(m in A)l[m]=A[m];for(let B=0;B<S.length;B++)m=S[B],Object.prototype.hasOwnProperty.call(A,m)&&(l[m]=A[m])}}function C(l){var f=1;l=l.split(":");const m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function N(l){a.setTimeout(()=>{throw l},0)}function w(){var l=V;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class b{constructor(){this.h=this.g=null}add(f,m){const A=j.get();A.set(f,m),this.h?this.h.next=A:this.g=A,this.h=A}}var j=new g(()=>new $,l=>l.reset());class ${constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let W,L=!1,V=new b,z=()=>{const l=a.Promise.resolve(void 0);W=()=>{l.then(H)}};var H=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(m){N(m)}var f=j;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}L=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l}();function oe(l,f){if(Y.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,A=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(M){e:{try{k(f.nodeName);var F=!0;break e}catch{}F=!1}F||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:he[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&oe.aa.h.call(this)}}T(oe,Y);var he={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Te=0;function Pe(l,f,m,A,F){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!A,this.ha=F,this.key=++Te,this.da=this.fa=!1}function Ie(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ye(l){this.src=l,this.g={},this.h=0}Ye.prototype.add=function(l,f,m,A,F){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var J=Ot(l,f,A,F);return-1<J?(f=l[J],m||(f.fa=!1)):(f=new Pe(f,this.src,B,!!A,F),f.fa=m,l.push(f)),f};function Pt(l,f){var m=f.type;if(m in l.g){var A=l.g[m],F=Array.prototype.indexOf.call(A,f,void 0),B;(B=0<=F)&&Array.prototype.splice.call(A,F,1),B&&(Ie(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Ot(l,f,m,A){for(var F=0;F<l.length;++F){var B=l[F];if(!B.da&&B.listener==f&&B.capture==!!m&&B.ha==A)return F}return-1}var Ve="closure_lm_"+(1e6*Math.random()|0),Lt={};function xe(l,f,m,A,F){if(Array.isArray(f)){for(var B=0;B<f.length;B++)xe(l,f[B],m,A,F);return null}return m=Xn(m),l&&l[de]?l.K(f,m,c(A)?!!A.capture:!!A,F):yt(l,f,m,!1,A,F)}function yt(l,f,m,A,F,B){if(!f)throw Error("Invalid event type");var J=c(F)?!!F.capture:!!F,Ae=mn(l);if(Ae||(l[Ve]=Ae=new Ye(l)),m=Ae.add(f,m,A,J,B),m.proxy)return m;if(A=re(),m.proxy=A,A.src=l,A.listener=m,l.addEventListener)ee||(F=J),F===void 0&&(F=!1),l.addEventListener(f.toString(),A,F);else if(l.attachEvent)l.attachEvent(Cr(f.toString()),A);else if(l.addListener&&l.removeListener)l.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return m}function re(){function l(m){return f.call(l.src,l.listener,m)}const f=Rr;return l}function kn(l,f,m,A,F){if(Array.isArray(f))for(var B=0;B<f.length;B++)kn(l,f[B],m,A,F);else A=c(A)?!!A.capture:!!A,m=Xn(m),l&&l[de]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],m=Ot(B,m,A,F),-1<m&&(Ie(B[m]),Array.prototype.splice.call(B,m,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=mn(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Ot(f,m,A,F)),(m=-1<l?f[l]:null)&&pn(m))}function pn(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[de])Pt(f.i,l);else{var m=l.type,A=l.proxy;f.removeEventListener?f.removeEventListener(m,A,l.capture):f.detachEvent?f.detachEvent(Cr(m),A):f.addListener&&f.removeListener&&f.removeListener(A),(m=mn(f))?(Pt(m,l),m.h==0&&(m.src=null,f[Ve]=null)):Ie(l)}}}function Cr(l){return l in Lt?Lt[l]:Lt[l]="on"+l}function Rr(l,f){if(l.da)l=!0;else{f=new oe(f,this);var m=l.listener,A=l.ha||l.src;l.fa&&pn(l),l=m.call(A,f)}return l}function mn(l){return l=l[Ve],l instanceof Ye?l:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xn(l){return typeof l=="function"?l:(l[sn]||(l[sn]=function(f){return l.handleEvent(f)}),l[sn])}function ke(){q.call(this),this.i=new Ye(this),this.M=this,this.F=null}T(ke,q),ke.prototype[de]=!0,ke.prototype.removeEventListener=function(l,f,m,A){kn(this,l,f,m,A)};function Oe(l,f){var m,A=l.F;if(A)for(m=[];A;A=A.F)m.push(A);if(l=l.M,A=f.type||f,typeof f=="string")f=new Y(f,l);else if(f instanceof Y)f.target=f.target||l;else{var F=f;f=new Y(A,l),R(f,F)}if(F=!0,m)for(var B=m.length-1;0<=B;B--){var J=f.g=m[B];F=Nn(J,A,!0,f)&&F}if(J=f.g=l,F=Nn(J,A,!0,f)&&F,F=Nn(J,A,!1,f)&&F,m)for(B=0;B<m.length;B++)J=f.g=m[B],F=Nn(J,A,!1,f)&&F}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],A=0;A<m.length;A++)Ie(m[A]);delete l.g[f],l.h--}}this.F=null},ke.prototype.K=function(l,f,m,A){return this.i.add(String(l),f,!1,m,A)},ke.prototype.L=function(l,f,m,A){return this.i.add(String(l),f,!0,m,A)};function Nn(l,f,m,A){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var F=!0,B=0;B<f.length;++B){var J=f[B];if(J&&!J.da&&J.capture==m){var Ae=J.listener,lt=J.ha||J.src;J.fa&&Pt(l.i,J),F=Ae.call(lt,A)!==!1&&F}}return F&&!A.defaultPrevented}function Yn(l,f,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Je(l){l.g=Yn(()=>{l.g=null,l.i&&(l.i=!1,Je(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class kt extends q{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Je(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wt(l){q.call(this),this.h=l,this.g={}}T(Wt,q);var Dn=[];function bn(l){O(l.g,function(f,m){this.g.hasOwnProperty(m)&&pn(f)},l),l.g={}}Wt.prototype.N=function(){Wt.aa.N.call(this),bn(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=a.JSON.stringify,on=a.JSON.parse,Ei=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ti(){}Ti.prototype.h=null;function Pr(l){return l.h||(l.h=l.i())}function cs(){}var kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gn(){Y.call(this,"d")}T(gn,Y);function bo(){Y.call(this,"c")}T(bo,Y);var Jn={},Nl=null;function hs(){return Nl=Nl||new ke}Jn.La="serverreachability";function Dl(l){Y.call(this,Jn.La,l)}T(Dl,Y);function Si(l){const f=hs();Oe(f,new Dl(f))}Jn.STAT_EVENT="statevent";function bl(l,f){Y.call(this,Jn.STAT_EVENT,l),this.stat=f}T(bl,Y);function at(l){const f=hs();Oe(f,new bl(f,l))}Jn.Ma="timingevent";function Ml(l,f){Y.call(this,Jn.Ma,l),this.size=f}T(Ml,Y);function Ii(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function $h(l,f,m,A,F,B){l.info(function(){if(l.g)if(B)for(var J="",Ae=B.split("&"),lt=0;lt<Ae.length;lt++){var we=Ae[lt].split("=");if(1<we.length){var vt=we[0];we=we[1];var _t=vt.split("_");J=2<=_t.length&&_t[1]=="type"?J+(vt+"="+we+"&"):J+(vt+"=redacted&")}}else J=null;else J=B;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+f+`
`+m+`
`+J})}function zh(l,f,m,A,F,B,J){l.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+f+`
`+m+`
`+B+" "+J})}function Zn(l,f,m,A){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Bh(l,m)+(A?" "+A:"")})}function jh(l,f){l.info(function(){return"TIMEOUT: "+f})}xi.prototype.info=function(){};function Bh(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var A=m[l];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var B=F[0];if(B!="noop"&&B!="stop"&&B!="close")for(var J=1;J<F.length;J++)F[J]=""}}}}return qt(m)}catch{return f}}var ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mo;function fs(){}T(fs,Ti),fs.prototype.g=function(){return new XMLHttpRequest},fs.prototype.i=function(){return{}},Mo=new fs;function Mn(l,f,m,A){this.j=l,this.i=f,this.l=m,this.R=A||1,this.U=new Wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}var Vo={},Oo={};function Lo(l,f,m){l.L=1,l.v=zl(tr(f)),l.m=m,l.P=!0,Ll(l,null)}function Ll(l,f){l.F=Date.now(),ps(l),l.A=tr(l.v);var m=l.A,A=l.R;Array.isArray(A)||(A=[String(A)]),Yg(m.i,"t",A),l.C=0,m=l.j.J,l.h=new Ol,l.g=my(l.j,m?f:null,!l.m),0<l.O&&(l.M=new kt(p(l.Y,l,l.g),l.O)),f=l.U,m=l.g,A=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(Dn[0]=F.toString()),F=Dn);for(var B=0;B<F.length;B++){var J=xe(m,F[B],A||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Si(),$h(l.i,l.u,l.A,l.l,l.R,l.m)}Mn.prototype.ca=function(l){l=l.target;const f=this.M;f&&nr(l)==3?f.j():this.Y(l)},Mn.prototype.Y=function(l){try{if(l==this.g)e:{const _t=nr(this.g);var f=this.g.Ba();const ys=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||iy(this.g)))){this.J||_t!=4||f==7||(f==8||0>=ys?Si(3):Si(2)),Uo(this);var m=this.g.Z();this.X=m;t:if(Fl(this)){var A=iy(this.g);l="";var F=A.length,B=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){er(this),Ai(this);var J="";break t}this.h.i=new a.TextDecoder}for(f=0;f<F;f++)this.h.h=!0,l+=this.h.i.decode(A[f],{stream:!(B&&f==F-1)});A.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=m==200,zh(this.i,this.u,this.A,this.l,this.R,_t,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,lt=this.g;if((Ae=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ae)){var we=Ae;break t}}we=null}if(m=we)Zn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ci(this,m);else{this.o=!1,this.s=3,at(12),er(this),Ai(this);break e}}if(this.P){m=!0;let yn;for(;!this.J&&this.C<J.length;)if(yn=Hh(this,J),yn==Oo){_t==4&&(this.s=4,at(14),m=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Vo){this.s=4,at(15),Zn(this.i,this.l,J,"[Invalid Chunk]"),m=!1;break}else Zn(this.i,this.l,yn,null),Ci(this,yn);if(Fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||J.length!=0||this.h.h||(this.s=1,at(16),m=!1),this.o=this.o&&m,!m)Zn(this.i,this.l,J,"[Invalid Chunked Response]"),er(this),Ai(this);else if(0<J.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Xh(vt),vt.M=!0,at(11))}}else Zn(this.i,this.l,J,null),Ci(this,J);_t==4&&er(this),this.o&&!this.J&&(_t==4?hy(this.j,this):(this.o=!1,ps(this)))}else lx(this.g),m==400&&0<J.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),er(this),Ai(this)}}}catch{}finally{}};function Fl(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Hh(l,f){var m=l.C,A=f.indexOf(`
`,m);return A==-1?Oo:(m=Number(f.substring(m,A)),isNaN(m)?Vo:(A+=1,A+m>f.length?Oo:(f=f.slice(A,A+m),l.C=A+m,f)))}Mn.prototype.cancel=function(){this.J=!0,er(this)};function ps(l){l.S=Date.now()+l.I,Fo(l,l.I)}function Fo(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ii(p(l.ba,l),f)}function Uo(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Mn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(jh(this.i,this.A),this.L!=2&&(Si(),at(17)),er(this),this.s=2,Ai(this)):Fo(this,this.S-l)};function Ai(l){l.j.G==0||l.J||hy(l.j,l)}function er(l){Uo(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,bn(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ci(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||Wh(m.h,l))){if(!l.K&&Wh(m.h,l)&&m.G==3){try{var A=m.Da.g.parse(f)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)ql(m),Hl(m);else break e;Qh(m),at(18)}}else m.za=F[1],0<m.za-m.T&&37500>F[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ii(p(m.Za,m),6e3));if(1>=jg(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Pi(m,11)}else if((l.K||m.g==l)&&ql(m),!v(f))for(F=m.Da.g.parse(f),f=0;f<F.length;f++){let we=F[f];if(m.T=we[0],we=we[1],m.G==2)if(we[0]=="c"){m.K=we[1],m.ia=we[2];const vt=we[3];vt!=null&&(m.la=vt,m.j.info("VER="+m.la));const _t=we[4];_t!=null&&(m.Aa=_t,m.j.info("SVER="+m.Aa));const ys=we[5];ys!=null&&typeof ys=="number"&&0<ys&&(A=1.5*ys,m.L=A,m.j.info("backChannelRequestTimeoutMs_="+A)),A=m;const yn=l.g;if(yn){const Gl=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gl){var B=A.h;B.g||Gl.indexOf("spdy")==-1&&Gl.indexOf("quic")==-1&&Gl.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(qh(B,B.h),B.h=null))}if(A.D){const Yh=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yh&&(A.ya=Yh,Ne(A.I,A.D,Yh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),A=m;var J=l;if(A.qa=py(A,A.J?A.ia:null,A.W),J.K){Bg(A.h,J);var Ae=J,lt=A.L;lt&&(Ae.I=lt),Ae.B&&(Uo(Ae),ps(Ae)),A.g=J}else uy(A);0<m.i.length&&Wl(m)}else we[0]!="stop"&&we[0]!="close"||Pi(m,7);else m.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Pi(m,7):Gh(m):we[0]!="noop"&&m.l&&m.l.ta(we),m.v=0)}}Si(4)}catch{}}var qI=class{constructor(l,f){this.g=l,this.map=f}};function $g(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function jg(l){return l.h?1:l.g?l.g.size:0}function Wh(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function qh(l,f){l.g?l.g.add(f):l.h=f}function Bg(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}$g.prototype.cancel=function(){if(this.i=Hg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Hg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const m of l.g.values())f=f.concat(m.D);return f}return x(l.i)}function KI(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],m=l.length,A=0;A<m;A++)f.push(l[A]);return f}f=[],m=0;for(A in l)f[m++]=l[A];return f}function GI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(const A in l)f[m++]=A;return f}}}function Wg(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=GI(l),A=KI(l),F=A.length,B=0;B<F;B++)f.call(void 0,A[B],m&&m[B],l)}var qg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QI(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var A=l[m].indexOf("="),F=null;if(0<=A){var B=l[m].substring(0,A);F=l[m].substring(A+1)}else B=l[m];f(B,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ri(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ri){this.h=l.h,Ul(this,l.j),this.o=l.o,this.g=l.g,$l(this,l.s),this.l=l.l;var f=l.i,m=new jo;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Kg(this,m),this.m=l.m}else l&&(f=String(l).match(qg))?(this.h=!1,Ul(this,f[1]||"",!0),this.o=$o(f[2]||""),this.g=$o(f[3]||"",!0),$l(this,f[4]),this.l=$o(f[5]||"",!0),Kg(this,f[6]||"",!0),this.m=$o(f[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}Ri.prototype.toString=function(){var l=[],f=this.j;f&&l.push(zo(f,Gg,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(zo(f,Gg,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(zo(m,m.charAt(0)=="/"?JI:YI,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",zo(m,ex)),l.join("")};function tr(l){return new Ri(l)}function Ul(l,f,m){l.j=m?$o(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function $l(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Kg(l,f,m){f instanceof jo?(l.i=f,tx(l.i,l.h)):(m||(f=zo(f,ZI)),l.i=new jo(f,l.h))}function Ne(l,f,m){l.i.set(f,m)}function zl(l){return Ne(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $o(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function zo(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,XI),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function XI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Gg=/[#\/\?@]/g,YI=/[#\?:]/g,JI=/[#\?]/g,ZI=/[#\?@]/g,ex=/#/g;function jo(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Nr(l){l.g||(l.g=new Map,l.h=0,l.i&&QI(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=jo.prototype,t.add=function(l,f){Nr(this),this.i=null,l=ms(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function Qg(l,f){Nr(l),f=ms(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Xg(l,f){return Nr(l),f=ms(l,f),l.g.has(f)}t.forEach=function(l,f){Nr(this),this.g.forEach(function(m,A){m.forEach(function(F){l.call(f,F,A,this)},this)},this)},t.na=function(){Nr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let A=0;A<f.length;A++){const F=l[A];for(let B=0;B<F.length;B++)m.push(f[A])}return m},t.V=function(l){Nr(this);let f=[];if(typeof l=="string")Xg(this,l)&&(f=f.concat(this.g.get(ms(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},t.set=function(l,f){return Nr(this),this.i=null,l=ms(this,l),Xg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Yg(l,f,m){Qg(l,f),0<m.length&&(l.i=null,l.g.set(ms(l,f),x(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var A=f[m];const B=encodeURIComponent(String(A)),J=this.V(A);for(A=0;A<J.length;A++){var F=B;J[A]!==""&&(F+="="+encodeURIComponent(String(J[A]))),l.push(F)}}return this.i=l.join("&")};function ms(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function tx(l,f){f&&!l.j&&(Nr(l),l.i=null,l.g.forEach(function(m,A){var F=A.toLowerCase();A!=F&&(Qg(this,A),Yg(this,F,m))},l)),l.j=f}function nx(l,f){const m=new xi;if(a.Image){const A=new Image;A.onload=y(Dr,m,"TestLoadImage: loaded",!0,f,A),A.onerror=y(Dr,m,"TestLoadImage: error",!1,f,A),A.onabort=y(Dr,m,"TestLoadImage: abort",!1,f,A),A.ontimeout=y(Dr,m,"TestLoadImage: timeout",!1,f,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=l}else f(!1)}function rx(l,f){const m=new xi,A=new AbortController,F=setTimeout(()=>{A.abort(),Dr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:A.signal}).then(B=>{clearTimeout(F),B.ok?Dr(m,"TestPingServer: ok",!0,f):Dr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),Dr(m,"TestPingServer: error",!1,f)})}function Dr(l,f,m,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(m)}catch{}}function ix(){this.g=new Ei}function sx(l,f,m){const A=m||"";try{Wg(l,function(F,B){let J=F;c(F)&&(J=qt(F)),f.push(A+B+"="+encodeURIComponent(J))})}catch(F){throw f.push(A+"type="+encodeURIComponent("_badmap")),F}}function Bo(l){this.l=l.Ub||null,this.j=l.eb||!1}T(Bo,Ti),Bo.prototype.g=function(){return new jl(this.l,this.j)},Bo.prototype.i=function(l){return function(){return l}}({});function jl(l,f){ke.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(jl,ke),t=jl.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Wo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ho(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Ho(this):Wo(this),this.readyState==3&&Jg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ho(this))},t.Qa=function(l){this.g&&(this.response=l,Ho(this))},t.ga=function(){this.g&&Ho(this)};function Ho(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Wo(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function Wo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Zg(l){let f="";return O(l,function(m,A){f+=A,f+=":",f+=m,f+=`\r
`}),f}function Kh(l,f,m){e:{for(A in m){var A=!1;break e}A=!0}A||(m=Zg(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Ne(l,f,m))}function je(l){ke.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(je,ke);var ox=/^https?$/i,ax=["POST","PUT"];t=je.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,m,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mo.g(),this.v=this.o?Pr(this.o):Pr(Mo),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){ey(this,B);return}if(l=m||"",m=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)m.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())m.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(m.keys()).find(B=>B.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ax,f,void 0))||A||F||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,J]of m)this.g.setRequestHeader(B,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ry(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){ey(this,B)}};function ey(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,ty(l),Bl(l)}function ty(l){l.A||(l.A=!0,Oe(l,"complete"),Oe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Oe(this,"complete"),Oe(this,"abort"),Bl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bl(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ny(this):this.bb())},t.bb=function(){ny(this)};function ny(l){if(l.h&&typeof o<"u"&&(!l.v[1]||nr(l)!=4||l.Z()!=2)){if(l.u&&nr(l)==4)Yn(l.Ea,0,l);else if(Oe(l,"readystatechange"),nr(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var A;if(A=J===0){var F=String(l.D).match(qg)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),A=!ox.test(F?F.toLowerCase():"")}m=A}if(m)Oe(l,"complete"),Oe(l,"success");else{l.m=6;try{var B=2<nr(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",ty(l)}}finally{Bl(l)}}}}function Bl(l,f){if(l.g){ry(l);const m=l.g,A=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Oe(l,"ready");try{m.onreadystatechange=A}catch{}}}function ry(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function nr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),on(f)}};function iy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function lx(l){const f={};l=(l.g&&2<=nr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<l.length;A++){if(v(l[A]))continue;var m=C(l[A]);const F=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const B=f[F]||[];f[F]=B,B.push(m)}I(f,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function sy(l){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,l),this.cb=qo("retryDelaySeedMs",1e4,l),this.Wa=qo("forwardChannelMaxRetries",2,l),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new $g(l&&l.concurrentRequestLimit),this.Da=new ix,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sy.prototype,t.la=8,t.G=1,t.connect=function(l,f,m,A){at(0),this.W=l,this.H=f||{},m&&A!==void 0&&(this.H.OSID=m,this.H.OAID=A),this.F=this.X,this.I=py(this,null,this.W),Wl(this)};function Gh(l){if(oy(l),l.G==3){var f=l.U++,m=tr(l.I);if(Ne(m,"SID",l.K),Ne(m,"RID",f),Ne(m,"TYPE","terminate"),Ko(l,m),f=new Mn(l,l.j,f),f.L=2,f.v=zl(tr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=my(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ps(f)}fy(l)}function Hl(l){l.g&&(Xh(l),l.g.cancel(),l.g=null)}function oy(l){Hl(l),l.u&&(a.clearTimeout(l.u),l.u=null),ql(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Wl(l){if(!zg(l.h)&&!l.s){l.s=!0;var f=l.Ga;W||z(),L||(W(),L=!0),V.add(f,l),l.B=0}}function ux(l,f){return jg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ii(p(l.Ga,l,f),dy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new Mn(this,this.j,l);let B=this.o;if(this.S&&(B?(B=_(B),R(B,this.S)):B=this.S),this.m!==null||this.O||(F.H=B,B=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var A=this.i[m];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(f+=A,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=ly(this,F,f),m=tr(this.I),Ne(m,"RID",l),Ne(m,"CVER",22),this.D&&Ne(m,"X-HTTP-Session-Id",this.D),Ko(this,m),B&&(this.O?f="headers="+encodeURIComponent(String(Zg(B)))+"&"+f:this.m&&Kh(m,this.m,B)),qh(this.h,F),this.Ua&&Ne(m,"TYPE","init"),this.P?(Ne(m,"$req",f),Ne(m,"SID","null"),F.T=!0,Lo(F,m,null)):Lo(F,m,f),this.G=2}}else this.G==3&&(l?ay(this,l):this.i.length==0||zg(this.h)||ay(this))};function ay(l,f){var m;f?m=f.l:m=l.U++;const A=tr(l.I);Ne(A,"SID",l.K),Ne(A,"RID",m),Ne(A,"AID",l.T),Ko(l,A),l.m&&l.o&&Kh(A,l.m,l.o),m=new Mn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=ly(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),qh(l.h,m),Lo(m,A,f)}function Ko(l,f){l.H&&O(l.H,function(m,A){Ne(f,A,m)}),l.l&&Wg({},function(m,A){Ne(f,A,m)})}function ly(l,f,m){m=Math.min(l.i.length,m);var A=l.l?p(l.l.Na,l.l,l):null;e:{var F=l.i;let B=-1;for(;;){const J=["count="+m];B==-1?0<m?(B=F[0].g,J.push("ofs="+B)):B=0:J.push("ofs="+B);let Ae=!0;for(let lt=0;lt<m;lt++){let we=F[lt].g;const vt=F[lt].map;if(we-=B,0>we)B=Math.max(0,F[lt].g-100),Ae=!1;else try{sx(vt,J,"req"+we+"_")}catch{A&&A(vt)}}if(Ae){A=J.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,A}function uy(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;W||z(),L||(W(),L=!0),V.add(f,l),l.v=0}}function Qh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ii(p(l.Fa,l),dy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,cy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ii(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Hl(this),cy(this))};function Xh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function cy(l){l.g=new Mn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=tr(l.qa);Ne(f,"RID","rpc"),Ne(f,"SID",l.K),Ne(f,"AID",l.T),Ne(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ne(f,"TO",l.ja),Ne(f,"TYPE","xmlhttp"),Ko(l,f),l.m&&l.o&&Kh(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=zl(tr(f)),m.m=null,m.P=!0,Ll(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Hl(this),Qh(this),at(19))};function ql(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function hy(l,f){var m=null;if(l.g==f){ql(l),Xh(l),l.g=null;var A=2}else if(Wh(l.h,f))m=f.D,Bg(l.h,f),A=1;else return;if(l.G!=0){if(f.o)if(A==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var F=l.B;A=hs(),Oe(A,new Ml(A,m)),Wl(l)}else uy(l);else if(F=f.s,F==3||F==0&&0<f.X||!(A==1&&ux(l,f)||A==2&&Qh(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),F){case 1:Pi(l,5);break;case 4:Pi(l,10);break;case 3:Pi(l,6);break;default:Pi(l,2)}}}function dy(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function Pi(l,f){if(l.j.info("Error code "+f),f==2){var m=p(l.fb,l),A=l.Xa;const F=!A;A=new Ri(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ul(A,"https"),zl(A),F?nx(A.toString(),m):rx(A.toString(),m)}else at(2);l.G=0,l.l&&l.l.sa(f),fy(l),oy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function fy(l){if(l.G=0,l.ka=[],l.l){const f=Hg(l.h);(f.length!=0||l.i.length!=0)&&(P(l.ka,f),P(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function py(l,f,m){var A=m instanceof Ri?tr(m):new Ri(m);if(A.g!="")f&&(A.g=f+"."+A.g),$l(A,A.s);else{var F=a.location;A=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;var B=new Ri(null);A&&Ul(B,A),f&&(B.g=f),F&&$l(B,F),m&&(B.l=m),A=B}return m=l.D,f=l.ya,m&&f&&Ne(A,m,f),Ne(A,"VER",l.la),Ko(l,A),A}function my(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new je(new Bo({eb:m})):new je(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gy(){}t=gy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kl(){}Kl.prototype.g=function(l,f){return new Kt(l,f)};function Kt(l,f){ke.call(this),this.g=new sy(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!v(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new gs(this)}T(Kt,ke),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Gh(this.g)},Kt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=qt(l),l=m);f.i.push(new qI(f.Ya++,l)),f.G==3&&Wl(f)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Gh(this.g),delete this.g,Kt.aa.N.call(this)};function yy(l){gn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}T(yy,gn);function vy(){bo.call(this),this.status=1}T(vy,bo);function gs(l){this.g=l}T(gs,gy),gs.prototype.ua=function(){Oe(this.g,"a")},gs.prototype.ta=function(l){Oe(this.g,new yy(l))},gs.prototype.sa=function(l){Oe(this.g,new vy)},gs.prototype.ra=function(){Oe(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,JT=function(){return new Kl},YT=function(){return hs()},XT=Jn,pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,Bu=ds,Vl.COMPLETE="complete",QT=Vl,cs.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",ke.prototype.listen=ke.prototype.K,pa=cs,GT=Bo,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,KT=je}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const F0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po="10.13.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new Gm("@firebase/firestore");function aa(){return es.logLevel}function ne(t,...e){if(es.logLevel<=ye.DEBUG){const n=e.map(Ym);es.debug(`Firestore (${Po}): ${t}`,...n)}}function Tr(t,...e){if(es.logLevel<=ye.ERROR){const n=e.map(Ym);es.error(`Firestore (${Po}): ${t}`,...n)}}function fo(t,...e){if(es.logLevel<=ye.WARN){const n=e.map(Ym);es.warn(`Firestore (${Po}): ${t}`,...n)}}function Ym(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+t;throw Tr(e),new Error(e)}function Ce(t,e){t||le()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class LV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FV{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ci,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ci)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new ZT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new St(e)}}class UV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $V{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new UV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new zV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=BV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function po(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new nt(0,0))}static max(){return new ue(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return il.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof il?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends il{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new He(n)}static emptyPath(){return new He([])}}const HV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends il{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return HV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ie(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ie(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ie(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ie(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(He.fromString(e))}static fromName(e){return new se(He.fromString(e).popFirst(5))}static empty(){return new se(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new He(e.slice()))}}function WV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new fi(i,se.empty(),e)}function qV(t){return new fi(t.readTime,t.key,-1)}class fi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fi(ue.min(),se.empty(),-1)}static max(){return new fi(ue.max(),se.empty(),-1)}}function KV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==GV)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(i=>i?G.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new G((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new G((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function XV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jm.oe=-1;function Eh(t){return t==null}function Vc(t){return t===0&&1/t==-1/0}function YV(t){return typeof t=="number"&&Number.isInteger(t)&&!Vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tu(this.root,e,this.comparator,!0)}}class Tu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ct.RED,this.left=i??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Xt([])}unionWith(e){let n=new ft(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nS("Invalid base64 string: "+s):s}}(e);return new mt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const JV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=JV.exec(t);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function eg(t){const e=t.mapValue.fields.__previous_value__;return Zm(e)?eg(e):e}function sl(t){const e=pi(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zm(t)?4:tO(t)?9007199254740991:eO(t)?10:11:le()}function qn(t,e){if(t===e)return!0;const n=ns(t);if(n!==ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sl(t).isEqual(sl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=pi(i.timestampValue),a=pi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return We(i.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return We(i.integerValue)===We(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=We(i.doubleValue),a=We(s.doubleValue);return o===a?Vc(o)===Vc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return po(t.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(U0(o)!==U0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!qn(o[u],a[u])))return!1;return!0}(t,e);default:return le()}}function al(t,e){return(t.values||[]).find(n=>qn(n,e))!==void 0}function mo(t,e){if(t===e)return 0;const n=ns(t),r=ns(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=We(s.integerValue||s.doubleValue),u=We(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return z0(t.timestampValue,e.timestampValue);case 4:return z0(sl(t),sl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ts(s),u=ts(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=Ee(a[c],u[c]);if(h!==0)return h}return Ee(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ee(We(s.latitude),We(o.latitude));return a!==0?a:Ee(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return j0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const d=s.fields||{},p=o.fields||{},y=(a=d.value)===null||a===void 0?void 0:a.arrayValue,T=(u=p.value)===null||u===void 0?void 0:u.arrayValue,x=Ee(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:j0(y,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Su.mapValue&&o===Su.mapValue)return 0;if(s===Su.mapValue)return 1;if(o===Su.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const p=Ee(u[d],h[d]);if(p!==0)return p;const y=mo(a[u[d]],c[h[d]]);if(y!==0)return y}return Ee(u.length,h.length)}(t.mapValue,e.mapValue);default:throw le()}}function z0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=pi(t),r=pi(e),i=Ee(n.seconds,r.seconds);return i!==0?i:Ee(n.nanos,r.nanos)}function j0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=mo(n[i],r[i]);if(s)return s}return Ee(n.length,r.length)}function go(t){return mp(t)}function mp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=mp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${mp(n.fields[o])}`;return i+"}"}(t.mapValue):le()}function gp(t){return!!t&&"integerValue"in t}function tg(t){return!!t&&"arrayValue"in t}function B0(t){return!!t&&"nullValue"in t}function H0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hu(t){return!!t&&"mapValue"in t}function eO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(n)}setAll(e){let n=ht.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Aa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Hu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Hu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ls(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ut(Aa(this.value))}}function rS(t){const e=[];return ls(t.fields,(n,r)=>{const i=new ht([n]);if(Hu(r)){const s=rS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xt(e,0,ue.min(),ue.min(),ue.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,i){return new xt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new xt(e,2,n,ue.min(),ue.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ue.min(),ue.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.position=e,this.inclusive=n}}function W0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=mo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function q0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n="asc"){this.field=e,this.dir=n}}function nO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{}class et extends iS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iO(e,n,r):n==="array-contains"?new aO(e,r):n==="in"?new lO(e,r):n==="not-in"?new uO(e,r):n==="array-contains-any"?new cO(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sO(e,r):new oO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mo(n,this.value)):n!==null&&ns(this.value)===ns(n)&&this.matchesComparison(mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends iS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kn(e,n)}matches(e){return sS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function sS(t){return t.op==="and"}function oS(t){return rO(t)&&sS(t)}function rO(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function yp(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+go(t.value);if(oS(t))return t.filters.map(e=>yp(e)).join(",");{const e=t.filters.map(n=>yp(n)).join(",");return`${t.op}(${e})`}}function aS(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&qn(r.value,i.value)}(t,e):t instanceof Kn?function(r,i){return i instanceof Kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&aS(o,i.filters[a]),!0):!1}(t,e):void le()}function lS(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`}(t):t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(lS).join(" ,")+"}"}(t):"Filter"}class iO extends et{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class sO extends et{constructor(e,n){super(e,"in",n),this.keys=uS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oO extends et{constructor(e,n){super(e,"not-in",n),this.keys=uS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class aO extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tg(n)&&al(n.arrayValue,this.value)}}class lO extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&al(this.value.arrayValue,n)}}class uO extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!al(this.value.arrayValue,n)}}class cO extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>al(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function K0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new hO(t,e,n,r,i,s,o)}function ng(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Eh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>go(r)).join(",")),e.ue=n}return e.ue}function rg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!q0(t.startAt,e.startAt)&&q0(t.endAt,e.endAt)}function vp(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dO(t,e,n,r,i,s,o,a){return new Th(t,e,n,r,i,s,o,a)}function ig(t){return new Th(t)}function G0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fO(t){return t.collectionGroup!==null}function Ca(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ft(ht.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lc(s,r))}),n.has(ht.keyField().canonicalString())||e.ce.push(new Lc(ht.keyField(),r))}return e.ce}function jn(t){const e=ce(t);return e.le||(e.le=pO(e,Ca(t))),e.le}function pO(t,e){if(t.limitType==="F")return K0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lc(i.field,s)});const n=t.endAt?new Oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oc(t.startAt.position,t.startAt.inclusive):null;return K0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _p(t,e,n){return new Th(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sh(t,e){return rg(jn(t),jn(e))&&t.limitType===e.limitType}function cS(t){return`${ng(jn(t))}|lt:${t.limitType}`}function Ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lS(i)).join(", ")}]`),Eh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>go(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>go(i)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function Ih(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ca(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=W0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Ca(r),i)||r.endAt&&!function(o,a,u){const c=W0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Ca(r),i))}(t,e)}function mO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hS(t){return(e,n)=>{let r=!1;for(const i of Ca(t)){const s=gO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gO(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?mo(u,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return tS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=new ze(se.comparator);function Sr(){return yO}const dS=new ze(se.comparator);function ma(...t){let e=dS;for(const n of t)e=e.insert(n.key,n);return e}function fS(t){let e=dS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ui(){return Ra()}function pS(){return Ra()}function Ra(){return new ko(t=>t.toString(),(t,e)=>t.isEqual(e))}const vO=new ze(se.comparator),_O=new ft(se.comparator);function me(...t){let e=_O;for(const n of t)e=e.add(n);return e}const wO=new ft(Ee);function EO(){return wO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function mS(t){return{integerValue:""+t}}function TO(t,e){return YV(e)?mS(e):sg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this._=void 0}}function SO(t,e,n){return t instanceof Fc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zm(s)&&(s=eg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ll?yS(t,e):t instanceof ul?vS(t,e):function(i,s){const o=gS(i,s),a=Q0(o)+Q0(i.Pe);return gp(o)&&gp(i.Pe)?mS(a):sg(i.serializer,a)}(t,e)}function IO(t,e,n){return t instanceof ll?yS(t,e):t instanceof ul?vS(t,e):n}function gS(t,e){return t instanceof Uc?function(r){return gp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Fc extends xh{}class ll extends xh{constructor(e){super(),this.elements=e}}function yS(t,e){const n=_S(e);for(const r of t.elements)n.some(i=>qn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ul extends xh{constructor(e){super(),this.elements=e}}function vS(t,e){let n=_S(e);for(const r of t.elements)n=n.filter(i=>!qn(i,r));return{arrayValue:{values:n}}}class Uc extends xh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Q0(t){return We(t.integerValue||t.doubleValue)}function _S(t){return tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ll&&i instanceof ll||r instanceof ul&&i instanceof ul?po(r.elements,i.elements,qn):r instanceof Uc&&i instanceof Uc?qn(r.Pe,i.Pe):r instanceof Fc&&i instanceof Fc}(t.transform,e.transform)}class AO{constructor(e,n){this.version=e,this.transformResults=n}}class Bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ah{}function wS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new TS(t.key,Bn.none()):new Il(t.key,t.data,Bn.none());{const n=t.data,r=Ut.empty();let i=new ft(ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wi(t.key,r,new Xt(i.toArray()),Bn.none())}}function CO(t,e,n){t instanceof Il?function(i,s,o){const a=i.value.clone(),u=Y0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof wi?function(i,s,o){if(!Wu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Y0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ES(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pa(t,e,n,r){return t instanceof Il?function(s,o,a,u){if(!Wu(s.precondition,o))return a;const c=s.value.clone(),h=J0(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof wi?function(s,o,a,u){if(!Wu(s.precondition,o))return a;const c=J0(s.fieldTransforms,u,o),h=o.data;return h.setAll(ES(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Wu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function RO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=gS(r.transform,i||null);s!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,s))}return n||null}function X0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&po(r,i,(s,o)=>xO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Il extends Ah{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wi extends Ah{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ES(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Y0(t,e,n){const r=new Map;Ce(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,IO(o,a,n[i]))}return r}function J0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,SO(s,o,e))}return r}class TS extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PO extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&CO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=wS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,(n,r)=>X0(n,r))&&po(this.baseMutations,e.baseMutations,(n,r)=>X0(n,r))}}class og{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length);let i=function(){return vO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new og(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,ve;function bO(t){switch(t){default:return le();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function SS(t){if(t===void 0)return Tr("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Ke.OK:return Q.OK;case Ke.CANCELLED:return Q.CANCELLED;case Ke.UNKNOWN:return Q.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return Q.INTERNAL;case Ke.UNAVAILABLE:return Q.UNAVAILABLE;case Ke.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ke.NOT_FOUND:return Q.NOT_FOUND;case Ke.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ke.ABORTED:return Q.ABORTED;case Ke.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ke.DATA_LOSS:return Q.DATA_LOSS;default:return le()}}(ve=Ke||(Ke={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new Hi([4294967295,4294967295],0);function Z0(t){const e=MO().encode(t),n=new qT;return n.update(e),new Uint8Array(n.digest())}function e_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hi([n,r],0),new Hi([i,s],0)]}class ag{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ga(`Invalid padding: ${n}`);if(r<0)throw new ga(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ga(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ga(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Hi.fromNumber(r)));return i.compare(VO)===1&&(i=new Hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Z0(e),[r,i]=e_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ag(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Z0(e),[r,i]=e_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ch(ue.min(),i,new ze(Ee),Sr(),me())}}class xl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xl(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class IS{constructor(e,n){this.targetId=e,this.me=n}}class xS{constructor(e,n,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class t_{constructor(){this.fe=0,this.ge=r_(),this.pe=mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new xl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=r_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class OO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sr(),this.qe=n_(),this.Qe=new ze(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(vp(s))if(r===0){const o=new se(s.path);this.Ue(n,o,xt.newNoDocument(o,ue.min()))}else Ce(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ts(r).toUint8Array()}catch(u){if(u instanceof nS)return fo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ag(o,i,s)}catch(u){return fo(u instanceof ga?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vp(a.target)){const u=new se(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,xt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=me();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ch(e,n,this.Qe,this.ke,r);return this.ke=Sr(),this.qe=n_(),this.Qe=new ze(Ee),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new t_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new t_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function n_(){return new ze(se.comparator)}function r_(){return new ze(se.comparator)}const LO={asc:"ASCENDING",desc:"DESCENDING"},FO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UO={and:"AND",or:"OR"};class $O{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wp(t,e){return t.useProto3Json||Eh(e)?e:{value:e}}function $c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zO(t,e){return $c(t,e.toTimestamp())}function Hn(t){return Ce(!!t),ue.fromTimestamp(function(n){const r=pi(n);return new nt(r.seconds,r.nanos)}(t))}function lg(t,e){return Ep(t,e).canonicalString()}function Ep(t,e){const n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CS(t){const e=He.fromString(t);return Ce(DS(e)),e}function Tp(t,e){return lg(t.databaseId,e.path)}function zd(t,e){const n=CS(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(PS(n))}function RS(t,e){return lg(t.databaseId,e)}function jO(t){const e=CS(t);return e.length===4?He.emptyPath():PS(e)}function Sp(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PS(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function i_(t,e,n){return{name:Tp(t,e),fields:n.value.mapValue.fields}}function BO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ce(h===void 0||typeof h=="string"),mt.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array),mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?Q.UNKNOWN:SS(c.code);return new ie(h,c.message||"")}(o);n=new xS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zd(t,r.document.name),s=Hn(r.document.updateTime),o=r.document.createTime?Hn(r.document.createTime):ue.min(),a=new Ut({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new qu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zd(t,r.document),s=r.readTime?Hn(r.readTime):ue.min(),o=xt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zd(t,r.document),s=r.removedTargetIds||[];n=new qu([],s,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new DO(i,s),a=r.targetId;n=new IS(a,o)}}return n}function HO(t,e){let n;if(e instanceof Il)n={update:i_(t,e.key,e.value)};else if(e instanceof TS)n={delete:Tp(t,e.key)};else if(e instanceof wi)n={update:i_(t,e.key,e.data),updateMask:ZO(e.fieldMask)};else{if(!(e instanceof PO))return le();n={verify:Tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ul)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:zO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function WO(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Hn(i.updateTime):Hn(s);return o.isEqual(ue.min())&&(o=Hn(s)),new AO(o,i.transformResults||[])}(n,e))):[]}function qO(t,e){return{documents:[RS(t,e.path)]}}function KO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=RS(t,i);const s=function(c){if(c.length!==0)return NS(Kn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Is(p.field),direction:XO(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function GO(t){let e=jO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=kS(d);return p instanceof Kn&&oS(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(T){return new Lc(xs(T.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Eh(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(d){const p=!!d.before,y=d.values||[];return new Oc(y,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,y=d.values||[];return new Oc(y,p)}(n.endAt)),dO(e,i,o,s,a,"F",u,c)}function QO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xs(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xs(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xs(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xs(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return et.create(xs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(r=>kS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function XO(t){return LO[t]}function YO(t){return FO[t]}function JO(t){return UO[t]}function Is(t){return{fieldPath:t.canonicalString()}}function xs(t){return ht.fromServerFormat(t.fieldPath)}function NS(t){return t instanceof et?function(n){if(n.op==="=="){if(H0(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(B0(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(H0(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(B0(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:YO(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const r=n.getFilters().map(i=>NS(i));return r.length===1?r[0]:{compositeFilter:{op:JO(n.op),filters:r}}}(t):le()}function ZO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.ct=e}}function tL(t){const e=GO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.un=new rL}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(fi.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(fi.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class rL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ft(He.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new yo(0)}static kn(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.changes=new ko(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pa(r.mutation,i,Xt.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const i=Ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ma();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Sr();const o=Ra(),a=function(){return Ra()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof wi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Pa(h.mutation,c,h.mutation.getFieldMask(),nt.now())):o.set(c.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new sL(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ra();let i=new ze((o,a)=>o-a),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Xt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const d=(i.get(a.batchId)||me()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=pS();h.forEach(p=>{if(!s.has(p)){const y=wS(n.get(p),r.get(p));y!==null&&d.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):G.resolve(Ui());let a=-1,u=s;return o.next(c=>G.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,me())).next(h=>({batchId:a,changes:fS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=ma();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ma();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,u=>{const c=function(d,p){return new Th(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,xt.newInvalidDocument(h)))});let a=ma();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Pa(h.mutation,c,Xt.empty(),nt.now()),Ih(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hn(i.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:tL(i.bundledQuery),readTime:Hn(i.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.overlays=new ze(se.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ui();return G.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const i=Ui(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return G.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ze((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ui(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ui(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return G.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new NO(n,r));let s=this.Ir.get(n);s===void 0&&(s=me(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Tr=new ft(rt.Er),this.dr=new ft(rt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new He([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new He([])),r=new rt(n,e),i=new rt(n,e+1);let s=me();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ft(rt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kO(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(Ee);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new rt(new se(s),0);let a=new ft(Ee);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rt(n,0),i=this.br.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.Mr=e,this.docs=function(){return new ze(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xt.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Sr();const o=n.path,a=new se(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||KV(qV(h),r)<=0||(i.has(h.key)||Ih(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,r,i){le()}Or(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dL(this)}getSize(e){return G.resolve(this.size)}}class dL extends iL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.persistence=e,this.Nr=new ko(n=>ng(n),rg),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ug,this.targetCount=0,this.kr=yo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jm(0),this.Kr=!1,this.Kr=!0,this.$r=new uL,this.referenceDelegate=e(this),this.Ur=new fL(this),this.indexManager=new nL,this.remoteDocumentCache=function(i){return new hL(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new eL(n),this.Gr=new aL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new cL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new mL(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class mL extends QV{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Jr=new ug,this.Yr=null}static Zr(e){return new cg(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const i=se.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=me(),i=me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wM()?8:XV(Rt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new gL;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(aa()<=ye.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(aa()<=ye.DEBUG&&ne("QueryEngine","Query:",Ss(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(aa()<=ye.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):G.resolve())}Yi(e,n){if(G0(n))return G.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_p(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=me(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,_p(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return G0(n)||i.isEqual(ue.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?G.resolve(null):(aa()<=ye.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ss(n)),this.rs(e,o,n,WV(i,-1)).next(a=>a))})}ts(e,n){let r=new ft(hS(e));return n.forEach((i,s)=>{Ih(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return aa()<=ye.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Ss(n)),this.Ji.getDocumentsMatchingQuery(e,n,fi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ze(Ee),this._s=new ko(s=>ng(s),rg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function _L(t,e,n,r){return new vL(t,e,n,r)}async function bS(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=me();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function wL(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const d=c.batch,p=d.keys();let y=G.resolve();return p.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(x=>{const P=c.docVersions.get(T);Ce(P!==null),x.version.compareTo(P)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function MS(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function EL(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(mt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(d,y),function(x,P,g){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(p,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=Sr(),c=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(TL(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function TL(t,e,n){let r=me(),i=me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Sr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function SL(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IL(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Qr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ip(t,e,n){const r=ce(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Sl(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function s_(t,e,n){const r=ce(t);let i=ue.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=ce(u),p=d._s.get(h);return p!==void 0?G.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:me())).next(a=>(xL(r,mO(e),a),{documents:a,Ts:s})))}function xL(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class o_{constructor(){this.activeTargetIds=EO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AL{constructor(){this.so=new o_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new o_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu=null;function jd(){return Iu===null?Iu=function(){return 268435456+Math.round(2147483648*Math.random())}():Iu++,"0x"+Iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class kL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=jd(),u=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw fo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=RL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=jd();return new Promise((o,a)=>{const u=new KT;u.setWithCredentials(!0),u.listenOnce(QT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Bu.NO_ERROR:const h=u.getResponseJson();ne(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Bu.TIMEOUT:ne(Tt,`RPC '${e}' ${s} timed out`),a(new ie(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Bu.HTTP_ERROR:const d=u.getStatus();if(ne(Tt,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const T=function(P){const g=P.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(g)>=0?g:Q.UNKNOWN}(y.status);a(new ie(T,y.message))}else a(new ie(Q.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ie(Q.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{ne(Tt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ne(Tt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=jd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=JT(),a=YT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new GT({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ne(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const d=o.createWebChannel(h,u);let p=!1,y=!1;const T=new PL({Io:P=>{y?ne(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(ne(Tt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),ne(Tt,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},To:()=>d.close()}),x=(P,g,v)=>{P.listen(g,E=>{try{v(E)}catch(k){setTimeout(()=>{throw k},0)}})};return x(d,pa.EventType.OPEN,()=>{y||(ne(Tt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),x(d,pa.EventType.CLOSE,()=>{y||(y=!0,ne(Tt,`RPC '${e}' stream ${i} transport closed`),T.So())}),x(d,pa.EventType.ERROR,P=>{y||(y=!0,fo(Tt,`RPC '${e}' stream ${i} transport errored:`,P),T.So(new ie(Q.UNAVAILABLE,"The operation could not be completed")))}),x(d,pa.EventType.MESSAGE,P=>{var g;if(!y){const v=P.data[0];Ce(!!v);const E=v,k=E.error||((g=E[0])===null||g===void 0?void 0:g.error);if(k){ne(Tt,`RPC '${e}' stream ${i} received error:`,k);const M=k.status;let O=function(S){const R=Ke[S];if(R!==void 0)return SS(R)}(M),I=k.message;O===void 0&&(O=Q.INTERNAL,I="Unknown error status: "+M+" with message "+k.message),y=!0,T.So(new ie(O,I)),d.close()}else ne(Tt,`RPC '${e}' stream ${i} received:`,v),T.bo(v)}}),x(a,XT.STAT_EVENT,P=>{P.stat===pp.PROXY?ne(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===pp.NOPROXY&&ne(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return new $O(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new VS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ie(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NL extends OS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=BO(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Hn(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Sp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=vp(u)?{documents:qO(s,u)}:{query:KO(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AS(s,o.resumeToken);const c=wp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=$c(s,o.snapshotVersion.toTimestamp());const c=wp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=QO(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Sp(this.serializer),n.removeTarget=e,this.a_(n)}}class DL extends OS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=WO(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Sp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>HO(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ie(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ep(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(Q.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ep(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(Q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ML{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tr(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{us(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ce(u);c.L_.add(4),await Al(c),c.q_.set("Unknown"),c.L_.delete(4),await Ph(c)}(this))})}),this.q_=new ML(r,i)}}async function Ph(t){if(us(t))for(const e of t.B_)await e(!0)}async function Al(t){for(const e of t.B_)await e(!1)}function LS(t,e){const n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),mg(n)?pg(n):No(n).r_()&&fg(n,e))}function dg(t,e){const n=ce(t),r=No(n);n.N_.delete(e),r.r_()&&FS(n,e),n.N_.size===0&&(r.r_()?r.o_():us(n)&&n.q_.set("Unknown"))}function fg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}No(t).A_(e)}function FS(t,e){t.Q_.xe(e),No(t).R_(e)}function pg(t){t.Q_=new OO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),No(t).start(),t.q_.v_()}function mg(t){return us(t)&&!No(t).n_()&&t.N_.size>0}function us(t){return ce(t).L_.size===0}function US(t){t.Q_=void 0}async function OL(t){t.q_.set("Online")}async function LL(t){t.N_.forEach((e,n)=>{fg(t,e)})}async function FL(t,e){US(t),mg(t)?(t.q_.M_(e),pg(t)):t.q_.set("Unknown")}async function UL(t,e,n){if(t.q_.set("Online"),e instanceof xS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zc(t,r)}else if(e instanceof qu?t.Q_.Ke(e):e instanceof IS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await MS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),FS(s,u);const d=new Qr(h.target,u,c,h.sequenceNumber);fg(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await zc(t,r)}}async function zc(t,e,n){if(!Sl(e))throw e;t.L_.add(1),await Al(t),t.q_.set("Offline"),n||(n=()=>MS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ph(t)})}function $S(t,e){return e().catch(n=>zc(t,n,e))}async function kh(t){const e=ce(t),n=mi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$L(e);)try{const i=await SL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,zL(e,i)}catch(i){await zc(e,i)}zS(e)&&jS(e)}function $L(t){return us(t)&&t.O_.length<10}function zL(t,e){t.O_.push(e);const n=mi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function zS(t){return us(t)&&!mi(t).n_()&&t.O_.length>0}function jS(t){mi(t).start()}async function jL(t){mi(t).p_()}async function BL(t){const e=mi(t);for(const n of t.O_)e.m_(n.mutations)}async function HL(t,e,n){const r=t.O_.shift(),i=og.from(r,e,n);await $S(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await kh(t)}async function WL(t,e){e&&mi(t).V_&&await async function(r,i){if(function(o){return bO(o)&&o!==Q.ABORTED}(i.code)){const s=r.O_.shift();mi(r).s_(),await $S(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await kh(r)}}(t,e),zS(t)&&jS(t)}async function l_(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=us(n);n.L_.add(3),await Al(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ph(n)}async function qL(t,e){const n=ce(t);e?(n.L_.delete(2),await Ph(n)):e||(n.L_.add(2),await Al(n),n.q_.set("Unknown"))}function No(t){return t.K_||(t.K_=function(n,r,i){const s=ce(n);return s.w_(),new NL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:OL.bind(null,t),Ro:LL.bind(null,t),mo:FL.bind(null,t),d_:UL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),mg(t)?pg(t):t.q_.set("Unknown")):(await t.K_.stop(),US(t))})),t.K_}function mi(t){return t.U_||(t.U_=function(n,r,i){const s=ce(n);return s.w_(),new DL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jL.bind(null,t),mo:WL.bind(null,t),f_:BL.bind(null,t),g_:HL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await kh(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(t,e){if(Tr("AsyncQueue",`${e}: ${t}`),Sl(t))return new ie(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=ma(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new Qs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.W_=new ze(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class vo{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vo(e,n,Qs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GL{constructor(){this.queries=c_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ce(n),s=i.queries;i.queries=c_(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new ie(Q.ABORTED,"Firestore shutting down"))}}function c_(){return new ko(t=>cS(t),Sh)}async function QL(t,e){const n=ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new KL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=yg(o,`Initialization of query '${Ss(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&vg(n)}async function XL(t,e){const n=ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YL(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&vg(n)}function JL(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function vg(t){t.Y_.forEach(e=>{e.next()})}var xp,h_;(h_=xp||(xp={})).ea="default",h_.Cache="cache";class ZL{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.key=e}}class HS{constructor(e){this.key=e}}class eF{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=hS(e),this.Ra=new Qs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new u_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),y=Ih(this.query,d)?d:null,T=!!p&&this.mutatedKeys.has(p.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;p&&y?p.data.isEqual(y.data)?T!==x&&(r.track({type:3,doc:y}),P=!0):this.ga(p,y)||(r.track({type:2,doc:y}),P=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),P=!0):p&&!y&&(r.track({type:1,doc:p}),P=!0,(u||c)&&(a=!0)),P&&(y?(o=o.add(y),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(y,T){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return x(y)-x(T)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new vo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new u_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new HS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new BS(r))}),n}ba(e){this.Ta=e.Ts,this.da=me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return vo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nF{constructor(e){this.key=e,this.va=!1}}class rF{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ko(a=>cS(a),Sh),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(se.comparator),this.Na=new Map,this.La=new ug,this.Ba={},this.ka=new Map,this.qa=yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iF(t,e,n=!0){const r=XS(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await WS(r,e,n,!0),i}async function sF(t,e){const n=XS(t);await WS(n,e,!0,!1)}async function WS(t,e,n,r){const i=await IL(t.localStore,jn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await oF(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&LS(t.remoteStore,i),a}async function oF(t,e,n,r,i){t.Ka=(d,p,y)=>async function(x,P,g,v){let E=P.view.ma(g);E.ns&&(E=await s_(x.localStore,P.query,!1).then(({documents:I})=>P.view.ma(I,E)));const k=v&&v.targetChanges.get(P.targetId),M=v&&v.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(E,x.isPrimaryClient,k,M);return f_(x,P.targetId,O.wa),O.snapshot}(t,d,p,y);const s=await s_(t.localStore,e,!0),o=new eF(e,s.Ts),a=o.ma(s.documents),u=xl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);f_(t,n,c.wa);const h=new tF(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function aF(t,e,n){const r=ce(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Sh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ip(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dg(r.remoteStore,i.targetId),Ap(r,i.targetId)}).catch(Tl)):(Ap(r,i.targetId),await Ip(r.localStore,i.targetId,!0))}async function lF(t,e){const n=ce(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dg(n.remoteStore,r.targetId))}async function uF(t,e,n){const r=gF(t);try{const i=await function(o,a){const u=ce(o),c=nt.now(),h=a.reduce((y,T)=>y.add(T.key),me());let d,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Sr(),x=me();return u.cs.getEntries(y,h).next(P=>{T=P,T.forEach((g,v)=>{v.isValidDocument()||(x=x.add(g))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(P=>{d=P;const g=[];for(const v of a){const E=RO(v,d.get(v.key).overlayedDocument);E!=null&&g.push(new wi(v.key,E,rS(E.value.mapValue),Bn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,g,a)}).next(P=>{p=P;const g=P.applyToLocalDocumentSet(d,x);return u.documentOverlayCache.saveOverlays(y,P.batchId,g)})}).then(()=>({batchId:p.batchId,changes:fS(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new ze(Ee)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Cl(r,i.changes),await kh(r.remoteStore)}catch(i){const s=yg(i,"Failed to persist write");n.reject(s)}}async function qS(t,e){const n=ce(t);try{const r=await EL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ce(o.va):i.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),await Cl(n,r,e)}catch(r){await Tl(r)}}function d_(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ce(o);u.onlineState=a;let c=!1;u.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&vg(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cF(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ze(se.comparator);o=o.insert(s,xt.newNoDocument(s,ue.min()));const a=me().add(s),u=new Ch(ue.min(),new Map,new ze(Ee),o,a);await qS(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),_g(r)}else await Ip(r.localStore,e,!1).then(()=>Ap(r,e,n)).catch(Tl)}async function hF(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await wL(n.localStore,e);GS(n,r,null),KS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cl(n,i)}catch(i){await Tl(i)}}async function dF(t,e,n){const r=ce(t);try{const i=await function(o,a){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(Ce(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);GS(r,e,n),KS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cl(r,i)}catch(i){await Tl(i)}}function KS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function GS(t,e,n){const r=ce(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ap(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||QS(t,r)})}function QS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_g(t))}function f_(t,e,n){for(const r of n)r instanceof BS?(t.La.addReference(r.key,e),fF(t,r)):r instanceof HS?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||QS(t,r.key)):le()}function fF(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),_g(t))}function _g(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(He.fromString(e)),r=t.qa.next();t.Na.set(r,new nF(n)),t.Oa=t.Oa.insert(n,r),LS(t.remoteStore,new Qr(jn(ig(n.path)),r,"TargetPurposeLimboResolution",Jm.oe))}}async function Cl(t,e,n){const r=ce(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(c){i.push(c);const d=hg.Wi(u.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=ce(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>G.forEach(c,p=>G.forEach(p.$i,y=>h.persistence.referenceDelegate.addReference(d,p.targetId,y)).next(()=>G.forEach(p.Ui,y=>h.persistence.referenceDelegate.removeReference(d,p.targetId,y)))))}catch(d){if(!Sl(d))throw d;ne("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const y=h.os.get(p),T=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(p,x)}}}(r.localStore,s))}async function pF(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await bS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new ie(Q.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cl(n,r.hs)}}function mF(t,e){const n=ce(t),r=n.Na.get(e);if(r&&r.va)return me().add(r.key);{let i=me();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function XS(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cF.bind(null,e),e.Ca.d_=YL.bind(null,e.eventManager),e.Ca.$a=JL.bind(null,e.eventManager),e}function gF(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dF.bind(null,e),e}class p_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return _L(this.persistence,new yL,e.initialUser,this.serializer)}createPersistence(e){return new pL(cg.Zr,this.serializer)}createSharedClientState(e){return new AL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class yF{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>d_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pF.bind(null,this.syncEngine),await qL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GL}()}createDatastore(e){const n=Rh(e.databaseInfo.databaseId),r=function(s){return new kL(s)}(e.databaseInfo);return function(s,o,a,u){return new bL(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new VL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>d_(this.syncEngine,n,0),function(){return a_.D()?new a_:new CL}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const d=new rF(i,s,o,a,u,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ce(i);ne("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Al(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=eS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ne("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ne("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ie(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hd(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function m_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EF(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>l_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>l_(e.remoteStore,i)),t._onlineComponents=e}function wF(t){return t.name==="FirebaseError"?t.code===Q.FAILED_PRECONDITION||t.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function EF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!wF(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await Hd(t,new p_)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Hd(t,new p_);return t._offlineComponents}async function YS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await m_(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await m_(t,new yF))),t._onlineComponents}function TF(t){return YS(t).then(e=>e.syncEngine)}async function SF(t){const e=await YS(t),n=e.eventManager;return n.onListen=iF.bind(null,e.syncEngine),n.onUnlisten=aF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lF.bind(null,e.syncEngine),n}function IF(t,e,n={}){const r=new ci;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new vF({next:p=>{o.enqueueAndForget(()=>XL(s,d));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new ie(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?c.reject(new ie(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new ZL(ig(a.path),h,{includeMetadataChanges:!0,_a:!0});return QL(s,d)}(await SF(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t,e,n){if(!n)throw new ie(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AF(t,e,n,r){if(e===!0&&r===!0)throw new ie(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function y_(t){if(!se.isDocumentKey(t))throw new ie(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function rs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wg(t);throw new ie(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ie(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ie(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OV;switch(r.type){case"firstParty":return new $V(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=g_.get(n);r&&(ne("ComponentProvider","Removing Datastore"),g_.delete(n),r.terminate())}(this),Promise.resolve()}}function CF(t,e,n,r={}){var i;const s=(t=rs(t,Eg))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=St.MOCK_USER;else{a=fM(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ie(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new St(c)}t._authCredentials=new LV(new ZT(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Tg(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class cl extends Tg{constructor(e,n,r){super(e,n,ig(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new se(e))}withConverter(e){return new cl(this.firestore,e,this._path)}}function Nh(t,e,...n){if(t=bt(t),arguments.length===1&&(e=eS.newId()),xF("doc","path",e),t instanceof Eg){const r=He.fromString(e,...n);return y_(r),new Jt(t,null,new se(r))}{if(!(t instanceof Jt||t instanceof cl))throw new ie(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return y_(r),new Jt(t.firestore,t instanceof cl?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new VS(this,"async_queue_retry"),this.Eu=()=>{const n=Bd();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Bd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new ci;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Tr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=gg.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&le()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Dh extends Eg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new RF}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||eI(this),this._firestoreClient.terminate()}}function PF(t,e){const n=typeof t=="object"?t:BT(),r=typeof t=="string"?t:"(default)",i=Xm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=hM("firestore");s&&CF(i,...s)}return i}function ZS(t){return t._firestoreClient||eI(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eI(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new ZV(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new _F(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _o(mt.fromBase64String(e))}catch(n){throw new ie(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _o(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=/^__.*__$/;class NF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Il(e,this.data,n,this.fieldTransforms)}}class tI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Ag{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return jc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(nI(this.wu)&&kF.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class DF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rh(e)}Nu(e,n,r,i=!1){return new Ag({wu:e,methodName:n,Ou:r,path:ht.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rI(t){const e=t._freezeSettings(),n=Rh(t._databaseId);return new DF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bF(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);Cg("Data must be an object, but it was:",o,r);const a=iI(r,o);let u,c;if(s.merge)u=new Xt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Cp(e,d,n);if(!o.contains(p))throw new ie(Q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);oI(h,p)||h.push(p)}u=new Xt(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new NF(new Ut(a),u,c)}class Mh extends Sg{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}function MF(t,e,n,r){const i=t.Nu(1,e,n);Cg("Data must be an object, but it was:",i,r);const s=[],o=Ut.empty();ls(r,(u,c)=>{const h=Rg(e,u,n);c=bt(c);const d=i.Cu(h);if(c instanceof Mh)s.push(h);else{const p=Vh(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Xt(s);return new tI(o,a,i.fieldTransforms)}function VF(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[Cp(e,r,n)],u=[i];if(s.length%2!=0)throw new ie(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Cp(e,s[p])),u.push(s[p+1]);const c=[],h=Ut.empty();for(let p=a.length-1;p>=0;--p)if(!oI(c,a[p])){const y=a[p];let T=u[p];T=bt(T);const x=o.Cu(y);if(T instanceof Mh)c.push(y);else{const P=Vh(T,x);P!=null&&(c.push(y),h.set(y,P))}}const d=new Xt(c);return new tI(h,d,o.fieldTransforms)}function Vh(t,e){if(sI(t=bt(t)))return Cg("Unsupported field value:",e,t),iI(t,e);if(t instanceof Sg)return function(r,i){if(!nI(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Vh(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:$c(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$c(i.serializer,s)}}if(r instanceof Ig)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _o)return{bytesValue:AS(i.serializer,r._byteString)};if(r instanceof Jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof xg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return sg(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${wg(r)}`)}(t,e)}function iI(t,e){const n={};return tS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(t,(r,i)=>{const s=Vh(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function sI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Ig||t instanceof _o||t instanceof Jt||t instanceof Sg||t instanceof xg)}function Cg(t,e,n){if(!sI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wg(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Cp(t,e,n){if((e=bt(e))instanceof bh)return e._internalPath;if(typeof e=="string")return Rg(t,e);throw jc("Field path arguments must be of type string or ",t,!1,void 0,n)}const OF=new RegExp("[~\\*/\\[\\]]");function Rg(t,e,n){if(e.search(OF)>=0)throw jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bh(...e.split("."))._internalPath}catch{throw jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ie(Q.INVALID_ARGUMENT,a+t+u)}function oI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LF extends aI{data(){return super.data()}}function lI(t,e){return typeof e=="string"?Rg(t,e):e instanceof bh?e._internalPath:e._delegate._internalPath}class FF{convertValue(e,n="none"){switch(ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ls(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>We(o.doubleValue));return new xg(s)}convertGeoPoint(e){return new Ig(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=eg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const n=pi(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);Ce(DS(r));const i=new ol(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||Tr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uI extends aI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zF(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zF extends uI{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){t=rs(t,Jt);const e=rs(t.firestore,Dh);return IF(ZS(e),t._key).then(n=>BF(e,t,n))}class jF extends FF{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function hI(t,e,n){t=rs(t,Jt);const r=rs(t.firestore,Dh),i=UF(t.converter,e,n);return fI(r,[bF(rI(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Bn.none())])}function dI(t,e,n,...r){t=rs(t,Jt);const i=rs(t.firestore,Dh),s=rI(i);let o;return o=typeof(e=bt(e))=="string"||e instanceof bh?VF(s,"updateDoc",t._key,e,n,r):MF(s,"updateDoc",t._key,e),fI(i,[o.toMutation(t._key,Bn.exists(!0))])}function fI(t,e){return function(r,i){const s=new ci;return r.asyncQueue.enqueueAndForget(async()=>uF(await TF(r),i,s)),s.promise}(ZS(t),e)}function BF(t,e,n){const r=n.docs.get(e._key),i=new jF(t);return new uI(t,i,e._key,r,new $F(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Po=i})(Ro),ho(new Zi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Dh(new FV(r.getProvider("auth-internal")),new jV(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ui(F0,"4.7.2",e),ui(F0,"4.7.2","esm2017")})();function Pg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HF=pI,mI=new wl("auth","Firebase",pI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Gm("@firebase/auth");function WF(t,...e){Bc.logLevel<=ye.WARN&&Bc.warn(`Auth (${Ro}): ${t}`,...e)}function Ku(t,...e){Bc.logLevel<=ye.ERROR&&Bc.error(`Auth (${Ro}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,...e){throw Ng(t,...e)}function Cn(t,...e){return Ng(t,...e)}function kg(t,e,n){const r=Object.assign(Object.assign({},HF()),{[e]:n});return new wl("auth","Firebase",r).create(e,{appName:t.name})}function Wi(t){return kg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gn(t,"argument-error"),kg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ng(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mI.create(t,...e)}function ae(t,e,...n){if(!t)throw Ng(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ku(e),new Error(e)}function Ir(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KF(){return __()==="http:"||__()==="https:"}function __(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KF()||yM()||"connection"in navigator)?navigator.onLine:!0}function QF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=pM()||vM()}get(){return GF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t,e){Ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=new Rl(3e4,6e4);function bg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Do(t,e,n,r,i={}){return yI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=El(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return gM()||(c.referrerPolicy="no-referrer"),gI.fetch()(vI(t,t.config.apiHost,n,a),c)})}async function yI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},XF),e);try{const i=new ZF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw xu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw xu(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kg(t,h,c);Gn(t,h)}}catch(i){if(i instanceof Ar)throw i;Gn(t,"network-request-failed",{message:String(i)})}}async function JF(t,e,n,r,i={}){const s=await Do(t,e,n,r,i);return"mfaPendingCredential"in s&&Gn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function vI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Dg(t.config,i):`${t.config.apiScheme}://${i}`}class ZF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),YF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Cn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e4(t,e){return Do(t,"POST","/v1/accounts:delete",e)}async function _I(t,e){return Do(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t4(t,e=!1){const n=bt(t),r=await n.getIdToken(e),i=Mg(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ka(Wd(i.auth_time)),issuedAtTime:ka(Wd(i.iat)),expirationTime:ka(Wd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wd(t){return Number(t)*1e3}function Mg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const i=OT(n);return i?JSON.parse(i):(Ku("Failed to decode base64 JWT payload"),null)}catch(i){return Ku("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function w_(t){const e=Mg(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ar&&n4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function n4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ka(this.lastLoginAt),this.creationTime=ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await hl(t,_I(n,{idToken:r}));ae(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wI(s.providerUserInfo):[],a=s4(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Pp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function i4(t){const e=bt(t);await Hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function s4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wI(t){return t.map(e=>{var{providerId:n}=e,r=Pg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(t,e){const n=await yI(t,{},async()=>{const r=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=vI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function a4(t,e){return Do(t,"POST","/v2/accounts:revokeToken",bg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=w_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await o4(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Xs;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xs,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Pg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new r4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hl(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return t4(this,e)}reload(){return i4(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await hl(this,e4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,g=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:k,isAnonymous:M,providerData:O,stsTokenManager:I}=n;ae(E&&I,e,"internal-error");const _=Xs.fromJSON(this.name,I);ae(typeof E=="string",e,"internal-error"),Vr(d,e.name),Vr(p,e.name),ae(typeof k=="boolean",e,"internal-error"),ae(typeof M=="boolean",e,"internal-error"),Vr(y,e.name),Vr(T,e.name),Vr(x,e.name),Vr(P,e.name),Vr(g,e.name),Vr(v,e.name);const S=new dr({uid:E,auth:e,email:p,emailVerified:k,displayName:d,isAnonymous:M,photoURL:T,phoneNumber:y,tenantId:x,stsTokenManager:_,createdAt:g,lastLoginAt:v});return O&&Array.isArray(O)&&(S.providerData=O.map(R=>Object.assign({},R))),P&&(S._redirectEventId=P),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xs;i.updateFromServerResponse(n);const s=new dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?wI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Xs;a.updateFromIdToken(r);const u=new dr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Pp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;function fr(t){Ir(t instanceof Function,"Expected a class definition");let e=E_.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EI.type="NONE";const T_=EI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ys{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Gu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ys(fr(T_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||fr(T_);const o=Gu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=dr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ys(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ys(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CI(e))return"Blackberry";if(RI(e))return"Webos";if(SI(e))return"Safari";if((e.includes("chrome/")||II(e))&&!e.includes("edge/"))return"Chrome";if(AI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TI(t=Rt()){return/firefox\//i.test(t)}function SI(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function II(t=Rt()){return/crios\//i.test(t)}function xI(t=Rt()){return/iemobile/i.test(t)}function AI(t=Rt()){return/android/i.test(t)}function CI(t=Rt()){return/blackberry/i.test(t)}function RI(t=Rt()){return/webos/i.test(t)}function Vg(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function l4(t=Rt()){var e;return Vg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function u4(){return _M()&&document.documentMode===10}function PI(t=Rt()){return Vg(t)||AI(t)||RI(t)||CI(t)||/windows phone/i.test(t)||xI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e=[]){let n;switch(t){case"Browser":n=S_(Rt());break;case"Worker":n=`${S_(Rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ro}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(t,e={}){return Do(t,"GET","/v2/passwordPolicy",bg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=6;class f4{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:d4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I_(this),this.idTokenSubscription=new I_(this),this.beforeStateQueue=new c4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ys.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _I(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(Wi(this));const n=e?bt(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await h4(this),n=new f4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await a4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Ys.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Oh(t){return bt(t)}class I_{constructor(e){this.auth=e,this.observer=null,this.addObserver=CM(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m4(t){Og=t}function g4(t){return Og.loadJS(t)}function y4(){return Og.gapiScript}function v4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t,e){const n=Xm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(bc(s,e??{}))return i;Gn(i,"already-initialized")}return n.initialize({options:e})}function w4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function E4(t,e,n){const r=Oh(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=NI(e),{host:o,port:a}=T4(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),S4()}function NI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function T4(t){const e=NI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:x_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:x_(o)}}}function x_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function S4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e){return JF(t,"POST","/v1/accounts:signInWithIdp",bg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="http://localhost";class is extends DI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Pg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new is(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){const e={requestUri:I4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=El(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Lg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Pl{constructor(){super("facebook.com")}static credential(e){return is._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com";Br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return is._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return or.credential(n,r)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Pl{constructor(){super("github.com")}static credential(e){return is._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Pl{constructor(){super("twitter.com")}static credential(e,n){return is._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await dr._fromIdTokenResponse(e,r,i),o=A_(r);return new wo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=A_(r);return new wo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function A_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Ar{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Wc(e,n,r,i)}}function bI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wc._fromErrorAndOperation(t,s,e,r):s})}async function x4(t,e,n=!1){const r=await hl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(t,e,n=!1){const{auth:r}=t;if(cr(r.app))return Promise.reject(Wi(r));const i="reauthenticate";try{const s=await hl(t,bI(r,i,e,t),n);ae(s.idToken,r,"internal-error");const o=Mg(s.idToken);ae(o,r,"internal-error");const{sub:a}=o;return ae(t.uid===a,r,"user-mismatch"),wo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Gn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e,n=!1){if(cr(t.app))return Promise.reject(Wi(t));const r="signIn",i=await bI(t,r,e),s=await wo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function R4(t,e,n,r){return bt(t).onIdTokenChanged(e,n,r)}function P4(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function k4(t,e,n,r){return bt(t).onAuthStateChanged(e,n,r)}function N4(t){return bt(t).signOut()}const qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=1e3,b4=10;class VI extends MI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);u4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,b4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},D4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VI.type="LOCAL";const OI=VI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends MI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LI.type="SESSION";const FI=LI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Lh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await M4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Fg("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function O4(t){Wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}async function L4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function U4(){return UI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="firebaseLocalStorageDb",$4=1,Kc="firebaseLocalStorage",zI="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fh(t,e){return t.transaction([Kc],e?"readwrite":"readonly").objectStore(Kc)}function z4(){const t=indexedDB.deleteDatabase($I);return new kl(t).toPromise()}function kp(){const t=indexedDB.open($I,$4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kc,{keyPath:zI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kc)?e(r):(r.close(),await z4(),e(await kp()))})})}async function C_(t,e,n){const r=Fh(t,!0).put({[zI]:e,value:n});return new kl(r).toPromise()}async function j4(t,e){const n=Fh(t,!1).get(e),r=await new kl(n).toPromise();return r===void 0?null:r.value}function R_(t,e){const n=Fh(t,!0).delete(e);return new kl(n).toPromise()}const B4=800,H4=3;class jI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>H4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(U4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await L4(),!this.activeServiceWorker)return;this.sender=new V4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kp();return await C_(e,qc,"1"),await R_(e,qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>C_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>j4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Fh(i,!1).getAll();return new kl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jI.type="LOCAL";const W4=jI;new Rl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e){return e?fr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends DI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function q4(t){return C4(t.auth,new Ug(t),t.bypassAuthState)}function K4(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),A4(n,new Ug(t),t.bypassAuthState)}async function G4(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),x4(n,new Ug(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q4;case"linkViaPopup":case"linkViaRedirect":return G4;case"reauthViaPopup":case"reauthViaRedirect":return K4;default:Gn(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new Rl(2e3,1e4);async function X4(t,e,n){if(cr(t.app))return Promise.reject(Cn(t,"operation-not-supported-in-this-environment"));const r=Oh(t);qF(t,e,Lg);const i=BI(r,n);return new $i(r,"signInViaPopup",e,i).executeNotNull()}class $i extends HI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$i.currentPopupAction&&$i.currentPopupAction.cancel(),$i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=Fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q4.get())};e()}}$i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="pendingRedirect",Qu=new Map;class J4 extends HI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qu.get(this.auth._key());if(!e){try{const r=await Z4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qu.set(this.auth._key(),e)}return this.bypassAuthState||Qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z4(t,e){const n=nU(e),r=tU(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function eU(t,e){Qu.set(t._key(),e)}function tU(t){return fr(t._redirectPersistence)}function nU(t){return Gu(Y4,t.config.apiKey,t.name)}async function rU(t,e,n=!1){if(cr(t.app))return Promise.reject(Wi(t));const r=Oh(t),i=BI(r,e),o=await new J4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=10*60*1e3;class sU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iU&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(e))}saveEventToCache(e){this.cachedEventUids.add(P_(e)),this.lastProcessedEventTime=Date.now()}}function P_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(t,e={}){return Do(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uU=/^https?/;async function cU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aU(t);for(const n of e)try{if(hU(n))return}catch{}Gn(t,"unauthorized-domain")}function hU(t){const e=Rp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uU.test(n))return!1;if(lU.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=new Rl(3e4,6e4);function k_(){const t=Wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fU(t){return new Promise((e,n)=>{var r,i,s;function o(){k_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k_(),n(Cn(t,"network-request-failed"))},timeout:dU.get()})}if(!((i=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Wn().gapi)===null||s===void 0)&&s.load)o();else{const a=v4("iframefcb");return Wn()[a]=()=>{gapi.load?o():n(Cn(t,"network-request-failed"))},g4(`${y4()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function pU(t){return Xu=Xu||fU(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=new Rl(5e3,15e3),gU="__/auth/iframe",yU="emulator/auth/iframe",vU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_U=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wU(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dg(e,yU):`https://${t.config.authDomain}/${gU}`,r={apiKey:e.apiKey,appName:t.name,v:Ro},i=_U.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${El(r).slice(1)}`}async function EU(t){const e=await pU(t),n=Wn().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:wU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),a=Wn().setTimeout(()=>{s(o)},mU.get());function u(){Wn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SU=500,IU=600,xU="_blank",AU="http://localhost";class N_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CU(t,e,n,r=SU,i=IU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},TU),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Rt().toLowerCase();n&&(a=II(c)?xU:n),TI(c)&&(e=e||AU,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[y,T])=>`${p}${y}=${T},`,"");if(l4(c)&&a!=="_self")return RU(e||"",a),new N_(null);const d=window.open(e||"",a,h);ae(d,t,"popup-blocked");try{d.focus()}catch{}return new N_(d)}function RU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU="__/auth/handler",kU="emulator/auth/handler",NU=encodeURIComponent("fac");async function D_(t,e,n,r,i,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ro,eventId:i};if(e instanceof Lg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Pl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${NU}=${encodeURIComponent(u)}`:"";return`${DU(t)}?${El(a).slice(1)}${c}`}function DU({config:t}){return t.emulator?Dg(t,kU):`https://${t.authDomain}/${PU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="webStorageSupport";class bU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FI,this._completeRedirectFn=rU,this._overrideRedirectResult=eU}async _openPopup(e,n,r,i){var s;Ir((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await D_(e,n,r,Rp(),i);return CU(e,o,Fg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await D_(e,n,r,Rp(),i);return O4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ir(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await EU(e),r=new sU(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qd,{type:qd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[qd];o!==void 0&&n(!!o),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PI()||SI()||Vg()}}const MU=bU;var b_="@firebase/auth",M_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LU(t){ho(new Zi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kI(t)},c=new p4(r,i,s,u);return w4(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ho(new Zi("auth-internal",e=>{const n=Oh(e.getProvider("auth").getImmediate());return(r=>new VU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(b_,M_,OU(t)),ui(b_,M_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=5*60,UU=UT("authIdTokenMaxAge")||FU;let V_=null;const $U=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UU)return;const i=n==null?void 0:n.token;V_!==i&&(V_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zU(t=BT()){const e=Xm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_4(t,{popupRedirectResolver:MU,persistence:[W4,OI,FI]}),r=UT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=$U(s.toString());P4(n,o,()=>o(n.currentUser)),R4(n,a=>o(a))}}const i=LT("auth");return i&&E4(n,`http://${i}`),n}function jU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}m4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Cn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",jU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LU("Browser");var BU="firebase",HU="10.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(BU,HU,"app");const WU={apiKey:"AIzaSyAQOWLW33YmcldSc_tpJgpcH9Nl-jXF5Ec",authDomain:"winged-precinct-418901.firebaseapp.com",projectId:"winged-precinct-418901",storageBucket:"winged-precinct-418901.appspot.com",messagingSenderId:"908912265044",appId:"1:908912265044:web:350310428d15ffc2b56ac1",measurementId:"G-3NF1PZKCYX"},qU=jT(WU),Uh=PF(qU),Na=zU(),KU=new or;Na.setPersistence(OI);console.log(Na.currentUser);const GU=async(t,e,n)=>{if(t)try{const r=Nh(Uh,`flow-users/${t.uid}/projects/${e}/pages/${n}`),i=await cI(r);if(i.exists())return console.log("Received node data:",i.data()),i.data();console.log("No such page!")}catch(r){console.error("Error getting page:",r)}else console.log("no user!");return{nodes:[],edges:[]}},QU=async t=>{if(t){const e=Nh(Uh,`flow-users/${t.uid}`);try{const n=await cI(e);if(n.exists())return console.log("Received Metadata:",n.data()),n.data();console.log("No such metadata!")}catch(n){console.error("Error getting document:",n)}}},XU=async(t,e,n,r,i)=>{if(t){const s=Nh(Uh,`flow-users/${t.uid}/projects/${e}/pages/${n}`);try{await dI(s,{nodes:[...r],edges:[...i]}),console.log(`${e} ${n} updated successfully`)}catch(o){console.log(o);try{hI(s,{nodes:[...r],edges:[...i]},{merge:!0}).then(()=>{console.log(`${e} ${n} set successfully`,{nodes:[...r],edges:[...i]})}).catch(a=>{console.error("Error setting document:",a)})}catch(a){console.log(a)}}}else{alert("You must be logged in to use the Cloud Save feature.");return}};function YU(){const t=D.useRef(!1),e=pe(g=>g.nodes),n=pe(g=>g.edges),r=pe(g=>g.user),i=pe(g=>g.activePath),s=pe(g=>g.register),o=pe(g=>g.setNodes),a=pe(g=>g.setEdges),u=pe(g=>g.updateUser),c=pe(g=>g.setRegister),h=pe(g=>g.setActivePath),d=pe(g=>g.setLastChange),p=pe(g=>g.setLastSave);D.useEffect(()=>{const g=async()=>{const v=await QU(r);if(v!=null&&v.register){const E=[...s,...v.register];console.log("REGISTER SETTING on USER UPDATE"),console.log(s),console.log(v.register),console.log(E),c(E)}};r&&!t.current&&(g(),t.current=!0,i&&h({projectKey:i==null?void 0:i.projectKey,pageKey:i==null?void 0:i.pageKey}))},[r]),D.useEffect(()=>{(async()=>{let v;if(i&&r?(console.log("fetching page...",i.projectKey,i.pageKey),v=await GU(r,i.projectKey,i.pageKey)):console.log("no page found, "),v){const{edges:E,nodes:k}=v;a(E),o(k)}})()},[i]),D.useEffect(()=>{const g=k4(Na,v=>{v?(console.log("User is logged in:",v),u(v)):(console.log("No user logged in."),u(null))});return()=>g()},[u]),D.useEffect(()=>{localStorage.setItem("register",JSON.stringify(s)),localStorage.setItem("active path",JSON.stringify(i)),d(new Date)},[s,i]);const y=async()=>{if(r){const g=Nh(Uh,`flow-users/${r.uid}`);try{await dI(g,{register:s}),console.log("register updated successfully")}catch(v){console.log(v);try{await hI(g,{register:s}),console.log("register set successfully")}catch(E){console.log(E)}}}},T=async()=>{try{await y(),i&&await XU(r,i.projectKey,i.pageKey,e,n),p(new Date)}catch(g){console.log("set page error",g)}},x=async()=>{try{const g=await X4(Na,KU);console.log(g),u(g.user)}catch(g){console.log("error signing in",g)}},P=async()=>{try{const g=await N4(Na);console.log("result of Logout",g),u(null)}catch(g){console.log("logout error",g)}};return U.jsx(U.Fragment,{children:U.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px",position:"absolute",right:"10px",top:"10px",zIndex:1},children:[r?U.jsx(U.Fragment,{children:U.jsxs("button",{style:{padding:"3px 6px"},onClick:P,children:[r?U.jsx("img",{src:r.photoURL??"",style:{width:"30px",borderRadius:"50px"}}):void 0,U.jsx("p",{style:{fontSize:"16px"},children:"Log Out"})]})}):U.jsx("button",{onClick:x,children:"Log In with Google"}),r?void 0:U.jsx("img",{style:{pointerEvents:"none",width:"50px"},src:"https://gifdb.com/images/high/animated-stars-loading-icon-38ccjfav8iijnqrb.gif"}),U.jsx("button",{onClick:T,children:U.jsx("span",{className:"material-symbols-outlined",children:"save"})})]})})}function JU(){return U.jsxs(U.Fragment,{children:[U.jsxs("ul",{style:{position:"absolute",left:"50%",zIndex:200},children:[U.jsx("li",{children:U.jsx(lp,{to:"/",children:"Projects"})}),U.jsx("li",{children:U.jsx(lp,{to:"/editor",children:"Node Editor"})})]}),U.jsx(YU,{}),U.jsxs(Ub,{children:[U.jsx(ju,{path:"/editor/:projectKey/:pageKey",element:U.jsx(rM,{})}),U.jsx(ju,{path:"/",element:U.jsx(Yb,{})}),U.jsx(ju,{path:"*",element:U.jsx("h1",{children:"404"})})]})]})}Kd.createRoot(document.getElementById("root")).render(U.jsx(K.StrictMode,{children:U.jsx(qb,{children:U.jsx(JU,{})})}));
